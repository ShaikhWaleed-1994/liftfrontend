!function(){function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function e(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[44362],{37718:function(t,i,e){"use strict";e.d(i,{J:function(){return D}});var a=e(29609),r=e(55959),s=e(79996),u=e(47701),l=e(44019),c=e(45908),d=function t(i,e,n,a,r,s,u,l,d,g,p,m,f,h,v,y,b,N,D,Z,A,x,I,M,C,P,w,k,T,O,q){switch(o(this,t),this.hasUnreadedNotes=f,this.isCalculated=e,this.assignedExerciseProgramDays=y,this.traineeId=i,this.traineeName=n,this.mobile=a,this.sex=r===c.Y0.Female?"::Female":"::Male",this.age=s,this.startDate=u,this.traineePhotoAttachmentId=v,this.programEndDate=g,this.paid=b,this.packageType=h,this.packageTypeName=N,this.coordinator=p,this.coachAppUserName=m,this.assignExerciseForFutuerAlert=D,this.assignNutritionForFutuerAlert=Z,this.subscriptionDate=A,this.subscriptionStatus=x,this.hasAssignedExerciseProgram=I,this.hasAssignedNutritionProgram=M,this.fatProgress=C,this.varTargetDaysMeasured=P,this.musclesProgress=w,this.targetProgress=k,this.hasExerciseToday=T,this.hasNutritionToday=O,this.coachNote=q,this.exerciseIsDone=h===c.ij.Exercise||h===c.ij.ExerciseAndNutrition?l:-1,this.nutritionIsDone=h===c.ij.Nutrition||h===c.ij.ExerciseAndNutrition?d:-1,h){case c.ij.Exercise:this.packageTypeName="Exercise";break;case c.ij.Nutrition:this.packageTypeName="ANutrition";break;case c.ij.ExerciseAndNutrition:this.packageTypeName="ExerciseAndNutrition"}},g=e(28450),p=e(95965),m=e(35366),f=e(55679),h=e(46700),v=function(){var t=function(){function t(){o(this,t),this.queue=[]}return n(t,[{key:"push",value:function(t){this.queue.push(t)}},{key:"pop",value:function(){return 0===this.queue.length?null:this.queue.shift()}},{key:"clear",value:function(){this.queue=[]}},{key:"size",value:function(){return this.queue.length}}]),t}();return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),y=e(43117),b=e(23915),N=e(28157),D=function(){var t=function(){function t(i,e,n,c,m,f){var h=this;o(this,t),this.confirmation=i,this.localizationService=e,this.queueService=n,this.localCacheService=c,this.perf=m,this.traineeService=f,this.currentDate=new r.xQ,this.traineeFilter=new r.xQ,this.traineeFilter2=new r.xQ,this.getRefreshTrainee=function(t){return h.traineeService.getRefreshTrainee(t)},this.updateTraineeOverviewByInput=function(t){return h.traineeService.updateTraineeOverviewByInput(t)},this.getGeneralStatistics=function(){return h.traineeService.getGeneralStatistics()},this.getTraineeProfileSummary=function(t){return console.log("getTraineeProfileSummary"),h.getGetTraineeProfileGeneralById(t).pipe((0,s.U)(function(t){return t.profileSummary}))},this.getSimpleListSummary=function(t){return h.traineeService.getSimpleListSummary(t)},this.getTraineeOverviewBasicInfo=function(t){return console.log("getTraineeOverviewBasicInfo"),h.getGetTraineeProfileGeneralById(t).pipe((0,u.b)(100)).pipe((0,s.U)(function(t){return t.basicInfo}))},this.weight=0,this.getGetTraineeProfileGeneralById=function(t){console.log("getGetTraineeProfileGeneralById");var i=h,e="GetTraineeProfileGeneral".concat(t);return h.traineeService.getGetTraineeProfileGeneralById(t).pipe((0,g.z)(i.localCacheService,e,3)).pipe((0,p.S)(i.perf,"TraineeProfile")).pipe((0,l.b)(function(t){return i.weight=t.profileSummary.weight}))},this.getList=function(t){return h.traineeService.getListByStatus(t).pipe((0,s.U)(function(t){return{totalCount:t.totalCount,items:t.items.map(function(t){return new d(t.id,t.isCalculated,t.appUserName,t.appUserPhoneNumber,t.genderGeneralLookupId,t.age,t.startDate?a(t.startDate).format("DD/MM/yyyy"):"",t.exerciseIsDone,t.nutritionIsDone,t.endDate?a(t.endDate).format("DD/MM/yyyy"):"",t.coordinatorAppUserName,t.coachAppUserName,t.hasUnreadedNotes,t.packageType,t.traineePhotoAttachmentId,t.assignedExerciseProgramDays,t.paidPrice,t.packageTypeName,t.assignExerciseForFutuerAlert,t.assignNutritionForFutuerAlert,t.subscriptionDate&&a(t.subscriptionDate).isValid()?a(t.subscriptionDate).format("DD/MM/yyyy"):"",t.subscriptionStatus,t.hasAssignedExerciseProgram,t.hasAssignedNutritionProgram,t.fatProgress,t.varTargetDaysMeasured,t.musclesProgress,t.targetProgress,t.hasExerciseToday,t.hasNutritionToday,t.coachNote)})}}))},this.exportListPayments=this.traineeService.exportListPayments,this.getListPayments=function(t){return h.traineeService.getListPayments(t).pipe((0,s.U)(function(t){return{totalCount:t.totalCount,items:t.items.map(function(t){return new d(t.id,t.isCalculated,t.appUserName,t.appUserPhoneNumber,t.genderGeneralLookupId,t.age,t.startDate?a(t.startDate).format("DD/MM/yyyy"):"",t.exerciseIsDone,t.nutritionIsDone,t.endDate?a(t.endDate).format("DD/MM/yyyy"):"",t.coordinatorAppUserName,t.coachAppUserName,t.hasUnreadedNotes,t.packageType,t.traineePhotoAttachmentId,t.assignedExerciseProgramDays,t.paidPrice,t.packageTypeName,t.assignExerciseForFutuerAlert,t.assignNutritionForFutuerAlert,t.subscriptionDate&&a(t.subscriptionDate).isValid()?a(t.subscriptionDate).format("DD/MM/yyyy"):"",t.subscriptionStatus,t.hasAssignedExerciseProgram,t.hasAssignedNutritionProgram,t.fatProgress,t.varTargetDaysMeasured,t.musclesProgress,t.targetProgress,t.hasExerciseToday,t.hasNutritionToday,t.coachNote)})}}))}}return n(t,[{key:"ChangeFilter",value:function(t){this.traineeFilter.next(t)}},{key:"ChangeFilter2",value:function(t){this.traineeFilter2.next(t)}},{key:"enqueCachedItem",value:function(t){}},{key:"processQueue",value:function(){}},{key:"clearUserCache",value:function(t){this.localCacheService.put("GetTraineeProfileGeneral".concat(t),null)}}]),t}();return t.\u0275fac=function(i){return new(i||t)(m.LFG(f.YP),m.LFG(h.oQ8),m.LFG(v),m.LFG(y.F),m.LFG(b.WC),m.LFG(N.s))},t.\u0275prov=m.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},16952:function(t,i,e){"use strict";e.r(i),e.d(i,{AssignedNutritionProgramDayModule:function(){return y}});var n,a=e(69244),r=e(46700),s=e(55679),u=e(10135),l=e(99046),c=e(83845),d=e(73756),g=e(56410),p=e(35366),m=[],f=function(){var t=function t(){o(this,t)};return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[g.Bz.forChild(m)],g.Bz]}),t}(),h=e(56137),v=e(88562),y=((n=function t(){o(this,t)}).\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[f,r.IR2,s.e2,d.Ck,c.vv,l.h2,u.lQ,u.M,v.NutritionModule,a._t,h.m,u.XC]]}),n)},44362:function(t,i,e){"use strict";e.r(i),e.d(i,{AssignedNutritionProgramModule:function(){return b}});var n,a=e(46700),r=e(55679),s=e(10135),u=e(99046),l=e(83845),c=e(73756),d=e(56410),g=e(39829),p=e(35366),m=[{path:"assigned/:id",component:g.e,canActivate:[a.a1M,a.nG9]}],f=function(){var t=function t(){o(this,t)};return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({imports:[[d.Bz.forChild(m)],d.Bz]}),t}(),h=e(56137),v=e(56874),y=e(16952),b=((n=function t(){o(this,t)}).\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[f,a.IR2,r.e2,c.Ck,l.vv,u.h2,s.lQ,s.M,h.m,s.XC,v.e,y.AssignedNutritionProgramDayModule]]}),n)},6194:function(t,i,e){"use strict";e.d(i,{v:function(){return L}});var a=e(55679),r=e(31041),s=e(2996),u=e(11520),l=e(43835),c=e(44689),d=e(35366),g=e(46700),p=e(28157),m=e(94773),f=e(43117),h=e(73545),v=e(71149),y=e(99046),b=e(61116),N=e(55794),D=e(23733),Z=e(42163),A=e(28451),x=e(40739);function I(t,i){if(1&t&&(d.TgZ(0,"h3"),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&t){var e=d.oxw();d.xp6(1),d.hij(" ",d.lcZ(2,1,e.selected?"AbpUi::Edit":"::AssignNutritionProgram")," ")}}function M(t,i){1&t&&(d.TgZ(0,"div",21),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"::AllProgramsIncluded")," "))}function C(t,i){1&t&&(d.TgZ(0,"div",12),d.TgZ(1,"label",22),d._uU(2),d.ALo(3,"abpLocalization"),d.qZA(),d._UZ(4,"sw-date-picker",23),d.qZA()),2&t&&(d.xp6(2),d.hij(" ",d.lcZ(3,1,"::StartDate")," "))}function P(t,i){if(1&t&&(d.TgZ(0,"span",30),d._uU(1),d.qZA()),2&t){var e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e.selectionCount," ")}}function w(t,i){1&t&&(d.TgZ(0,"span",31),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"::FromDateGrid")," "))}function k(t,i){if(1&t&&(d.TgZ(0,"span",32),d._uU(1),d.qZA()),2&t){var e=d.oxw().$implicit;d.xp6(1),d.Oqu(e.caloriesFrom)}}function T(t,i){1&t&&(d.TgZ(0,"span"),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"::ToDateGrid")," "))}function O(t,i){if(1&t&&(d.TgZ(0,"span",32),d._uU(1),d.qZA()),2&t){var e=d.oxw().$implicit;d.xp6(1),d.Oqu(e.caloriesTo)}}function q(t,i){1&t&&(d.TgZ(0,"span",33),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&t&&(d.xp6(1),d.hij(" ",d.lcZ(2,1,"::Calories")," "))}function S(t,i){if(1&t&&(d.TgZ(0,"p",24),d._uU(1),d.YNc(2,P,2,1,"span",25),d.qZA(),d.TgZ(3,"p"),d.YNc(4,w,3,3,"span",26),d.YNc(5,k,2,1,"span",27),d.YNc(6,T,3,3,"span",28),d.YNc(7,O,2,1,"span",27),d.YNc(8,q,3,3,"span",29),d.qZA()),2&t){var e=i.$implicit,n=d.oxw(2);d.xp6(1),d.hij(" ",n.langService.isRtl?e.nutriitionProgramName:e.nutriitionProgramNameEn," "),d.xp6(1),d.Q6J("ngIf",e.selectionCount>0),d.xp6(2),d.Q6J("ngIf",e.caloriesFrom&&e.caloriesTo),d.xp6(1),d.Q6J("ngIf",e.caloriesFrom),d.xp6(1),d.Q6J("ngIf",e.caloriesFrom&&e.caloriesTo),d.xp6(1),d.Q6J("ngIf",e.caloriesTo),d.xp6(1),d.Q6J("ngIf",e.caloriesFrom&&e.caloriesTo)}}var _=function(){return{standalone:!0}};function U(t,i){if(1&t){var e=d.EpF();d.TgZ(0,"form",3),d.NdJ("ngSubmit",function(){return d.CHM(e),d.oxw().submitForm()}),d.TgZ(1,"div",4),d.TgZ(2,"div",5),d.YNc(3,M,3,3,"div",6),d.qZA(),d.YNc(4,C,5,3,"div",7),d.TgZ(5,"div",8),d.TgZ(6,"label",9),d._uU(7),d.ALo(8,"abpLocalization"),d.qZA(),d.TgZ(9,"span",10),d._uU(10),d.qZA(),d.TgZ(11,"input",11),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().userTdee=t}),d.qZA(),d.qZA(),d.TgZ(12,"div",12),d.TgZ(13,"label",13),d._uU(14),d.ALo(15,"abpLocalization"),d.qZA(),d.TgZ(16,"p-autoComplete",14),d.NdJ("onClear",function(){return d.CHM(e),d.oxw().onClear()})("completeMethod",function(t){return d.CHM(e),d.oxw().startSearchProgram(t)})("search",function(t){return d.CHM(e),d.oxw().startSearchProgram(t)}),d.ALo(17,"abpLocalization"),d.YNc(18,S,9,7,"ng-template",15),d.qZA(),d.qZA(),d.qZA(),d.TgZ(19,"div",16),d.TgZ(20,"button",17,18),d._uU(22),d.ALo(23,"abpLocalization"),d.qZA(),d.TgZ(24,"button",19),d._UZ(25,"i",20),d._uU(26),d.ALo(27,"abpLocalization"),d.qZA(),d.qZA(),d.qZA()}if(2&t){var n=d.oxw();d.Q6J("formGroup",n.form),d.xp6(3),d.Q6J("ngIf",n.allProgramsIncluded),d.xp6(1),d.Q6J("ngIf",!n.isMutipleAssign),d.xp6(3),d.hij(" ",d.lcZ(8,16,"::TDEE")," "),d.xp6(3),d.hij(" ",n.userTdee," "),d.xp6(1),d.Q6J("step",1)("ngModel",n.userTdee)("ngModelOptions",d.DdM(26,_)),d.xp6(3),d.hij(" ",d.lcZ(15,18,"::NutritionProgram")," "),d.xp6(2),d.s9C("placeholder",d.lcZ(17,20,"::NutritionProgram")),d.Q6J("suggestions",n.AllPrograms)("type",n.searchType())("dropdown",!0)("field",n.langService.isRtl?"nutriitionProgramName":"nutriitionProgramNameEn"),d.xp6(6),d.hij(" ",d.lcZ(23,22,"AbpUi::Cancel")," "),d.xp6(4),d.hij(" ",d.lcZ(27,24,"::Ok")," ")}}var L=function(){var t=function(){function t(i,e,n,a,r,s,u,l,c,d,g,p){o(this,t),this.list=i,this.track=e,this.traineeService=n,this.service=a,this.localCacheService=r,this.confirmation=s,this.dateService=u,this.langService=l,this.l=c,this.toaster=d,this.assignNutritionProgramService=g,this.fb=p,this.isModalBusy=!1,this.isModalOpen=!1,this.filters={},this.isMutipleAssign=!1,this.allProgramsIncluded=!1,this._userTdee=0}return n(t,[{key:"ngOnInit",value:function(){}},{key:"buildForm",value:function(){var t,i=((null===(t=this.selected)||void 0===t?void 0:t.assignedNutritionProgram)||{}).nutritionProgramId;this.form=this.fb.group({nutritionProgramId:[null!=i?i:null,[r.kI.required]],users:[[]],startDate:[void 0,[r.kI.required]]})}},{key:"createUser",value:function(){return this.fb.group({value:"",label:""})}},{key:"hideForm",value:function(){var t=this;this.isModalOpen=!1,setTimeout(function(){t.form.reset()},100)}},{key:"showForm",value:function(){this.buildForm(),this.isModalOpen=!0,this.getTdeeForUser()}},{key:"submitFormInternalForMultiple",value:function(){var t=this,i=this,e={items:[]},n=this.form.get("nutritionProgramId").value;n&&n.id&&(n=n.id),this.mutipleAssignItems.filter(function(t){return t.isSelected&&t.startSateTraining}).forEach(function(t){var i={};i.nutritionProgramId=n,i.startDate=t.startSateTraining,i.traineeId=t.id,e.items.push(i)}),this.service.assignMultipleByAssignInput(e).subscribe(function(e){if(i.clearStorage(),i.localCacheService.tempDisable(60),e.scheduled>0){var o=t.l.instant("::ProgramScheduledSuccessFullyFor",e.scheduled.toString());i.toaster.success(o)}if(e.succeeded>0){var a=t.l.instant("::ProgramAssignedSuccessFullyFor",e.succeeded.toString());i.toaster.info(a)}if(e.faild>0){var r=t.l.instant("::ProgramAssignedFailedFor",e.faild.toString());i.toaster.error(r)}i.assignNutritionProgramService.onAssigned.emit(n),setTimeout(function(){i.hideForm()},1)})}},{key:"clearStorage",value:function(){for(var t in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)t.startsWith("assinged_")&&localStorage.removeItem(t)}},{key:"submitForm",value:function(){this.submitFormInternal(!1)}},{key:"submitFormInternal",value:function(t){var i=this,e=this;if(this.isMutipleAssign)this.submitFormInternalForMultiple();else if(!this.form.invalid){this.filters.nutritionProgramId=this.form.get("nutritionProgramId").value;var n=this.filters.nutritionProgramId;n&&n.id&&(n=n.id),this.filters.nutritionProgramId=n,this.filters.nutritionProgramId||(this.filters.nutritionProgramId=void 0);var o=this.form.get("startDate").value;this.filters.startDate=this.dateService.parseMomentToString(o),this.filters.isOverride=t,this.service.assignByAssignInput(this.filters).pipe((0,u.x)(function(){return i.isModalBusy=!1})).subscribe(function(t){t?(setTimeout(function(){e.assignNutritionProgramService.onAssigned.emit(e.filters.nutritionProgramId)},2),e.toaster.success("::ProgramAssignedSuccessFully"),setTimeout(function(){e.hideForm()},1)):e.confirmation.warn("::ProgramOverride","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,l.h)(function(t){return t===a.Tv.Status.confirm}),(0,c.w)(function(){return e.submitFormInternal(!0),null})).subscribe(function(){})})}}},{key:"getAssignDate",value:function(t,i){var e=this,n=this;if(null==i)this.service.getNextProgramStartDaysByTraineeUserId(t).subscribe(function(o){i=o.startDays;var a=new Date;null!=i&&(a=e.addDays(a,i));var r=a.toLocalISOString();n.assignNutritionProgramService.onGetAssignDate.emit({id:t,dateString:r})});else{i++;var o=new Date;null!=i&&(o=this.addDays(o,i));var a=o.toLocalISOString();n.assignNutritionProgramService.onGetAssignDate.emit({id:t,dateString:a})}}},{key:"autoAssigne",value:function(t,i,e){null==e?(this.service.getNextProgramStartDaysByTraineeUserId(t).subscribe(function(t){e=t.startDays}),this.autoAssigneInternal(t,i,e)):(e>0&&e++,this.autoAssigneInternal(t,i,e||0))}},{key:"autoAssigneInternal",value:function(t,i,e){var n=new Date;null!=e&&(n=this.addDays(n,e));var o=this,a=this.dateService.parseMomentToString(n);this.service.assignByAssignInput({nutritionProgramId:i,isOverride:!0,traineeId:t,startDate:a}).subscribe(function(t){o.localCacheService.clearAll(),o.assignNutritionProgramService.onAssigned.emit(o.filters.nutritionProgramId)})}},{key:"create",value:function(t,i){var e=this;this.filters.traineeId=t,this.selected=void 0,this.showForm();var n=new Date;if(null!=i){i>0&&i++,n=this.addDays(n,i);var o=this.dateService.dateToMoment(n);this.form.get("startDate").setValue(o)}else this.service.getNextProgramStartDaysByTraineeUserId(t).subscribe(function(t){n=e.addDays(n,i=t.startDays);var o=e.dateService.dateToMoment(n);e.form.get("startDate").setValue(o)})}},{key:"createMultiple",value:function(t){this.filters.traineeId=void 0,this.isMutipleAssign=!0,this.selected=void 0,this.mutipleAssignItems=t,this.showForm(),this.form.get("startDate").setValue(new Date)}},{key:"addDays",value:function(t,i){if(0===i)return t;var e=new Date(t);return e.setDate(e.getDate()+i),e}},{key:"userTdee",get:function(){return this._userTdee},set:function(t){t!=this._userTdee&&(this.AllPrograms=[],this.form&&this.form.get("nutritionProgramId").setValue(void 0)),this._userTdee=t}},{key:"getTdeeForUser",value:function(){var t=this,i={};i.traineeId=this.filters.traineeId,i.traineeId&&i.traineeId>0&&this.traineeService.getTraineeIntensityLevelForUserByInput(i).subscribe(function(i){t.userTdee=i.tdee})}},{key:"startSearchProgram",value:function(t){var i=this;this.service.getNutritionProgramLookup(t.query,this.filters.traineeId,this.userTdee,!1).subscribe(function(t){i.AllPrograms=t.items,i.allProgramsIncluded=t.allProgramsIncluded})}},{key:"onSelect",value:function(t){}},{key:"onClear",value:function(){this.filters.nutritionProgramId=void 0}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}}]),t}();return t.\u0275fac=function(i){return new(i||t)(d.Y36(g.XNV),d.Y36(g.vR3),d.Y36(p.s),d.Y36(m.Jq),d.Y36(f.F),d.Y36(a.YP),d.Y36(s.R),d.Y36(h.C),d.Y36(g.oQ8),d.Y36(a.MJ),d.Y36(v.v),d.Y36(r.qu))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-assign-nutrition-program"]],outputs:{getAssignDate:"getAssignDate",autoAssigne:"autoAssigne",create:"create",createMultiple:"createMultiple"},features:[d._Bn([s.R])],decls:5,vars:2,consts:[["size","md",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"app-assign-nutrition-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"col-12"],["class","alert alert-warning",4,"ngIf"],["class","form-group col-md-12",4,"ngIf"],[1,"form-group","col-12"],["for","exercise-program-tdee"],[1,"float-right"],["type","range","min","1","max","4000","id","exercise-program-tdee","name","tdee",1,"form-control-range",3,"step","ngModel","ngModelOptions","ngModelChange"],[1,"form-group","col-md-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","nutritionProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","field","onClear","completeMethod","search"],["pTemplate","item"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],[1,"alert","alert-warning"],["for","app-user-coordinator-app-user-id"],["id","startDate","formControlName","startDate","name","startDate"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],["class","d-none d-sm-inline",4,"ngIf"],["class","badge badge-secondary",4,"ngIf"],[4,"ngIf"],["class","calories",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"],[1,"d-none","d-sm-inline"],[1,"badge","badge-secondary"],[1,"calories"]],template:function(t,i){1&t&&(d.TgZ(0,"abp-modal",0),d.NdJ("visibleChange",function(t){return i.isModalOpen=t}),d.YNc(1,I,3,3,"ng-template",null,1,d.W1O),d.YNc(3,U,28,27,"ng-template",null,2,d.W1O),d.qZA()),2&t&&d.Q6J("busy",i.isModalBusy)("visible",i.isModalOpen)},directives:[a.zS,r._Y,r.JL,g.YzZ,r.sg,y.hL,b.O5,r.eT,r.Fj,N.a,r.JJ,D.m,r.On,Z.Qc,r.u,y.J5,A.jx,x.L],pipes:[g.fuE],styles:["@media (max-width:768px){  .app-assign-nutrition-program .p-autocomplete-panel{max-width:100%}}  .app-assign-nutrition-program .program-name{white-space:normal}  .app-assign-nutrition-program .badge{min-width:40px;font-size:90%;text-align:center}  .app-assign-nutrition-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),t}()},71149:function(t,i,e){"use strict";e.d(i,{v:function(){return a}});var n=e(35366),a=function(){var t=function t(){o(this,t),this.onAssigned=new n.vpe,this.onGetAssignDate=new n.vpe};return t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac}),t}()},39829:function(i,e,a){"use strict";a.d(e,{e:function(){return ei}});var r=a(46700),s=a(35366),u=a(2996),l=a(67917),c=a(83865),d=a(77266),g=a(71149),p=a(62914),m=a(28450),f=a(65122),h=a(94773),v=a(55679),y=a(56410),b=a(43117),N=a(73545),D=a(31041),Z=a(61116),A=a(69244),x=a(42373),I=a(43252),M=a(37718),C=a(53181),P=a(57066),w=a(23733),k=a(42163),T=a(99046),O=a(9445),q=a(52201);function S(t,i){1&t&&(s.TgZ(0,"h3"),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"::Meals")))}function _(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"legend",40),s._uU(1),s.TgZ(2,"button",41),s.NdJ("click",function(){return s.CHM(e),s.oxw().$implicit.isEditingMealName=!0}),s._UZ(3,"i",42),s.qZA(),s.qZA()}if(2&t){var n=s.oxw().$implicit;s.xp6(1),s.hij("",n.name," ")}}function U(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"legend",40),s.TgZ(1,"div",43),s.TgZ(2,"input",44),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().$implicit.name=t}),s.qZA(),s.TgZ(3,"div",45),s.TgZ(4,"button",46),s.NdJ("click",function(){return s.CHM(e),s.oxw().$implicit.isEditingMealName=!1}),s._UZ(5,"i",47),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=s.oxw().$implicit;s.xp6(2),s.Q6J("ngModel",n.name)}}function L(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",27),s.NdJ("click",function(){return s.CHM(e),s.oxw().$implicit.selectedOptionId=2}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}if(2&t){var n=s.oxw().$implicit;s.ekj("active",2===n.selectedOptionId),s.xp6(1),s.hij(" ",s.lcZ(2,3,"::Option2")," ")}}function F(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",27),s.NdJ("click",function(){return s.CHM(e),s.oxw().$implicit.selectedOptionId=3}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}if(2&t){var n=s.oxw().$implicit;s.ekj("active",3===n.selectedOptionId),s.xp6(1),s.hij(" ",s.lcZ(2,3,"::Option3")," ")}}function J(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",48),s.NdJ("click",function(){return s.CHM(e),s.oxw().$implicit.addOption()}),s._UZ(1,"i",49),s.qZA()}}function Y(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(){s.CHM(e);var t=s.oxw(),i=t.$implicit,n=t.index,o=s.oxw().$implicit;return s.oxw(3).down(i,o,n,o.selectedOptionId)}),s._UZ(1,"i",25),s.qZA()}}function E(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",24),s.NdJ("click",function(){s.CHM(e);var t=s.oxw(),i=t.$implicit,n=t.index,o=s.oxw().$implicit;return s.oxw(3).up(i,o,n,o.selectedOptionId)}),s._UZ(1,"i",26),s.qZA()}}var Q=function(t){return{attachmentId:t,entity:"Nutrition"}};function z(t,i){if(1&t&&(s.TgZ(0,"div"),s._UZ(1,"img",70),s.ALo(2,"async"),s.ALo(3,"imgdownload"),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(1),s.Q6J("src",s.lcZ(2,2,s.lcZ(3,4,s.VKq(6,Q,e.getImage()))),s.LSH)("title",e.getImage())}}function B(t,i){if(1&t&&(s.TgZ(0,"div",71),s.TgZ(1,"span",72),s._uU(2),s.qZA(),s.TgZ(3,"span",73),s._uU(4),s.qZA(),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(2),s.Oqu(null==e||null==e.nutrition?null:e.nutrition.nutritionName),s.xp6(2),s.Oqu(null==e||null==e.nutrition?null:e.nutrition.nutritionNameEn)}}function j(t,i){1&t&&s._UZ(0,"i",82)}function H(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"p-autoComplete",83),s.NdJ("completeMethod",function(t){return s.CHM(e),s.oxw(6).startSearchNutrition(t)})("onClear",function(){return s.CHM(e),s.oxw(6).onClear()})("search",function(t){return s.CHM(e),s.oxw(6).startSearchNutrition(t)})("ngModelChange",function(t){return s.CHM(e),s.oxw(2).$implicit.nutrition=t}),s.ALo(1,"abpLocalization"),s.qZA()}if(2&t){var n=s.oxw(2).$implicit,o=s.oxw(4);s.s9C("placeholder",s.lcZ(1,6,"::AddNutritionRequiredLabel")),s.Q6J("ngModel",n.nutrition)("dropdown",!0)("suggestions",o.AllNutritions)("type",o.searchType())("field",o.langService.isRtl?"nutritionName":"nutritionNameEn")}}function G(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",84),s.NdJ("click",function(){s.CHM(e);var t=s.oxw(2).$implicit,i=s.oxw(4),n=s.MAs(6);return i.createNewNutrition(n,t)}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"::AddNutritionIfNotExist")))}function $(t,i){1&t&&(s.TgZ(0,"div",85),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::ExcludedFoodCategory")," "))}function V(t,i){if(1&t&&(s.TgZ(0,"option",89),s._uU(1),s.qZA()),2&t){var e=i.$implicit,n=s.oxw(7);s.Q6J("ngValue",e),s.xp6(1),s.Oqu(n.langService.isRtl?e.nutritionName:e.nutritionNameEn)}}var R=function(){return{standalone:!0}};function W(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",86),s.TgZ(1,"div",87),s.TgZ(2,"label",75),s._uU(3),s.ALo(4,"abpLocalization"),s.qZA(),s.TgZ(5,"select",88),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw(2).$implicit.nutrition=t}),s._UZ(6,"option",89),s.YNc(7,V,2,2,"option",90),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=s.oxw(2).$implicit,o=s.oxw(4);s.xp6(3),s.Oqu(s.lcZ(4,4,"::AddNutritionRequiredLabel")),s.xp6(2),s.Q6J("ngModel",n.nutrition)("ngModelOptions",s.DdM(6,R)),s.xp6(2),s.Q6J("ngForOf",o.AllNutritions)}}var X=function(t){return{"has-error":t}};function K(t,i){if(1&t&&(s.TgZ(0,"div",74),s.TgZ(1,"label",75),s._uU(2),s.ALo(3,"abpLocalization"),s.YNc(4,j,1,0,"i",76),s.qZA(),s.TgZ(5,"div",77),s.YNc(6,H,2,8,"p-autoComplete",78),s.YNc(7,G,3,3,"button",79),s.YNc(8,$,3,3,"div",80),s.qZA(),s.YNc(9,W,8,7,"div",81),s.qZA()),2&t){var e=s.oxw().$implicit,n=s.oxw(4);s.xp6(2),s.hij("",s.lcZ(3,7,"::AddNutritionRequiredLabel")," "),s.xp6(2),s.Q6J("ngIf",16===(null==e||null==e.nutrition?null:e.nutrition.statusGeneralLookupId)),s.xp6(1),s.Q6J("ngClass",s.VKq(9,X,e.nutritionIsInvalid())),s.xp6(1),s.Q6J("ngIf",!n.isMobile),s.xp6(1),s.Q6J("ngIf",n.isShowAddingNutrition),s.xp6(1),s.Q6J("ngIf",n.isDislikedNutrition(e.nutrition)),s.xp6(1),s.Q6J("ngIf",n.isMobile)}}function tt(t,i){if(1&t&&(s.TgZ(0,"div",71),s._uU(1),s.ALo(2,"number"),s.TgZ(3,"span",72),s._uU(4),s.qZA(),s.TgZ(5,"span",73),s._uU(6),s.qZA(),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(1),s.hij(" ",s.xi3(2,3,e.quantity,"1.0-1")," "),s.xp6(3),s.Oqu(null==e.nutrition||null==e.nutrition.unit?null:e.nutrition.unit.unitName),s.xp6(2),s.Oqu(null==e.nutrition||null==e.nutrition.unit?null:e.nutrition.unit.unitNameEn)}}function it(t,i){if(1&t&&(s.TgZ(0,"span",72),s._uU(1),s.qZA()),2&t){var e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(null==e.nutrition||null==e.nutrition.unit?null:e.nutrition.unit.unitName)}}function et(t,i){if(1&t&&(s.TgZ(0,"span",73),s._uU(1),s.qZA()),2&t){var e=s.oxw(2).$implicit;s.xp6(1),s.Oqu(null==e.nutrition||null==e.nutrition.unit?null:e.nutrition.unit.unitNameEn)}}function nt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",74),s.TgZ(1,"label"),s.YNc(2,it,2,1,"span",91),s.YNc(3,et,2,1,"span",92),s.qZA(),s.TgZ(4,"input",93),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw().$implicit.quantity=t}),s.ALo(5,"abpLocalization"),s.qZA(),s.qZA()}if(2&t){var n=s.oxw().$implicit;s.xp6(2),s.Q6J("ngIf",null==n.nutrition||null==n.nutrition.unit?null:n.nutrition.unit.unitName),s.xp6(1),s.Q6J("ngIf",null==n.nutrition||null==n.nutrition.unit?null:n.nutrition.unit.unitNameEn),s.xp6(1),s.s9C("placeholder",s.lcZ(5,5,"::AddQuantityRequiredLabel")),s.Q6J("ngModel",n.quantity)("ngClass",s.VKq(7,X,n.quantityIsInvalid()))}}function ot(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",94),s.NdJ("click",function(){s.CHM(e);var t=s.oxw().$implicit;return t.NutritionNoteVisible=!t.NutritionNoteVisible}),s._UZ(1,"i",95),s.qZA()}}function at(t,i){if(1&t&&(s.TgZ(0,"div",37),s._UZ(1,"app-nutrition-totals",31),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(1),s.Q6J("isShowPercent",!1)("defaultCalories",e.getCalorie()||0)("proteins",(null==e?null:e.getNutritionTotals().proteins)||0)("carbs",(null==e?null:e.getNutritionTotals().carbs)||0)("fats",(null==e?null:e.getNutritionTotals().fats)||0)}}function rt(t,i){if(1&t&&(s.TgZ(0,"div",71),s._uU(1),s.qZA()),2&t){var e=s.oxw(2).$implicit;s.xp6(1),s.hij(" ",e.nutritionNote," ")}}function st(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",74),s.TgZ(1,"input",39),s.NdJ("ngModelChange",function(t){return s.CHM(e),s.oxw(2).$implicit.nutritionNote=t}),s.ALo(2,"abpLocalization"),s.qZA(),s.qZA()}if(2&t){var n=s.oxw(2).$implicit;s.xp6(1),s.s9C("placeholder",s.lcZ(2,2,"::AddNutritionNote")),s.Q6J("ngModel",n.nutritionNote)}}function ut(t,i){if(1&t&&(s.TgZ(0,"div",67),s.YNc(1,rt,2,1,"div",59),s.YNc(2,st,3,4,"div",60),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(1),s.Q6J("ngIf",!e.isEditing),s.xp6(1),s.Q6J("ngIf",e.isEditing)}}function lt(t,i){if(1&t&&(s.TgZ(0,"div",50),s.TgZ(1,"div",9),s.TgZ(2,"div",51),s.TgZ(3,"div"),s.O4$(),s.TgZ(4,"svg",52),s._UZ(5,"path",53),s._UZ(6,"path",54),s.qZA(),s.qZA(),s.kcU(),s.TgZ(7,"div",55),s.YNc(8,Y,2,0,"button",56),s._UZ(9,"br"),s.YNc(10,E,2,0,"button",56),s.qZA(),s.YNc(11,z,4,8,"div",57),s.qZA(),s.TgZ(12,"div",58),s.TgZ(13,"div",9),s.TgZ(14,"div",58),s.YNc(15,B,5,2,"div",59),s.YNc(16,K,10,11,"div",60),s.qZA(),s.TgZ(17,"div",61),s.YNc(18,tt,7,6,"div",59),s.YNc(19,nt,6,9,"div",60),s.qZA(),s.TgZ(20,"div",62),s.TgZ(21,"div",63),s.YNc(22,ot,2,0,"button",64),s.TgZ(23,"button",65),s.NdJ("click",function(){return i.$implicit.delete()}),s._UZ(24,"i",21),s.TgZ(25,"span",66),s._uU(26),s.ALo(27,"abpLocalization"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.TgZ(28,"div",9),s.TgZ(29,"div",67),s.YNc(30,at,2,5,"div",68),s.qZA(),s.YNc(31,ut,3,2,"div",69),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var e=i.$implicit,n=i.index,o=s.oxw().$implicit;s.xp6(8),s.Q6J("ngIf",n>0),s.xp6(2),s.Q6J("ngIf",n<o.detailsUnDeletedForActiveOption.length-1),s.xp6(1),s.Q6J("ngIf",e.getImage()),s.xp6(4),s.Q6J("ngIf",!e.isEditing),s.xp6(1),s.Q6J("ngIf",e.isEditing),s.xp6(2),s.Q6J("ngIf",!e.isEditing),s.xp6(1),s.Q6J("ngIf",e.isEditing),s.xp6(3),s.Q6J("ngIf",null==e?null:e.nutrition),s.xp6(4),s.Oqu(s.lcZ(27,11,"AbpUi::Delete")),s.xp6(4),s.Q6J("ngIf",null==e?null:e.nutrition),s.xp6(1),s.Q6J("ngIf",null==e?null:e.NutritionNoteVisible)}}function ct(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",96),s.NdJ("click",function(){s.CHM(e);var t=s.oxw().$implicit;return s.oxw(3).addNewNutrition(t)}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::AddNutrition")," "))}var dt=function(t){return{"selected-fieldset":t}};function gt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"fieldset",17),s.YNc(1,_,4,1,"legend",18),s.YNc(2,U,6,1,"legend",18),s.TgZ(3,"div",19),s.TgZ(4,"button",20),s.NdJ("click",function(){return i.$implicit.delete()}),s._UZ(5,"i",21),s.qZA(),s.qZA(),s.TgZ(6,"div",22),s.TgZ(7,"div",23),s.TgZ(8,"button",24),s.NdJ("click",function(){var t=s.CHM(e).$implicit;return s.oxw(3).assignedNutritionDayModel.down(t)}),s._UZ(9,"i",25),s.qZA(),s.TgZ(10,"button",24),s.NdJ("click",function(){var t=s.CHM(e).$implicit;return s.oxw(3).assignedNutritionDayModel.up(t)}),s._UZ(11,"i",26),s.qZA(),s.TgZ(12,"div",27),s.NdJ("click",function(){return i.$implicit.selectedOptionId=1}),s._uU(13),s.ALo(14,"abpLocalization"),s.qZA(),s.YNc(15,L,3,5,"div",28),s.YNc(16,F,3,5,"div",28),s.YNc(17,J,2,0,"div",29),s.qZA(),s.TgZ(18,"div",30),s._UZ(19,"app-nutrition-totals",31),s.qZA(),s.qZA(),s._UZ(20,"div"),s.TgZ(21,"div",32),s.NdJ("cdkDropListDropped",function(t){var i=s.CHM(e).$implicit;return s.oxw(3).drop(t,i,i.selectedOptionId)}),s.YNc(22,lt,32,13,"div",33),s.qZA(),s.TgZ(23,"div",34),s.TgZ(24,"div",23),s.YNc(25,ct,3,3,"button",35),s.qZA(),s.TgZ(26,"div",36),s.TgZ(27,"div",37),s.TgZ(28,"div",38),s.TgZ(29,"input",39),s.NdJ("ngModelChange",function(t){return i.$implicit.mealNotes=t}),s.ALo(30,"abpLocalization"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=i.$implicit,o=s.oxw(3);s.Q6J("ngClass",s.VKq(23,dt,!(!o.isHasOneMeal()&&n!==o.lastAddedNutritionDayItem))),s.xp6(1),s.Q6J("ngIf",!n.isEditingMealName),s.xp6(1),s.Q6J("ngIf",n.isEditingMealName),s.xp6(10),s.ekj("active",1===n.selectedOptionId),s.xp6(1),s.hij(" ",s.lcZ(14,19,"::Option1")," "),s.xp6(2),s.Q6J("ngIf",n.GetDetailsUnDeletedForActiveOptionVisible(2)),s.xp6(1),s.Q6J("ngIf",n.GetDetailsUnDeletedForActiveOptionVisible(3)),s.xp6(1),s.Q6J("ngIf",!n.GetDetailsUnDeletedForActiveOptionVisible(3)||!n.GetDetailsUnDeletedForActiveOptionVisible(2)),s.xp6(2),s.Q6J("isShowPercent",!0)("defaultCalories",n.getCalorie()||0)("proteins",(null==n?null:n.getNutritionTotals().proteins)||0)("carbs",(null==n?null:n.getCarbs())||0)("fats",(null==n?null:n.getFats())||0),s.xp6(3),s.Q6J("ngForOf",n.detailsUnDeletedForActiveOption)("ngForTrackBy",o.trackByAssignedNutritionDayItemDetailModel),s.xp6(3),s.Q6J("ngIf",!o.isHasOneMeal()&&n!==o.lastAddedNutritionDayItem),s.xp6(4),s.s9C("placeholder",s.lcZ(30,21,"::AddMealNote")),s.Q6J("ngModel",n.mealNotes)}}function pt(t,i){if(1&t&&(s.TgZ(0,"div",97),s._uU(1),s.ALo(2,"abpLocalization"),s.ALo(3,"abpLocalization"),s.qZA()),2&t){var e=s.oxw(3);s.xp6(1),s.lnq(" ",s.lcZ(2,3,"::MaxMealsNumberIs")," ",e.programConstrains.numberOfMeals," ",s.lcZ(3,5,"::AMeal")," ")}}function mt(t,i){if(1&t&&(s.TgZ(0,"div",98),s._uU(1),s.ALo(2,"abpLocalization"),s.ALo(3,"abpLocalization"),s.ALo(4,"abpLocalization"),s.ALo(5,"abpLocalization"),s.qZA()),2&t){var e=s.oxw(3);s.xp6(1),s.gL8(" ",s.lcZ(2,6,"::AllowedCalorieRange")," ",s.lcZ(3,8,"::FromDateGrid")," ",e.programConstrains.caloriesFrom," ",s.lcZ(4,10,"::ToDateGrid")," ",e.programConstrains.caloriesTo," ",s.lcZ(5,12,"::Calories")," ")}}function ft(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",103),s.NdJ("click",function(){return s.CHM(e),s.oxw(4).showNutritionForm()}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"::AddMeal")))}function ht(t,i){1&t&&(s.TgZ(0,"div",108),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"::ExceededMinProtineLimit")))}function vt(t,i){1&t&&(s.TgZ(0,"div",108),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.Oqu(s.lcZ(2,1,"::ExceededMaxProtineLimit")))}function yt(t,i){if(1&t&&(s.TgZ(0,"span",104),s._UZ(1,"app-nutrition-totals",105),s.YNc(2,ht,3,3,"div",106),s.YNc(3,vt,3,3,"div",107),s.qZA()),2&t){var e=s.oxw(4);s.xp6(1),s.Q6J("defaultCalories",e.assignedNutritionDayModel.getCalorie()||0)("proteins",e.assignedNutritionDayModel.getNutritionTotals().proteins)("carbs",e.assignedNutritionDayModel.getNutritionTotals().carbs)("fats",e.assignedNutritionDayModel.getNutritionTotals().fats),s.xp6(1),s.Q6J("ngIf",e.getMinProtineAlert()),s.xp6(1),s.Q6J("ngIf",e.getMaxProtineAlert())}}function bt(t,i){if(1&t&&(s.TgZ(0,"div",36),s.TgZ(1,"div",99),s._UZ(2,"hr",100),s.TgZ(3,"div",9),s.TgZ(4,"div",30),s.YNc(5,ft,3,3,"button",101),s.qZA(),s.TgZ(6,"div",36),s.YNc(7,yt,4,6,"span",102),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t){var e=s.oxw(3);s.xp6(5),s.Q6J("ngIf",e.canAddMoreMeals()),s.xp6(2),s.Q6J("ngIf",e.assignedNutritionDayModel.getNutritionTotals())}}function Nt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",109),s.TgZ(1,"div",110),s.TgZ(2,"form",111),s.NdJ("ngSubmit",function(){return s.CHM(e),s.oxw(3).submitForm()}),s.TgZ(3,"div",112),s.TgZ(4,"div",113),s.TgZ(5,"div",114),s.TgZ(6,"div",115),s.TgZ(7,"label",116),s._uU(8),s.ALo(9,"abpLocalization"),s.qZA(),s.TgZ(10,"div",43),s._UZ(11,"input",117),s.TgZ(12,"div",45),s._UZ(13,"input",118),s.ALo(14,"abpLocalization"),s.qZA(),s.qZA(),s.qZA(),s.TgZ(15,"div",119),s._UZ(16,"i",120),s._UZ(17,"br"),s.TgZ(18,"span",121),s._uU(19),s.ALo(20,"abpLocalization"),s.qZA(),s._UZ(21,"br"),s._UZ(22,"br"),s._UZ(23,"br"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=s.oxw(3);s.xp6(2),s.Q6J("formGroup",n.form),s.xp6(6),s.Oqu(s.lcZ(9,4,"::MealName")),s.xp6(5),s.s9C("value",s.lcZ(14,6,"::Save")),s.xp6(6),s.Oqu(s.lcZ(20,8,"::AddMealTip"))}}function Dt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",109),s.TgZ(1,"h3"),s._uU(2),s.ALo(3,"abpLocalization"),s.qZA(),s.TgZ(4,"app-nutrition-selector",122),s.NdJ("productSelected",function(t){return s.CHM(e),s.oxw(3).productSelected(t,null)}),s.qZA(),s.qZA()}if(2&t){var n=s.oxw(3);s.xp6(2),s.AsE(" ",s.lcZ(3,2,"::AddNutrition")," (",n.lastAddedNutritionDayItem.name,") ")}}function Zt(t,i){1&t&&(s.TgZ(0,"div",109),s.TgZ(1,"div",123),s._UZ(2,"i",120),s._UZ(3,"br"),s.TgZ(4,"span",121),s._uU(5),s.ALo(6,"abpLocalization"),s.qZA(),s._UZ(7,"br"),s._UZ(8,"br"),s._UZ(9,"br"),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Oqu(s.lcZ(6,1,"::SearchNutrition")))}function At(t,i){if(1&t&&(s.TgZ(0,"div",8),s.TgZ(1,"div",9),s.TgZ(2,"div",10),s.TgZ(3,"div",9),s.TgZ(4,"div",11),s.YNc(5,gt,31,25,"fieldset",12),s.qZA(),s.YNc(6,pt,4,7,"div",13),s.YNc(7,mt,6,14,"div",14),s.YNc(8,bt,8,2,"div",15),s.qZA(),s.qZA(),s.YNc(9,Nt,24,10,"div",16),s.YNc(10,Dt,5,4,"div",16),s.YNc(11,Zt,10,3,"div",16),s.qZA(),s.qZA()),2&t){var e=s.oxw(2);s.xp6(5),s.Q6J("ngForOf",e.assignedNutritionDayModel.nutritionDayItemsUnDeleted)("ngForTrackBy",e.trackByAssignedNutritionDayItemModel),s.xp6(1),s.Q6J("ngIf",!e.canAddMoreMeals()),s.xp6(1),s.Q6J("ngIf",e.isCaloriesError()),s.xp6(1),s.Q6J("ngIf",!e.isAddingNewExcercise),s.xp6(1),s.Q6J("ngIf",e.isAddingNewExcercise),s.xp6(1),s.Q6J("ngIf",!e.isAddingNewExcercise&&e.lastAddedNutritionDayItem),s.xp6(1),s.Q6J("ngIf",!e.isAddingNewExcercise&&!e.lastAddedNutritionDayItem)}}function xt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",124),s.TgZ(1,"button",125,126),s._uU(3),s.ALo(4,"abpLocalization"),s.qZA(),s.TgZ(5,"button",127),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).save()}),s._UZ(6,"i",47),s._uU(7),s.ALo(8,"abpLocalization"),s.qZA(),s.qZA()}2&t&&(s.xp6(3),s.hij(" ",s.lcZ(4,2,"AbpUi::Cancel")," "),s.xp6(4),s.hij(" ",s.lcZ(8,4,"AbpUi::Save")," "))}function It(t,i){if(1&t&&(s.TgZ(0,"div",5),s.YNc(1,At,12,8,"div",6),s.YNc(2,xt,9,6,"div",7),s.qZA()),2&t){var e=s.oxw();s.xp6(1),s.Q6J("ngIf",e.assignedNutritionDayModel),s.xp6(1),s.Q6J("ngIf",e.isCanSave)}}var Mt=function(){var i=function(){function i(t,e,n,a,r,u,l,c,d,g,m,f,h,v,y,b,N){o(this,i),this.list=t,this.track=e,this.service2=n,this.service=a,this.localization=r,this.nutritionManageService=u,this.langService=l,this.mobileHelperService=c,this._attachmentService=d,this.confirmation=g,this.environment=m,this.dateService=f,this.toaster=h,this.localCacheService=v,this.analyticsService=y,this.traineeMiddleService=b,this.fb=N,this.dataChanged=new s.vpe,this.trackByAssignedNutritionDayItemModel=function(t,i){return null==i?void 0:i.id},this.trackByAssignedNutritionDayItemDetailModel=function(t,i){return null==i?void 0:i.id},this.trackByNutrition=function(t,i){return null==i?void 0:i.id},this.isModalBusy=!1,this.isModalOpen=!1,this.apiUrl="",this.isMobile=!1,this.programConstrains=new p.C,this.ttl=900,this.isAddingNewExcercise=!1,this.isCanSave=!1,this.lastSearchedNutrition="",this.isShowAddingNutrition=!1,this.nutritionCategories=[]}return n(i,[{key:"ngOnInit",value:function(){this.apiUrl=this.environment.getApiUrl()}},{key:"getMinProtine",value:function(){return 1.2*this.traineeMiddleService.weight}},{key:"getMaxProtine",value:function(){return 2.2*this.traineeMiddleService.weight}},{key:"getMinProtineAlert",value:function(){return 0!==this.assignedNutritionDayModel.getProteins()&&0!==this.traineeMiddleService.weight&&this.assignedNutritionDayModel.getProteins()<this.getMinProtine()}},{key:"getMaxProtineAlert",value:function(){return 0!==this.assignedNutritionDayModel.getProteins()&&0!==this.traineeMiddleService.weight&&this.assignedNutritionDayModel.getProteins()>this.getMaxProtine()}},{key:"hideForm",value:function(){this.isModalOpen=!1,this.form&&this.form.reset()}},{key:"showForm",value:function(){this.lastAddedNutritionDayItem=void 0,this.form&&this.form.reset(),this.isModalOpen=!0,this.isShowAddingNutrition=!1,this.isMobile&&this.startSearchNutrition({query:""})}},{key:"create",value:function(t,i,e){var n=this,o=this;o.nutritionCategories&&0!==o.nutritionCategories.length||o.service2.getDislikedCategoriesByTraineeId(e.traineeId).subscribe(function(t){o.nutritionCategories=t}),this.programConstrains=e,this.isCanSave=!0,this.day=t;var a={};a.dayNumber=t.dayId,a.assignedNutritionProgramId=i,a.calendarDate=this.dateService.removeUtcDate(t.startDate).toISOString(),this.assignedNutritionDayModel=new d.k(a.nutritionProgramName,a.nutritionProgramId,a);for(var r=0;r<e.numberOfMeals;r++)this.assignedNutritionDayModel.addNewDetail(this.localization.instant("::AMeal")+" "+(r+1));this.hideNutritionForm(),this.showForm(),this.assignedNutritionDayModel.onDelete.subscribe(function(t){0===t?n.showNutritionForm():1===t&&(n.lastAddedNutritionDayItem=n.assignedNutritionDayModel.nutritionDayItemsUnDeleted[0])})}},{key:"update",value:function(t,i,e){var n=this,o=this;o.nutritionCategories&&0!==o.nutritionCategories.length||o.service2.getDislikedCategoriesByTraineeId(e.traineeId).subscribe(function(t){o.nutritionCategories=t}),this.programConstrains=e,this.day=t,this.isCanSave=!0,this.assignedNutritionDayModel=new d.k(i.nutritionProgramName,i.nutritionProgramId,i.convertToDto()),this.hideNutritionForm(),this.showForm(),this.assignedNutritionDayModel.onDelete.subscribe(function(t){0===t?n.showNutritionForm():1===t&&(n.lastAddedNutritionDayItem=n.assignedNutritionDayModel.nutritionDayItemsUnDeleted[0])}),1===this.assignedNutritionDayModel.nutritionDayItemsUnDeleted.length&&(this.lastAddedNutritionDayItem=this.assignedNutritionDayModel.nutritionDayItemsUnDeleted[0])}},{key:"isHasOneMeal",value:function(){return 1===this.assignedNutritionDayModel.nutritionDayItemsUnDeleted.length}},{key:"cancel",value:function(){}},{key:"getDayKey",value:function(t){var i="assinged_nt_".concat(t.assignedNutritionProgramId,"_").concat(t.calendarDate).replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",i),i}},{key:"setSelectedDay",value:function(t){try{var i=this.getDayKey(t.assignedNutritionProgramDay),e=JSON.stringify({on:Date(),data:t});this.localCacheService.put(i,e,this.ttl)}catch(n){this.clearStorage()}}},{key:"clearStorage",value:function(){for(var t in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)t.startsWith("assinged_")&&localStorage.removeItem(t)}},{key:"save",value:function(){var t=this;if((!this.assignedNutritionDayModel||this.assignedNutritionDayModel.isAllSuperSetsValid())&&!this.isCaloriesError()){var i=this,e=this.assignedNutritionDayModel.convertToDto();if(i.analyticsService.log(f.O.do_save_Program_assigned_nutrition),this.assignedNutritionDayModel.id){var n={};n.dayNumber=e.id,n.assignedNutritionProgramId=e.assignedNutritionProgramId,n.calendarDate=e.calendarDate,n.assignedNutritionProgramDayItems=e.assignedNutritionProgramDayItems,n.nutritionProgramId=e.nutritionProgramId,n.name=e.name,this.service.update(this.assignedNutritionDayModel.id,n).subscribe(function(e){var n=new c.h(e.id,e.name,t.day,new d.k(e.nutritionProgramName,e.nutritionProgramId,e));i.day.clearItems(),i.day.addItem(n);var o={};o.assignedNutritionProgramDay=e,i.setSelectedDay(o),i.hideForm(),i.dataChanged.emit(i.assignedNutritionDayModel)})}else{var o={};o.dayNumber=e.dayNumber,o.assignedNutritionProgramId=e.assignedNutritionProgramId,o.calendarDate=e.calendarDate,o.assignedNutritionProgramDayItems=e.assignedNutritionProgramDayItems,o.nutritionProgramId=e.nutritionProgramId,o.name=e.name,this.service.create(o).subscribe(function(e){e.nutritionProgramName=t.assignedNutritionDayModel.nutritionProgramName,i.day.addItem(new c.h(e.id,e.name,t.day,new d.k(e.nutritionProgramName,e.nutritionProgramId,e)));var n={};n.assignedNutritionProgramDay=e,i.setSelectedDay(n),i.hideForm(),i.dataChanged.emit(i.assignedNutritionDayModel)})}}}},{key:"showNutritionForm",value:function(){this.buildForm(),this.isAddingNewExcercise=!0}},{key:"hideNutritionForm",value:function(){this.isAddingNewExcercise=!1}},{key:"canAddMoreMeals",value:function(){return!0}},{key:"isCaloriesError",value:function(){return!1}},{key:"buildForm",value:function(){this.form=this.fb.group({mealName:[null,[D.kI.required]]})}},{key:"submitForm",value:function(){if(!this.form.invalid){var t=this.form.get("mealName").value;this.isCanSave=!0,this.hideNutritionForm(),this.assignedNutritionDayModel.addNewDetail(t),this.lastAddedNutritionDayItem=this.assignedNutritionDayModel.nutritionDayItemsUnDeleted[this.assignedNutritionDayModel.nutritionDayItemsUnDeleted.length-1]}}},{key:"startSearchNutrition",value:function(t){var i=this,e={};e.filter=t.query,e.maxResultCount=50,this.lastSearchedNutrition=t.query||"",this.service2.getNutritionLookupAll(e).subscribe(function(t){i.AllNutritions=t.items,i.isShowAddingNutrition=0==t.items.length})}},{key:"onSelect",value:function(t){}},{key:"onClear",value:function(){}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}},{key:"saveItem",value:function(t){var i=this,e={};e.nutritionId=t.nutrition.id,e.traineeId=this.programConstrains.traineeId,this.service2.validateNutrition(e).subscribe(function(e){e.isValid?t.save():i.confirmation.warn("::AreYouSureToAssignExcludedFoods","::AreYouSure",{messageLocalizationParams:[t.nutrition.nutritionName]}).subscribe(function(i){i==v.Tv.Status.confirm&&t.save()})})}},{key:"createNewNutrition",value:function(t,i){this.selctedNutritionDayItemGroup=i,t.create(this.lastSearchedNutrition)}},{key:"onCreateNewNutrition",value:function(t){var i=this;this.startSearchNutrition({query:t.nutritionName}),setTimeout(function(){i.selctedNutritionDayItemGroup.nutrition=t},1e3)}},{key:"isDislikedNutrition",value:function(t){return this.nutritionCategories.some(function(i){var e;return null!==(e=i===(null==t?void 0:t.nutritionCategoryId))&&void 0!==e?e:0})}},{key:"drop",value:function(i,e,n){var o=t(e.detailsUnDeleted).filter(function(t){return t.optionId!=n}),a=t(e.detailsUnDeletedForActiveOption);(0,A.bA)(a,i.previousIndex,i.currentIndex),e.details=[].concat(t(a),t(o))}},{key:"up",value:function(i,e,n,o){if(n<e.details.length-1){var a=t(e.detailsUnDeleted).filter(function(t){return t.optionId!=o}),r=t(e.detailsUnDeletedForActiveOption);(0,A.bA)(r,n,n+1),e.details=[].concat(t(r),t(a))}}},{key:"down",value:function(i,e,n,o){if(n>0){var a=t(e.detailsUnDeleted).filter(function(t){return t.optionId!=o}),r=t(e.detailsUnDeletedForActiveOption);(0,A.bA)(r,n,n-1),e.details=[].concat(t(r),t(a))}}},{key:"addNewNutrition",value:function(t){t.isAddingNewItem=!t.isAddingNewItem,this.lastAddedNutritionDayItem=t,this.isAddingNewExcercise=!1}},{key:"productSelected",value:function(t,i){console.log("adding-detail-3",t),null!=i||(i=this.lastAddedNutritionDayItem),i&&(i.isAddingNewItem=!1,i.addNewDetail(t))}}]),i}();return i.\u0275fac=function(t){return new(t||i)(s.Y36(r.XNV),s.Y36(r.vR3),s.Y36(h.Jq),s.Y36(h.BA),s.Y36(r.oQ8),s.Y36(h.iJ),s.Y36(N.C),s.Y36(x.k4),s.Y36(I.L),s.Y36(v.YP),s.Y36(r.L$R),s.Y36(u.R),s.Y36(v.MJ),s.Y36(b.F),s.Y36(f.y),s.Y36(M.J),s.Y36(D.qu))},i.\u0275cmp=s.Xpm({type:i,selectors:[["app-assigned-nutrition-program-modal-day"]],outputs:{dataChanged:"dataChanged"},features:[s._Bn([r.XNV,u.R])],decls:7,vars:3,consts:[["size","xl",3,"visible","busy","visibleChange"],["abpHeader",""],["abpBody",""],[3,"hideList","onSaved"],["appNutrition",""],[1,"program-popup","small-scrollbar"],["class","mt-2 fade-in-top",4,"ngIf"],["class","col-sm-12 modal-footer mt-0 p-1",4,"ngIf"],[1,"mt-2","fade-in-top"],[1,"row"],[1,"col-8"],[1,"col-12",2,"height","calc(100vh - 180px)","overflow-y","auto","min-height","200px"],["class","hiding-container bg-light-2 round-borders",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","alert alert-info text-center col-12",4,"ngIf"],["class","alert alert-danger text-center col-12",4,"ngIf"],["class","col",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"hiding-container","bg-light-2","round-borders",3,"ngClass"],["class","set-item text-center",4,"ngIf"],[1,"delete-nutrition-day-item"],[1,"btn","btn-danger","delete-nutrition","auto-hide",3,"click"],[1,"fa","fa-times"],[1,"option-container","row"],[1,"btn-group","col-auto"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-secondary",3,"active","click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"col-auto"],[3,"isShowPercent","defaultCalories","proteins","carbs","fats"],["cdkDropList","",1,"nutritions-con",3,"cdkDropListDropped"],["cdkDrag","","class","nutrition-row",4,"ngFor","ngForOf","ngForTrackBy"],[1,"excercise-footer"],["class","btn-sm btn btn-outline-success auto-hide",3,"click",4,"ngIf"],[1,"col"],[1,"mt-2","text-center"],[1,"d-block","input-containers","input-group","mb-2"],[1,"rounded","w-100","form-control",3,"ngModel","placeholder","ngModelChange"],[1,"set-item","text-center"],[1,"btn","no-shadow","btn-sm","text-primary","m-0","p-0",3,"click"],[1,"fa","fa-pen"],[1,"input-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn","btn-sm","text-success","m-0","p-0",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-plus"],["cdkDrag","",1,"nutrition-row"],[1,"col-3","my-auto","d-flex"],["cdkDragHandle","","width","24px","fill","currentColor","viewBox","0 0 24 24",1,"holder"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[2,"display","inline-block","text-align","center"],["class","btn btn-sm",3,"click",4,"ngIf"],[4,"ngIf"],[1,"col","my-auto"],["class","value-containers",4,"ngIf"],["class","d-block input-containers input-group",4,"ngIf"],[1,"col-auto","my-auto"],[1,"col-auto","text-center","text-lg-right","text-sm-center","my-auto"],[1,"action-btns"],["class","btn btn-link",3,"click",4,"ngIf"],[1,"btn","btn-sm","px-1","text-danger",3,"click"],[1,"d-lg-none","d-inline-block","ml-2"],[1,"col-6"],["class","mt-2 text-center",4,"ngIf"],["class","col-6",4,"ngIf"],[1,"img-fluid","rounded",3,"src","title"],[1,"value-containers"],[1,"view-rtl"],[1,"view-ltr"],[1,"d-block","input-containers","input-group"],["for","general-lookup-store-type-general-lookup-id"],["class","fa fa-exclamation  text-danger",4,"ngIf"],[3,"ngClass"],["class","w-100","dataKey","id","forceSelection","true","id","nutritionItem","name","nutritionItem",3,"ngModel","dropdown","suggestions","type","field","placeholder","completeMethod","onClear","search","ngModelChange",4,"ngIf"],["class","btn btn-sm btn-outline-success btn-block",3,"click",4,"ngIf"],["class","badge badge-warning",4,"ngIf"],["class","form-inline",4,"ngIf"],[1,"fa","fa-exclamation","text-danger"],["dataKey","id","forceSelection","true","id","nutritionItem","name","nutritionItem",1,"w-100",3,"ngModel","dropdown","suggestions","type","field","placeholder","completeMethod","onClear","search","ngModelChange"],[1,"btn","btn-sm","btn-outline-success","btn-block",3,"click"],[1,"badge","badge-warning"],[1,"form-inline"],[1,"form-group","w-100"],["id","nutritionItem","name","nutritionItem",1,"custom-select","form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","view-rtl",4,"ngIf"],["class","view-ltr",4,"ngIf"],["type","number",1,"form-control","rounded","w-100",3,"ngModel","ngClass","placeholder","ngModelChange"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pen","text-primary"],[1,"btn-sm","btn","btn-outline-success","auto-hide",3,"click"],[1,"alert","alert-info","text-center","col-12"],[1,"alert","alert-danger","text-center","col-12"],[1,"nutrition-footer-old"],[1,"mb-0","w-100"],["class","mx-3 btn btn-outline-success add-btn",3,"click",4,"ngIf"],["class","totals",4,"ngIf"],[1,"mx-3","btn","btn-outline-success","add-btn",3,"click"],[1,"totals"],[1,"d-inline-block",3,"defaultCalories","proteins","carbs","fats"],["class","badge badge-warning d-inline-block ",4,"ngIf"],["class","badge badge-warning d-inline-block",4,"ngIf"],[1,"badge","badge-warning","d-inline-block"],[1,"col-4"],[1,"text-center","col"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"row","app-bg-gray-light"],[1,"col","mx-auto"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-12"],["for","mealName"],["autofocus","","formControlName","mealName","id","mealName","maxlength","255","minlength","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"value"],[1,"col","text-center","mt-5","pt-5"],[1,"fab","fa-nutritionix","text-primary",2,"font-size","48px"],[1,"text-muted"],[3,"productSelected"],[1,"col","text-center","text-center","mt-5","pt-5"],[1,"col-sm-12","modal-footer","mt-0","p-1"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["Class","btn btn-success btn-save",3,"click"]],template:function(t,i){1&t&&(s.TgZ(0,"abp-modal",0),s.NdJ("visibleChange",function(t){return i.isModalOpen=t}),s.YNc(1,S,3,3,"ng-template",null,1,s.W1O),s.YNc(3,It,3,2,"ng-template",null,2,s.W1O),s.qZA(),s.TgZ(5,"app-nutrition",3,4),s.NdJ("onSaved",function(t){return i.onCreateNewNutrition(t)}),s.qZA()),2&t&&(s.Q6J("visible",i.isModalOpen)("busy",i.isModalBusy),s.xp6(5),s.Q6J("hideList",!0))},directives:[v.zS,C.J,Z.O5,Z.sg,Z.mk,P.r,A.Wj,D.Fj,D.JJ,D.On,w.m,A.Zt,A.Bh,k.Qc,D.EJ,D.YN,D.Kr,D.wV,D._Y,D.JL,r.YzZ,D.sg,T.hL,r.Uqp,D.u,T.J5,D.nD,D.wO,O.A],pipes:[r.fuE,Z.Ov,q.H,Z.JJ],styles:[".has-error[_ngcontent-%COMP%]{border:1px solid red}.program-popup[_ngcontent-%COMP%]   .badge-inner[_ngcontent-%COMP%]{background-color:#fff;color:#000;font-size:100%}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{padding:20px 16px;border:1px solid #e5e5e5;border-radius:8px;margin-bottom:0}.program-popup[_ngcontent-%COMP%]   fieldset.selected-fieldset[_ngcontent-%COMP%]{background:#ffc10733!important;border:1px solid #ffc107}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{width:auto;border:1px solid #d5d5d5;border-radius:50px;padding:3px 14px;background:#fff;margin-bottom:0;font-size:14px;position:relative;z-index:2}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]{text-align:left;transition:all .4s ease-in-out;transform:translateY(-50px);height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;padding:0;width:24px;height:24px;line-height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]   button.auto-hide[_ngcontent-%COMP%]{opacity:0;height:0}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:hover   .delete-nutrition-day-item[_ngcontent-%COMP%]   .auto-hide[_ngcontent-%COMP%]{opacity:1;height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #e5e5e5}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]:first-of-type{padding-top:0}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .input-containers[_ngcontent-%COMP%]{align-items:center}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .input-containers[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-right:6px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff}@media screen and (min-width:991px){.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;padding:0!important;width:25px;height:25px;line-height:25px}}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-left:10px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .excercise-footer[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .excercise-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   .totals[_ngcontent-%COMP%]{margin-top:15px}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{transform:translateY(18px)}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50px;background:#fff;position:relative;z-index:1}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00824e}.img-fluid[_ngcontent-%COMP%]{max-width:58px}.alert[_ngcontent-%COMP%]{padding:3px}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da}[_nghost-%COMP%]     .modal{display:block!important}[_nghost-%COMP%]     .modal-header{padding:0 16px}[_nghost-%COMP%]     .modal-dialog{overflow-y:visible!important;overflow-y:initial!important}[_nghost-%COMP%]     .modal-body{height:80vh;overflow-y:auto;padding:0 14px 6px}.badge.badge-inner[_ngcontent-%COMP%]{display:block;margin:3px}.option-container[_ngcontent-%COMP%]{width:100%;margin-top:-26px;margin-bottom:15px}.cdk-drag-preview[_ngcontent-%COMP%]{z-index:10000!important;transform:rotate3d(10,10,10,-2deg);box-shadow:10px 10px 10px rgba(0,0,0,.1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),i}(),Ct=a(6194),Pt=a(98462),wt=a(11520),kt=a(28157),Tt=a(28451);function Ot(t,i){1&t&&(s.TgZ(0,"h3"),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::MoveToLibrary")," "))}function qt(t,i){if(1&t&&(s.TgZ(0,"span",16),s._uU(1),s.qZA()),2&t){var e=s.oxw().$implicit;s.xp6(1),s.hij(" ",e.selectionCount," ")}}function St(t,i){if(1&t&&(s.TgZ(0,"p",14),s._uU(1),s.qZA(),s.YNc(2,qt,2,1,"span",15)),2&t){var e=i.$implicit;s.xp6(1),s.hij(" ",e.nutriitionProgramName," "),s.xp6(1),s.Q6J("ngIf",e.selectionCount>0)}}function _t(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"form",3),s.NdJ("ngSubmit",function(){return s.CHM(e),s.oxw().submitForm()}),s.TgZ(1,"div",4),s.TgZ(2,"div",5),s.TgZ(3,"label",6),s._uU(4),s.ALo(5,"abpLocalization"),s.qZA(),s.TgZ(6,"p-autoComplete",7),s.NdJ("onClear",function(){return s.CHM(e),s.oxw().onClear()})("completeMethod",function(t){return s.CHM(e),s.oxw().startSearchProgram(t)})("search",function(t){return s.CHM(e),s.oxw().startSearchProgram(t)}),s.ALo(7,"abpLocalization"),s.YNc(8,St,3,2,"ng-template",8),s.qZA(),s.qZA(),s.qZA(),s.TgZ(9,"div",9),s.TgZ(10,"button",10,11),s._uU(12),s.ALo(13,"abpLocalization"),s.qZA(),s.TgZ(14,"button",12),s._UZ(15,"i",13),s._uU(16),s.ALo(17,"abpLocalization"),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=s.oxw();s.Q6J("formGroup",n.form),s.xp6(4),s.hij(" ",s.lcZ(5,8,"::NutritionProgram")," "),s.xp6(2),s.s9C("placeholder",s.lcZ(7,10,"::NutritionProgram")),s.Q6J("suggestions",n.AllPrograms)("type",n.searchType())("dropdown",!0),s.xp6(6),s.hij(" ",s.lcZ(13,12,"AbpUi::Cancel")," "),s.xp6(4),s.hij(" ",s.lcZ(17,14,"::Ok")," ")}}var Ut=function(){var t=function(){function t(i,e,n,a,r,s,u,l,c,d,g){o(this,t),this.list=i,this.track=e,this.service=n,this.traineeService=a,this.confirmation=r,this.dateService=s,this.localCacheService=u,this.toaster=l,this.l=c,this.assignNutritionProgramService=d,this.fb=g,this.isModalBusy=!1,this.isModalOpen=!1}return n(t,[{key:"ngOnInit",value:function(){}},{key:"buildForm",value:function(){this.form=this.fb.group({nutritionProgramId:[null,[D.kI.required]]})}},{key:"submitForm",value:function(){var t,i=this,e=this;if(!this.form.invalid){var n=this.form.get("nutritionProgramId").value,o={assignedProgramId:this.assignedProgramId,dayDates:this.days.map(function(t){return t.toISOString()}).toString(),dayIds:this.days.map(function(t){return t.toISOString()}).toString(),programId:null!==(t=null==n?void 0:n.id)&&void 0!==t?t:n};this.service.moveToLibe(o).pipe((0,wt.x)(function(){return i.isModalBusy=!1})).subscribe(function(t){e.toaster.success("::Success"),setTimeout(function(){e.hideForm()},1)})}}},{key:"hideForm",value:function(){var t=this;this.isModalOpen=!1,setTimeout(function(){t.form.reset()},100)}},{key:"showForm",value:function(){this.buildForm(),this.isModalOpen=!0}},{key:"create",value:function(t,i){var e;this.days=t.map(function(t){return t.day.startDate}),this.assignedProgramId=null!==(e=null==i?void 0:i.id)&&void 0!==e?e:i,this.showForm()}},{key:"startSearchProgram",value:function(t){var i=this;this.service.getNutritionProgramLookup(t.query,0,0,!0).subscribe(function(t){i.AllPrograms=t.items})}},{key:"onSelect",value:function(t){}},{key:"onClear",value:function(){}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}}]),t}();return t.\u0275fac=function(i){return new(i||t)(s.Y36(r.XNV),s.Y36(r.vR3),s.Y36(h.Jq),s.Y36(kt.s),s.Y36(v.YP),s.Y36(u.R),s.Y36(b.F),s.Y36(v.MJ),s.Y36(r.oQ8),s.Y36(g.v),s.Y36(D.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-move-to-lib-nutrition-program"]],outputs:{create:"create"},features:[s._Bn([u.R])],decls:5,vars:2,consts:[["size","md",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"move-to-lib-nutrition-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","nutritionProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","field","nutriitionProgramName","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","onClear","completeMethod","search"],["pTemplate","item"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"]],template:function(t,i){1&t&&(s.TgZ(0,"abp-modal",0),s.NdJ("visibleChange",function(t){return i.isModalOpen=t}),s.YNc(1,Ot,3,3,"ng-template",null,1,s.W1O),s.YNc(3,_t,18,16,"ng-template",null,2,s.W1O),s.qZA()),2&t&&s.Q6J("busy",i.isModalBusy)("visible",i.isModalOpen)},directives:[v.zS,D._Y,D.JL,r.YzZ,D.sg,T.hL,k.Qc,D.JJ,D.u,T.J5,w.m,Tt.jx,Z.O5],pipes:[r.fuE],styles:["@media (max-width:768px){  .move-to-lib-nutrition-program .p-autocomplete-panel{max-width:100%}}  .move-to-lib-nutrition-program .program-name{white-space:normal}  .move-to-lib-nutrition-program .badge{min-width:40px;font-size:90%;text-align:center}  .move-to-lib-nutrition-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),t}(),Lt=a(46140);function Ft(t,i){if(1&t&&(s.TgZ(0,"h1",8),s._uU(1),s.qZA()),2&t){var e=s.oxw(2);s.xp6(1),s.hij(" ",e.assignedNutritionDayModel.totalDayCaloriesMin," ")}}var Jt=function(t,i,e){return{"text-primary":t,"text-warning":i,"text-danger":e}};function Yt(t,i){if(1&t&&(s.TgZ(0,"h3",9),s._uU(1),s.qZA()),2&t){var e=s.oxw(2);s.Q6J("ngClass",s.kEZ(3,Jt,!e.isShowAlert(1.05),e.isShowAlert(1.05)&&!e.isShowAlert(1.1),e.isShowAlert(1.1))),s.xp6(1),s.AsE(" ",e.assignedNutritionDayModel.totalDayCaloriesMin," ~ ",e.assignedNutritionDayModel.totalDayCaloriesMax," ")}}function Et(t,i){if(1&t&&(s.TgZ(0,"div",10),s._uU(1),s.qZA()),2&t){var e=s.oxw(2);s.xp6(1),s.hij(" ",e.assignedNutritionDayModel.nutritionProgramName," ")}}function Qt(t,i){1&t&&(s.TgZ(0,"span",11),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()),2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::Updated")," "))}function zt(t,i){if(1&t&&(s.TgZ(0,"div",1),s.TgZ(1,"h5",2),s._uU(2),s.ALo(3,"abpLocalization"),s.qZA(),s.YNc(4,Ft,2,1,"h1",3),s.YNc(5,Yt,2,7,"h3",4),s.TgZ(6,"div",5),s._uU(7),s.ALo(8,"abpLocalization"),s.qZA(),s.YNc(9,Et,2,1,"div",6),s.YNc(10,Qt,3,3,"span",7),s.qZA()),2&t){var e=s.oxw();s.xp6(2),s.hij(" ",s.lcZ(3,6,"::NutritionValue")," "),s.xp6(2),s.Q6J("ngIf",e.assignedNutritionDayModel.totalDayCaloriesMin===e.assignedNutritionDayModel.totalDayCaloriesMax),s.xp6(1),s.Q6J("ngIf",e.assignedNutritionDayModel.totalDayCaloriesMin!==e.assignedNutritionDayModel.totalDayCaloriesMax),s.xp6(2),s.hij(" ",s.lcZ(8,8,"::CalorieItem")," "),s.xp6(2),s.Q6J("ngIf",e.assignedNutritionDayModel.nutritionProgramName),s.xp6(1),s.Q6J("ngIf",e.assignedNutritionDayModel.nutritionProgramId&&e.assignedNutritionDayModel.lastModificationTime)}}var Bt=function(){var t=function(){function t(i,e,n,a,r,s){o(this,t),this.list=i,this.track=e,this.service=n,this.confirmation=a,this.dateService=r,this.fb=s,this.trackByAssignedNutritionDayItemModel=function(t,i){return null==i?void 0:i.id},this.trackByAssignedNutritionDayItemDetailModel=function(t,i){return null==i?void 0:i.id},this.isSummary=!0}return n(t,[{key:"assignedNutritionDayModel",get:function(){return this._assignedNutritionDayModel},set:function(t){this._assignedNutritionDayModel=t,this.name=t.name}},{key:"ngOnInit",value:function(){}},{key:"name",get:function(){return this._name},set:function(t){this._name=t}},{key:"save",value:function(){var t=this,i=this,e=this.assignedNutritionDayModel.convertToDto();e.name=this.name,this.service.update(this.assignedNutritionDayModel.id,e).subscribe(function(e){t.assignedNutritionDayModel.name=e.name,t.assignedNutritionDayModel.name=e.name,t.assignedNutritionDayModel.id=e.id;var n=new c.h(e.id,e.name,t.day,t.assignedNutritionDayModel);i.day.clearItems(),i.day.addItem(n)})}},{key:"isShowAlert",value:function(t){return!!this.assignedNutritionDayModel&&this.assignedNutritionDayModel.totalDayCaloriesMax>this.assignedNutritionDayModel.totalDayCaloriesMin*t}}]),t}();return t.\u0275fac=function(i){return new(i||t)(s.Y36(r.XNV),s.Y36(r.vR3),s.Y36(h.BA),s.Y36(v.YP),s.Y36(u.R),s.Y36(D.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-assigned-nutrition-program-day"]],inputs:{day:"day",assignedNutritionDayModel:"assignedNutritionDayModel",isSummary:"isSummary"},features:[s._Bn([r.XNV,u.R])],decls:1,vars:1,consts:[["class","text-center",4,"ngIf"],[1,"text-center"],[1,"m-0"],["class","text-primary m-0",4,"ngIf"],["class","m-0",3,"ngClass",4,"ngIf"],[1,"text-muted","mb-3"],["class","badge badge-light text-wraped",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],[1,"text-primary","m-0"],[1,"m-0",3,"ngClass"],[1,"badge","badge-light","text-wraped"],[1,"badge","badge-primary"]],template:function(t,i){1&t&&s.YNc(0,zt,11,10,"div",0),2&t&&s.Q6J("ngIf",i.assignedNutritionDayModel)},directives:[Z.O5,Z.mk],pipes:[r.fuE],encapsulation:2}),t}(),jt=["modal"],Ht=["board"],Gt=["multiplay"];function $t(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(e);var t=s.oxw(2);return s.MAs(7).create(t.traineeUserId,null)}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::AssignNutritionProgram")," "))}function Vt(t,i){if(1&t&&(s.TgZ(0,"div",9),s._UZ(1,"div",10),s.TgZ(2,"div",11),s.TgZ(3,"div",12),s.TgZ(4,"div",10),s._UZ(5,"i",13),s.TgZ(6,"h5"),s._uU(7),s.ALo(8,"abpLocalization"),s.qZA(),s.TgZ(9,"p",14),s._uU(10),s.ALo(11,"abpLocalization"),s.qZA(),s.YNc(12,$t,3,3,"button",15),s.qZA(),s.qZA(),s.qZA(),s._UZ(13,"div",10),s.qZA()),2&t){var e=s.oxw();s.xp6(7),s.hij(" ",s.lcZ(8,3,"::NotAssignedNutrotionTip")," "),s.xp6(3),s.hij(" ",s.lcZ(11,5,"::NotAssignedNutrotionTip2")," "),s.xp6(2),s.Q6J("ngIf",!e.isCurrentUserAdmin)}}function Rt(t,i){1&t&&(s.TgZ(0,"div",9),s._UZ(1,"div",10),s.TgZ(2,"div",11),s.TgZ(3,"div",12),s.TgZ(4,"div",10),s._UZ(5,"i",13),s.TgZ(6,"h5"),s._uU(7),s.ALo(8,"abpLocalization"),s.qZA(),s.TgZ(9,"p",14),s._uU(10),s.ALo(11,"abpLocalization"),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s._UZ(12,"div",10),s.qZA()),2&t&&(s.xp6(7),s.hij(" ",s.lcZ(8,2,"::AssingingTip")," "),s.xp6(3),s.hij(" ",s.lcZ(11,4,"::AssingingTip2")," "))}function Wt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",22),s.NdJ("click",function(){s.CHM(e),s.oxw();var t=s.MAs(1),i=s.oxw();return s.MAs(13).create(t.selectedItems,i.selected)}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::MoveToLibrary"),""))}function Xt(t,i){if(1&t&&s._UZ(0,"app-assigned-nutrition-program-day",23),2&t){var e=i.extraData,n=i.day,o=s.oxw(2);s.Q6J("assignedNutritionDayModel",e)("isSummary",o.isSummary)("day",n)}}function Kt(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"button",30),s.NdJ("click",function(){s.CHM(e);var t=s.oxw(3);return s.MAs(7).create(t.traineeUserId,null)}),s._uU(1),s.ALo(2,"abpLocalization"),s.qZA()}2&t&&(s.xp6(1),s.hij(" ",s.lcZ(2,1,"::AssignNutritionProgram")," "))}function ti(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"div",24),s.TgZ(1,"div",25),s.TgZ(2,"div",26),s.YNc(3,Kt,3,3,"button",27),s.TgZ(4,"button",28),s.NdJ("click",function(){return s.CHM(e),s.oxw(2).refreshCache()}),s._UZ(5,"i",29),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){var n=s.oxw(2);s.xp6(3),s.Q6J("ngIf",!n.isCurrentUserAdmin)}}function ii(t,i){if(1&t){var e=s.EpF();s.TgZ(0,"app-board-container",17,18),s.NdJ("weekCreated",function(t){return s.CHM(e),s.oxw().weekCreated(t)})("weekDeleted",function(t){return s.CHM(e),s.oxw().weekDeleted(t)})("itemDeletedBulk",function(t){return s.CHM(e),s.oxw().itemDeletedBulk(t)})("itemDeleted",function(t){return s.CHM(e),s.oxw().itemDeleted(t)})("itemCreated",function(t){return s.CHM(e),s.oxw().itemCreated(t)})("itemCopiedMoved",function(t){return s.CHM(e),s.oxw().itemCopiedMoved(t)})("itemEdited",function(t){return s.CHM(e),s.oxw().itemEdited(t)}),s.YNc(2,Wt,3,3,"ng-template",null,19,s.W1O),s.YNc(4,Xt,1,3,"ng-template",null,20,s.W1O),s.YNc(6,ti,6,1,"ng-template",null,21,s.W1O),s.qZA()}2&t&&s.Q6J("isDayFullHight",!1)}var ei=function(){var t=function(){function t(i,e,n,a,r,u,l,c,d,g,m,f,h,v,y){o(this,t),this.list=i,this.track=e,this.programService=n,this.dayService=a,this.confirmation=r,this.dateService=u,this.route=l,this.assignNutritionProgramService=c,this.localCacheService=d,this.router=g,this.langService=m,this.toaster=f,this.permissionService=h,this.analyticsService=v,this.fb=y,this.refresh=new s.vpe,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.isLoading=!0,this.isAssigned=!0,this.programConstrains=new p.C,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1,this.ttl=900,this.isForceRefresh=!1}return n(t,[{key:"ngOnInit",value:function(){var t=this;this.analyticsService.log(f.O.View_Program_assigned_nutrition),this.loadProgram(),this.sub=this.assignNutritionProgramService.onAssigned.subscribe(function(i){t.onAssigned(i)})}},{key:"loadProgram",value:function(){this.loadProgramByUserId(!0)}},{key:"loadProgramByUserId",value:function(t){var i=this,e=this,n={};n.traineeId=this.traineeUserId,this.programService.getCurrent(n).pipe((0,m.z)(e.localCacheService,"AssignedNutritionProg".concat(n.traineeId),1)).subscribe(function(n){if(e.scheduledNutritionProgramId=n.scheduledNutritionProgramId,e.scheduledNutritionProgramId)return e.isLoading=!1,void setTimeout(function(){e.loadProgramByUserId(t)},5e3);n.assignedNutritionProgramId?(i.selected=n.assignedNutritionProgramId,i.programConstrains.numberOfMeals=n.numberOfMeals,i.programConstrains.caloriesFrom=n.caloriesFrom,i.programConstrains.caloriesTo=n.caloriesTo,i.programConstrains.traineeId=i.traineeUserId,e.loadSimpleDays(function(){return e.initialProgram()})):i.isAssigned=!1})}},{key:"loadSimpleDays",value:function(t){var i=this,e=this,n={};n.assignedNutritionProgramId=this.selected,n.maxResultCount=1e3,e.dayService.getListSimple(e.selected).subscribe(function(n){e.selectedDaysSimple=n,i.selectedDays={items:[],totalCount:0},t()})}},{key:"initialProgram",value:function(){var t=this,i=this,e=l.w.TwoWeeks;this.isLoading=!1,setTimeout(function(){i.board.setup(2,e,!1,new Date,"assigned-nut",t.traineeUserId.toString())},10)}},{key:"dataChanged",value:function(t){var i=this;setTimeout(function(){i.sub&&i.sub.unsubscribe(),i.refresh.emit()},1e3)}},{key:"dayDataChanged",value:function(t){this.loadProgramByUserId(!1)}},{key:"weekCreated",value:function(t){var i=this,e=this;t.days.forEach(function(t,n){var o,a;t.InitiateItems();var r=i.selectedDays.items.filter(function(e){return i.dateService.isSameDate(new Date(e.assignedNutritionProgramDay.calendarDate),t.startDate)});if(r.length>0){var s=r[0].assignedNutritionProgramDay;t.addItem(new c.h(s.id,s.name,t,new d.k(s.nutritionProgramName,s.nutritionProgramId,s)))}else{var u=((null===(o=e.selectedDaysSimple)||void 0===o?void 0:o.items)||[]).filter(function(e){return i.dateService.isSameDate(new Date(e.calendarDate),t.startDate)});if(u.length>0){var l=e.getSelectedDay(u[0]);if(l){var g=l.assignedNutritionProgramDay;e.selectedDays.items=(null===(a=e.selectedDays)||void 0===a?void 0:a.items)||[];var p={};p.assignedNutritionProgramDay=g,e.setSelectedDay(p),t.addItem(new c.h(g.id,g.name,t,new d.k(g.nutritionProgramName,g.nutritionProgramId,g)))}else e.dayService.getWithDetailsAsync(i.selected,u[0].id,u[0].calendarDate).subscribe(function(i){var n;e.selectedDays.items=(null===(n=e.selectedDays)||void 0===n?void 0:n.items)||[];var o={};o.assignedNutritionProgramDay=i,e.selectedDays.items.push(o),t.addItem(new c.h(i.id,i.name,t,new d.k(i.nutritionProgramName,i.nutritionProgramId,i)))})}}})}},{key:"weekDeleted",value:function(t){}},{key:"itemDeletedBulk",value:function(t){var i={};i.ids=t.map(function(t){return t.itemId}),this.dayService.deleteBulk(i).subscribe()}},{key:"itemDeleted",value:function(t){}},{key:"itemEdited",value:function(t){this.modal.update(t.day,t.extraData,this.programConstrains)}},{key:"itemCreated",value:function(t){this.modal.create(t,this.selected,this.programConstrains)}},{key:"itemCopiedMoved",value:function(t){var i=this,e=[];t.data.forEach(function(t){var n;n={},console.log("itemCopiedMoved",t,t.day,t.item.extraData.assignedNutritionProgramId),n.newDayDate=i.dateService.removeUtcDate(t.day.startDate).toISOString(),n.oldDayId=t.item.itemId,n.oldDayDate=i.dateService.removeUtcDate(t.item.day.startDate).toISOString(),n.OldProgramId=t.item.extraData.assignedNutritionProgramId,e.push(n)});var n={};n.copy=t.isCopy,n.programId=this.selected,n.moveData=e,this.pastData=t.data,this.pastDataInput=n,this.isShowPastModal=!0,n.copy&&1===this.pastDataInput.moveData.length?this.multiplay.show(1):(this.pastDataInput.adjustValues=0,this.pastConfimed())}},{key:"onMultiplyConfirm",value:function(t){var i=t-1;i=i<0?0:i,this.pastDataInput.multiplyFactor=i,this.pastConfimed()}},{key:"getDayKey",value:function(t){var i="assinged_nt_".concat(t.assignedNutritionProgramId,"_").concat(t.calendarDate).replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",i),i}},{key:"setSelectedDay",value:function(t){this.selectedDays.items.push(t);try{var i=this.getDayKey(t.assignedNutritionProgramDay),e=JSON.stringify({on:Date(),data:t});this.localCacheService.put(i,e,this.ttl)}catch(n){this.clearStorage()}}},{key:"clearStorage",value:function(){for(var t in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)t.startsWith("assinged_")&&localStorage.removeItem(t)}},{key:"getSelectedDay",value:function(t){var i,e,n=this,o=this.getDayKey(t),a=this.localCacheService.get(o);if(!a||0===a.length)return null;var r=JSON.parse(a);return(null===(e=null===(i=null==r?void 0:r.data)||void 0===i?void 0:i.assignedNutritionProgramDay)||void 0===e?void 0:e.calendarDate)&&r.on?(r.data.assignedNutritionProgramDay.calendarDate=new Date(r.data.assignedNutritionProgramDay.calendarDate),this.isForceRefresh?(setTimeout(function(){n.isForceRefresh=!1},2e3),null):r.data):null}},{key:"refreshCache",value:function(){var t=this;t.clearStorage(),t.selectedDays.items=[],t.selectedDaysSimple.items=[],t.loadSimpleDays(function(){t.isForceRefresh=!0,t.board.calendarService.boardDto.weeks.forEach(function(i,e){i.isVisible&&t.weekCreated(i)})})}},{key:"pastConfimed",value:function(){var t=this,i=this,e=i.pastDataInput,n=[];i.pastData.forEach(function(e){var o;(o={}).newDayDate=i.dateService.removeUtcDate(e.day.startDate).toISOString(),o.oldDayId=e.item.itemId,o.oldDayDate=t.dateService.removeUtcDate(e.item.day.startDate).toISOString(),o.OldProgramId=e.item.extraData.assignedNutritionProgramId,console.log("pastConfimed",e,e.item.extraData.assignedNutritionProgramId),n.push(o)}),i.programService.moveItemByInput(e).subscribe(function(t){i.pastData.forEach(function(t){i.selectedDays.items=i.selectedDays.items.filter(function(i){return i.assignedNutritionProgramDay.id!=t.item.itemId}),i.board.deattachItem(t.item)}),t.items.forEach(function(t){i.selectedDays.items=i.selectedDays.items.filter(function(i){return i.assignedNutritionProgramDay.id!=t.assignedNutritionProgramDay.id}),i.setSelectedDay(t);var e=new c.h(t.assignedNutritionProgramDay.id,t.assignedNutritionProgramDay.name,void 0,new d.k(t.assignedNutritionProgramDay.nutritionProgramName,t.assignedNutritionProgramDay.nutritionProgramId,t.assignedNutritionProgramDay));i.board.attachItemOnDate(e,new Date(t.assignedNutritionProgramDay.calendarDate))}),i.toaster.success("::Pasted","::ItemsPasteSuccessfully"),i.analyticsService.log(f.O.do_past_Program_assigned_nutrition)})}},{key:"onAssigned",value:function(t){var i=this;setTimeout(function(){i.sub&&i.sub.unsubscribe(),i.refresh.emit()},100)}},{key:"isCurrentUserAdmin",get:function(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}]),t}();return t.\u0275fac=function(i){return new(i||t)(s.Y36(r.XNV),s.Y36(r.vR3),s.Y36(h.Jq),s.Y36(h.BA),s.Y36(v.YP),s.Y36(u.R),s.Y36(y.gz),s.Y36(g.v),s.Y36(b.F),s.Y36(y.F0),s.Y36(N.C),s.Y36(v.MJ),s.Y36(r.$AH),s.Y36(f.y),s.Y36(D.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-assigned-nutrition-program-manage"]],viewQuery:function(t,i){var e;(1&t&&(s.Gf(jt,5),s.Gf(Ht,5),s.Gf(Gt,5)),2&t)&&(s.iGM(e=s.CRH())&&(i.modal=e.first),s.iGM(e=s.CRH())&&(i.board=e.first),s.iGM(e=s.CRH())&&(i.multiplay=e.first))},inputs:{traineeUserId:"traineeUserId"},outputs:{refresh:"refresh"},features:[s._Bn([r.XNV,u.R,g.v])],decls:14,vars:11,consts:[["class","d-flex bg-white rounded border",4,"ngIf"],[3,"hidden"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited",4,"ngIf"],[3,"dataChanged"],["modal",""],["assign",""],[3,"step","modalTitle","modalLabel","onConfirm"],["multiplay",""],["moveToLib",""],[1,"d-flex","bg-white","rounded","border"],[1,"col"],[1,"col-xl-4","col-lg-6"],[1,"py-5","fade-in-top","text-center"],[1,"fa","fa-exclamation-triangle","fa-3x","text-primary","mb-4"],[1,"text-muted"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["itemContent",""],["navContent",""],[1,"btn","btn-sm","btn-success",3,"click"],[3,"assignedNutritionDayModel","isSummary","day"],[1,"d-flex","justify-content-sm-end"],[1,"custom-control","custom-switch","p-0"],[1,"btn-group"],["class","btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-outline-success","btn-sm",3,"click"]],template:function(t,i){1&t&&(s.YNc(0,Vt,14,7,"div",0),s.YNc(1,Rt,13,6,"div",0),s.TgZ(2,"div",1),s.YNc(3,ii,8,1,"app-board-container",2),s.TgZ(4,"app-assigned-nutrition-program-modal-day",3,4),s.NdJ("dataChanged",function(t){return i.dayDataChanged(t)}),s.qZA(),s._UZ(6,"app-assign-nutrition-program",null,5),s.TgZ(8,"past-adjust",6,7),s.NdJ("onConfirm",function(t){return i.onMultiplyConfirm(t)}),s.ALo(10,"abpLocalization"),s.ALo(11,"abpLocalization"),s.qZA(),s.qZA(),s._UZ(12,"app-move-to-lib-nutrition-program",null,8)),2&t&&(s.Q6J("ngIf",i.isLoading&&!i.isAssigned),s.xp6(1),s.Q6J("ngIf",!i.isLoading&&i.scheduledNutritionProgramId),s.xp6(1),s.Q6J("hidden",i.scheduledNutritionProgramId),s.xp6(1),s.Q6J("ngIf",!i.isLoading&&i.isAssigned),s.xp6(5),s.s9C("modalTitle",s.lcZ(10,7,"::MultiplyValues")),s.s9C("modalLabel",s.lcZ(11,9,"::Multiply")),s.Q6J("step",1))},directives:[Z.O5,Mt,Ct.v,Pt.m,Ut,Lt.U,Bt],pipes:[r.fuE],encapsulation:2}),t}()},77266:function(i,e,a){"use strict";a.d(e,{k:function(){return d}});var r=a(69244),s=a(35366),u=a(63491),l=function(){function t(i){var e;o(this,t),this.onDeleted=new s.vpe,this.isEditing=!0,this.isDeleted=!1,this.id=i.id,this.nutrition=i.nutrition,this.nutritionNote=i.nutritionNote,this.quantity=i.quantity,this.optionId=i.optionId,this.done=i.done,this.actualCalorie=this.done?i.quantity*(null===(e=i.nutrition)||void 0===e?void 0:e.calories):0}return n(t,[{key:"getCalorie",value:function(){return this.nutrition?this.nutrition.calories*this.quantity:null}},{key:"getCarbs",value:function(){return this.nutrition?this.nutrition.carbs*this.quantity:null}},{key:"getProteins",value:function(){return this.nutrition?this.nutrition.proteins*this.quantity:null}},{key:"getFats",value:function(){return this.nutrition?this.nutrition.fats*this.quantity:null}},{key:"getNutritionTotals",value:function(){var t=new u.C,i=this.quantity||0;return this.nutrition&&(t.calorie=this.nutrition.calories*i,t.carbs=this.nutrition.carbs*i,t.fats=this.nutrition.fats*i,t.proteins=this.nutrition.proteins*i),t}},{key:"getImage",value:function(){var t;return null===(t=this.nutrition)||void 0===t?void 0:t.imageAttachmentId}},{key:"edit",value:function(){this.isEditing=!0,this.backup={nutrition:this.nutrition,quantity:this.quantity}}},{key:"cancel",value:function(){this.backup&&this.backup.nutrition?(this.isEditing=!1,this.nutrition=this.backup.nutrition,this.quantity=this.backup.quantity):this.delete()}},{key:"quantityIsInvalid",value:function(){return!this.quantity||this.quantity<0}},{key:"nutritionIsInvalid",value:function(){return!this.nutrition}},{key:"hasErrors",value:function(){return this.quantityIsInvalid()||this.nutritionIsInvalid()}},{key:"save",value:function(){this.hasErrors()||(this.isEditing=!1)}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"convertToDto",value:function(){var t,i={};return i.id=this.id,i.nutritionId=null===(t=this.nutrition)||void 0===t?void 0:t.id,i.nutritionNote=this.nutritionNote,i.optionId=this.optionId,i.nutrition=this.nutrition,i.quantity=this.quantity||void 0,i}},{key:"NutritionNoteVisible",get:function(){var t;return this._NutritionNoteVisible||(null!==(t=this.nutritionNote)&&void 0!==t?t:"").length>0},set:function(t){this._NutritionNoteVisible=t,t||(this.nutritionNote=void 0)}}]),t}(),c=function(){function t(i){var e=this;o(this,t),this.onDeleted=new s.vpe,this.details=[],this.visibleOption2=!1,this.visibleOption3=!1,this.selectedOptionId=1,this.isDeleted=!1,this.actualCalorie=0,this.isAddingNewItem=!1,this.id=i.id,this.name=i.mealName,this.mealNotes1=i.mealNotes1,this.mealNotes2=i.mealNotes2,this.mealNotes3=i.mealNotes3,this.selectedOptionId=i.selectedOptionId||1,i.assignedNutritionProgramDayItemDetails&&i.assignedNutritionProgramDayItemDetails.length>0?i.assignedNutritionProgramDayItemDetails.forEach(function(t){e.appendGroup(t)}):this.addFakeData()}return n(t,[{key:"detailsUnDeletedForActiveOption",get:function(){var t=this;return this.details.filter(function(i){return!i.isDeleted&&i.optionId==t.selectedOptionId})}},{key:"detailsUnDeleted",get:function(){return this.details.filter(function(t){return!t.isDeleted})}},{key:"GetDetailsUnDeletedForActiveOptionVisible",value:function(t){return!(2!==t||!this.visibleOption2)||!(3!==t||!this.visibleOption3)||this.details.filter(function(i){return!i.isDeleted&&i.optionId==t}).length>0}},{key:"addOption",value:function(){return this.GetDetailsUnDeletedForActiveOptionVisible(2)?this.GetDetailsUnDeletedForActiveOptionVisible(3)?void 0:(this.visibleOption3=!0,void(this.selectedOptionId=3)):(this.visibleOption2=!0,void(this.selectedOptionId=2))}},{key:"addFakeData",value:function(){}},{key:"appendGroup",value:function(t){t.optionId=t.optionId||this.selectedOptionId;var i=new l(t);return this.details.push(i),this.listenToDelete(i),i}},{key:"listenToDelete",value:function(t){var i=this;t.onDeleted.subscribe(function(t){0==i.detailsUnDeleted.length&&i.delete()})}},{key:"isEditing",value:function(){var t=!1;return this.detailsUnDeleted.forEach(function(i){t=t||i.isEditing}),t}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"addNewDetail",value:function(t){var i=this.selectedOptionId;if(this.detailsUnDeleted.length>0){var e=this.detailsUnDeleted[this.detailsUnDeleted.length-1];if(e.optionId===i&&!e.nutrition)return e.nutrition=t,void(e.quantity=1);if(e.optionId===i&&e.nutrition.id==t.id)return void(e.quantity=(e.quantity||0)+1)}var n={};t&&(console.log("adding-detail-1",t),n.nutrition=t,n.nutritionId=t.id,n.optionId=i,n.quantity=1),this.appendGroup(n).edit()}},{key:"isValid",value:function(){var t=!0;return this.detailsUnDeleted.forEach(function(t){t.save()}),this.detailsUnDeleted.forEach(function(i){t&&(t=!i.hasErrors())}),this.detailsUnDeleted.forEach(function(t){t.edit()}),t}},{key:"convertToDto",value:function(){var t={};return t.id=this.id,t.mealName=this.name,t.mealNotes1=this.mealNotes1,t.mealNotes2=this.mealNotes2,t.mealNotes3=this.mealNotes3,t.selectedOptionId=this.selectedOptionId,t.assignedNutritionProgramDayItemDetails=[],this.detailsUnDeleted.forEach(function(i){t.assignedNutritionProgramDayItemDetails.push(i.convertToDto())}),t}},{key:"getCalorie",value:function(){var t=0,i=0;return this.detailsUnDeletedForActiveOption.forEach(function(e){t+=e.getCalorie(),i+=e.actualCalorie||0}),this.actualCalorie=i,t}},{key:"getCarbs",value:function(){var t=0;return this.detailsUnDeletedForActiveOption.forEach(function(i){t+=i.getCarbs(),i.actualCalorie||0}),t}},{key:"getProteins",value:function(){var t=0;return this.detailsUnDeletedForActiveOption.forEach(function(i){t+=i.getProteins(),i.actualCalorie||0}),t}},{key:"getFats",value:function(){var t=0;return this.detailsUnDeletedForActiveOption.forEach(function(i){t+=i.getFats(),i.actualCalorie||0}),t}},{key:"getNutritionTotals",value:function(){var t=new u.C;return this.detailsUnDeletedForActiveOption.forEach(function(i){t.add(i.getNutritionTotals())}),t}},{key:"mealNotes",get:function(){return 1===this.selectedOptionId?this.mealNotes1:2===this.selectedOptionId?this.mealNotes2:3===this.selectedOptionId?this.mealNotes3:void 0},set:function(t){1===this.selectedOptionId&&(this.mealNotes1=t),2===this.selectedOptionId&&(this.mealNotes2=t),3===this.selectedOptionId&&(this.mealNotes3=t)}}]),t}(),d=function(){function i(t,e,n){var a=this;o(this,i),this.nutritionProgramName=t,this.nutritionProgramId=e,this.onDelete=new s.vpe,this.nutritionDayItems=[],this.isEditingMealName=!1,this.actualCalorie=0,n&&(this.id=n.id,this.dayNumber=n.dayNumber,this.name=n.name||" ",this.calendarDate=n.calendarDate,this.lastModificationTime=n.lastModificationTime,this.completePercent=n.completePercent,this.totalDayCaloriesMin=n.totalDayCaloriesMin,this.totalDayCaloriesMax=n.totalDayCaloriesMax,this.assignedNutritionProgramId=n.assignedNutritionProgramId,n.assignedNutritionProgramDayItems&&n.assignedNutritionProgramDayItems.length>0?n.assignedNutritionProgramDayItems.forEach(function(t){a.add(t)}):this.addFakeData())}return n(i,[{key:"nutritionDayItemsUnDeleted",get:function(){return this.nutritionDayItems.filter(function(t){return!t.isDeleted})}},{key:"addFakeData",value:function(){}},{key:"add",value:function(t){var i=this,e=i.nutritionDayItemsUnDeleted.filter(function(i){return i.name==t.mealName});if(e.length>0)return e[0];var n=new c(t);return n.onDeleted.subscribe(function(t){i.onDelete.emit(i.nutritionDayItemsUnDeleted.length)}),this.nutritionDayItems.push(n),n}},{key:"addNewDetail",value:function(t){var i={};i.mealName=t,this.add(i).addNewDetail()}},{key:"convertToDto",value:function(){var t={};return t.id=this.id,t.dayNumber=this.dayNumber,t.assignedNutritionProgramId=this.assignedNutritionProgramId,t.calendarDate=this.calendarDate,t.totalDayCaloriesMin=this.totalDayCaloriesMin,t.totalDayCaloriesMax=this.totalDayCaloriesMax,t.lastModificationTime=this.lastModificationTime,t.completePercent=this.completePercent,t.nutritionProgramId=this.nutritionProgramId,t.name=this.name,t.assignedNutritionProgramDayItems=[],this.nutritionDayItemsUnDeleted.forEach(function(i){t.assignedNutritionProgramDayItems.push(i.convertToDto())}),t}},{key:"isAllSuperSetsValid",value:function(){var t=!0;return this.nutritionDayItemsUnDeleted.forEach(function(t){t.isValid()}),this.nutritionDayItemsUnDeleted.forEach(function(i){t&&(t=i.isValid())}),t}},{key:"isEditing",value:function(){var t=!1;return this.nutritionDayItemsUnDeleted.forEach(function(i){t=t||i.isEditing()}),t}},{key:"getCalorie",value:function(){var t=0,i=0;return this.nutritionDayItemsUnDeleted.forEach(function(e){t+=e.getCalorie(),i+=e.actualCalorie||0}),this.actualCalorie=i,t}},{key:"getCarbs",value:function(){var t=0;return this.nutritionDayItemsUnDeleted.forEach(function(i){t+=i.getCarbs(),i.actualCalorie||0}),t}},{key:"getProteins",value:function(){var t=0;return this.nutritionDayItemsUnDeleted.forEach(function(i){t+=i.getProteins(),i.actualCalorie||0}),t}},{key:"getFats",value:function(){var t=0;return this.nutritionDayItemsUnDeleted.forEach(function(i){t+=i.getFats(),i.actualCalorie||0}),t}},{key:"getNutritionTotals",value:function(){var t=new u.C;return this.nutritionDayItemsUnDeleted.forEach(function(i){t.add(i.getNutritionTotals())}),t}},{key:"up",value:function(i){var e=t(this.nutritionDayItemsUnDeleted),n=e.indexOf(i);(0,r.bA)(e,n,n+1),this.nutritionDayItems=e}},{key:"down",value:function(i){var e=t(this.nutritionDayItemsUnDeleted),n=e.indexOf(i);(0,r.bA)(e,n,n-1),this.nutritionDayItems=e}}]),i}()}}])}();