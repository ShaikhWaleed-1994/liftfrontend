(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[76317],{76317:function(t,e,n){"use strict";n.r(e),n.d(e,{ChatRoomModule:function(){return Dt}});var o=n(46700),s=n(55679),i=n(10135),a=n(99046),c=n(83845),r=n(73756),g=n(56410),d=n(11520),h=n(35366),l=n(2996),p=n(45908),m=n(99624);let u=(()=>{class t{constructor(){this.isUserPremitToRecord=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=n(61116);const M=["aud"];function C(t,e){if(1&t&&h._UZ(0,"audio",6,7),2&t){const t=h.oxw();h.Q6J("src",t.audio,h.LSH)}}function x(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){return h.CHM(t),h.oxw().clear()}),h._UZ(1,"i",9),h.qZA()}}function _(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",10),h.NdJ("click",function(){return h.CHM(t),h.oxw().startPlaying()}),h._UZ(1,"i",11),h.qZA()}}function P(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",12),h.NdJ("click",function(){return h.CHM(t),h.oxw().sendVoice()}),h._UZ(1,"i",13),h.qZA()}}function b(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",8),h.NdJ("click",function(){return h.CHM(t),h.oxw().stopPlaying()}),h._UZ(1,"i",14),h.qZA()}}function O(t,e){1&t&&h._UZ(0,"i",18)}function v(t,e){1&t&&h._UZ(0,"i",19)}const w=function(t,e){return{"btn-default text-danger":t,"btn-danger":e}};function T(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",15),h.NdJ("click",function(){return h.CHM(t),h.oxw().ClickRecord()}),h.YNc(1,O,1,0,"i",16),h.YNc(2,v,1,0,"i",17),h.qZA()}if(2&t){const t=h.oxw();h.Q6J("ngClass",h.WLB(3,w,0==t.currentRecordLength,t.currentRecordLength>0)),h.xp6(1),h.Q6J("ngIf",0==t.currentRecordLength),h.xp6(1),h.Q6J("ngIf",t.currentRecordLength>0)}}let y=(()=>{class t{constructor(t,e,n,o){this.cd=t,this.dom=e,this.voiceSettingsService=n,this.localizationService=o,this.chunks=[],this.isEditable=!0,this.hasRecording=!1,this.maxVoiceLengthPerSec=3,this.isUserPremitToRecordOld=!1,this.fileChanged=new h.vpe,this.sendFileClicked=new h.vpe,this.whenRecording=new h.vpe,this.whenPermitRejected=new h.vpe,this.recordingPercentValueChanged=new h.vpe,this.isPlaying=!1,this.wasDestroed=!1,this.currentRecordLengthValue=0,this.lastRecordLengthPerSec=0,this.currentRecordLength=0}set src(t){if(null!==t){const e=URL.createObjectURL(t);this.audio=this.dom.bypassSecurityTrustUrl(e)}}get isUserPremitToRecord(){const t=this.voiceSettingsService.isUserPremitToRecord;return this.isUserPremitToRecordOld!==t&&(this.isUserPremitToRecordOld=t),t}set isUserPremitToRecord(t){this.voiceSettingsService.isUserPremitToRecord=t}set currentRecordLength(t){this.currentRecordLengthValue=t,0!==t&&(this.lastRecordLengthPerSec=100*t)}get currentRecordLength(){return this.currentRecordLengthValue}ngOnInit(){this.voiceSettingsService.isUserPremitToRecord=!0,this.currentLang=this.localizationService.currentLang}ngOnDestroy(){this.wasDestroed=!0,this.clear()}InitializeAndStartRecord(){navigator.mediaDevices.getUserMedia({audio:!0}).then(t=>{this.lsatStram=t,this.mediaRecorder=new MediaRecorder(t),this.mediaRecorder.onstop=t=>{const e=Math.floor(1e3*Math.random()+1);this.lastFileRecorded=this.chunks;const n=new File(this.chunks,`voice${e}`,{type:"audio/ogg; codecs=opus"});this.fileChanged.emit(n),this.chunks=[];const o=URL.createObjectURL(n);this.audio=this.dom.bypassSecurityTrustUrl(o),this.cd.detectChanges(),this.clearStream()},this.mediaRecorder.ondataavailable=t=>{this.chunks.push(t.data)},this.startRecording()},()=>{this.whenPermitRejected.emit()})}ClickRecord(){this.currentRecordLength>0?this.stopRecording():this.InitializeAndStartRecord()}startRecording(){this.mediaRecorder&&(this.hasRecording=!1,this.mediaRecorder.start(),this.timeoutHandler=setInterval(()=>{this.currentRecordLength+=1;const t=this.recordingPercentValue();t>100?this.stopRecording():(this.whenRecording.emit(100*this.currentRecordLength),this.recordingPercentValueChanged.emit(t))},100))}stopRecording(){this.wasDestroed||(this.mediaRecorder.stop(),this.timeoutHandler&&(clearInterval(this.timeoutHandler),this.currentRecordLength>0&&(this.hasRecording=!0),this.currentRecordLength=0,this.timeoutHandler=null),document.getElementById("recordBtn").blur())}clear(){this.hasRecording=!1,this.whenRecording.emit(0),this.recordingPercentValueChanged.emit(0),this.clearStream()}recordingPercentValue(){return 10*this.currentRecordLength/this.maxVoiceLengthPerSec}startPlaying(){this.isPlaying=!0,this.audioElement.nativeElement.play(),setTimeout(()=>{this.isPlaying=!1},this.lastRecordLengthPerSec)}stopPlaying(){this.audioElement.nativeElement.pause(),this.isPlaying=!1}sendVoice(){const t=Date.now(),e=new File(this.lastFileRecorded,`${t}.aac`,{type:"audio/ogg; codecs=opus"});this.sendFileClicked.emit(e),this.clear()}showRecordBtn(){return!this.hasRecording&&this.isEditable&&this.isUserPremitToRecord}clearStream(){this.lsatStram&&this.lsatStram.getTracks().forEach(t=>t.stop())}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(h.sBO),h.Y36(m.H7),h.Y36(u),h.Y36(o.oQ8))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-voice"]],viewQuery:function(t,e){if(1&t&&h.Gf(M,5),2&t){let t;h.iGM(t=h.CRH())&&(e.audioElement=t.first)}},inputs:{src:"src",isEditable:"isEditable",hasRecording:"hasRecording",maxVoiceLengthPerSec:"maxVoiceLengthPerSec"},outputs:{fileChanged:"fileChanged",sendFileClicked:"sendFileClicked",whenRecording:"whenRecording",whenPermitRejected:"whenPermitRejected",recordingPercentValueChanged:"recordingPercentValueChanged"},decls:7,vars:6,consts:[["controls","true","hidden","",3,"src",4,"ngIf"],[1,"panel-body"],["class","btn btn-danger btn-circle","type","button",3,"click",4,"ngIf"],["class","btn btn-warning btn-circle","type","button",3,"click",4,"ngIf"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],["class","btn btn-circle","id","recordBtn","type","button",3,"ngClass","click",4,"ngIf"],["controls","true","hidden","",3,"src"],["aud",""],["type","button",1,"btn","btn-danger","btn-circle",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-warning","btn-circle",3,"click"],[1,"fa","fa-volume-down"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-paper-plane"],[1,"fa","fa-square"],["id","recordBtn","type","button",1,"btn","btn-circle",3,"ngClass","click"],["class","fa fa-microphone",4,"ngIf"],["class","fa fa-record-vinyl",4,"ngIf"],[1,"fa","fa-microphone"],[1,"fa","fa-record-vinyl"]],template:function(t,e){1&t&&(h.YNc(0,C,2,1,"audio",0),h.TgZ(1,"div",1),h.YNc(2,x,2,0,"button",2),h.YNc(3,_,2,0,"button",3),h.YNc(4,P,2,0,"button",4),h.YNc(5,b,2,0,"button",2),h.YNc(6,T,3,6,"button",5),h.qZA()),2&t&&(h.Q6J("ngIf",e.audio),h.xp6(2),h.Q6J("ngIf",e.hasRecording&&!e.isPlaying&&e.isEditable),h.xp6(1),h.Q6J("ngIf",e.hasRecording&&!e.isPlaying),h.xp6(1),h.Q6J("ngIf",e.hasRecording&&!e.isPlaying),h.xp6(1),h.Q6J("ngIf",e.hasRecording&&e.isPlaying),h.xp6(1),h.Q6J("ngIf",e.showRecordBtn()))},directives:[f.O5,f.mk],styles:[".btn-circle[_ngcontent-%COMP%]{border-radius:50%}.panel-body[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.panel-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;text-align:center;width:34px;height:34px;font-size:18px;line-height:34px;border-radius:50%;border:none;box-shadow:none;margin:0 5px}.panel-body[_ngcontent-%COMP%]   button#recordBtn[_ngcontent-%COMP%], .panel-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin:0}"]}),t})();var Z=n(29609),I=n(65122);let A=(()=>{class t{constructor(t){this.restService=t,this.apiName="Default",this.delete=t=>this.restService.request({method:"DELETE",url:"/api/app/chat",params:{id:t}},{apiName:this.apiName}),this.getList=t=>this.restService.request({method:"GET",url:"/api/app/chat",params:{filterText:t.filterText,skipCount:t.skipCount,maxResultCount:t.maxResultCount}},{apiName:this.apiName}),this.getMessageList=(t,e)=>this.restService.request({method:"GET",url:`/api/app/chat/${t}`,params:{afterDate:e.afterDate,beforeDate:e.beforeDate,maxResultCount:e.maxResultCount}},{apiName:this.apiName}),this.send=t=>this.restService.request({method:"POST",url:"/api/app/chat",body:t},{apiName:this.apiName}),this.sendToAll=t=>this.restService.request({method:"POST",url:"/api/app/chat/broadcast",body:t},{apiName:this.apiName})}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(o.vgb))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var S=n(28157),k=n(92338),q=n(42693);let N=(()=>{class t{constructor(t,e){this.environment=t,this.http=e}getBaseUrl(){return this.environment.getApiUrl()}getActionUrl(){return"/api/app/attachment-details"}sendFile(t,e){var n=this.getBaseUrl()+this.getActionUrl()+"?AttachmentId=0&Entity=chat",o=new FormData;return o.append("Attachmentfiles",t),o.append("filename",t.name),this.http.post(n,o).subscribe(t=>{e.emit(t.attachmentId)})}}return t.\u0275fac=function(e){return new(e||t)(h.LFG(o.L$R),h.LFG(q.eN))},t.\u0275prov=h.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var L=n(42373),R=n(43252),J=n(31041),U=n(79603),E=n(66553),B=n(23733),Y=n(17647),D=n(1663),F=n(52201);let Q=(()=>{class t{transform(t){return(t||"").replace("\r\n","<br>").replace("\n","<br>")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=h.Yjl({name:"multiline",type:t,pure:!0}),t})();const H=["chatAttachmentId"];function z(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",28),h.NdJ("click",function(){return h.CHM(t),h.oxw().showPopup()}),h._UZ(1,"i",29),h.qZA()}}function V(t,e){1&t&&(h.TgZ(0,"div",30),h._uU(1),h.ALo(2,"abpLocalization"),h.qZA()),2&t&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"::RejectedMicPermission")," "))}function G(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",4),h.TgZ(1,"div",33),h.TgZ(2,"div",37),h.TgZ(3,"label",38),h.TgZ(4,"input",39),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw(2).checkAll=e})("change",function(e){return h.CHM(t),h.oxw(2).checkChanged(e)}),h.qZA(),h.TgZ(5,"div",40),h.TgZ(6,"span",41),h._uU(7),h.ALo(8,"abpLocalization"),h.qZA(),h.TgZ(9,"span",42),h._uU(10),h.ALo(11,"abpLocalization"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(12,"div",43),h.TgZ(13,"button",44),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).friendsListToggle()}),h._uU(14),h.ALo(15,"abpLocalization"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.xp6(4),h.Q6J("ngModel",t.checkAll),h.xp6(3),h.Oqu(h.lcZ(8,4,"::SwitchAll")),h.xp6(3),h.Oqu(h.lcZ(11,6,"::SwitchSelectedOnly")),h.xp6(4),h.hij(" ",h.lcZ(15,8,"::StartSend")," ")}}function j(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",31),h.TgZ(1,"div",32),h.TgZ(2,"div",33),h.TgZ(3,"div",14),h.TgZ(4,"input",34),h.NdJ("change",function(e){return h.CHM(t),h.oxw().sendToAllCheck(e)})("ngModelChange",function(e){return h.CHM(t),h.oxw().sendToAll=e}),h.qZA(),h.TgZ(5,"label",35),h._uU(6),h.ALo(7,"abpLocalization"),h.qZA(),h.qZA(),h.YNc(8,G,16,10,"div",36),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(4),h.Q6J("ngModel",t.sendToAll),h.xp6(2),h.Oqu(h.lcZ(7,3,"::SendToAll")),h.xp6(2),h.Q6J("ngIf",t.sendToAll)}}function $(t,e){1&t&&(h.TgZ(0,"div",45),h._UZ(1,"div"),h.qZA())}function W(t,e){if(1&t&&(h.TgZ(0,"h6",58),h._uU(1),h.qZA()),2&t){const t=h.oxw(2).row;h.xp6(1),h.Oqu(t.coachNote)}}function X(t,e){1&t&&(h.TgZ(0,"div",59),h._uU(1," \xa0 "),h.qZA())}const K=function(t){return{attachmentId:t,entity:"TraineeProfile"}};function tt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"a",47),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().row;return h.oxw().selectChat(e)}),h.TgZ(1,"div",48),h.TgZ(2,"div",49),h.TgZ(3,"div",50),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().row;return h.oxw().divCheckClick(e)}),h._UZ(4,"i",51),h.qZA(),h.TgZ(5,"img",52),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().row;return h.oxw().divCheckClick(e)}),h.ALo(6,"async"),h.ALo(7,"imgdownload"),h.qZA(),h.qZA(),h.TgZ(8,"div",53),h.TgZ(9,"h6",54),h._uU(10),h.qZA(),h.YNc(11,W,2,1,"h6",55),h.TgZ(12,"p"),h._uU(13),h.qZA(),h.qZA(),h.qZA(),h.TgZ(14,"div",56),h._uU(15),h.ALo(16,"date"),h.YNc(17,X,2,0,"div",57),h.qZA(),h.qZA()}if(2&t){const t=h.oxw().row,e=h.oxw();h.Gre("contact ",e.selected&&e.selected.id==t.id?"active":"deactive-msg",""),h.xp6(3),h.Q6J("ngClass",e.sendToAll&&!e.isExcluded(t)?"shown":"hidden"),h.xp6(2),h.Q6J("src",h.lcZ(6,13,h.lcZ(7,15,h.VKq(19,K,t.photoAttachmentId))),h.LSH),h.xp6(5),h.Oqu(t.traineeName),h.xp6(1),h.Q6J("ngIf",t.coachNote),h.xp6(1),h.Tol(t.totalUnseenMessages>0?"msg-bold latest-message":"latest-message"),h.xp6(1),h.hij(" ",t.latestMessageText," "),h.xp6(2),h.hij("",h.lcZ(16,17,t.latestMessageDate)," "),h.xp6(2),h.Q6J("ngIf",t.totalUnseenMessages>0)}}function et(t,e){1&t&&h.YNc(0,tt,18,21,"a",46),2&t&&h.Q6J("ngIf",!e.row.isArchived)}function nt(t,e){1&t&&(h.TgZ(0,"div",60),h.TgZ(1,"div",61),h._UZ(2,"i",62),h.TgZ(3,"h5"),h._uU(4),h.ALo(5,"abpLocalization"),h.qZA(),h.qZA(),h.qZA()),2&t&&(h.xp6(4),h.Oqu(h.lcZ(5,1,"::SelectUserToShowChat")))}function ot(t,e){if(1&t&&(h.TgZ(0,"h6",91),h._uU(1),h.qZA()),2&t){const t=h.oxw(3);h.xp6(1),h.Oqu(t.selected.coachNote)}}function st(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",85),h.TgZ(1,"div",86),h._uU(2),h.ALo(3,"slice"),h.ALo(4,"uppercase"),h.qZA(),h.TgZ(5,"strong",87),h._uU(6),h.qZA(),h.TgZ(7,"button",88),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).navigateToSelected()}),h._UZ(8,"i",89),h.qZA(),h.YNc(9,ot,2,1,"h6",90),h.qZA()}if(2&t){const t=h.oxw(2);h.xp6(2),h.hij(" ",h.Dn7(3,3,h.lcZ(4,7,t.selected.traineeName),0,1)," "),h.xp6(4),h.Oqu(t.selected.traineeName),h.xp6(3),h.Q6J("ngIf",t.selected.coachNote)}}function it(t,e){if(1&t&&(h.TgZ(0,"p"),h._uU(1),h.ALo(2,"date"),h.qZA()),2&t){const t=h.oxw(2).$implicit;h.xp6(1),h.hij(" ",h.lcZ(2,1,t.sendDate),"")}}function at(t,e){if(1&t&&(h.TgZ(0,"p",106),h.TgZ(1,"span"),h._UZ(2,"div",107),h.ALo(3,"multiline"),h.qZA(),h.qZA()),2&t){const t=h.oxw(3).$implicit,e=h.oxw(2);h.xp6(1),h.Tol(e.isUnseen(t.replyToMessage)?"msg-bold":""),h.xp6(1),h.Q6J("innerHTML",h.lcZ(3,4,t.replyToMessage.message),h.oJD)}}function ct(t,e){1&t&&h._UZ(0,"i",108)}function rt(t,e){if(1&t&&(h.TgZ(0,"div",109),h._UZ(1,"sw-attachment",110),h.qZA()),2&t){const t=h.oxw(3).$implicit;h.xp6(1),h.Q6J("AttachmentId",t.replyToMessage.attachmentId)("readonly",!0)("isThumbnail",!0)}}function gt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div"),h.TgZ(1,"div",105),h.TgZ(2,"div",47),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2).$implicit;return h.oxw(2).searchStart(e.replyToMessage)}),h.TgZ(3,"div",97),h.YNc(4,at,4,6,"p",98),h.YNc(5,ct,1,0,"i",103),h.qZA(),h.YNc(6,rt,2,3,"div",104),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2).$implicit,e=h.oxw(2);h.MT6("msg-reply msg-con media msg-type-",t.replyToMessage.messageType," w-85 ml",t.sentByTrainee?"-auto":"",""),h.xp6(2),h.Gre("msg-body ",t.replyToMessage.sentByTrainee?"trainer":"trainee",""),h.xp6(1),h.Q6J("ngClass",t.replyToMessage.messageType==e.ChatMessageType.Text?"justify-content-between":"justify-content-end"),h.xp6(1),h.Q6J("ngIf",t.replyToMessage.messageType==e.ChatMessageType.Text),h.xp6(1),h.Q6J("ngIf",e.isMessageBeingDeleted(t.replyToMessage.id)),h.xp6(1),h.Q6J("ngIf",t.replyToMessage.messageType!=e.ChatMessageType.Text)}}function dt(t,e){if(1&t&&(h.TgZ(0,"p",106),h.TgZ(1,"span"),h._UZ(2,"div",107),h.ALo(3,"multiline"),h.qZA(),h.qZA()),2&t){const t=h.oxw(2).$implicit,e=h.oxw(2);h.xp6(1),h.Tol(e.isUnseen(t)?"msg-bold":""),h.xp6(1),h.Q6J("innerHTML",h.lcZ(3,4,t.message),h.oJD)}}function ht(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"span",101),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2),n=e.$implicit,o=e.index;return h.oxw(2).deleteMessage(n.id,o)}),h._UZ(1,"i",111),h.qZA()}}function lt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"span",101),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2),n=e.$implicit,o=e.index;return h.oxw(2).saveMessage(n.id,o,n)}),h._UZ(1,"i",112),h.qZA()}}function pt(t,e){1&t&&h._UZ(0,"i",108)}function mt(t,e){if(1&t&&(h.TgZ(0,"div",109),h._UZ(1,"sw-attachment",110),h.qZA()),2&t){const t=h.oxw(2).$implicit;h.xp6(1),h.Q6J("AttachmentId",t.attachmentId)("readonly",!0)("isThumbnail",!0)}}function ut(t,e){1&t&&(h.TgZ(0,"span"),h._UZ(1,"i",113),h.qZA())}function ft(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",93),h.TgZ(1,"div",94),h.NdJ("dblclick",function(){h.CHM(t);const e=h.oxw().$implicit;return h.oxw(2).reply(e)}),h.YNc(2,it,3,3,"p",95),h.TgZ(3,"div"),h.YNc(4,gt,7,11,"div",96),h.TgZ(5,"div",97),h.YNc(6,dt,4,6,"p",98),h.TgZ(7,"span",99),h.YNc(8,ht,2,0,"span",100),h.YNc(9,lt,2,0,"span",100),h.TgZ(10,"span",101),h.NdJ("click",function(){h.CHM(t);const e=h.oxw().$implicit;return h.oxw(2).reply(e)}),h._UZ(11,"i",102),h.qZA(),h.qZA(),h.YNc(12,pt,1,0,"i",103),h.qZA(),h.YNc(13,mt,2,3,"div",104),h.TgZ(14,"p"),h.YNc(15,ut,2,0,"span",95),h._uU(16),h.ALo(17,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw().$implicit,e=h.oxw(2);h.MT6("msg-con media w-85 ml",t.sentByTrainee?"-auto":"","   searching-",(null==e.searchingMessage?null:e.searchingMessage.id)===t.id?"found":"not-found",""),h.s9C("id",t.id),h.xp6(2),h.Q6J("ngIf",t.firstMessageInDay),h.xp6(1),h.Gre("msg-body ",t.sentByTrainee?"trainer":"trainee",""),h.xp6(1),h.Q6J("ngIf",t.replyToMessage),h.xp6(1),h.Q6J("ngClass",t.messageType==e.ChatMessageType.Text?"justify-content-between":"justify-content-end"),h.xp6(1),h.Q6J("ngIf",t.messageType==e.ChatMessageType.Text),h.xp6(2),h.Q6J("ngIf",e.canDeleteMessage(t)),h.xp6(1),h.Q6J("ngIf",t.messageType==e.ChatMessageType.Text),h.xp6(3),h.Q6J("ngIf",e.isMessageBeingDeleted(t.id)),h.xp6(1),h.Q6J("ngIf",t.messageType!=e.ChatMessageType.Text),h.xp6(1),h.Gre("",t.sentByTrainee?"right":"left"," message-date small text-muted"),h.xp6(1),h.Q6J("ngIf",e.isSeenByTrainee(t)),h.xp6(1),h.hij(" ",h.xi3(17,21,t.sendDate,"h:mm a ")," ")}}function Mt(t,e){if(1&t&&(h.TgZ(0,"div"),h.YNc(1,ft,18,24,"div",92),h.qZA()),2&t){const t=e.$implicit,n=h.oxw(2);h.xp6(1),h.Q6J("ngIf",t.chatRoomId===(null==n.selected?null:n.selected.id))}}function Ct(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",114),h.TgZ(1,"button",115),h.NdJ("click",function(){const e=h.CHM(t).$implicit;return h.oxw(2).removedSavedMessage(e)}),h._UZ(2,"i",116),h.qZA(),h.TgZ(3,"span",47),h.NdJ("click",function(){const e=h.CHM(t).$implicit,n=h.oxw(2);return n.msgTxt=n.parseMessage(e.message)}),h._uU(4),h.qZA(),h.qZA()}if(2&t){const t=e.$implicit,n=h.oxw(2);h.xp6(4),h.hij(" ",n.parseMessage(t.message)," ")}}function xt(t,e){if(1&t&&(h.TgZ(0,"p",106),h.TgZ(1,"span"),h._UZ(2,"div",107),h.ALo(3,"multiline"),h.qZA(),h.qZA()),2&t){const t=h.oxw(3);h.xp6(1),h.Tol(t.isUnseen(t.replyMessage)?"msg-bold":""),h.xp6(1),h.Q6J("innerHTML",h.lcZ(3,4,t.replyMessage.message),h.oJD)}}function _t(t,e){1&t&&h._UZ(0,"i",108)}function Pt(t,e){if(1&t&&(h.TgZ(0,"div",109),h._UZ(1,"sw-attachment",110),h.qZA()),2&t){const t=h.oxw(3);h.xp6(1),h.Q6J("AttachmentId",t.replyMessage.attachmentId)("readonly",!0)("isThumbnail",!0)}}function bt(t,e){1&t&&(h.TgZ(0,"span"),h._UZ(1,"i",113),h.qZA())}const Ot=function(t){return{expanded:t}};function vt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",117),h.TgZ(1,"button",118),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).reply(null)}),h._UZ(2,"i",119),h.qZA(),h.TgZ(3,"div",93),h.TgZ(4,"div",120),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2);return e.reply(e.replyMessage)}),h.TgZ(5,"div"),h.TgZ(6,"div",97),h.YNc(7,xt,4,6,"p",98),h._UZ(8,"span"),h.YNc(9,_t,1,0,"i",103),h.qZA(),h.YNc(10,Pt,2,3,"div",104),h.TgZ(11,"p"),h.YNc(12,bt,2,0,"span",95),h._uU(13),h.ALo(14,"date"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.Q6J("ngClass",h.VKq(20,Ot,t.isExpanded)),h.xp6(3),h.Gre("msg-con media w-85 ml",t.replyMessage.sentByTrainee?"-auto":""," custom-zoom"),h.s9C("id",t.replyMessage.id),h.xp6(2),h.Gre("msg-body ",t.replyMessage.sentByTrainee?"trainer":"trainee",""),h.xp6(1),h.Q6J("ngClass",t.replyMessage.messageType==t.ChatMessageType.Text?"justify-content-between":"justify-content-end"),h.xp6(1),h.Q6J("ngIf",t.replyMessage.messageType==t.ChatMessageType.Text),h.xp6(2),h.Q6J("ngIf",t.isMessageBeingDeleted(t.replyMessage.id)),h.xp6(1),h.Q6J("ngIf",t.replyMessage.messageType!=t.ChatMessageType.Text),h.xp6(1),h.Gre("",t.replyMessage.sentByTrainee?"right":"left"," message-date small text-muted"),h.xp6(1),h.Q6J("ngIf",t.isSeenByTrainee(t.replyMessage)),h.xp6(1),h.hij(" ",h.xi3(14,17,t.replyMessage.sendDate,"h:mm a ")," ")}}const wt=function(t){return{width:t}};function Tt(t,e){if(1&t&&(h.TgZ(0,"div",121),h.TgZ(1,"div",122),h._uU(2),h.ALo(3,"number"),h.qZA(),h.TgZ(4,"div",123),h._uU(5),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(1),h.Q6J("ngStyle",h.VKq(6,wt,t.voicePercent+"%")),h.xp6(1),h.hij(" ",h.xi3(3,3,t.voiceTime/1e3,"1.0-0")," "),h.xp6(3),h.Oqu(t.voiceMaxLength)}}function yt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"textarea",128),h.NdJ("keyup.enter",function(){return h.CHM(t),h.oxw(3).sendEnter()})("ngModelChange",function(e){return h.CHM(t),h.oxw(3).msgTxt=e}),h.ALo(1,"abpLocalization"),h.qZA()}if(2&t){const t=h.oxw(3);h.s9C("placeholder",h.lcZ(1,3,"::TypeMessage")),h.Q6J("ngModel",t.msgTxt)("disabled",!t.selected&&!t.sendToAll)}}function Zt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"sw-attachment",129,130),h.NdJ("attachmentUpdated",function(e){return h.CHM(t),h.oxw(3).attachmentUpdated(e)})("ngModelChange",function(e){return h.CHM(t),h.oxw(3).attachmentId=e}),h.qZA()}if(2&t){const t=h.oxw(3);h.Q6J("isShowSuccessNotification",!t.isMobile)("ngModel",t.attachmentId)("acceptTypes",t.attachmentExt)("maxFilesCount",1)("maxFileSize",2e8)}}function It(t,e){if(1&t&&(h.TgZ(0,"div",124),h.YNc(1,yt,2,5,"textarea",125),h.TgZ(2,"div",126),h.YNc(3,Zt,2,5,"sw-attachment",127),h.qZA(),h.qZA()),2&t){const t=h.oxw(2);h.xp6(1),h.Q6J("ngIf",!t.attachmentExt),h.xp6(2),h.Q6J("ngIf",t.attachmentExt)}}function At(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"button",131),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2);return e.showAttachment(e.ChatMessageType.Text)}),h._UZ(1,"i",132),h.qZA()}}function St(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",133),h.TgZ(1,"button",134),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).attachmentsBtnsToggle()}),h._UZ(2,"i",135),h.qZA(),h.TgZ(3,"div",136),h.TgZ(4,"button",137),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2);return e.showAttachment(e.ChatMessageType.Voice)}),h._UZ(5,"i",138),h.qZA(),h.TgZ(6,"button",137),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2);return e.showAttachment(e.ChatMessageType.Image)}),h._UZ(7,"i",139),h.qZA(),h.TgZ(8,"button",137),h.NdJ("click",function(){h.CHM(t);const e=h.oxw(2);return e.showAttachment(e.ChatMessageType.Video)}),h._UZ(9,"i",140),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.Q6J("hidden",!t.isAllowAddAttachment),h.xp6(3),h.Q6J("ngClass",t.attachmentsBtnsState?"shown":"hidden")}}function kt(t,e){1&t&&h._UZ(0,"i",144)}function qt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",141),h.TgZ(1,"button",142),h.NdJ("click",function(){return h.CHM(t),h.oxw(2).sendMsg()}),h.YNc(2,kt,1,0,"i",143),h.qZA(),h.qZA()}if(2&t){const t=h.oxw(2);h.xp6(2),h.Q6J("ngIf",!t.isVoiceRecordBtnShown())}}function Nt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"app-voice",145,146),h.NdJ("whenRecording",function(e){return h.CHM(t),h.oxw(2).voiceLengthChange(e)})("recordingPercentValueChanged",function(e){return h.CHM(t),h.oxw(2).recordingPercentValueChanged(e)})("sendFileClicked",function(e){return h.CHM(t),h.oxw(2).sendFile(e)})("whenPermitRejected",function(){return h.CHM(t),h.oxw(2).onRecordSoundPermitRejected()}),h.qZA()}if(2&t){const t=h.oxw(2);h.Q6J("hasRecording",!1)("isEditable",!0)("maxVoiceLengthPerSec",t.voiceMaxLength)}}function Lt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",63),h.TgZ(1,"div",64),h.TgZ(2,"div",33),h.TgZ(3,"div",14),h.TgZ(4,"div",13),h.TgZ(5,"div",14),h.YNc(6,st,10,9,"div",65),h.qZA(),h.TgZ(7,"div",66),h.TgZ(8,"button",44),h.NdJ("click",function(){return h.CHM(t),h.oxw().friendsListToggle()}),h._UZ(9,"i",67),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",68),h.NdJ("scroll",function(e){return h.CHM(t),h.oxw().loadMore(e)}),h.YNc(11,Mt,2,1,"div",69),h.TgZ(12,"div",70),h.YNc(13,Ct,5,1,"div",71),h.qZA(),h.qZA(),h.YNc(14,vt,15,22,"div",72),h.TgZ(15,"div",73),h.TgZ(16,"div",74),h.YNc(17,Tt,6,8,"div",75),h.YNc(18,It,4,2,"div",76),h.TgZ(19,"div",77),h.YNc(20,At,2,0,"button",78),h.YNc(21,St,10,2,"div",79),h.YNc(22,qt,3,1,"div",80),h.YNc(23,Nt,2,3,"app-voice",81),h.qZA(),h.qZA(),h.TgZ(24,"div",82),h.TgZ(25,"div",32),h.TgZ(26,"input",83),h.NdJ("ngModelChange",function(e){return h.CHM(t),h.oxw().enterToSend=e}),h.qZA(),h.TgZ(27,"label",84),h._uU(28),h.ALo(29,"abpLocalization"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA()}if(2&t){const t=h.oxw();h.xp6(6),h.Q6J("ngIf",t.selected),h.xp6(5),h.Q6J("ngForOf",t.messages.items)("ngForTrackBy",t.trackByFn),h.xp6(2),h.Q6J("ngForOf",t.getSavedMessages()),h.xp6(1),h.Q6J("ngIf",t.replyMessage),h.xp6(2),h.Q6J("ngClass",t.getLines()),h.xp6(1),h.Q6J("ngIf",t.voicePercent>0),h.xp6(1),h.Q6J("ngIf",0==t.voicePercent),h.xp6(2),h.Q6J("ngIf",t.attachmentExt&&0==t.voicePercent),h.xp6(1),h.Q6J("ngIf",0==t.voicePercent),h.xp6(1),h.Q6J("ngIf",0==t.voicePercent&&!t.isVoiceRecordBtnShown()),h.xp6(1),h.Q6J("ngIf",t.isVoiceRecordBtnShown()),h.xp6(3),h.Q6J("ngModel",t.enterToSend),h.xp6(2),h.Oqu(h.lcZ(29,14,"::SendOnEnter"))}}function Rt(t,e){if(1&t){const t=h.EpF();h.TgZ(0,"div",147),h.TgZ(1,"div",148),h.TgZ(2,"div",149),h._uU(3),h.ALo(4,"abpLocalization"),h.qZA(),h.qZA(),h.TgZ(5,"div",150),h.TgZ(6,"button",151),h.NdJ("click",function(){return h.CHM(t),h.oxw().resetPage()}),h._UZ(7,"i",152),h._uU(8),h.ALo(9,"abpLocalization"),h.qZA(),h.qZA(),h.qZA()}2&t&&(h.xp6(3),h.hij(" ",h.lcZ(4,2,"::StillUsingThePage")," "),h.xp6(5),h.hij(" ",h.lcZ(9,4,"::Ok")," "))}let Jt=(()=>{class t{constructor(t,e,n,o,s,i,a,c,r,g,d,h,l,m,u,f,M,C,x,_){this.list=t,this.track=e,this.service=n,this.traineeService=o,this.confirmation=s,this.notificationIconService=i,this.dateService=a,this.voiceSettingsService=c,this.soundApiService=r,this.mobileHelperService=g,this.router=d,this.activatedRoute=h,this._attachmentService=l,this.fb=m,this.el=u,this.toaster=f,this.onlineService=M,this.analyticsService=C,this.notificationService=x,this.messagingService=_,this.trackByFn=(t,e)=>null==e?void 0:e.id,this.data={items:[],totalCount:0},this.messages={items:[],totalCount:0},this.excludedItems=[],this.showLoader=!1,this.customViewState=!1,this.attachmentsBtnsState=!1,this.skipItems=0,this.enterToSend=!0,this.sendToAll=!1,this.checkAll=!0,this.filterText="",this.firstSendDate=void 0,this.ChatMessageType=p.Cb,this.headerHeight=0,this.rowHeight=75,this.pageLimit=10,this.attachmentId=0,this.attachmentExt=void 0,this.currentIndx=0,this.hasNewRows=!1,this.firstLoadChat=!0,this.totalUnread=0,this.canShowPopup=!1,this.isMobile=!1,this.firstInteraction=new Date,this.lastInteraction=new Date,this.isPaued=!1,this.isEndPage=!1,this.isSelecting=!1,this.isGettingMsg=!1,this.lines=0,this.soundRecordPermitRejected=!1,this.voiceMaxLength=60,this.voicePercent=0,this.seenIds=[],this.savedMessagesKey="savedMessages",this.messagesBeingDeleted=Array(),this.isExpanded=!1,this.isSearching=!1}ngOnInit(){const t=this;if(t.filterText=t.activatedRoute.snapshot.params.id||"",t.defaultChatRoomId=t.activatedRoute.snapshot.queryParams["rooms-id"]||"",window.opener)window.document.querySelector("body").style.marginTop="-60px",document.getElementsByTagName("body")[0].classList.add("no-head"),document.getElementsByTagName("body")[0].classList.remove("with-head");else if(t.canShowPopup=!0,t.onlineService.popup&&!t.onlineService.popup.closed)return t.onlineService.popup.focus(),t.onlineService.chatGoTo(`${t.defaultChatRoomId}`),void window.history.go(-1);t.buildForm(),t.onScroll(0),t.isMobile=t.mobileHelperService.GetMobile(),t.filterText.length>0&&setTimeout(()=>{t.data&&t.data.items.length>0&&t.selectChat(t.data.items[0])},500),this.messagingService.chatRoomCaptionUpdate.subscribe(t=>{var e,n;if(this.data&&this.data.items&&t.roomId){let o=this.data.items.find(e=>e.id==t.roomId);o&&(o.latestMessageText=null!==(e=t.caption)&&void 0!==e?e:"",(null===(n=this.selected)||void 0===n?void 0:n.id)!=o.id&&o.totalUnseenMessages++)}})}showPopup(){const t=this;if(window.opener);else{if(t.onlineService.popup&&!t.onlineService.popup.closed)return t.onlineService.popup.focus(),void t.router.navigate(["/dashboard"]);{let e=window.open(window.location.href,"test","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=700,height=900,left=50,top=50");setTimeout(function(){if(e)return t.onlineService.popup=e,e.focus(),t.router.navigate(["/dashboard"]),e.document.getElementsByTagName("body")[0].classList.add("no-head"),void e.document.getElementsByTagName("body")[0].classList.remove("with-head");alert("The Browser blocked the popup, Please check address bar above to allow chat popup")},500)}}}ngOnDestroy(){this.clearIntervalLocal(this.interval)}clearIntervalLocal(t){t&&clearInterval(t)}updateInteraction(){this.lastInteraction=new Date}validateInteraction(){let t=new Date,e=Math.abs(this.lastInteraction.getTime()-t.getTime()),n=(Math.floor(e/864e5),Math.floor(e%864e5/36e5),Math.round(e%864e5%36e5/6e4));Math.round(e%864e5%36e5/1e3),n>30&&(this.isPaued=!0)}resetPage(){window.location.reload()}showAttachment(t){switch(this.updateInteraction(),this.attachmentId=0,this.attachmentChatMessageType=t,t){case p.Cb.Image:this.attachmentExt=".png,.jpg,.jpeg";break;case p.Cb.Video:this.attachmentExt=".mp4";break;case p.Cb.Voice:this.attachmentExt=".mp3,.aac,.wav,";break;case p.Cb.Text:this.attachmentExt=void 0}t!=p.Cb.Text&&(this.attachmentsBtnsToggle(),setTimeout(()=>{0!=this.attachmentId&&(this.chatAttachmentId.AttachmentId=0),this.chatAttachmentId.showUpload(this.attachmentExt)},500))}get isAllowAddAttachment(){return!0}buildForm(){this.form=this.fb.group({chatRoomId:[void 0],message:[void 0],attachmentId:[void 0],messageType:[void 0],attachmentFiles:[void 0],excludedItems:[void 0],replyToMessageId:[void 0]})}onScroll(t){const e=this.el.nativeElement.getBoundingClientRect().height-this.headerHeight;if(!this.isLoading&&t+e>=this.data.items.length*this.rowHeight){let t=this.pageLimit;if(0===this.data.items.length){const n=Math.ceil(e/this.rowHeight);t=Math.max(n,this.pageLimit)}this.isEndPage||this.loadPage(t)}}loadPage(t){const e=this;e.isLoading=!0;let n={};n.filterText=e.filterText,n.skipCount=e.data.items.length,e.service.getList(n).subscribe(t=>{const o=[...e.data.items,...t.items];e.data.items=o,e.data.totalCount=t.totalCount,e.isLoading=!1,e.isEndPage=t.totalCount==n.skipCount,e.selectDefaultRoom()})}selectDefaultRoom(){const t=this;setTimeout(()=>{console.log("selectDefaultRoom check "+t.data.items.length),t.data&&t.data.items.length>0&&t.data.items.forEach(e=>{console.log("selectDefaultRoom check item "+e.id+"   "+t.defaultChatRoomId),e.id===t.defaultChatRoomId&&(t.defaultChatRoomId=void 0,t.selectChat(e))})},1e3)}loadMore(t){var e=document.getElementById("chat-conversation-wrapper");this.hasNewRows&&0==e.scrollTop&&!this.firstLoadChat&&this.getMessages()}selectChat(t){console.log("selectChat"),this.reply(void 0),this.analyticsService.log(I.O.View_Chat_Trainee),this.updateInteraction(),this.sendToAll||(this.friendsListToggle(),this.clearIntervalLocal(this.interval),this.resetForm(),this.showLoader=!0,this.selected=t,this.firstSendDate=void 0,this.messages.items=[],this.loadedItems=[],this.firstLoadChat=!0,this.lines=0,this.getMessages())}getMessages(){var t;const e=this;if(this.isSelecting)return;let n={maxResultCount:10};if(n.beforeDate=this.firstSendDate,!(null===(t=this.selected)||void 0===t?void 0:t.id))return;const o=this.selected.id;this.isSelecting=!0,this.service.getMessageList(o,n).subscribe(t=>{if(e.isSelecting=!1,o==e.selected.id){this.messages.totalCount=t.totalCount,this.hasNewRows=t.totalCount>0,this.loadedItems=this.loadedItems?[...this.loadedItems,...t.items]:t.items,this.currentIndx=this.messages.totalCount<this.currentIndx+10?this.messages.totalCount:this.currentIndx+10,t.items=t.items.map(t=>Object.assign(Object.assign({},t),{date:new Date(t.sendDate).toUTCString()}));for(var n=t.items.length-1;n>=0;n--)this.messages.items.unshift(t.items[n]);t.items.length>0&&(this.firstSendDate=t.items[0].sendDate),this.isSearching?this.searchContinue():(setTimeout(()=>{this.showLoader=!1},1e3),this.scrollDown(!this.firstLoadChat),this.firstLoadChat&&(this.firstLoadChat=!1,this.interval=setInterval(()=>{document.hidden||e.getNewMessages()},1e3)))}},t=>{this.showLoader=!1})}getNewMessages(){const t=this;if(!0===t.isGettingMsg)return;if(t.validateInteraction(),t.isPaued)return;let e={};e.afterDate=t.messages&&t.messages.items.length>0?t.messages.items[t.messages.items.length-1].sendDate:null;let n=t.selected.id;t.isGettingMsg=!0,t.service.getMessageList(n,e).subscribe(e=>{if(setTimeout(()=>{t.isGettingMsg=!1},1e3),n!=t.selected.id)return;let o=[...t.messages.items],s=!1;e.items.forEach(e=>{0==o.filter(t=>t.id==e.id).length&&(o.push(e),s=!0,t.totalUnread++)}),t.messages.items=o,s&&t.totalUnread>0&&setTimeout(()=>{t.scrollDown(),t.totalUnread=0},100),n==t.selected.id&&e.items.length>0&&(t.selected.latestMessageText=e.items[e.items.length-1].message),t.setMessagesSeen()},e=>{setTimeout(()=>{t.isGettingMsg=!1},1e3),t.clearIntervalLocal(t.interval)})}setMessagesSeen(){var t,e;let n=!1;null!==(e=null===(t=this.messages)||void 0===t?void 0:t.items)&&void 0!==e&&e&&this.messages.items.forEach(t=>{t.sentByTrainee&&!t.hasSeen&&(n=!0)}),n&&this.notificationIconService.clearMessages()}getAllChatRooms(){this.isLoading=!0;const t=this;this.service.getList({maxResultCount:1e3}).subscribe(e=>{this.data.items=e.items,this.data.totalCount=e.totalCount,this.isLoading=!1,t.selectDefaultRoom()})}sendToAllCheck(t){this.updateInteraction(),t.target.checked&&(this.selected=void 0,this.checkAll=!1,this.reply(void 0),this.excludedItems=[],this.getAllChatRooms()),this.messages.items=[],this.clearIntervalLocal(this.interval)}checkChanged(t){this.updateInteraction(),t.target.checked&&(this.excludedItems=[])}divCheckClick(t){this.updateInteraction(),this.checkAll||(0==this.excludedItems.filter(e=>e==t.id).length?this.excludedItems.push(t.id):this.excludedItems=this.removeItemFromExcludedList(t.id))}filterTextChanged(t){this.updateInteraction(),this.data.items=[],this.isEndPage=!1,this.sendToAll&&""==t.target.value?this.getAllChatRooms():this.onScroll(0)}isExcluded(t){return 0!==this.excludedItems.filter(e=>e==t.id).length}itemCheckChanged(t,e){t.target.checked?this.excludedItems.length>0&&(this.excludedItems=this.removeItemFromExcludedList(e.id)):0==this.excludedItems.filter(t=>t==e.id).length&&this.excludedItems.push(e.id)}removeItemFromExcludedList(t){let e=[];return this.excludedItems.forEach(n=>{t!=n&&e.push(n)}),e}attachmentUpdated(t){this.form.get("attachmentFiles").setValue(t.files.toString()),t.files&&0==t.files.length&&this.resetForm(),this.attachmentsBtnsState=!1}sendMsg(){const t=this;if(this.updateInteraction(),this.attachmentChatMessageType||(this.attachmentChatMessageType=p.Cb.Text),this.attachmentsBtnsState=!1,this.attachmentChatMessageType==p.Cb.Text&&(document.getElementById("chat-message-box").focus(),""==this.msgTxt.trim()))return!1;let e={hasSeen:!1,sentByTrainee:!1};e.message=this.msgTxt,e.messageType=this.attachmentChatMessageType,e.attachmentId=this.attachmentId,this.replyMessage&&(e.replyToMessageId=this.replyMessage.id,e.replyToMessage=this.replyMessage),this.selected&&(e.chatRoomId=this.selected.id.toString(),this.form.get("chatRoomId").setValue(this.selected.id.toString())),this.form.get("message").setValue(this.msgTxt),this.form.get("attachmentId").setValue(this.attachmentId),this.form.get("messageType").setValue(this.attachmentChatMessageType),this.form.get("replyToMessageId").setValue(e.replyToMessageId),this.showLoader=!0,this.sendToAll?(this.form.get("excludedItems").setValue(this.excludedItems),t.reply(void 0),this.service.sendToAll(this.form.value).subscribe(()=>{this.messages.items.push(e),this.scrollDown(),this.showLoader=!1,t.toaster.success("::SendToAllSuccess")},t=>{this.showLoader=!1})):(console.log(this.form.value),this.service.send(this.form.value).subscribe(n=>{t.reply(void 0),e.id=n.id,e.sendDate=n.sendDate,this.messages.items.push(e),this.scrollDown(),this.showLoader=!1},t=>{this.showLoader=!1})),this.updateConversationListItems(),this.resetForm()}resetForm(){this.msgTxt=void 0,this.attachmentId=0,this.attachmentExt=void 0,this.attachmentChatMessageType=void 0,this.currentIndx=0}updateConversationListItems(){this.selected?(this.selected.latestMessageText=this.attachmentChatMessageType==p.Cb.Text?this.msgTxt:"",this.selected.latestMessageDate=(new Date).toString()):this.data.items.forEach(t=>{0==this.excludedItems.filter(e=>e==t.id).length&&(t.latestMessageText=this.attachmentChatMessageType==p.Cb.Text?this.msgTxt:"",t.latestMessageDate=(new Date).toString())})}sendEnter(){this.enterToSend?(this.lines=0,this.sendMsg()):this.lines+=1}getLines(){switch(this.lines){case 0:return{s0:!0};case 1:return{s1:!0};case 2:return{s2:!0};case 3:return{s3:!0};case 4:default:return{s4:!0}}}scrollDown(t){setTimeout(()=>{var e=document.getElementById("chat-conversation-wrapper");e.scrollTop=t?e.clientHeight:e.scrollHeight},50),this.showLoader=!1}friendsListToggle(){this.updateInteraction(),this.customViewState=!this.customViewState,this.customViewState||(this.selected=void 0,this.clearIntervalLocal(this.interval))}attachmentsBtnsToggle(){if(this.updateInteraction(),this.chatAttachmentId&&!this.chatAttachmentId.allowAdd)return!1;this.attachmentsBtnsState=!this.attachmentsBtnsState}voiceLengthChange(t){this.voiceTime=t,this.updateInteraction()}recordingPercentValueChanged(t){this.voicePercent=t,this.updateInteraction()}sendFile(t){var e=new h.vpe;e.subscribe(t=>{this.attachmentId=t,this.attachmentChatMessageType=p.Cb.Voice,this.sendMsg()}),this.soundApiService.sendFile(t,e)}isVoiceRecordBtnShown(){return!this.msgTxt&&0==this.attachmentId}onRecordSoundPermitRejected(){this.soundRecordPermitRejected=!0,setTimeout(()=>{this.soundRecordPermitRejected=!1},5e3)}isInViewport(t){if(!t)return!0;const e=document.getElementById(t).getBoundingClientRect();return e.top>=0||e.bottom<=(window.innerHeight||document.documentElement.clientHeight)}isUnseen(t){return!(!t.sentByTrainee||t.hasSeen||(t.hasSeen=!0,this.seenIds.indexOf(t.id)<0&&(this.seenIds.push(t.id),this.selected.totalUnseenMessages>0&&this.selected.totalUnseenMessages--),0))}isSeenByTrainee(t){return!(t.sentByTrainee||!t.hasSeen)}navigateToSelected(){this.updateInteraction();let t=new Date;this.traineeService.getByUserId(this.selected.traineeAppUserId).subscribe(e=>{window.opener?(t.getDate(),t.getMonth(),t.getFullYear(),this.onlineService.hostGoTo(`${e.id}`),window.focus(),window.opener.focus()):this.router.navigate(["/trainees/details",e.id,t.getDate(),t.getMonth(),t.getFullYear()])})}setSavedMessages(t){localStorage.setItem(this.savedMessagesKey,JSON.stringify(t)),this.temptSavedMessages=t}getMessageMultiline(t){return(t||"").replace("\r\n","<br>").replace("\n","<br>")}getSavedMessages(){if(this.temptSavedMessages)return this.temptSavedMessages;let t=localStorage.getItem(this.savedMessagesKey);if(!t){let t=[];return this.setSavedMessages(t),t}return this.temptSavedMessages=JSON.parse(t),this.temptSavedMessages}parseMessage(t){var e,n;return t.replace("@",null!==(n=null===(e=this.selected)||void 0===e?void 0:e.traineeName)&&void 0!==n?n:"")}saveMessage(t,e,n){let o="";o=(n=Object.assign({},n)).message,n.message=o.replace(this.selected.traineeName,"@");let s=this.getSavedMessages();s.some(e=>e.id==t)||(s.push(n),this.setSavedMessages(s))}removedSavedMessage(t){let e=this.getSavedMessages().filter(e=>e.id!==t.id);this.setSavedMessages(e)}deleteMessage(t,e){this.updateInteraction(),this.messagesBeingDeleted.includes(t)||(this.messagesBeingDeleted.push(t),this.service.delete(t).pipe((0,d.x)(()=>{this.messagesBeingDeleted=this.messagesBeingDeleted.filter(e=>e!=t)})).subscribe(()=>{e===this.messages.items.length-1&&(this.selected.latestMessageText=this.messages.items.length>1?this.getMessageCaption(this.messages.items[this.messages.items.length-2]):" "),this.messages.items=this.messages.items.filter(e=>e.id!=t)}))}getMessageCaption(t){let e=" ";switch(t.messageType){case p.Cb.Text:e=t.message.length>50?t.message.substring(0,47)+"...":t.message;break;case p.Cb.Image:e="[Image]";break;case p.Cb.Video:e="[Video]";break;case p.Cb.Voice:e="[Voice]"}return e}isMessageBeingDeleted(t){return this.messagesBeingDeleted.includes(t)}canDeleteMessage(t){let e=Z(t.sendDate).isAfter(Z().subtract(1,"hours"));return t.id&&!t.sentByTrainee&&e&&!this.isMessageBeingDeleted(t.id)}reply(t){const e=this;this.replyMessage=t,setTimeout(()=>{e.isExpanded=!!t},1)}searchStart(t){console.log("start search "),this.searchingMessage=t,this.isSearching=!0,this.searchContinue()}searchContinue(){if(console.log("searching "),this.searchingMessage&&this.isSearching){var t=document.getElementById(this.searchingMessage.id);if(console.log(t),t)return console.log("found it "),this.isSearching=!1,void t.scrollIntoView();this.getMessages()}}}return t.\u0275fac=function(e){return new(e||t)(h.Y36(o.XNV),h.Y36(o.vR3),h.Y36(A),h.Y36(S.s),h.Y36(s.YP),h.Y36(k.O),h.Y36(l.R),h.Y36(u),h.Y36(N),h.Y36(L.k4),h.Y36(g.F0),h.Y36(g.gz),h.Y36(R.L),h.Y36(J.qu),h.Y36(h.SBq),h.Y36(s.MJ),h.Y36(U.x),h.Y36(I.y),h.Y36(k.O),h.Y36(E.o))},t.\u0275cmp=h.Xpm({type:t,selectors:[["app-chat-room"]],viewQuery:function(t,e){if(1&t&&(h.Gf(H,5),h.Gf(y,5)),2&t){let t;h.iGM(t=h.CRH())&&(e.chatAttachmentId=t.first),h.iGM(t=h.CRH())&&(e.voice=t.first)}},features:[h._Bn([o.XNV,l.R])],decls:35,vars:28,consts:[[1,"d-md-block","d-none"],[1,"row","entry-row"],[1,"col-11","content-header-container"],[1,"content-header-title","custom-green"],[1,"col-auto"],["class","btn btn-sm btn-warning ",3,"click",4,"ngIf"],["id","chat_wrapper"],[1,"px-lg-4","h-100"],["class","alert alert-danger mb-0",4,"ngIf"],[1,"d-flex","rounded-lg","overflow-hidden","shadow","border","position-relative","h-100"],[1,"col-lg-3","col-md-4","col-12","p-0","right-section","custom-view-mobile",3,"ngClass"],[1,"contacts","h-100"],[1,"search-contact"],[1,"form-row"],[1,"col"],["autocomplete","off","id","contacts-filter","spellcheck","false","type","search",1,"form-control","form-control-sm","ng-valid","ng-dirty","ng-touched",3,"ngModel","placeholder","change","ngModelChange"],[1,"messages-box"],["class","send-to-all",4,"ngIf"],["id","contact-list",1,"list-group","rounded-0","room-list"],["class","loader-2",4,"ngIf"],["default","",3,"columnMode","count","footerHeight","headerHeight","list","loadingIndicator","rowHeight","rows","scrollbarV","scroll"],["cellClass","contact-row","prop","id",3,"name"],["ngx-datatable-cell-template",""],[1,"col-lg-9","col-md-8","col-12","p-0","left-section","custom-view-mobile"],["class","row h-100",4,"ngIf"],["class","conversation-box h-100",4,"ngIf"],["size","md",3,"visible","suppressUnsavedChangesWarning","visibleChange"],["abpBody",""],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-share"],[1,"alert","alert-danger","mb-0"],[1,"send-to-all"],[1,"custom-control","custom-checkbox"],[1,"row"],["id","send-to-all","type","checkbox",1,"custom-control-input","ng-untouched","ng-pristine","ng-valid",3,"ngModel","change","ngModelChange"],["for","send-to-all",1,"custom-control-label"],["class","col-auto",4,"ngIf"],[1,"col",2,"max-height","20px"],[1,"switch"],["type","checkbox","id","togBtn",3,"ngModel","ngModelChange","change"],[1,"slider","round"],[1,"on"],[1,"off"],[1,"col-auto","d-md-none"],[1,"btn","btn-sm","contacts-toggle",3,"click"],[1,"loader-2"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"trainee-data"],[1,"trainee-photo-con"],[1,"card-img-overlay",3,"ngClass","click"],[1,"fas","fa-check"],["alt","ss","onerror","this.src='../../../../../assets/avatar.jpg'",1,"s-icon-lg",3,"src","click"],[1,"px-3"],[1,"trainee-name"],["class","coach-note",4,"ngIf"],[1,"message-date"],["class","badge badge-info",4,"ngIf"],[1,"coach-note"],[1,"badge","badge-info"],[1,"row","h-100"],[1,"col","my-auto","text-center"],[1,"fa","fa-exclamation-circle","text-warning",2,"font-size","48px","margin-bottom","15px"],[1,"conversation-box","h-100"],[1,"sender-name"],["class","trainee-details pointer",4,"ngIf"],[1,"col-auto","d-md-none","d-block"],[1,"fas","fa-arrow-left"],["id","chat-conversation-wrapper",1,"chat-box","bg-light-2",2,"overflow-y","scroll",3,"scroll"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-100","text-center"],["class","badge badge-default border",4,"ngFor","ngForOf"],["class","chat-box bg-dark-2","id","slider",3,"ngClass",4,"ngIf"],["id","send-message-form",1,"message-form","bg-light-2",2,"position","relative","z-index","1000"],[1,"actions",3,"ngClass"],["class","progress",4,"ngIf"],["class","inputs-con",4,"ngIf"],[1,"btns-con"],["class","btn-attach-cancel btn btn-primary",3,"click",4,"ngIf"],["class","attachments-con",3,"hidden",4,"ngIf"],["class","send-btn",4,"ngIf"],[3,"hasRecording","isEditable","maxVoiceLengthPerSec","whenRecording","recordingPercentValueChanged","sendFileClicked","whenPermitRejected",4,"ngIf"],[1,"mx-5"],["id","send-on-enter","type","checkbox",1,"custom-control-input","ng-untouched","ng-pristine","ng-valid",3,"ngModel","ngModelChange"],["for","send-on-enter",1,"custom-control-label"],[1,"trainee-details","pointer"],[1,"trainee-photo"],["id","conversation-title",1,"trainee-name"],[1,"btn","btn-back","btn-sm","contacts-toggle",3,"click"],[1,"fa","fa-search"],["class","coach-note-2",4,"ngIf"],[1,"coach-note-2"],[3,"id","class",4,"ngIf"],[3,"id"],[1,"message","media-body","position-relative",3,"dblclick"],[4,"ngIf"],[3,"class",4,"ngIf"],[1,"d-flex",3,"ngClass"],["style","white-space: normal;",4,"ngIf"],[1,"auto-hide-hover"],["style","cursor:pointer","class","mx-2 d-inline ",3,"click",4,"ngIf"],[1,"mx-2","d-inline",2,"cursor","pointer",3,"click"],[1,"fa","fa-2x","fa-reply","text-warning"],["class","fa fa-spinner fa-spin","style","width: 20px;height: 20px;font-size: 20px;","aria-hidden","true",4,"ngIf"],["class","media-viewer-con",4,"ngIf"],[1,"message","media-body","position-relative"],[2,"white-space","normal"],[3,"innerHTML"],["aria-hidden","true",1,"fa","fa-spinner","fa-spin",2,"width","20px","height","20px","font-size","20px"],[1,"media-viewer-con"],["Entity","Chat",3,"AttachmentId","readonly","isThumbnail"],[1,"fa","fa-2x","fa-times","text-danger"],[1,"fa","fa-2x","fa-save","text-primary"],[1,"fa","fa-check-double","text-success"],[1,"badge","badge-default","border"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-times","text-success","text-danger"],["id","slider",1,"chat-box","bg-dark-2",3,"ngClass"],[1,"btn","btn-sm","btn-danger","pull-left",3,"click"],[1,"fa","fa-times"],[1,"message","media-body","position-relative",3,"click"],[1,"progress"],["aria-valuemax","100","aria-valuemin","0","aria-valuenow","70","role","progressbar",1,"progress-bar",3,"ngStyle"],[1,"max-length"],[1,"inputs-con"],["class","form-control ng-untouched ng-pristine ng-valid","id","chat-message-box","maxlength","2000","name","message","type","text",3,"ngModel","disabled","placeholder","keyup.enter","ngModelChange",4,"ngIf"],[1,"attachment-con"],["Entity","Chat","class","attached-files","id","attachment-id","name","chatAttachmentId",3,"isShowSuccessNotification","ngModel","acceptTypes","maxFilesCount","maxFileSize","attachmentUpdated","ngModelChange",4,"ngIf"],["id","chat-message-box","maxlength","2000","name","message","type","text",1,"form-control","ng-untouched","ng-pristine","ng-valid",3,"ngModel","disabled","placeholder","keyup.enter","ngModelChange"],["Entity","Chat","id","attachment-id","name","chatAttachmentId",1,"attached-files",3,"isShowSuccessNotification","ngModel","acceptTypes","maxFilesCount","maxFileSize","attachmentUpdated","ngModelChange"],["chatAttachmentId",""],[1,"btn-attach-cancel","btn","btn-primary",3,"click"],[1,"fa","fa-close"],[1,"attachments-con",3,"hidden"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-paperclip"],[1,"files-type",3,"ngClass"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-file-audio"],[1,"fas","fa-image"],[1,"fas","fa-video"],[1,"send-btn"],["id","send-message-button","type","button",1,"btn","btn-primary",3,"click"],["class","fa fa-paper-plane",4,"ngIf"],[1,"fa","fa-paper-plane"],[3,"hasRecording","isEditable","maxVoiceLengthPerSec","whenRecording","recordingPercentValueChanged","sendFileClicked","whenPermitRejected"],["voice",""],["validateOnSubmit","",1,"app-assign-exercise-program"],[1,"mt-2","fade-in-top"],[1,"alert","alert-warning"],[1,"col-12","modal-footer"],[1,"btn","btn-success","btn-save",3,"click"],[1,"fa","fa-check"]],template:function(t,e){1&t&&(h.TgZ(0,"div",0),h.TgZ(1,"div",1),h.TgZ(2,"div",2),h.TgZ(3,"h1",3),h._uU(4),h.ALo(5,"abpLocalization"),h.qZA(),h.TgZ(6,"div"),h._UZ(7,"abp-breadcrumb"),h.qZA(),h.qZA(),h.TgZ(8,"div",4),h.YNc(9,z,2,0,"button",5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(10,"div",6),h.TgZ(11,"div",7),h.YNc(12,V,3,3,"div",8),h.TgZ(13,"div",9),h.TgZ(14,"div",10),h.TgZ(15,"div",11),h.TgZ(16,"div",12),h.TgZ(17,"div",13),h.TgZ(18,"div",14),h.TgZ(19,"input",15),h.NdJ("change",function(t){return e.filterTextChanged(t)})("ngModelChange",function(t){return e.filterText=t}),h.ALo(20,"abpLocalization"),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(21,"div",16),h.YNc(22,j,9,5,"div",17),h.TgZ(23,"div",18),h.YNc(24,$,2,0,"div",19),h.TgZ(25,"ngx-datatable",20),h.NdJ("scroll",function(t){return e.onScroll(t.offsetY)}),h.TgZ(26,"ngx-datatable-column",21),h.ALo(27,"abpLocalization"),h.YNc(28,et,1,1,"ng-template",22),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(29,"div",23),h.YNc(30,nt,6,3,"div",24),h.YNc(31,Lt,30,16,"div",25),h.qZA(),h.qZA(),h.qZA(),h.qZA(),h.TgZ(32,"abp-modal",26),h.NdJ("visibleChange",function(t){return e.isPaued=t}),h.YNc(33,Rt,10,6,"ng-template",null,27,h.W1O),h.qZA()),2&t&&(h.xp6(4),h.Oqu(h.lcZ(5,22,"::ChatRooms")),h.xp6(5),h.Q6J("ngIf",e.canShowPopup),h.xp6(3),h.Q6J("ngIf",e.soundRecordPermitRejected),h.xp6(2),h.Q6J("ngClass",e.customViewState?"hidden":"shown"),h.xp6(5),h.MGl("placeholder","",h.lcZ(20,24,"::SearchInContacs"),"..."),h.Q6J("ngModel",e.filterText),h.xp6(3),h.Q6J("ngIf",e.data.totalCount>0),h.xp6(2),h.Q6J("ngIf",e.showLoader),h.xp6(1),h.Q6J("columnMode","force")("count",e.data.totalCount)("footerHeight",0)("headerHeight",e.headerHeight)("list",e.list)("loadingIndicator",e.isLoading)("rowHeight",e.rowHeight)("rows",e.data.items)("scrollbarV",!0),h.xp6(1),h.s9C("name",h.lcZ(27,26,"::traineeName")),h.xp6(4),h.Q6J("ngIf",!e.selected&&!e.sendToAll),h.xp6(1),h.Q6J("ngIf",e.selected||e.sendToAll),h.xp6(1),h.Q6J("visible",e.isPaued)("suppressUnsavedChangesWarning",!1))},directives:[s.LI,f.O5,f.mk,J.Fj,J.JJ,J.On,B.m,Y.nE,s.x7,s.j3,Y.UC,Y.vq,s.zS,J.Wl,f.sg,D.Y,f.PC,J.nD,y],pipes:[o.fuE,f.Ov,F.H,f.uU,f.OU,f.gd,Q,f.JJ],styles:['#chat_wrapper[_ngcontent-%COMP%]{height:80vh}#chat_wrapper[_ngcontent-%COMP%]   .s-icon-lg[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;-o-object-fit:cover;object-fit:cover;padding:2px}@media (max-width:992px){#chat_wrapper[_ngcontent-%COMP%]   .s-icon-lg[_ngcontent-%COMP%]{width:40px;height:40px}}#chat_wrapper[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;left:0;top:0}#chat_wrapper[_ngcontent-%COMP%]   .msg-bold[_ngcontent-%COMP%]{font-weight:1000;font-size:15px}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]{margin:-4px -15px;height:calc(100vh - 60px)}#chat_wrapper[_ngcontent-%COMP%]   .d-flex.rounded-lg.h-100[_ngcontent-%COMP%]{border:0!important;box-shadow:none!important}}@media screen and (min-width:768px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]{border-left:1px solid #dee2e6}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]{padding:15px;background:#fff}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]{padding:10px}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:36px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]{height:calc(100% - 66px)}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]{height:calc(100% - 57px)}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]{background:#f2f2f2}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding:10px 45px 10px 15px}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after, #chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{right:-20px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;width:100%;height:100%;padding:15px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]{background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fff;color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{color:#fff}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{color:#f0f0f0}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]{position:relative;display:inline-block;align-self:center}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay[_ngcontent-%COMP%]{padding:0;background:#000000bf;border-radius:50%;line-height:36px;text-align:center;color:#fff;transition:all .4s ease-in-out}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay.hidden[_ngcontent-%COMP%]{opacity:0;z-index:-1}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay.shown[_ngcontent-%COMP%]{opacity:1;z-index:2}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fdb915 50%/cover no-repeat;text-align:center;width:36px;height:36px;line-height:36px;font-size:16px;border-radius:50%;display:inline-block}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{margin-bottom:0;color:#7a7d81;font-size:.92308rem}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .latest-message[_ngcontent-%COMP%]{flex:100%;font-size:1rem;margin-bottom:0}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{font-size:11px;color:#6c757d;align-self:start}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{flex:0 1 auto;padding:15px;border-bottom:1px solid #ccc;background:#fff}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{padding:10px}}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fdb915 50%/cover no-repeat;text-align:center;width:36px;height:36px;line-height:36px;font-size:16px;border-radius:50%;display:inline-block}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{margin-right:10px;display:inline-block;margin-bottom:0;color:#6c757d}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .contacts-toggle[_ngcontent-%COMP%]{box-shadow:none;border:2px solid #fdb915;background:none;color:#fdb915;width:36px;height:36px;line-height:36px;border-radius:50%;text-align:center;padding:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{flex:1 1 auto;padding:15px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.w-85[_ngcontent-%COMP%]{width:85%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{padding:5px 10px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]{border-radius:6px;color:#000;background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn{background:#fff!important;border:#fff!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn:hover{color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainee[_ngcontent-%COMP%]{border-radius:6px;background:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{text-align:left}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-bottom:15px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]{content-visibility:auto;max-height:100px;overflow:hidden;border:1px solid #fdb915;border-radius:6px;zoom:87%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-1001[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-1002[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-Image[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-Video[_ngcontent-%COMP%]{zoom:61%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.w-85[_ngcontent-%COMP%]{width:85%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{padding:5px 10px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]{border-radius:6px;color:#000;background:#fdb715c2}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn{background:#fff!important;border:#fff!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn:hover{color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainee[_ngcontent-%COMP%]{border-radius:6px;background:#ffffffe3}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{text-align:left}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-bottom:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]{flex:0 1 auto;border-top:1px solid #ccc}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{border-radius:5px;margin:10px;background:#fff;box-shadow:0 0 .2rem #ccc!important;position:relative;height:40px;display:flex;flex-flow:row nowrap;padding-left:3px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]{flex-basis:100%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{z-index:2;height:40px;resize:none;border:none;padding:10px 5px 0;background-color:#0000!important;outline:none;border-radius:5px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 .2rem #fdb915!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{border-radius:50px;flex-basis:100%;height:34px;margin:3px 3px 0 10px;position:relative;background:#f1f1f1}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:14px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .max-length[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);font-size:14px}@media screen and (max-width:768px){#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin:3px 3px 0 5px}}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .btn-attach-cancel[_ngcontent-%COMP%]{color:#dc3545;background:#fff;padding:0;text-align:center;width:34px;height:34px;line-height:34px;font-size:18px;border-radius:50%;border:none;box-shadow:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]{position:relative;margin:0 6px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:0;text-align:center;width:34px;height:34px;font-size:18px;line-height:34px;border-radius:50%;background:#fff;color:#fdb915;border:none;box-shadow:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.hidden[_ngcontent-%COMP%]{top:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.hidden[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{transform:translate(-50%,-40px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){transform:translate(-50%,-80px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){transform:translate(-50%,-120px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);width:34px;height:34px;line-height:34px;border-radius:50%;font-size:18px;padding:0;text-align:center;transition:all .4s cubic-bezier(.68,0,.27,1);box-shadow:none;color:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:34px;width:34px;line-height:34px;border-radius:50%;text-align:center;padding:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{padding:0 43px 10px 0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]{top:3px;right:23px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{padding-right:4px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{right:-20px;padding:8px;top:-2px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{right:-17px;top:2px;width:13px;height:13px}#chat_wrapper[_ngcontent-%COMP%]     .contact-row{padding:0!important}#chat_wrapper[_ngcontent-%COMP%]     .contact-row .datatable-body-cell-label{height:100%}#chat_wrapper[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%] + .d-flex.rounded-lg.h-100[_ngcontent-%COMP%]{height:calc(100% - 60px)!important}@media screen and (max-width:767px){.custom-view-mobile[_ngcontent-%COMP%]{transition:all .4s ease-in-out}.custom-view-mobile.right-section[_ngcontent-%COMP%]{position:relative;z-index:3}.custom-view-mobile.right-section.hidden[_ngcontent-%COMP%]{left:-100%;opacity:0}.custom-view-mobile.right-section.shown[_ngcontent-%COMP%]{left:0;opacity:1}.custom-view-mobile.left-section[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background:#fff}.view-contacts[_ngcontent-%COMP%]{text-align:left;margin:0 -12px 15px}}@media screen and (max-width:767px) and (max-width:768px){.view-contacts[_ngcontent-%COMP%]{margin-top:15px}}@media screen and (max-width:767px){.view-contacts[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#fdb915}}.attached-files[_ngcontent-%COMP%]     .sw-tags{padding:0!important;border:none;border-top:1px solid #ccc}@media screen and (max-width:767px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:300px!important}}@media screen and (max-width:575px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:120px!important}}@media screen and (max-width:400px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:50px!important}}.attached-files[_ngcontent-%COMP%]     .form-control{border:none;padding:0 15px 0 0!important;height:40px;border-radius:5px!important;box-shadow:none;background-color:#0000!important;display:flex;flex-flow:row nowrap;flex:0 0 auto;width:auto}.attached-files[_ngcontent-%COMP%]     .input-group-append{align-self:center}  .attachment-con .p-fileupload-choose{display:none}  #contact-list{height:calc(100% - 49px)}@media screen and (max-width:767px){  #contact-list{height:calc(100% - 39px)}}  #contact-list ngx-datatable{height:100%}.loaderDiv[_ngcontent-%COMP%]{border-radius:50%;border:6px solid #f3f3f3;border-top-color:#fdb915;width:20px;height:20px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:80px;height:25px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ca2222}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#fdb915}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(55px)}.on[_ngcontent-%COMP%]{display:none}.off[_ngcontent-%COMP%], .on[_ngcontent-%COMP%]{color:#fff;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;font-size:10px;font-family:Verdana,sans-serif}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{display:none}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s1[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s1[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s2[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s2[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:80px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s3[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s3[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s4[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s4[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:120px}h6.coach-note[_ngcontent-%COMP%], h6.trainee-name[_ngcontent-%COMP%]{max-width:160px}h6.coach-note[_ngcontent-%COMP%], h6.coach-note-2[_ngcontent-%COMP%], h6.trainee-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}h6.coach-note-2[_ngcontent-%COMP%]{max-width:360px}  .sw-tags.form-control.isThumbnail-container{background-color:transparent!important}#slider[_ngcontent-%COMP%]{height:0;transition:height .15s ease-out;overflow:hidden;background:#d5d5d5}#slider.expanded[_ngcontent-%COMP%]{height:326px;transition:height .15s ease-in}.auto-hide-hover[_ngcontent-%COMP%]{opacity:.3}.auto-hide-hover[_ngcontent-%COMP%]:hover{opacity:1}.custom-zoom[_ngcontent-%COMP%]{zoom:87%}.searching-found[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{box-shadow:0 4px 58px -13px #d4b414;-webkit-box-shadow:0 4px 58px -13px #d4b414;-moz-box-shadow:0 4px 58px -13px #d4b414}']}),t})();const Ut=[{path:":id",component:Jt,canActivate:[o.a1M,o.nG9]},{path:"",component:Jt,canActivate:[o.a1M,o.nG9]}];let Et=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[g.Bz.forChild(Ut)],g.Bz]}),t})();var Bt=n(56137),Yt=n(42590);let Dt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=h.oAB({type:t}),t.\u0275inj=h.cJS({imports:[[Et,o.IR2,s.e2,J.UX,r.Ck,c.vv,a.h2,i.lQ,i.M,Bt.m,i.XC,Yt.rk]]}),t})()},28157:function(t,e,n){"use strict";n.d(e,{s:function(){return i}});var o=n(35366),s=n(46700);let i=(()=>{class t{constructor(t){this.restService=t,this.apiName="Default",this.changeCoordinatorForTraineeByInput=t=>this.restService.request({method:"POST",url:"/api/app/trainees/change-trainee-coordinator",body:t},{apiName:this.apiName}),this.deleteAccount=()=>this.restService.request({method:"POST",url:"/api/app/trainees/DeleteAccount"},{apiName:this.apiName}),this.exportListPayments=t=>this.restService.request({method:"POST",url:"/api/app/trainees/export",body:t},{apiName:this.apiName}),this.get=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}`},{apiName:this.apiName}),this.getByUserId=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/get-by-user-id`},{apiName:this.apiName}),this.getCommitmentSummary=t=>this.restService.request({method:"POST",url:"/api/app/trainees/get-commitment-summary",body:t},{apiName:this.apiName}),this.getGeneralStatistics=()=>this.restService.request({method:"GET",url:"/api/app/trainees/general-statistics"},{apiName:this.apiName}),this.getLisGuid=t=>this.restService.request({method:"POST",url:"/api/app/trainees/GetLisGuidAsync",body:t},{apiName:this.apiName}),this.getListByStatus=t=>this.restService.request({method:"POST",url:"/api/app/trainees/trainee-without-progress",body:t},{apiName:this.apiName}),this.getListPayments=t=>this.restService.request({method:"POST",url:"/api/app/trainees/traineepayment",body:t},{apiName:this.apiName}),this.getNotesListByDate=(t,e,n,o)=>this.restService.request({method:"GET",url:"/api/app/trainees/Note-ByDay",params:{traineeId:t,day:e,maxResultCount:n,skipCount:o}},{apiName:this.apiName}),this.getSimpleList=t=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list",body:t},{apiName:this.apiName}),this.getSimpleList2=t=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list2",body:t},{apiName:this.apiName}),this.getSimpleListSummary=t=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list-summary",body:t},{apiName:this.apiName}),this.getTraineBodyMassChartById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/chart/bodymass`},{apiName:this.apiName}),this.getTraineeFatsChartById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/chart/fats`},{apiName:this.apiName}),this.getTraineeIntensityLevelForUserByInput=t=>this.restService.request({method:"GET",url:"/api/app/trainees/GetTraineeIntensityLevelForUser",params:{traineeId:t.traineeId}},{apiName:this.apiName}),this.getTraineeMesurmentsById=t=>this.restService.request({method:"GET",url:"/api/app/trainees/Mesurments",params:{id:t}},{apiName:this.apiName}),this.getTraineeMusclesChartById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/chart/muscles`},{apiName:this.apiName}),this.getGetTraineeProfileGeneralById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/general?id=${t}`},{apiName:this.apiName}),this.getGetTraineeProfileGeneral2ById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/general2?id=${t}`},{apiName:this.apiName}),this.getTraineeOverviewBasicInfoById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/overview?id=${t}`},{apiName:this.apiName}),this.getTraineeProfileSummaryById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/profile?id=${t}`},{apiName:this.apiName}),this.getTraineeStatisticsByTraineeIdAndInDate=(t,e)=>this.restService.request({method:"GET",url:"/api/app/trainees/get-trainee-statistics",params:{traineeId:t,inDate:e}},{apiName:this.apiName}),this.getTraineeWaightChartById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/chart/weight`},{apiName:this.apiName}),this.getRefreshTrainee=t=>this.restService.request({method:"GET",url:`/api/app/trainees/refresh/${t}`},{apiName:this.apiName}),this.getTraineeWaterChartById=t=>this.restService.request({method:"GET",url:`/api/app/trainees/${t}/chart/water`},{apiName:this.apiName}),this.getWithNavigationProperties=t=>this.restService.request({method:"GET",url:`/api/app/trainees/with-navigation-properties/${t}`},{apiName:this.apiName}),this.updateTraineeByTraineeIdAndWeightAndMusclesWeightAndFatPercentAndInDate=(t,e,n,o,s)=>this.restService.request({method:"POST",url:"/api/app/trainees/update-trainee",params:{traineeId:t,weight:e,musclesWeight:n,fatPercent:o,inDate:s}},{apiName:this.apiName}),this.updateTraineeOverviewByInput=t=>this.restService.request({method:"POST",url:"/api/app/trainees",body:t},{apiName:this.apiName}),this.changeCoachForTraineeByInput=t=>this.restService.request({method:"POST",url:"/api/app/trainees/AssignNewCoach",body:t},{apiName:this.apiName}),this.deleteNoteAttachmentById=(t,e)=>this.restService.request({method:"DELETE",url:"/api/app/trainees/DeleteNoteAttachment",params:{id:t,attachmentOrderId:e}},{apiName:this.apiName})}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(s.vgb))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},52201:function(t,e,n){"use strict";n.d(e,{H:function(){return i}});var o=n(43252),s=n(35366);let i=(()=>{class t{constructor(t){this.attachmentService=t.get(o.L)}transform(t){return this.attachmentService.getImageLink(t.attachmentId,t.entity)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(s.zs3,16))},t.\u0275pipe=s.Yjl({name:"imgdownload",type:t,pure:!0}),t})()}}]);