!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function o(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[76317],{76317:function(t,n,i){"use strict";i.r(n),i.d(n,{ChatRoomModule:function(){return ze}});var s=i(46700),c=i(55679),r=i(10135),g=i(99046),d=i(83845),l=i(73756),h=i(56410),p=i(11520),u=i(35366),m=i(2996),f=i(45908),M=i(99624),C=function(){var e=function e(){a(this,e),this.isUserPremitToRecord=!1};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),v=i(61116),x=["aud"];function _(e,t){if(1&e&&u._UZ(0,"audio",6,7),2&e){var n=u.oxw();u.Q6J("src",n.audio,u.LSH)}}function b(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){return u.CHM(n),u.oxw().clear()}),u._UZ(1,"i",9),u.qZA()}}function P(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",10),u.NdJ("click",function(){return u.CHM(n),u.oxw().startPlaying()}),u._UZ(1,"i",11),u.qZA()}}function O(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",12),u.NdJ("click",function(){return u.CHM(n),u.oxw().sendVoice()}),u._UZ(1,"i",13),u.qZA()}}function w(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",8),u.NdJ("click",function(){return u.CHM(n),u.oxw().stopPlaying()}),u._UZ(1,"i",14),u.qZA()}}function y(e,t){1&e&&u._UZ(0,"i",18)}function T(e,t){1&e&&u._UZ(0,"i",19)}var Z=function(e,t){return{"btn-default text-danger":e,"btn-danger":t}};function k(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",15),u.NdJ("click",function(){return u.CHM(n),u.oxw().ClickRecord()}),u.YNc(1,y,1,0,"i",16),u.YNc(2,T,1,0,"i",17),u.qZA()}if(2&e){var o=u.oxw();u.Q6J("ngClass",u.WLB(3,Z,0==o.currentRecordLength,o.currentRecordLength>0)),u.xp6(1),u.Q6J("ngIf",0==o.currentRecordLength),u.xp6(1),u.Q6J("ngIf",o.currentRecordLength>0)}}var I=function(){var e=function(){function e(t,n,o,i){a(this,e),this.cd=t,this.dom=n,this.voiceSettingsService=o,this.localizationService=i,this.chunks=[],this.isEditable=!0,this.hasRecording=!1,this.maxVoiceLengthPerSec=3,this.isUserPremitToRecordOld=!1,this.fileChanged=new u.vpe,this.sendFileClicked=new u.vpe,this.whenRecording=new u.vpe,this.whenPermitRejected=new u.vpe,this.recordingPercentValueChanged=new u.vpe,this.isPlaying=!1,this.wasDestroed=!1,this.currentRecordLengthValue=0,this.lastRecordLengthPerSec=0,this.currentRecordLength=0}return o(e,[{key:"src",set:function(e){if(null!==e){var t=URL.createObjectURL(e);this.audio=this.dom.bypassSecurityTrustUrl(t)}}},{key:"isUserPremitToRecord",get:function(){var e=this.voiceSettingsService.isUserPremitToRecord;return this.isUserPremitToRecordOld!==e&&(this.isUserPremitToRecordOld=e),e},set:function(e){this.voiceSettingsService.isUserPremitToRecord=e}},{key:"currentRecordLength",get:function(){return this.currentRecordLengthValue},set:function(e){this.currentRecordLengthValue=e,0!==e&&(this.lastRecordLengthPerSec=100*e)}},{key:"ngOnInit",value:function(){this.voiceSettingsService.isUserPremitToRecord=!0,this.currentLang=this.localizationService.currentLang}},{key:"ngOnDestroy",value:function(){this.wasDestroed=!0,this.clear()}},{key:"InitializeAndStartRecord",value:function(){var e=this;navigator.mediaDevices.getUserMedia({audio:!0}).then(function(t){e.lsatStram=t,e.mediaRecorder=new MediaRecorder(t),e.mediaRecorder.onstop=function(t){var n=Math.floor(1e3*Math.random()+1);e.lastFileRecorded=e.chunks;var o=new File(e.chunks,"voice".concat(n),{type:"audio/ogg; codecs=opus"});e.fileChanged.emit(o),e.chunks=[];var a=URL.createObjectURL(o);e.audio=e.dom.bypassSecurityTrustUrl(a),e.cd.detectChanges(),e.clearStream()},e.mediaRecorder.ondataavailable=function(t){e.chunks.push(t.data)},e.startRecording()},function(){e.whenPermitRejected.emit()})}},{key:"ClickRecord",value:function(){this.currentRecordLength>0?this.stopRecording():this.InitializeAndStartRecord()}},{key:"startRecording",value:function(){var e=this;this.mediaRecorder&&(this.hasRecording=!1,this.mediaRecorder.start(),this.timeoutHandler=setInterval(function(){e.currentRecordLength+=1;var t=e.recordingPercentValue();t>100?e.stopRecording():(e.whenRecording.emit(100*e.currentRecordLength),e.recordingPercentValueChanged.emit(t))},100))}},{key:"stopRecording",value:function(){this.wasDestroed||(this.mediaRecorder.stop(),this.timeoutHandler&&(clearInterval(this.timeoutHandler),this.currentRecordLength>0&&(this.hasRecording=!0),this.currentRecordLength=0,this.timeoutHandler=null),document.getElementById("recordBtn").blur())}},{key:"clear",value:function(){this.hasRecording=!1,this.whenRecording.emit(0),this.recordingPercentValueChanged.emit(0),this.clearStream()}},{key:"recordingPercentValue",value:function(){return 10*this.currentRecordLength/this.maxVoiceLengthPerSec}},{key:"startPlaying",value:function(){var e=this;this.isPlaying=!0,this.audioElement.nativeElement.play(),setTimeout(function(){e.isPlaying=!1},this.lastRecordLengthPerSec)}},{key:"stopPlaying",value:function(){this.audioElement.nativeElement.pause(),this.isPlaying=!1}},{key:"sendVoice",value:function(){var e=Date.now(),t=new File(this.lastFileRecorded,"".concat(e,".aac"),{type:"audio/ogg; codecs=opus"});this.sendFileClicked.emit(t),this.clear()}},{key:"showRecordBtn",value:function(){return!this.hasRecording&&this.isEditable&&this.isUserPremitToRecord}},{key:"clearStream",value:function(){this.lsatStram&&this.lsatStram.getTracks().forEach(function(e){return e.stop()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.sBO),u.Y36(M.H7),u.Y36(C),u.Y36(s.oQ8))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-voice"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(x,5),2&e)&&(u.iGM(n=u.CRH())&&(t.audioElement=n.first))},inputs:{src:"src",isEditable:"isEditable",hasRecording:"hasRecording",maxVoiceLengthPerSec:"maxVoiceLengthPerSec"},outputs:{fileChanged:"fileChanged",sendFileClicked:"sendFileClicked",whenRecording:"whenRecording",whenPermitRejected:"whenPermitRejected",recordingPercentValueChanged:"recordingPercentValueChanged"},decls:7,vars:6,consts:[["controls","true","hidden","",3,"src",4,"ngIf"],[1,"panel-body"],["class","btn btn-danger btn-circle","type","button",3,"click",4,"ngIf"],["class","btn btn-warning btn-circle","type","button",3,"click",4,"ngIf"],["class","btn btn-primary","type","button",3,"click",4,"ngIf"],["class","btn btn-circle","id","recordBtn","type","button",3,"ngClass","click",4,"ngIf"],["controls","true","hidden","",3,"src"],["aud",""],["type","button",1,"btn","btn-danger","btn-circle",3,"click"],[1,"fa","fa-times"],["type","button",1,"btn","btn-warning","btn-circle",3,"click"],[1,"fa","fa-volume-down"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-paper-plane"],[1,"fa","fa-square"],["id","recordBtn","type","button",1,"btn","btn-circle",3,"ngClass","click"],["class","fa fa-microphone",4,"ngIf"],["class","fa fa-record-vinyl",4,"ngIf"],[1,"fa","fa-microphone"],[1,"fa","fa-record-vinyl"]],template:function(e,t){1&e&&(u.YNc(0,_,2,1,"audio",0),u.TgZ(1,"div",1),u.YNc(2,b,2,0,"button",2),u.YNc(3,P,2,0,"button",3),u.YNc(4,O,2,0,"button",4),u.YNc(5,w,2,0,"button",2),u.YNc(6,k,3,6,"button",5),u.qZA()),2&e&&(u.Q6J("ngIf",t.audio),u.xp6(2),u.Q6J("ngIf",t.hasRecording&&!t.isPlaying&&t.isEditable),u.xp6(1),u.Q6J("ngIf",t.hasRecording&&!t.isPlaying),u.xp6(1),u.Q6J("ngIf",t.hasRecording&&!t.isPlaying),u.xp6(1),u.Q6J("ngIf",t.hasRecording&&t.isPlaying),u.xp6(1),u.Q6J("ngIf",t.showRecordBtn()))},directives:[v.O5,v.mk],styles:[".btn-circle[_ngcontent-%COMP%]{border-radius:50%}.panel-body[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}.panel-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:0;text-align:center;width:34px;height:34px;font-size:18px;line-height:34px;border-radius:50%;border:none;box-shadow:none;margin:0 5px}.panel-body[_ngcontent-%COMP%]   button#recordBtn[_ngcontent-%COMP%], .panel-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{margin:0}"]}),e}(),A=i(29609),S=i(65122),q=function(){var e=function e(t){var n=this;a(this,e),this.restService=t,this.apiName="Default",this.delete=function(e){return n.restService.request({method:"DELETE",url:"/api/app/chat",params:{id:e}},{apiName:n.apiName})},this.getList=function(e){return n.restService.request({method:"GET",url:"/api/app/chat",params:{filterText:e.filterText,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:n.apiName})},this.getMessageList=function(e,t){return n.restService.request({method:"GET",url:"/api/app/chat/".concat(e),params:{afterDate:t.afterDate,beforeDate:t.beforeDate,maxResultCount:t.maxResultCount}},{apiName:n.apiName})},this.send=function(e){return n.restService.request({method:"POST",url:"/api/app/chat",body:e},{apiName:n.apiName})},this.sendToAll=function(e){return n.restService.request({method:"POST",url:"/api/app/chat/broadcast",body:e},{apiName:n.apiName})}};return e.\u0275fac=function(t){return new(t||e)(u.LFG(s.vgb))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),N=i(28157),L=i(92338),R=i(42693),J=function(){var e=function(){function e(t,n){a(this,e),this.environment=t,this.http=n}return o(e,[{key:"getBaseUrl",value:function(){return this.environment.getApiUrl()}},{key:"getActionUrl",value:function(){return"/api/app/attachment-details"}},{key:"sendFile",value:function(e,t){var n=this.getBaseUrl()+this.getActionUrl()+"?AttachmentId=0&Entity=chat",o=new FormData;return o.append("Attachmentfiles",e),o.append("filename",e.name),this.http.post(n,o).subscribe(function(e){t.emit(e.attachmentId)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(s.L$R),u.LFG(R.eN))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),U=i(42373),E=i(43252),B=i(31041),Y=i(79603),D=i(66553),F=i(23733),Q=i(17647),H=i(1663),z=i(52201),V=function(){var e=function(){function e(){a(this,e)}return o(e,[{key:"transform",value:function(e){return(e||"").replace("\r\n","<br>").replace("\n","<br>")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Yjl({name:"multiline",type:e,pure:!0}),e}(),G=["chatAttachmentId"];function j(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",28),u.NdJ("click",function(){return u.CHM(n),u.oxw().showPopup()}),u._UZ(1,"i",29),u.qZA()}}function $(e,t){1&e&&(u.TgZ(0,"div",30),u._uU(1),u.ALo(2,"abpLocalization"),u.qZA()),2&e&&(u.xp6(1),u.hij(" ",u.lcZ(2,1,"::RejectedMicPermission")," "))}function W(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",4),u.TgZ(1,"div",33),u.TgZ(2,"div",37),u.TgZ(3,"label",38),u.TgZ(4,"input",39),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw(2).checkAll=e})("change",function(e){return u.CHM(n),u.oxw(2).checkChanged(e)}),u.qZA(),u.TgZ(5,"div",40),u.TgZ(6,"span",41),u._uU(7),u.ALo(8,"abpLocalization"),u.qZA(),u.TgZ(9,"span",42),u._uU(10),u.ALo(11,"abpLocalization"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",43),u.TgZ(13,"button",44),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).friendsListToggle()}),u._uU(14),u.ALo(15,"abpLocalization"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw(2);u.xp6(4),u.Q6J("ngModel",o.checkAll),u.xp6(3),u.Oqu(u.lcZ(8,4,"::SwitchAll")),u.xp6(3),u.Oqu(u.lcZ(11,6,"::SwitchSelectedOnly")),u.xp6(4),u.hij(" ",u.lcZ(15,8,"::StartSend")," ")}}function X(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",31),u.TgZ(1,"div",32),u.TgZ(2,"div",33),u.TgZ(3,"div",14),u.TgZ(4,"input",34),u.NdJ("change",function(e){return u.CHM(n),u.oxw().sendToAllCheck(e)})("ngModelChange",function(e){return u.CHM(n),u.oxw().sendToAll=e}),u.qZA(),u.TgZ(5,"label",35),u._uU(6),u.ALo(7,"abpLocalization"),u.qZA(),u.qZA(),u.YNc(8,W,16,10,"div",36),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw();u.xp6(4),u.Q6J("ngModel",o.sendToAll),u.xp6(2),u.Oqu(u.lcZ(7,3,"::SendToAll")),u.xp6(2),u.Q6J("ngIf",o.sendToAll)}}function K(e,t){1&e&&(u.TgZ(0,"div",45),u._UZ(1,"div"),u.qZA())}function ee(e,t){if(1&e&&(u.TgZ(0,"h6",58),u._uU(1),u.qZA()),2&e){var n=u.oxw(2).row;u.xp6(1),u.Oqu(n.coachNote)}}function te(e,t){1&e&&(u.TgZ(0,"div",59),u._uU(1," \xa0 "),u.qZA())}var ne=function(e){return{attachmentId:e,entity:"TraineeProfile"}};function oe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"a",47),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().row;return u.oxw().selectChat(e)}),u.TgZ(1,"div",48),u.TgZ(2,"div",49),u.TgZ(3,"div",50),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().row;return u.oxw().divCheckClick(e)}),u._UZ(4,"i",51),u.qZA(),u.TgZ(5,"img",52),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().row;return u.oxw().divCheckClick(e)}),u.ALo(6,"async"),u.ALo(7,"imgdownload"),u.qZA(),u.qZA(),u.TgZ(8,"div",53),u.TgZ(9,"h6",54),u._uU(10),u.qZA(),u.YNc(11,ee,2,1,"h6",55),u.TgZ(12,"p"),u._uU(13),u.qZA(),u.qZA(),u.qZA(),u.TgZ(14,"div",56),u._uU(15),u.ALo(16,"date"),u.YNc(17,te,2,0,"div",57),u.qZA(),u.qZA()}if(2&e){var o=u.oxw().row,a=u.oxw();u.Gre("contact ",a.selected&&a.selected.id==o.id?"active":"deactive-msg",""),u.xp6(3),u.Q6J("ngClass",a.sendToAll&&!a.isExcluded(o)?"shown":"hidden"),u.xp6(2),u.Q6J("src",u.lcZ(6,13,u.lcZ(7,15,u.VKq(19,ne,o.photoAttachmentId))),u.LSH),u.xp6(5),u.Oqu(o.traineeName),u.xp6(1),u.Q6J("ngIf",o.coachNote),u.xp6(1),u.Tol(o.totalUnseenMessages>0?"msg-bold latest-message":"latest-message"),u.xp6(1),u.hij(" ",o.latestMessageText," "),u.xp6(2),u.hij("",u.lcZ(16,17,o.latestMessageDate)," "),u.xp6(2),u.Q6J("ngIf",o.totalUnseenMessages>0)}}function ae(e,t){1&e&&u.YNc(0,oe,18,21,"a",46),2&e&&u.Q6J("ngIf",!t.row.isArchived)}function ie(e,t){1&e&&(u.TgZ(0,"div",60),u.TgZ(1,"div",61),u._UZ(2,"i",62),u.TgZ(3,"h5"),u._uU(4),u.ALo(5,"abpLocalization"),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(4),u.Oqu(u.lcZ(5,1,"::SelectUserToShowChat")))}function se(e,t){if(1&e&&(u.TgZ(0,"h6",91),u._uU(1),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Oqu(n.selected.coachNote)}}function ce(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",85),u.TgZ(1,"div",86),u._uU(2),u.ALo(3,"slice"),u.ALo(4,"uppercase"),u.qZA(),u.TgZ(5,"strong",87),u._uU(6),u.qZA(),u.TgZ(7,"button",88),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).navigateToSelected()}),u._UZ(8,"i",89),u.qZA(),u.YNc(9,se,2,1,"h6",90),u.qZA()}if(2&e){var o=u.oxw(2);u.xp6(2),u.hij(" ",u.Dn7(3,3,u.lcZ(4,7,o.selected.traineeName),0,1)," "),u.xp6(4),u.Oqu(o.selected.traineeName),u.xp6(3),u.Q6J("ngIf",o.selected.coachNote)}}function re(e,t){if(1&e&&(u.TgZ(0,"p"),u._uU(1),u.ALo(2,"date"),u.qZA()),2&e){var n=u.oxw(2).$implicit;u.xp6(1),u.hij(" ",u.lcZ(2,1,n.sendDate),"")}}function ge(e,t){if(1&e&&(u.TgZ(0,"p",106),u.TgZ(1,"span"),u._UZ(2,"div",107),u.ALo(3,"multiline"),u.qZA(),u.qZA()),2&e){var n=u.oxw(3).$implicit,o=u.oxw(2);u.xp6(1),u.Tol(o.isUnseen(n.replyToMessage)?"msg-bold":""),u.xp6(1),u.Q6J("innerHTML",u.lcZ(3,4,n.replyToMessage.message),u.oJD)}}function de(e,t){1&e&&u._UZ(0,"i",108)}function le(e,t){if(1&e&&(u.TgZ(0,"div",109),u._UZ(1,"sw-attachment",110),u.qZA()),2&e){var n=u.oxw(3).$implicit;u.xp6(1),u.Q6J("AttachmentId",n.replyToMessage.attachmentId)("readonly",!0)("isThumbnail",!0)}}function he(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",105),u.TgZ(2,"div",47),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2).$implicit;return u.oxw(2).searchStart(e.replyToMessage)}),u.TgZ(3,"div",97),u.YNc(4,ge,4,6,"p",98),u.YNc(5,de,1,0,"i",103),u.qZA(),u.YNc(6,le,2,3,"div",104),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw(2).$implicit,a=u.oxw(2);u.MT6("msg-reply msg-con media msg-type-",o.replyToMessage.messageType," w-85 ml",o.sentByTrainee?"-auto":"",""),u.xp6(2),u.Gre("msg-body ",o.replyToMessage.sentByTrainee?"trainer":"trainee",""),u.xp6(1),u.Q6J("ngClass",o.replyToMessage.messageType==a.ChatMessageType.Text?"justify-content-between":"justify-content-end"),u.xp6(1),u.Q6J("ngIf",o.replyToMessage.messageType==a.ChatMessageType.Text),u.xp6(1),u.Q6J("ngIf",a.isMessageBeingDeleted(o.replyToMessage.id)),u.xp6(1),u.Q6J("ngIf",o.replyToMessage.messageType!=a.ChatMessageType.Text)}}function pe(e,t){if(1&e&&(u.TgZ(0,"p",106),u.TgZ(1,"span"),u._UZ(2,"div",107),u.ALo(3,"multiline"),u.qZA(),u.qZA()),2&e){var n=u.oxw(2).$implicit,o=u.oxw(2);u.xp6(1),u.Tol(o.isUnseen(n)?"msg-bold":""),u.xp6(1),u.Q6J("innerHTML",u.lcZ(3,4,n.message),u.oJD)}}function ue(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"span",101),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2),t=e.$implicit,o=e.index;return u.oxw(2).deleteMessage(t.id,o)}),u._UZ(1,"i",111),u.qZA()}}function me(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"span",101),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2),t=e.$implicit,o=e.index;return u.oxw(2).saveMessage(t.id,o,t)}),u._UZ(1,"i",112),u.qZA()}}function fe(e,t){1&e&&u._UZ(0,"i",108)}function Me(e,t){if(1&e&&(u.TgZ(0,"div",109),u._UZ(1,"sw-attachment",110),u.qZA()),2&e){var n=u.oxw(2).$implicit;u.xp6(1),u.Q6J("AttachmentId",n.attachmentId)("readonly",!0)("isThumbnail",!0)}}function Ce(e,t){1&e&&(u.TgZ(0,"span"),u._UZ(1,"i",113),u.qZA())}function ve(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",93),u.TgZ(1,"div",94),u.NdJ("dblclick",function(){u.CHM(n);var e=u.oxw().$implicit;return u.oxw(2).reply(e)}),u.YNc(2,re,3,3,"p",95),u.TgZ(3,"div"),u.YNc(4,he,7,11,"div",96),u.TgZ(5,"div",97),u.YNc(6,pe,4,6,"p",98),u.TgZ(7,"span",99),u.YNc(8,ue,2,0,"span",100),u.YNc(9,me,2,0,"span",100),u.TgZ(10,"span",101),u.NdJ("click",function(){u.CHM(n);var e=u.oxw().$implicit;return u.oxw(2).reply(e)}),u._UZ(11,"i",102),u.qZA(),u.qZA(),u.YNc(12,fe,1,0,"i",103),u.qZA(),u.YNc(13,Me,2,3,"div",104),u.TgZ(14,"p"),u.YNc(15,Ce,2,0,"span",95),u._uU(16),u.ALo(17,"date"),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw().$implicit,a=u.oxw(2);u.MT6("msg-con media w-85 ml",o.sentByTrainee?"-auto":"","   searching-",(null==a.searchingMessage?null:a.searchingMessage.id)===o.id?"found":"not-found",""),u.s9C("id",o.id),u.xp6(2),u.Q6J("ngIf",o.firstMessageInDay),u.xp6(1),u.Gre("msg-body ",o.sentByTrainee?"trainer":"trainee",""),u.xp6(1),u.Q6J("ngIf",o.replyToMessage),u.xp6(1),u.Q6J("ngClass",o.messageType==a.ChatMessageType.Text?"justify-content-between":"justify-content-end"),u.xp6(1),u.Q6J("ngIf",o.messageType==a.ChatMessageType.Text),u.xp6(2),u.Q6J("ngIf",a.canDeleteMessage(o)),u.xp6(1),u.Q6J("ngIf",o.messageType==a.ChatMessageType.Text),u.xp6(3),u.Q6J("ngIf",a.isMessageBeingDeleted(o.id)),u.xp6(1),u.Q6J("ngIf",o.messageType!=a.ChatMessageType.Text),u.xp6(1),u.Gre("",o.sentByTrainee?"right":"left"," message-date small text-muted"),u.xp6(1),u.Q6J("ngIf",a.isSeenByTrainee(o)),u.xp6(1),u.hij(" ",u.xi3(17,21,o.sendDate,"h:mm a ")," ")}}function xe(e,t){if(1&e&&(u.TgZ(0,"div"),u.YNc(1,ve,18,24,"div",92),u.qZA()),2&e){var n=t.$implicit,o=u.oxw(2);u.xp6(1),u.Q6J("ngIf",n.chatRoomId===(null==o.selected?null:o.selected.id))}}function _e(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",114),u.TgZ(1,"button",115),u.NdJ("click",function(){var e=u.CHM(n).$implicit;return u.oxw(2).removedSavedMessage(e)}),u._UZ(2,"i",116),u.qZA(),u.TgZ(3,"span",47),u.NdJ("click",function(){var e=u.CHM(n).$implicit,t=u.oxw(2);return t.msgTxt=t.parseMessage(e.message)}),u._uU(4),u.qZA(),u.qZA()}if(2&e){var o=t.$implicit,a=u.oxw(2);u.xp6(4),u.hij(" ",a.parseMessage(o.message)," ")}}function be(e,t){if(1&e&&(u.TgZ(0,"p",106),u.TgZ(1,"span"),u._UZ(2,"div",107),u.ALo(3,"multiline"),u.qZA(),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Tol(n.isUnseen(n.replyMessage)?"msg-bold":""),u.xp6(1),u.Q6J("innerHTML",u.lcZ(3,4,n.replyMessage.message),u.oJD)}}function Pe(e,t){1&e&&u._UZ(0,"i",108)}function Oe(e,t){if(1&e&&(u.TgZ(0,"div",109),u._UZ(1,"sw-attachment",110),u.qZA()),2&e){var n=u.oxw(3);u.xp6(1),u.Q6J("AttachmentId",n.replyMessage.attachmentId)("readonly",!0)("isThumbnail",!0)}}function we(e,t){1&e&&(u.TgZ(0,"span"),u._UZ(1,"i",113),u.qZA())}var ye=function(e){return{expanded:e}};function Te(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",117),u.TgZ(1,"button",118),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).reply(null)}),u._UZ(2,"i",119),u.qZA(),u.TgZ(3,"div",93),u.TgZ(4,"div",120),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2);return e.reply(e.replyMessage)}),u.TgZ(5,"div"),u.TgZ(6,"div",97),u.YNc(7,be,4,6,"p",98),u._UZ(8,"span"),u.YNc(9,Pe,1,0,"i",103),u.qZA(),u.YNc(10,Oe,2,3,"div",104),u.TgZ(11,"p"),u.YNc(12,we,2,0,"span",95),u._uU(13),u.ALo(14,"date"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw(2);u.Q6J("ngClass",u.VKq(20,ye,o.isExpanded)),u.xp6(3),u.Gre("msg-con media w-85 ml",o.replyMessage.sentByTrainee?"-auto":""," custom-zoom"),u.s9C("id",o.replyMessage.id),u.xp6(2),u.Gre("msg-body ",o.replyMessage.sentByTrainee?"trainer":"trainee",""),u.xp6(1),u.Q6J("ngClass",o.replyMessage.messageType==o.ChatMessageType.Text?"justify-content-between":"justify-content-end"),u.xp6(1),u.Q6J("ngIf",o.replyMessage.messageType==o.ChatMessageType.Text),u.xp6(2),u.Q6J("ngIf",o.isMessageBeingDeleted(o.replyMessage.id)),u.xp6(1),u.Q6J("ngIf",o.replyMessage.messageType!=o.ChatMessageType.Text),u.xp6(1),u.Gre("",o.replyMessage.sentByTrainee?"right":"left"," message-date small text-muted"),u.xp6(1),u.Q6J("ngIf",o.isSeenByTrainee(o.replyMessage)),u.xp6(1),u.hij(" ",u.xi3(14,17,o.replyMessage.sendDate,"h:mm a ")," ")}}var Ze=function(e){return{width:e}};function ke(e,t){if(1&e&&(u.TgZ(0,"div",121),u.TgZ(1,"div",122),u._uU(2),u.ALo(3,"number"),u.qZA(),u.TgZ(4,"div",123),u._uU(5),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(1),u.Q6J("ngStyle",u.VKq(6,Ze,n.voicePercent+"%")),u.xp6(1),u.hij(" ",u.xi3(3,3,n.voiceTime/1e3,"1.0-0")," "),u.xp6(3),u.Oqu(n.voiceMaxLength)}}function Ie(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"textarea",128),u.NdJ("keyup.enter",function(){return u.CHM(n),u.oxw(3).sendEnter()})("ngModelChange",function(e){return u.CHM(n),u.oxw(3).msgTxt=e}),u.ALo(1,"abpLocalization"),u.qZA()}if(2&e){var o=u.oxw(3);u.s9C("placeholder",u.lcZ(1,3,"::TypeMessage")),u.Q6J("ngModel",o.msgTxt)("disabled",!o.selected&&!o.sendToAll)}}function Ae(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"sw-attachment",129,130),u.NdJ("attachmentUpdated",function(e){return u.CHM(n),u.oxw(3).attachmentUpdated(e)})("ngModelChange",function(e){return u.CHM(n),u.oxw(3).attachmentId=e}),u.qZA()}if(2&e){var o=u.oxw(3);u.Q6J("isShowSuccessNotification",!o.isMobile)("ngModel",o.attachmentId)("acceptTypes",o.attachmentExt)("maxFilesCount",1)("maxFileSize",2e8)}}function Se(e,t){if(1&e&&(u.TgZ(0,"div",124),u.YNc(1,Ie,2,5,"textarea",125),u.TgZ(2,"div",126),u.YNc(3,Ae,2,5,"sw-attachment",127),u.qZA(),u.qZA()),2&e){var n=u.oxw(2);u.xp6(1),u.Q6J("ngIf",!n.attachmentExt),u.xp6(2),u.Q6J("ngIf",n.attachmentExt)}}function qe(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"button",131),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2);return e.showAttachment(e.ChatMessageType.Text)}),u._UZ(1,"i",132),u.qZA()}}function Ne(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",133),u.TgZ(1,"button",134),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).attachmentsBtnsToggle()}),u._UZ(2,"i",135),u.qZA(),u.TgZ(3,"div",136),u.TgZ(4,"button",137),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2);return e.showAttachment(e.ChatMessageType.Voice)}),u._UZ(5,"i",138),u.qZA(),u.TgZ(6,"button",137),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2);return e.showAttachment(e.ChatMessageType.Image)}),u._UZ(7,"i",139),u.qZA(),u.TgZ(8,"button",137),u.NdJ("click",function(){u.CHM(n);var e=u.oxw(2);return e.showAttachment(e.ChatMessageType.Video)}),u._UZ(9,"i",140),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw(2);u.Q6J("hidden",!o.isAllowAddAttachment),u.xp6(3),u.Q6J("ngClass",o.attachmentsBtnsState?"shown":"hidden")}}function Le(e,t){1&e&&u._UZ(0,"i",144)}function Re(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",141),u.TgZ(1,"button",142),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).sendMsg()}),u.YNc(2,Le,1,0,"i",143),u.qZA(),u.qZA()}if(2&e){var o=u.oxw(2);u.xp6(2),u.Q6J("ngIf",!o.isVoiceRecordBtnShown())}}function Je(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"app-voice",145,146),u.NdJ("whenRecording",function(e){return u.CHM(n),u.oxw(2).voiceLengthChange(e)})("recordingPercentValueChanged",function(e){return u.CHM(n),u.oxw(2).recordingPercentValueChanged(e)})("sendFileClicked",function(e){return u.CHM(n),u.oxw(2).sendFile(e)})("whenPermitRejected",function(){return u.CHM(n),u.oxw(2).onRecordSoundPermitRejected()}),u.qZA()}if(2&e){var o=u.oxw(2);u.Q6J("hasRecording",!1)("isEditable",!0)("maxVoiceLengthPerSec",o.voiceMaxLength)}}function Ue(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",63),u.TgZ(1,"div",64),u.TgZ(2,"div",33),u.TgZ(3,"div",14),u.TgZ(4,"div",13),u.TgZ(5,"div",14),u.YNc(6,ce,10,9,"div",65),u.qZA(),u.TgZ(7,"div",66),u.TgZ(8,"button",44),u.NdJ("click",function(){return u.CHM(n),u.oxw().friendsListToggle()}),u._UZ(9,"i",67),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",68),u.NdJ("scroll",function(e){return u.CHM(n),u.oxw().loadMore(e)}),u.YNc(11,xe,2,1,"div",69),u.TgZ(12,"div",70),u.YNc(13,_e,5,1,"div",71),u.qZA(),u.qZA(),u.YNc(14,Te,15,22,"div",72),u.TgZ(15,"div",73),u.TgZ(16,"div",74),u.YNc(17,ke,6,8,"div",75),u.YNc(18,Se,4,2,"div",76),u.TgZ(19,"div",77),u.YNc(20,qe,2,0,"button",78),u.YNc(21,Ne,10,2,"div",79),u.YNc(22,Re,3,1,"div",80),u.YNc(23,Je,2,3,"app-voice",81),u.qZA(),u.qZA(),u.TgZ(24,"div",82),u.TgZ(25,"div",32),u.TgZ(26,"input",83),u.NdJ("ngModelChange",function(e){return u.CHM(n),u.oxw().enterToSend=e}),u.qZA(),u.TgZ(27,"label",84),u._uU(28),u.ALo(29,"abpLocalization"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&e){var o=u.oxw();u.xp6(6),u.Q6J("ngIf",o.selected),u.xp6(5),u.Q6J("ngForOf",o.messages.items)("ngForTrackBy",o.trackByFn),u.xp6(2),u.Q6J("ngForOf",o.getSavedMessages()),u.xp6(1),u.Q6J("ngIf",o.replyMessage),u.xp6(2),u.Q6J("ngClass",o.getLines()),u.xp6(1),u.Q6J("ngIf",o.voicePercent>0),u.xp6(1),u.Q6J("ngIf",0==o.voicePercent),u.xp6(2),u.Q6J("ngIf",o.attachmentExt&&0==o.voicePercent),u.xp6(1),u.Q6J("ngIf",0==o.voicePercent),u.xp6(1),u.Q6J("ngIf",0==o.voicePercent&&!o.isVoiceRecordBtnShown()),u.xp6(1),u.Q6J("ngIf",o.isVoiceRecordBtnShown()),u.xp6(3),u.Q6J("ngModel",o.enterToSend),u.xp6(2),u.Oqu(u.lcZ(29,14,"::SendOnEnter"))}}function Ee(e,t){if(1&e){var n=u.EpF();u.TgZ(0,"div",147),u.TgZ(1,"div",148),u.TgZ(2,"div",149),u._uU(3),u.ALo(4,"abpLocalization"),u.qZA(),u.qZA(),u.TgZ(5,"div",150),u.TgZ(6,"button",151),u.NdJ("click",function(){return u.CHM(n),u.oxw().resetPage()}),u._UZ(7,"i",152),u._uU(8),u.ALo(9,"abpLocalization"),u.qZA(),u.qZA(),u.qZA()}2&e&&(u.xp6(3),u.hij(" ",u.lcZ(4,2,"::StillUsingThePage")," "),u.xp6(5),u.hij(" ",u.lcZ(9,4,"::Ok")," "))}var Be,Ye=function(){var t=function(){function t(e,n,o,i,s,c,r,g,d,l,h,p,u,m,M,C,v,x,_,b){a(this,t),this.list=e,this.track=n,this.service=o,this.traineeService=i,this.confirmation=s,this.notificationIconService=c,this.dateService=r,this.voiceSettingsService=g,this.soundApiService=d,this.mobileHelperService=l,this.router=h,this.activatedRoute=p,this._attachmentService=u,this.fb=m,this.el=M,this.toaster=C,this.onlineService=v,this.analyticsService=x,this.notificationService=_,this.messagingService=b,this.trackByFn=function(e,t){return null==t?void 0:t.id},this.data={items:[],totalCount:0},this.messages={items:[],totalCount:0},this.excludedItems=[],this.showLoader=!1,this.customViewState=!1,this.attachmentsBtnsState=!1,this.skipItems=0,this.enterToSend=!0,this.sendToAll=!1,this.checkAll=!0,this.filterText="",this.firstSendDate=void 0,this.ChatMessageType=f.Cb,this.headerHeight=0,this.rowHeight=75,this.pageLimit=10,this.attachmentId=0,this.attachmentExt=void 0,this.currentIndx=0,this.hasNewRows=!1,this.firstLoadChat=!0,this.totalUnread=0,this.canShowPopup=!1,this.isMobile=!1,this.firstInteraction=new Date,this.lastInteraction=new Date,this.isPaued=!1,this.isEndPage=!1,this.isSelecting=!1,this.isGettingMsg=!1,this.lines=0,this.soundRecordPermitRejected=!1,this.voiceMaxLength=60,this.voicePercent=0,this.seenIds=[],this.savedMessagesKey="savedMessages",this.messagesBeingDeleted=Array(),this.isExpanded=!1,this.isSearching=!1}return o(t,[{key:"ngOnInit",value:function(){var e=this,t=this;if(t.filterText=t.activatedRoute.snapshot.params.id||"",t.defaultChatRoomId=t.activatedRoute.snapshot.queryParams["rooms-id"]||"",window.opener)window.document.querySelector("body").style.marginTop="-60px",document.getElementsByTagName("body")[0].classList.add("no-head"),document.getElementsByTagName("body")[0].classList.remove("with-head");else if(t.canShowPopup=!0,t.onlineService.popup&&!t.onlineService.popup.closed)return t.onlineService.popup.focus(),t.onlineService.chatGoTo("".concat(t.defaultChatRoomId)),void window.history.go(-1);t.buildForm(),t.onScroll(0),t.isMobile=t.mobileHelperService.GetMobile(),t.filterText.length>0&&setTimeout(function(){t.data&&t.data.items.length>0&&t.selectChat(t.data.items[0])},500),this.messagingService.chatRoomCaptionUpdate.subscribe(function(t){var n,o;if(e.data&&e.data.items&&t.roomId){var a=e.data.items.find(function(e){return e.id==t.roomId});a&&(a.latestMessageText=null!==(n=t.caption)&&void 0!==n?n:"",(null===(o=e.selected)||void 0===o?void 0:o.id)!=a.id&&a.totalUnseenMessages++)}})}},{key:"showPopup",value:function(){var e=this;if(window.opener);else{if(e.onlineService.popup&&!e.onlineService.popup.closed)return e.onlineService.popup.focus(),void e.router.navigate(["/dashboard"]);var t=window.open(window.location.href,"test","scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=700,height=900,left=50,top=50");setTimeout(function(){if(t)return e.onlineService.popup=t,t.focus(),e.router.navigate(["/dashboard"]),t.document.getElementsByTagName("body")[0].classList.add("no-head"),void t.document.getElementsByTagName("body")[0].classList.remove("with-head");alert("The Browser blocked the popup, Please check address bar above to allow chat popup")},500)}}},{key:"ngOnDestroy",value:function(){this.clearIntervalLocal(this.interval)}},{key:"clearIntervalLocal",value:function(e){e&&clearInterval(e)}},{key:"updateInteraction",value:function(){this.lastInteraction=new Date}},{key:"validateInteraction",value:function(){var e=new Date,t=Math.abs(this.lastInteraction.getTime()-e.getTime()),n=(Math.floor(t/864e5),Math.floor(t%864e5/36e5),Math.round(t%864e5%36e5/6e4));Math.round(t%864e5%36e5/1e3),n>30&&(this.isPaued=!0)}},{key:"resetPage",value:function(){window.location.reload()}},{key:"showAttachment",value:function(e){var t=this;switch(this.updateInteraction(),this.attachmentId=0,this.attachmentChatMessageType=e,e){case f.Cb.Image:this.attachmentExt=".png,.jpg,.jpeg";break;case f.Cb.Video:this.attachmentExt=".mp4";break;case f.Cb.Voice:this.attachmentExt=".mp3,.aac,.wav,";break;case f.Cb.Text:this.attachmentExt=void 0}e!=f.Cb.Text&&(this.attachmentsBtnsToggle(),setTimeout(function(){0!=t.attachmentId&&(t.chatAttachmentId.AttachmentId=0),t.chatAttachmentId.showUpload(t.attachmentExt)},500))}},{key:"isAllowAddAttachment",get:function(){return!0}},{key:"buildForm",value:function(){this.form=this.fb.group({chatRoomId:[void 0],message:[void 0],attachmentId:[void 0],messageType:[void 0],attachmentFiles:[void 0],excludedItems:[void 0],replyToMessageId:[void 0]})}},{key:"onScroll",value:function(e){var t=this.el.nativeElement.getBoundingClientRect().height-this.headerHeight;if(!this.isLoading&&e+t>=this.data.items.length*this.rowHeight){var n=this.pageLimit;if(0===this.data.items.length){var o=Math.ceil(t/this.rowHeight);n=Math.max(o,this.pageLimit)}this.isEndPage||this.loadPage(n)}}},{key:"loadPage",value:function(t){var n=this;n.isLoading=!0;var o={};o.filterText=n.filterText,o.skipCount=n.data.items.length,n.service.getList(o).subscribe(function(t){var a=[].concat(e(n.data.items),e(t.items));n.data.items=a,n.data.totalCount=t.totalCount,n.isLoading=!1,n.isEndPage=t.totalCount==o.skipCount,n.selectDefaultRoom()})}},{key:"selectDefaultRoom",value:function(){var e=this;setTimeout(function(){console.log("selectDefaultRoom check "+e.data.items.length),e.data&&e.data.items.length>0&&e.data.items.forEach(function(t){console.log("selectDefaultRoom check item "+t.id+"   "+e.defaultChatRoomId),t.id===e.defaultChatRoomId&&(e.defaultChatRoomId=void 0,e.selectChat(t))})},1e3)}},{key:"loadMore",value:function(e){var t=document.getElementById("chat-conversation-wrapper");this.hasNewRows&&0==t.scrollTop&&!this.firstLoadChat&&this.getMessages()}},{key:"selectChat",value:function(e){console.log("selectChat"),this.reply(void 0),this.analyticsService.log(S.O.View_Chat_Trainee),this.updateInteraction(),this.sendToAll||(this.friendsListToggle(),this.clearIntervalLocal(this.interval),this.resetForm(),this.showLoader=!0,this.selected=e,this.firstSendDate=void 0,this.messages.items=[],this.loadedItems=[],this.firstLoadChat=!0,this.lines=0,this.getMessages())}},{key:"getMessages",value:function(){var t,n=this,o=this;if(!this.isSelecting){var a={maxResultCount:10};if(a.beforeDate=this.firstSendDate,null===(t=this.selected)||void 0===t?void 0:t.id){var i=this.selected.id;this.isSelecting=!0,this.service.getMessageList(i,a).subscribe(function(t){if(o.isSelecting=!1,i==o.selected.id){n.messages.totalCount=t.totalCount,n.hasNewRows=t.totalCount>0,n.loadedItems=n.loadedItems?[].concat(e(n.loadedItems),e(t.items)):t.items,n.currentIndx=n.messages.totalCount<n.currentIndx+10?n.messages.totalCount:n.currentIndx+10,t.items=t.items.map(function(e){return Object.assign(Object.assign({},e),{date:new Date(e.sendDate).toUTCString()})});for(var a=t.items.length-1;a>=0;a--)n.messages.items.unshift(t.items[a]);t.items.length>0&&(n.firstSendDate=t.items[0].sendDate),n.isSearching?n.searchContinue():(setTimeout(function(){n.showLoader=!1},1e3),n.scrollDown(!n.firstLoadChat),n.firstLoadChat&&(n.firstLoadChat=!1,n.interval=setInterval(function(){document.hidden||o.getNewMessages()},1e3)))}},function(e){n.showLoader=!1})}}}},{key:"getNewMessages",value:function(){var t=this;if(!0!==t.isGettingMsg&&(t.validateInteraction(),!t.isPaued)){var n={};n.afterDate=t.messages&&t.messages.items.length>0?t.messages.items[t.messages.items.length-1].sendDate:null;var o=t.selected.id;t.isGettingMsg=!0,t.service.getMessageList(o,n).subscribe(function(n){if(setTimeout(function(){t.isGettingMsg=!1},1e3),o==t.selected.id){var a=e(t.messages.items),i=!1;n.items.forEach(function(e){0==a.filter(function(t){return t.id==e.id}).length&&(a.push(e),i=!0,t.totalUnread++)}),t.messages.items=a,i&&t.totalUnread>0&&setTimeout(function(){t.scrollDown(),t.totalUnread=0},100),o==t.selected.id&&n.items.length>0&&(t.selected.latestMessageText=n.items[n.items.length-1].message),t.setMessagesSeen()}},function(e){setTimeout(function(){t.isGettingMsg=!1},1e3),t.clearIntervalLocal(t.interval)})}}},{key:"setMessagesSeen",value:function(){var e,t,n=!1;null!==(t=null===(e=this.messages)||void 0===e?void 0:e.items)&&void 0!==t&&t&&this.messages.items.forEach(function(e){e.sentByTrainee&&!e.hasSeen&&(n=!0)}),n&&this.notificationIconService.clearMessages()}},{key:"getAllChatRooms",value:function(){var e=this;this.isLoading=!0;var t=this;this.service.getList({maxResultCount:1e3}).subscribe(function(n){e.data.items=n.items,e.data.totalCount=n.totalCount,e.isLoading=!1,t.selectDefaultRoom()})}},{key:"sendToAllCheck",value:function(e){this.updateInteraction(),e.target.checked&&(this.selected=void 0,this.checkAll=!1,this.reply(void 0),this.excludedItems=[],this.getAllChatRooms()),this.messages.items=[],this.clearIntervalLocal(this.interval)}},{key:"checkChanged",value:function(e){this.updateInteraction(),e.target.checked&&(this.excludedItems=[])}},{key:"divCheckClick",value:function(e){this.updateInteraction(),this.checkAll||(0==this.excludedItems.filter(function(t){return t==e.id}).length?this.excludedItems.push(e.id):this.excludedItems=this.removeItemFromExcludedList(e.id))}},{key:"filterTextChanged",value:function(e){this.updateInteraction(),this.data.items=[],this.isEndPage=!1,this.sendToAll&&""==e.target.value?this.getAllChatRooms():this.onScroll(0)}},{key:"isExcluded",value:function(e){return 0!==this.excludedItems.filter(function(t){return t==e.id}).length}},{key:"itemCheckChanged",value:function(e,t){e.target.checked?this.excludedItems.length>0&&(this.excludedItems=this.removeItemFromExcludedList(t.id)):0==this.excludedItems.filter(function(e){return e==t.id}).length&&this.excludedItems.push(t.id)}},{key:"removeItemFromExcludedList",value:function(e){var t=[];return this.excludedItems.forEach(function(n){e!=n&&t.push(n)}),t}},{key:"attachmentUpdated",value:function(e){this.form.get("attachmentFiles").setValue(e.files.toString()),e.files&&0==e.files.length&&this.resetForm(),this.attachmentsBtnsState=!1}},{key:"sendMsg",value:function(){var e=this,t=this;if(this.updateInteraction(),this.attachmentChatMessageType||(this.attachmentChatMessageType=f.Cb.Text),this.attachmentsBtnsState=!1,this.attachmentChatMessageType==f.Cb.Text&&(document.getElementById("chat-message-box").focus(),""==this.msgTxt.trim()))return!1;var n={hasSeen:!1,sentByTrainee:!1};n.message=this.msgTxt,n.messageType=this.attachmentChatMessageType,n.attachmentId=this.attachmentId,this.replyMessage&&(n.replyToMessageId=this.replyMessage.id,n.replyToMessage=this.replyMessage),this.selected&&(n.chatRoomId=this.selected.id.toString(),this.form.get("chatRoomId").setValue(this.selected.id.toString())),this.form.get("message").setValue(this.msgTxt),this.form.get("attachmentId").setValue(this.attachmentId),this.form.get("messageType").setValue(this.attachmentChatMessageType),this.form.get("replyToMessageId").setValue(n.replyToMessageId),this.showLoader=!0,this.sendToAll?(this.form.get("excludedItems").setValue(this.excludedItems),t.reply(void 0),this.service.sendToAll(this.form.value).subscribe(function(){e.messages.items.push(n),e.scrollDown(),e.showLoader=!1,t.toaster.success("::SendToAllSuccess")},function(t){e.showLoader=!1})):(console.log(this.form.value),this.service.send(this.form.value).subscribe(function(o){t.reply(void 0),n.id=o.id,n.sendDate=o.sendDate,e.messages.items.push(n),e.scrollDown(),e.showLoader=!1},function(t){e.showLoader=!1})),this.updateConversationListItems(),this.resetForm()}},{key:"resetForm",value:function(){this.msgTxt=void 0,this.attachmentId=0,this.attachmentExt=void 0,this.attachmentChatMessageType=void 0,this.currentIndx=0}},{key:"updateConversationListItems",value:function(){var e=this;this.selected?(this.selected.latestMessageText=this.attachmentChatMessageType==f.Cb.Text?this.msgTxt:"",this.selected.latestMessageDate=(new Date).toString()):this.data.items.forEach(function(t){0==e.excludedItems.filter(function(e){return e==t.id}).length&&(t.latestMessageText=e.attachmentChatMessageType==f.Cb.Text?e.msgTxt:"",t.latestMessageDate=(new Date).toString())})}},{key:"sendEnter",value:function(){this.enterToSend?(this.lines=0,this.sendMsg()):this.lines+=1}},{key:"getLines",value:function(){switch(this.lines){case 0:return{s0:!0};case 1:return{s1:!0};case 2:return{s2:!0};case 3:return{s3:!0};case 4:default:return{s4:!0}}}},{key:"scrollDown",value:function(e){setTimeout(function(){var t=document.getElementById("chat-conversation-wrapper");t.scrollTop=e?t.clientHeight:t.scrollHeight},50),this.showLoader=!1}},{key:"friendsListToggle",value:function(){this.updateInteraction(),this.customViewState=!this.customViewState,this.customViewState||(this.selected=void 0,this.clearIntervalLocal(this.interval))}},{key:"attachmentsBtnsToggle",value:function(){if(this.updateInteraction(),this.chatAttachmentId&&!this.chatAttachmentId.allowAdd)return!1;this.attachmentsBtnsState=!this.attachmentsBtnsState}},{key:"voiceLengthChange",value:function(e){this.voiceTime=e,this.updateInteraction()}},{key:"recordingPercentValueChanged",value:function(e){this.voicePercent=e,this.updateInteraction()}},{key:"sendFile",value:function(e){var t=this,n=new u.vpe;n.subscribe(function(e){t.attachmentId=e,t.attachmentChatMessageType=f.Cb.Voice,t.sendMsg()}),this.soundApiService.sendFile(e,n)}},{key:"isVoiceRecordBtnShown",value:function(){return!this.msgTxt&&0==this.attachmentId}},{key:"onRecordSoundPermitRejected",value:function(){var e=this;this.soundRecordPermitRejected=!0,setTimeout(function(){e.soundRecordPermitRejected=!1},5e3)}},{key:"isInViewport",value:function(e){if(!e)return!0;var t=document.getElementById(e).getBoundingClientRect();return t.top>=0||t.bottom<=(window.innerHeight||document.documentElement.clientHeight)}},{key:"isUnseen",value:function(e){return!(!e.sentByTrainee||e.hasSeen||(e.hasSeen=!0,this.seenIds.indexOf(e.id)<0&&(this.seenIds.push(e.id),this.selected.totalUnseenMessages>0&&this.selected.totalUnseenMessages--),0))}},{key:"isSeenByTrainee",value:function(e){return!(e.sentByTrainee||!e.hasSeen)}},{key:"navigateToSelected",value:function(){var e=this;this.updateInteraction();var t=new Date;this.traineeService.getByUserId(this.selected.traineeAppUserId).subscribe(function(n){window.opener?(t.getDate(),t.getMonth(),t.getFullYear(),e.onlineService.hostGoTo("".concat(n.id)),window.focus(),window.opener.focus()):e.router.navigate(["/trainees/details",n.id,t.getDate(),t.getMonth(),t.getFullYear()])})}},{key:"setSavedMessages",value:function(e){localStorage.setItem(this.savedMessagesKey,JSON.stringify(e)),this.temptSavedMessages=e}},{key:"getMessageMultiline",value:function(e){return(e||"").replace("\r\n","<br>").replace("\n","<br>")}},{key:"getSavedMessages",value:function(){if(this.temptSavedMessages)return this.temptSavedMessages;var e=localStorage.getItem(this.savedMessagesKey);if(!e){var t=[];return this.setSavedMessages(t),t}return this.temptSavedMessages=JSON.parse(e),this.temptSavedMessages}},{key:"parseMessage",value:function(e){var t,n;return e.replace("@",null!==(n=null===(t=this.selected)||void 0===t?void 0:t.traineeName)&&void 0!==n?n:"")}},{key:"saveMessage",value:function(e,t,n){var o="";o=(n=Object.assign({},n)).message,n.message=o.replace(this.selected.traineeName,"@");var a=this.getSavedMessages();a.some(function(t){return t.id==e})||(a.push(n),this.setSavedMessages(a))}},{key:"removedSavedMessage",value:function(e){var t=this.getSavedMessages().filter(function(t){return t.id!==e.id});this.setSavedMessages(t)}},{key:"deleteMessage",value:function(e,t){var n=this;this.updateInteraction(),this.messagesBeingDeleted.includes(e)||(this.messagesBeingDeleted.push(e),this.service.delete(e).pipe((0,p.x)(function(){n.messagesBeingDeleted=n.messagesBeingDeleted.filter(function(t){return t!=e})})).subscribe(function(){t===n.messages.items.length-1&&(n.selected.latestMessageText=n.messages.items.length>1?n.getMessageCaption(n.messages.items[n.messages.items.length-2]):" "),n.messages.items=n.messages.items.filter(function(t){return t.id!=e})}))}},{key:"getMessageCaption",value:function(e){var t=" ";switch(e.messageType){case f.Cb.Text:t=e.message.length>50?e.message.substring(0,47)+"...":e.message;break;case f.Cb.Image:t="[Image]";break;case f.Cb.Video:t="[Video]";break;case f.Cb.Voice:t="[Voice]"}return t}},{key:"isMessageBeingDeleted",value:function(e){return this.messagesBeingDeleted.includes(e)}},{key:"canDeleteMessage",value:function(e){var t=A(e.sendDate).isAfter(A().subtract(1,"hours"));return e.id&&!e.sentByTrainee&&t&&!this.isMessageBeingDeleted(e.id)}},{key:"reply",value:function(e){var t=this;this.replyMessage=e,setTimeout(function(){t.isExpanded=!!e},1)}},{key:"searchStart",value:function(e){console.log("start search "),this.searchingMessage=e,this.isSearching=!0,this.searchContinue()}},{key:"searchContinue",value:function(){if(console.log("searching "),this.searchingMessage&&this.isSearching){var e=document.getElementById(this.searchingMessage.id);if(console.log(e),e)return console.log("found it "),this.isSearching=!1,void e.scrollIntoView();this.getMessages()}}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(s.XNV),u.Y36(s.vR3),u.Y36(q),u.Y36(N.s),u.Y36(c.YP),u.Y36(L.O),u.Y36(m.R),u.Y36(C),u.Y36(J),u.Y36(U.k4),u.Y36(h.F0),u.Y36(h.gz),u.Y36(E.L),u.Y36(B.qu),u.Y36(u.SBq),u.Y36(c.MJ),u.Y36(Y.x),u.Y36(S.y),u.Y36(L.O),u.Y36(D.o))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-chat-room"]],viewQuery:function(e,t){var n;(1&e&&(u.Gf(G,5),u.Gf(I,5)),2&e)&&(u.iGM(n=u.CRH())&&(t.chatAttachmentId=n.first),u.iGM(n=u.CRH())&&(t.voice=n.first))},features:[u._Bn([s.XNV,m.R])],decls:35,vars:28,consts:[[1,"d-md-block","d-none"],[1,"row","entry-row"],[1,"col-11","content-header-container"],[1,"content-header-title","custom-green"],[1,"col-auto"],["class","btn btn-sm btn-warning ",3,"click",4,"ngIf"],["id","chat_wrapper"],[1,"px-lg-4","h-100"],["class","alert alert-danger mb-0",4,"ngIf"],[1,"d-flex","rounded-lg","overflow-hidden","shadow","border","position-relative","h-100"],[1,"col-lg-3","col-md-4","col-12","p-0","right-section","custom-view-mobile",3,"ngClass"],[1,"contacts","h-100"],[1,"search-contact"],[1,"form-row"],[1,"col"],["autocomplete","off","id","contacts-filter","spellcheck","false","type","search",1,"form-control","form-control-sm","ng-valid","ng-dirty","ng-touched",3,"ngModel","placeholder","change","ngModelChange"],[1,"messages-box"],["class","send-to-all",4,"ngIf"],["id","contact-list",1,"list-group","rounded-0","room-list"],["class","loader-2",4,"ngIf"],["default","",3,"columnMode","count","footerHeight","headerHeight","list","loadingIndicator","rowHeight","rows","scrollbarV","scroll"],["cellClass","contact-row","prop","id",3,"name"],["ngx-datatable-cell-template",""],[1,"col-lg-9","col-md-8","col-12","p-0","left-section","custom-view-mobile"],["class","row h-100",4,"ngIf"],["class","conversation-box h-100",4,"ngIf"],["size","md",3,"visible","suppressUnsavedChangesWarning","visibleChange"],["abpBody",""],[1,"btn","btn-sm","btn-warning",3,"click"],[1,"fa","fa-share"],[1,"alert","alert-danger","mb-0"],[1,"send-to-all"],[1,"custom-control","custom-checkbox"],[1,"row"],["id","send-to-all","type","checkbox",1,"custom-control-input","ng-untouched","ng-pristine","ng-valid",3,"ngModel","change","ngModelChange"],["for","send-to-all",1,"custom-control-label"],["class","col-auto",4,"ngIf"],[1,"col",2,"max-height","20px"],[1,"switch"],["type","checkbox","id","togBtn",3,"ngModel","ngModelChange","change"],[1,"slider","round"],[1,"on"],[1,"off"],[1,"col-auto","d-md-none"],[1,"btn","btn-sm","contacts-toggle",3,"click"],[1,"loader-2"],[3,"class","click",4,"ngIf"],[3,"click"],[1,"trainee-data"],[1,"trainee-photo-con"],[1,"card-img-overlay",3,"ngClass","click"],[1,"fas","fa-check"],["alt","ss","onerror","this.src='../../../../../assets/avatar.jpg'",1,"s-icon-lg",3,"src","click"],[1,"px-3"],[1,"trainee-name"],["class","coach-note",4,"ngIf"],[1,"message-date"],["class","badge badge-info",4,"ngIf"],[1,"coach-note"],[1,"badge","badge-info"],[1,"row","h-100"],[1,"col","my-auto","text-center"],[1,"fa","fa-exclamation-circle","text-warning",2,"font-size","48px","margin-bottom","15px"],[1,"conversation-box","h-100"],[1,"sender-name"],["class","trainee-details pointer",4,"ngIf"],[1,"col-auto","d-md-none","d-block"],[1,"fas","fa-arrow-left"],["id","chat-conversation-wrapper",1,"chat-box","bg-light-2",2,"overflow-y","scroll",3,"scroll"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"w-100","text-center"],["class","badge badge-default border",4,"ngFor","ngForOf"],["class","chat-box bg-dark-2","id","slider",3,"ngClass",4,"ngIf"],["id","send-message-form",1,"message-form","bg-light-2",2,"position","relative","z-index","1000"],[1,"actions",3,"ngClass"],["class","progress",4,"ngIf"],["class","inputs-con",4,"ngIf"],[1,"btns-con"],["class","btn-attach-cancel btn btn-primary",3,"click",4,"ngIf"],["class","attachments-con",3,"hidden",4,"ngIf"],["class","send-btn",4,"ngIf"],[3,"hasRecording","isEditable","maxVoiceLengthPerSec","whenRecording","recordingPercentValueChanged","sendFileClicked","whenPermitRejected",4,"ngIf"],[1,"mx-5"],["id","send-on-enter","type","checkbox",1,"custom-control-input","ng-untouched","ng-pristine","ng-valid",3,"ngModel","ngModelChange"],["for","send-on-enter",1,"custom-control-label"],[1,"trainee-details","pointer"],[1,"trainee-photo"],["id","conversation-title",1,"trainee-name"],[1,"btn","btn-back","btn-sm","contacts-toggle",3,"click"],[1,"fa","fa-search"],["class","coach-note-2",4,"ngIf"],[1,"coach-note-2"],[3,"id","class",4,"ngIf"],[3,"id"],[1,"message","media-body","position-relative",3,"dblclick"],[4,"ngIf"],[3,"class",4,"ngIf"],[1,"d-flex",3,"ngClass"],["style","white-space: normal;",4,"ngIf"],[1,"auto-hide-hover"],["style","cursor:pointer","class","mx-2 d-inline ",3,"click",4,"ngIf"],[1,"mx-2","d-inline",2,"cursor","pointer",3,"click"],[1,"fa","fa-2x","fa-reply","text-warning"],["class","fa fa-spinner fa-spin","style","width: 20px;height: 20px;font-size: 20px;","aria-hidden","true",4,"ngIf"],["class","media-viewer-con",4,"ngIf"],[1,"message","media-body","position-relative"],[2,"white-space","normal"],[3,"innerHTML"],["aria-hidden","true",1,"fa","fa-spinner","fa-spin",2,"width","20px","height","20px","font-size","20px"],[1,"media-viewer-con"],["Entity","Chat",3,"AttachmentId","readonly","isThumbnail"],[1,"fa","fa-2x","fa-times","text-danger"],[1,"fa","fa-2x","fa-save","text-primary"],[1,"fa","fa-check-double","text-success"],[1,"badge","badge-default","border"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-times","text-success","text-danger"],["id","slider",1,"chat-box","bg-dark-2",3,"ngClass"],[1,"btn","btn-sm","btn-danger","pull-left",3,"click"],[1,"fa","fa-times"],[1,"message","media-body","position-relative",3,"click"],[1,"progress"],["aria-valuemax","100","aria-valuemin","0","aria-valuenow","70","role","progressbar",1,"progress-bar",3,"ngStyle"],[1,"max-length"],[1,"inputs-con"],["class","form-control ng-untouched ng-pristine ng-valid","id","chat-message-box","maxlength","2000","name","message","type","text",3,"ngModel","disabled","placeholder","keyup.enter","ngModelChange",4,"ngIf"],[1,"attachment-con"],["Entity","Chat","class","attached-files","id","attachment-id","name","chatAttachmentId",3,"isShowSuccessNotification","ngModel","acceptTypes","maxFilesCount","maxFileSize","attachmentUpdated","ngModelChange",4,"ngIf"],["id","chat-message-box","maxlength","2000","name","message","type","text",1,"form-control","ng-untouched","ng-pristine","ng-valid",3,"ngModel","disabled","placeholder","keyup.enter","ngModelChange"],["Entity","Chat","id","attachment-id","name","chatAttachmentId",1,"attached-files",3,"isShowSuccessNotification","ngModel","acceptTypes","maxFilesCount","maxFileSize","attachmentUpdated","ngModelChange"],["chatAttachmentId",""],[1,"btn-attach-cancel","btn","btn-primary",3,"click"],[1,"fa","fa-close"],[1,"attachments-con",3,"hidden"],["type","button",1,"btn","btn-primary",3,"click"],[1,"fa","fa-paperclip"],[1,"files-type",3,"ngClass"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-file-audio"],[1,"fas","fa-image"],[1,"fas","fa-video"],[1,"send-btn"],["id","send-message-button","type","button",1,"btn","btn-primary",3,"click"],["class","fa fa-paper-plane",4,"ngIf"],[1,"fa","fa-paper-plane"],[3,"hasRecording","isEditable","maxVoiceLengthPerSec","whenRecording","recordingPercentValueChanged","sendFileClicked","whenPermitRejected"],["voice",""],["validateOnSubmit","",1,"app-assign-exercise-program"],[1,"mt-2","fade-in-top"],[1,"alert","alert-warning"],[1,"col-12","modal-footer"],[1,"btn","btn-success","btn-save",3,"click"],[1,"fa","fa-check"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"h1",3),u._uU(4),u.ALo(5,"abpLocalization"),u.qZA(),u.TgZ(6,"div"),u._UZ(7,"abp-breadcrumb"),u.qZA(),u.qZA(),u.TgZ(8,"div",4),u.YNc(9,j,2,0,"button",5),u.qZA(),u.qZA(),u.qZA(),u.TgZ(10,"div",6),u.TgZ(11,"div",7),u.YNc(12,$,3,3,"div",8),u.TgZ(13,"div",9),u.TgZ(14,"div",10),u.TgZ(15,"div",11),u.TgZ(16,"div",12),u.TgZ(17,"div",13),u.TgZ(18,"div",14),u.TgZ(19,"input",15),u.NdJ("change",function(e){return t.filterTextChanged(e)})("ngModelChange",function(e){return t.filterText=e}),u.ALo(20,"abpLocalization"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(21,"div",16),u.YNc(22,X,9,5,"div",17),u.TgZ(23,"div",18),u.YNc(24,K,2,0,"div",19),u.TgZ(25,"ngx-datatable",20),u.NdJ("scroll",function(e){return t.onScroll(e.offsetY)}),u.TgZ(26,"ngx-datatable-column",21),u.ALo(27,"abpLocalization"),u.YNc(28,ae,1,1,"ng-template",22),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div",23),u.YNc(30,ie,6,3,"div",24),u.YNc(31,Ue,30,16,"div",25),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(32,"abp-modal",26),u.NdJ("visibleChange",function(e){return t.isPaued=e}),u.YNc(33,Ee,10,6,"ng-template",null,27,u.W1O),u.qZA()),2&e&&(u.xp6(4),u.Oqu(u.lcZ(5,22,"::ChatRooms")),u.xp6(5),u.Q6J("ngIf",t.canShowPopup),u.xp6(3),u.Q6J("ngIf",t.soundRecordPermitRejected),u.xp6(2),u.Q6J("ngClass",t.customViewState?"hidden":"shown"),u.xp6(5),u.MGl("placeholder","",u.lcZ(20,24,"::SearchInContacs"),"..."),u.Q6J("ngModel",t.filterText),u.xp6(3),u.Q6J("ngIf",t.data.totalCount>0),u.xp6(2),u.Q6J("ngIf",t.showLoader),u.xp6(1),u.Q6J("columnMode","force")("count",t.data.totalCount)("footerHeight",0)("headerHeight",t.headerHeight)("list",t.list)("loadingIndicator",t.isLoading)("rowHeight",t.rowHeight)("rows",t.data.items)("scrollbarV",!0),u.xp6(1),u.s9C("name",u.lcZ(27,26,"::traineeName")),u.xp6(4),u.Q6J("ngIf",!t.selected&&!t.sendToAll),u.xp6(1),u.Q6J("ngIf",t.selected||t.sendToAll),u.xp6(1),u.Q6J("visible",t.isPaued)("suppressUnsavedChangesWarning",!1))},directives:[c.LI,v.O5,v.mk,B.Fj,B.JJ,B.On,F.m,Q.nE,c.x7,c.j3,Q.UC,Q.vq,c.zS,B.Wl,v.sg,H.Y,v.PC,B.nD,I],pipes:[s.fuE,v.Ov,z.H,v.uU,v.OU,v.gd,V,v.JJ],styles:['#chat_wrapper[_ngcontent-%COMP%]{height:80vh}#chat_wrapper[_ngcontent-%COMP%]   .s-icon-lg[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;-o-object-fit:cover;object-fit:cover;padding:2px}@media (max-width:992px){#chat_wrapper[_ngcontent-%COMP%]   .s-icon-lg[_ngcontent-%COMP%]{width:40px;height:40px}}#chat_wrapper[_ngcontent-%COMP%]   .btn-back[_ngcontent-%COMP%]{position:absolute;left:0;top:0}#chat_wrapper[_ngcontent-%COMP%]   .msg-bold[_ngcontent-%COMP%]{font-weight:1000;font-size:15px}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]{margin:-4px -15px;height:calc(100vh - 60px)}#chat_wrapper[_ngcontent-%COMP%]   .d-flex.rounded-lg.h-100[_ngcontent-%COMP%]{border:0!important;box-shadow:none!important}}@media screen and (min-width:768px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]{border-left:1px solid #dee2e6}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]{padding:15px;background:#fff}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]{padding:10px}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .search-contact[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:36px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]{height:calc(100% - 66px)}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]{height:calc(100% - 57px)}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]{background:#f2f2f2}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding:15px 45px 15px 15px}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]{padding:10px 45px 10px 15px}}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after, #chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .send-to-all[_ngcontent-%COMP%]   .custom-control[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{right:-20px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between;width:100%;height:100%;padding:15px}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]{background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fff;color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{color:#fff}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact.active[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{color:#f0f0f0}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]{position:relative;display:inline-block;align-self:center}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay[_ngcontent-%COMP%]{padding:0;background:#000000bf;border-radius:50%;line-height:36px;text-align:center;color:#fff;transition:all .4s ease-in-out}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay.hidden[_ngcontent-%COMP%]{opacity:0;z-index:-1}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .card-img-overlay.shown[_ngcontent-%COMP%]{opacity:1;z-index:2}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-photo-con[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fdb915 50%/cover no-repeat;text-align:center;width:36px;height:36px;line-height:36px;font-size:16px;border-radius:50%;display:inline-block}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .trainee-data[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{margin-bottom:0;color:#7a7d81;font-size:.92308rem}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .latest-message[_ngcontent-%COMP%]{flex:100%;font-size:1rem;margin-bottom:0}#chat_wrapper[_ngcontent-%COMP%]   .contacts[_ngcontent-%COMP%]   .messages-box[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{font-size:11px;color:#6c757d;align-self:start}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;overflow-y:scroll;-ms-overflow-style:none;scrollbar-width:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{flex:0 1 auto;padding:15px;border-bottom:1px solid #ccc;background:#fff}@media screen and (max-width:767px){#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]{padding:10px}}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .trainee-photo[_ngcontent-%COMP%]{background:#fdb915 50%/cover no-repeat;text-align:center;width:36px;height:36px;line-height:36px;font-size:16px;border-radius:50%;display:inline-block}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .trainee-name[_ngcontent-%COMP%]{margin-right:10px;display:inline-block;margin-bottom:0;color:#6c757d}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .sender-name[_ngcontent-%COMP%]   .contacts-toggle[_ngcontent-%COMP%]{box-shadow:none;border:2px solid #fdb915;background:none;color:#fdb915;width:36px;height:36px;line-height:36px;border-radius:50%;text-align:center;padding:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{flex:1 1 auto;padding:15px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.w-85[_ngcontent-%COMP%]{width:85%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{padding:5px 10px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]{border-radius:6px;color:#000;background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn{background:#fff!important;border:#fff!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn:hover{color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body.trainee[_ngcontent-%COMP%]{border-radius:6px;background:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{text-align:left}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-bottom:15px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]{content-visibility:auto;max-height:100px;overflow:hidden;border:1px solid #fdb915;border-radius:6px;zoom:87%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-1001[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-1002[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-Image[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.msg-type-Video[_ngcontent-%COMP%]{zoom:61%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply.w-85[_ngcontent-%COMP%]{width:85%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{padding:5px 10px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]{border-radius:6px;color:#000;background:#fdb715c2}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn{background:#fff!important;border:#fff!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainer[_ngcontent-%COMP%]     .media-viewer-con .download-btn .btn:hover{color:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body.trainee[_ngcontent-%COMP%]{border-radius:6px;background:#ffffffe3}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]   .message-date[_ngcontent-%COMP%]{text-align:left}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]   .msg-con.msg-reply[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{margin-bottom:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]{flex:0 1 auto;border-top:1px solid #ccc}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{border-radius:5px;margin:10px;background:#fff;box-shadow:0 0 .2rem #ccc!important;position:relative;height:40px;display:flex;flex-flow:row nowrap;padding-left:3px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]{flex-basis:100%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{z-index:2;height:40px;resize:none;border:none;padding:10px 5px 0;background-color:#0000!important;outline:none;border-radius:5px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{box-shadow:0 0 .2rem #fdb915!important}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{border-radius:50px;flex-basis:100%;height:34px;margin:3px 3px 0 10px;position:relative;background:#f1f1f1}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{font-size:14px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]   .max-length[_ngcontent-%COMP%]{position:absolute;top:50%;left:5px;transform:translateY(-50%);font-size:14px}@media screen and (max-width:768px){#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .progress[_ngcontent-%COMP%]{margin:3px 3px 0 5px}}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]{display:flex;flex-flow:row nowrap;align-items:center}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .btn-attach-cancel[_ngcontent-%COMP%]{color:#dc3545;background:#fff;padding:0;text-align:center;width:34px;height:34px;line-height:34px;font-size:18px;border-radius:50%;border:none;box-shadow:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]{position:relative;margin:0 6px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{padding:0;text-align:center;width:34px;height:34px;font-size:18px;line-height:34px;border-radius:50%;background:#fff;color:#fdb915;border:none;box-shadow:none}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:-1}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.hidden[_ngcontent-%COMP%]{top:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.hidden[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{transform:translate(-50%,-40px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(2){transform:translate(-50%,-80px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type.shown[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:nth-child(3){transform:translate(-50%,-120px)}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .attachments-con[_ngcontent-%COMP%]   .files-type[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;left:50%;transform:translate(-50%);width:34px;height:34px;line-height:34px;border-radius:50%;font-size:18px;padding:0;text-align:center;transition:all .4s cubic-bezier(.68,0,.27,1);box-shadow:none;color:#fff}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:34px;width:34px;line-height:34px;border-radius:50%;text-align:center;padding:0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .btns-con[_ngcontent-%COMP%]   .send-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{padding:0 43px 10px 0}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]:checked ~ .custom-control-label[_ngcontent-%COMP%]:before{background:#fdb915}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-input[_ngcontent-%COMP%]{top:3px;right:23px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]{padding-right:4px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:before{right:-20px;padding:8px;top:-2px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]   .custom-control-label[_ngcontent-%COMP%]:after{right:-17px;top:2px;width:13px;height:13px}#chat_wrapper[_ngcontent-%COMP%]     .contact-row{padding:0!important}#chat_wrapper[_ngcontent-%COMP%]     .contact-row .datatable-body-cell-label{height:100%}#chat_wrapper[_ngcontent-%COMP%]   .alert-danger[_ngcontent-%COMP%] + .d-flex.rounded-lg.h-100[_ngcontent-%COMP%]{height:calc(100% - 60px)!important}@media screen and (max-width:767px){.custom-view-mobile[_ngcontent-%COMP%]{transition:all .4s ease-in-out}.custom-view-mobile.right-section[_ngcontent-%COMP%]{position:relative;z-index:3}.custom-view-mobile.right-section.hidden[_ngcontent-%COMP%]{left:-100%;opacity:0}.custom-view-mobile.right-section.shown[_ngcontent-%COMP%]{left:0;opacity:1}.custom-view-mobile.left-section[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;bottom:0;z-index:1;background:#fff}.view-contacts[_ngcontent-%COMP%]{text-align:left;margin:0 -12px 15px}}@media screen and (max-width:767px) and (max-width:768px){.view-contacts[_ngcontent-%COMP%]{margin-top:15px}}@media screen and (max-width:767px){.view-contacts[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{background:#fdb915}}.attached-files[_ngcontent-%COMP%]     .sw-tags{padding:0!important;border:none;border-top:1px solid #ccc}@media screen and (max-width:767px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:300px!important}}@media screen and (max-width:575px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:120px!important}}@media screen and (max-width:400px){.attached-files[_ngcontent-%COMP%]     .sw-tags .sw-tag{max-width:50px!important}}.attached-files[_ngcontent-%COMP%]     .form-control{border:none;padding:0 15px 0 0!important;height:40px;border-radius:5px!important;box-shadow:none;background-color:#0000!important;display:flex;flex-flow:row nowrap;flex:0 0 auto;width:auto}.attached-files[_ngcontent-%COMP%]     .input-group-append{align-self:center}  .attachment-con .p-fileupload-choose{display:none}  #contact-list{height:calc(100% - 49px)}@media screen and (max-width:767px){  #contact-list{height:calc(100% - 39px)}}  #contact-list ngx-datatable{height:100%}.loaderDiv[_ngcontent-%COMP%]{border-radius:50%;border:6px solid #f3f3f3;border-top-color:#fdb915;width:20px;height:20px;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(1turn)}}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}.switch[_ngcontent-%COMP%]{position:relative;display:inline-block;width:80px;height:25px}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.slider[_ngcontent-%COMP%]{cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#ca2222}.slider[_ngcontent-%COMP%], .slider[_ngcontent-%COMP%]:before{position:absolute;transition:.4s}.slider[_ngcontent-%COMP%]:before{content:"";height:16px;width:16px;left:4px;bottom:4px;background-color:#fff}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]{background-color:#fdb915}input[_ngcontent-%COMP%]:focus + .slider[_ngcontent-%COMP%]{box-shadow:0 0 1px #2196f3}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]:before{transform:translateX(55px)}.on[_ngcontent-%COMP%]{display:none}.off[_ngcontent-%COMP%], .on[_ngcontent-%COMP%]{color:#fff;position:absolute;transform:translate(-50%,-50%);top:50%;left:50%;font-size:10px;font-family:Verdana,sans-serif}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .on[_ngcontent-%COMP%]{display:block}input[_ngcontent-%COMP%]:checked + .slider[_ngcontent-%COMP%]   .off[_ngcontent-%COMP%]{display:none}.slider.round[_ngcontent-%COMP%]{border-radius:34px}.slider.round[_ngcontent-%COMP%]:before{border-radius:50%}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s1[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s1[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s2[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s2[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:80px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s3[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s3[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:100px}#chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s4[_ngcontent-%COMP%], #chat_wrapper[_ngcontent-%COMP%]   .conversation-box[_ngcontent-%COMP%]   .message-form[_ngcontent-%COMP%]   .actions.s4[_ngcontent-%COMP%]   .inputs-con[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:120px}h6.coach-note[_ngcontent-%COMP%], h6.trainee-name[_ngcontent-%COMP%]{max-width:160px}h6.coach-note[_ngcontent-%COMP%], h6.coach-note-2[_ngcontent-%COMP%], h6.trainee-name[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}h6.coach-note-2[_ngcontent-%COMP%]{max-width:360px}  .sw-tags.form-control.isThumbnail-container{background-color:transparent!important}#slider[_ngcontent-%COMP%]{height:0;transition:height .15s ease-out;overflow:hidden;background:#d5d5d5}#slider.expanded[_ngcontent-%COMP%]{height:326px;transition:height .15s ease-in}.auto-hide-hover[_ngcontent-%COMP%]{opacity:.3}.auto-hide-hover[_ngcontent-%COMP%]:hover{opacity:1}.custom-zoom[_ngcontent-%COMP%]{zoom:87%}.searching-found[_ngcontent-%COMP%]   .msg-body[_ngcontent-%COMP%]{box-shadow:0 4px 58px -13px #d4b414;-webkit-box-shadow:0 4px 58px -13px #d4b414;-moz-box-shadow:0 4px 58px -13px #d4b414}']}),t}(),De=[{path:":id",component:Ye,canActivate:[s.a1M,s.nG9]},{path:"",component:Ye,canActivate:[s.a1M,s.nG9]}],Fe=function(){var e=function e(){a(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[h.Bz.forChild(De)],h.Bz]}),e}(),Qe=i(56137),He=i(42590),ze=((Be=function e(){a(this,e)}).\u0275fac=function(e){return new(e||Be)},Be.\u0275mod=u.oAB({type:Be}),Be.\u0275inj=u.cJS({imports:[[Fe,s.IR2,c.e2,B.UX,l.Ck,d.vv,g.h2,r.lQ,r.M,Qe.m,r.XC,He.rk]]}),Be)},28157:function(e,t,n){"use strict";n.d(t,{s:function(){return s}});var o=n(35366),i=n(46700),s=function(){var e=function e(t){var n=this;a(this,e),this.restService=t,this.apiName="Default",this.changeCoordinatorForTraineeByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/change-trainee-coordinator",body:e},{apiName:n.apiName})},this.deleteAccount=function(){return n.restService.request({method:"POST",url:"/api/app/trainees/DeleteAccount"},{apiName:n.apiName})},this.exportListPayments=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/export",body:e},{apiName:n.apiName})},this.get=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e)},{apiName:n.apiName})},this.getByUserId=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/get-by-user-id")},{apiName:n.apiName})},this.getCommitmentSummary=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/get-commitment-summary",body:e},{apiName:n.apiName})},this.getGeneralStatistics=function(){return n.restService.request({method:"GET",url:"/api/app/trainees/general-statistics"},{apiName:n.apiName})},this.getLisGuid=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/GetLisGuidAsync",body:e},{apiName:n.apiName})},this.getListByStatus=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/trainee-without-progress",body:e},{apiName:n.apiName})},this.getListPayments=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/traineepayment",body:e},{apiName:n.apiName})},this.getNotesListByDate=function(e,t,o,a){return n.restService.request({method:"GET",url:"/api/app/trainees/Note-ByDay",params:{traineeId:e,day:t,maxResultCount:o,skipCount:a}},{apiName:n.apiName})},this.getSimpleList=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list",body:e},{apiName:n.apiName})},this.getSimpleList2=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list2",body:e},{apiName:n.apiName})},this.getSimpleListSummary=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list-summary",body:e},{apiName:n.apiName})},this.getTraineBodyMassChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/bodymass")},{apiName:n.apiName})},this.getTraineeFatsChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/fats")},{apiName:n.apiName})},this.getTraineeIntensityLevelForUserByInput=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/GetTraineeIntensityLevelForUser",params:{traineeId:e.traineeId}},{apiName:n.apiName})},this.getTraineeMesurmentsById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/Mesurments",params:{id:e}},{apiName:n.apiName})},this.getTraineeMusclesChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/muscles")},{apiName:n.apiName})},this.getGetTraineeProfileGeneralById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/general?id=".concat(e)},{apiName:n.apiName})},this.getGetTraineeProfileGeneral2ById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/general2?id=".concat(e)},{apiName:n.apiName})},this.getTraineeOverviewBasicInfoById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/overview?id=".concat(e)},{apiName:n.apiName})},this.getTraineeProfileSummaryById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/profile?id=".concat(e)},{apiName:n.apiName})},this.getTraineeStatisticsByTraineeIdAndInDate=function(e,t){return n.restService.request({method:"GET",url:"/api/app/trainees/get-trainee-statistics",params:{traineeId:e,inDate:t}},{apiName:n.apiName})},this.getTraineeWaightChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/weight")},{apiName:n.apiName})},this.getRefreshTrainee=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/refresh/".concat(e)},{apiName:n.apiName})},this.getTraineeWaterChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/water")},{apiName:n.apiName})},this.getWithNavigationProperties=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/with-navigation-properties/".concat(e)},{apiName:n.apiName})},this.updateTraineeByTraineeIdAndWeightAndMusclesWeightAndFatPercentAndInDate=function(e,t,o,a,i){return n.restService.request({method:"POST",url:"/api/app/trainees/update-trainee",params:{traineeId:e,weight:t,musclesWeight:o,fatPercent:a,inDate:i}},{apiName:n.apiName})},this.updateTraineeOverviewByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees",body:e},{apiName:n.apiName})},this.changeCoachForTraineeByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/AssignNewCoach",body:e},{apiName:n.apiName})},this.deleteNoteAttachmentById=function(e,t){return n.restService.request({method:"DELETE",url:"/api/app/trainees/DeleteNoteAttachment",params:{id:e,attachmentOrderId:t}},{apiName:n.apiName})}};return e.\u0275fac=function(t){return new(t||e)(o.LFG(i.vgb))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},52201:function(e,t,n){"use strict";n.d(t,{H:function(){return c}});var i=n(43252),s=n(35366),c=function(){var e=function(){function e(t){a(this,e),this.attachmentService=t.get(i.L)}return o(e,[{key:"transform",value:function(e){return this.attachmentService.getImageLink(e.attachmentId,e.entity)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Y36(s.zs3,16))},e.\u0275pipe=s.Yjl({name:"imgdownload",type:e,pure:!0}),e}()}}])}();