!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(!e)return;if("string"==typeof e)return t(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,i)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[17013],{38749:function(e,t,n){"use strict";n.d(t,{K:function(){return z}});var r=n(55679),a=n(31041),o=n(2996),c=n(11520),d=n(43835),l=n(44689),u=n(35366),g=n(46700),p=n(94773),m=n(28157),h=n(43117),f=n(89486),v=n(99046),x=n(61116),y=n(55794),b=n(23733),I=n(42163),Z=n(28451),D=n(40739),S=n(67917),E=n(83865),w=n(40906),A=n(26289),k=n(14160),C=n(73545),T=n(65122),M=n(46140),N=n(26471),P=["board"];function q(e,t){}function _(e,t){if(1&e&&u._UZ(0,"app-exercise-program-day",5),2&e){var i=t.extraData,n=t.day,s=u.oxw();u.Q6J("exerciseDayModel",i)("isSummary",s.isSummary)("day",n)("IsEditable",!1)}}function U(e,t){}var O=function(){var e=function(){function e(t,n,s,r,a,o,c,d,l,u,g,p){i(this,e),this.list=t,this.track=n,this.programService=s,this.dayService=r,this.confirmation=a,this.navLoadingService=o,this.dateService=c,this.langService=d,this.permissionService=l,this.toaster=u,this.analyticsService=g,this.fb=p,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!0,this._programId=0,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1}return s(e,[{key:"ngOnInit",value:function(){}},{key:"programId",get:function(){return this._programId},set:function(e){console.log("set prog"+e),this._programId=e,this._programId>0&&this.loadProgram()}},{key:"loadProgram",value:function(){var e=this,t=this.programId;0!==t&&(isNaN(t)||e.programService.getWithNavigationProperties(Number(t)).subscribe(function(t){e.selected=t;var i={};i.exerciseProgramId=t.exerciseProgram.id,i.maxResultCount=1e3,e.dayService.getList(i).subscribe(function(t){e.selectedDays=t,e.initialProgram()})}))}},{key:"initialProgram",value:function(){this.board.setup(1,S.w.OneWeek,!0,void 0,"planed-ex","0")}},{key:"dataChanged",value:function(e){}},{key:"dayDataChanged",value:function(e){}},{key:"weekCreated",value:function(e){var t=this;e.days.forEach(function(e,i){e.InitiateItems();var n=t.selectedDays.items.filter(function(t){return t.exerciseProgramDay.dayNumber==e.dayId});if(n.length>0){var s=n[0].exerciseProgramDay;e.addItem(new E.h(s.id,s.name,e,new w.k(s)))}})}},{key:"weekDeleted",value:function(e){}},{key:"itemDeleted",value:function(e){var t=this;this.dayService.delete(e.itemId).subscribe(function(i){t.selectedDays.items=t.selectedDays.items.filter(function(t){return t.exerciseProgramDay.id!=e.itemId})})}},{key:"itemEdited",value:function(e){this.toaster.info("::ProgramIsReadOnly")}},{key:"itemViewed",value:function(e){this.toaster.info("::ProgramIsReadOnly")}},{key:"itemCreated",value:function(e){}},{key:"itemCopiedMoved",value:function(e){}},{key:"isCurrentUserAdmin",get:function(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(g.XNV),u.Y36(g.vR3),u.Y36(A.J),u.Y36(p._k),u.Y36(r.YP),u.Y36(k.a),u.Y36(o.R),u.Y36(C.C),u.Y36(g.$AH),u.Y36(r.MJ),u.Y36(T.y),u.Y36(a.qu))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-exercise-programs-viewer"]],viewQuery:function(e,t){var i;(1&e&&u.Gf(P,5),2&e)&&(u.iGM(i=u.CRH())&&(t.board=i.first))},inputs:{programId:"programId"},features:[u._Bn([g.XNV,o.R])],decls:8,vars:3,consts:[[3,"noHead","IsEditable","isDayFullHight","itemViewed","weekCreated","weekDeleted","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["itemContent",""],["navContent",""],[3,"exerciseDayModel","isSummary","day","IsEditable"]],template:function(e,t){1&e&&(u.TgZ(0,"app-board-container",0,1),u.NdJ("itemViewed",function(e){return t.itemViewed(e)})("weekCreated",function(e){return t.weekCreated(e)})("weekDeleted",function(e){return t.weekDeleted(e)})("itemDeleted",function(e){return t.itemDeleted(e)})("itemCreated",function(e){return t.itemCreated(e)})("itemCopiedMoved",function(e){return t.itemCopiedMoved(e)})("itemEdited",function(e){return t.itemEdited(e)}),u.YNc(2,q,0,0,"ng-template",null,2,u.W1O),u.YNc(4,_,1,4,"ng-template",null,3,u.W1O),u.YNc(6,U,0,0,"ng-template",null,4,u.W1O),u.qZA()),2&e&&u.Q6J("noHead",!0)("IsEditable",!1)("isDayFullHight",!t.isSummary)},directives:[M.U,N.H],styles:["@media screen{.btn-group{display:flex}.btn-group button{width:auto}}.week-list-container{height:auto!important}"],encapsulation:2}),e}();function L(e,t){if(1&e&&(u.TgZ(0,"h3"),u._uU(1),u.ALo(2,"abpLocalization"),u.qZA()),2&e){var i=u.oxw();u.xp6(1),u.hij(" ",u.lcZ(2,1,i.selected?"AbpUi::Edit":"::AssignExerciseProgram")," ")}}function J(e,t){1&e&&(u.TgZ(0,"div",11),u.TgZ(1,"label",21),u._uU(2),u.ALo(3,"abpLocalization"),u.qZA(),u._UZ(4,"sw-date-picker",22),u.qZA()),2&e&&(u.xp6(2),u.hij(" ",u.lcZ(3,1,"::StartDate")," "))}function Y(e,t){if(1&e&&(u.TgZ(0,"span",25),u._uU(1),u.qZA()),2&e){var i=u.oxw().$implicit;u.xp6(1),u.hij(" ",i.selectionCount," ")}}function F(e,t){if(1&e&&(u.TgZ(0,"p",23),u._uU(1),u.qZA(),u.YNc(2,Y,2,1,"span",24)),2&e){var i=t.$implicit;u.xp6(1),u.hij(" ",i.displayName," "),u.xp6(1),u.Q6J("ngIf",i.selectionCount>0)}}function G(e,t){if(1&e&&u._UZ(0,"app-exercise-programs-viewer",26),2&e){var i=u.oxw(2);u.Q6J("programId",i.getExerciseProgramId())}}var Q=function(){return{standalone:!0}};function B(e,t){if(1&e){var i=u.EpF();u.TgZ(0,"form",3),u.NdJ("ngSubmit",function(){return u.CHM(i),u.oxw().submitForm()}),u.TgZ(1,"div",4),u._UZ(2,"div",5),u.YNc(3,J,5,3,"div",6),u.TgZ(4,"div",7),u.TgZ(5,"label",8),u._uU(6),u.ALo(7,"abpLocalization"),u.qZA(),u.TgZ(8,"span",9),u._uU(9),u.ALo(10,"abpLocalization"),u.qZA(),u.TgZ(11,"input",10),u.NdJ("ngModelChange",function(e){return u.CHM(i),u.oxw().userIntensityLevel=e}),u.qZA(),u.qZA(),u.TgZ(12,"div",11),u.TgZ(13,"label",12),u._uU(14),u.ALo(15,"abpLocalization"),u.qZA(),u.TgZ(16,"p-autoComplete",13),u.NdJ("onClear",function(){return u.CHM(i),u.oxw().onClear()})("completeMethod",function(e){return u.CHM(i),u.oxw().startSearchProgram(e)})("search",function(e){return u.CHM(i),u.oxw().startSearchProgram(e)}),u.ALo(17,"abpLocalization"),u.YNc(18,F,3,2,"ng-template",14),u.qZA(),u.qZA(),u.TgZ(19,"div",5),u.YNc(20,G,1,1,"app-exercise-programs-viewer",15),u.qZA(),u.qZA(),u.TgZ(21,"div",16),u.TgZ(22,"button",17,18),u._uU(24),u.ALo(25,"abpLocalization"),u.qZA(),u.TgZ(26,"button",19),u._UZ(27,"i",20),u._uU(28),u.ALo(29,"abpLocalization"),u.qZA(),u.qZA(),u.qZA()}if(2&e){var n=u.oxw();u.Q6J("formGroup",n.form),u.xp6(3),u.Q6J("ngIf",!n.isMutipleAssign),u.xp6(3),u.hij(" ",u.lcZ(7,15,"::IntensityLevel")," "),u.xp6(3),u.hij(" ",u.lcZ(10,17,"::IntensityLevel"+n.userIntensityLevel)," "),u.xp6(2),u.Q6J("step",1)("ngModel",n.userIntensityLevel)("ngModelOptions",u.DdM(27,Q)),u.xp6(3),u.hij(" ",u.lcZ(15,19,"::ExerciseProgram")," "),u.xp6(2),u.s9C("placeholder",u.lcZ(17,21,"::ExerciseProgram")),u.Q6J("suggestions",n.AllPrograms)("type",n.searchType())("dropdown",!0),u.xp6(4),u.Q6J("ngIf",n.getExerciseProgramId()),u.xp6(4),u.hij(" ",u.lcZ(25,23,"AbpUi::Cancel")," "),u.xp6(4),u.hij(" ",u.lcZ(29,25,"::Ok")," ")}}var z=function(){var e=function(){function e(t,n,s,r,a,o,c,d,l,u,g){i(this,e),this.list=t,this.track=n,this.service=s,this.traineeService=r,this.confirmation=a,this.dateService=o,this.localCacheService=c,this.toaster=d,this.l=l,this.assignExerciseProgramService=u,this.fb=g,this.isModalBusy=!1,this.isModalOpen=!1,this._userIntensityLevel=3,this.filters={},this.isMutipleAssign=!1}return s(e,[{key:"ngOnInit",value:function(){}},{key:"buildForm",value:function(){var e,t=((null===(e=this.selected)||void 0===e?void 0:e.assignedExerciseProgram)||{}).exerciseProgramId;this.form=this.fb.group({exerciseProgramId:[null!=t?t:null,[a.kI.required]],users:[[]],startDate:[void 0,[a.kI.required]]}),this.form.get("startDate").valueChanges.subscribe(function(e){console.log(e)})}},{key:"createUser",value:function(){return this.fb.group({value:"",label:""})}},{key:"hideForm",value:function(){var e=this;this.isModalOpen=!1,setTimeout(function(){e.form.reset()},100)}},{key:"showForm",value:function(){this.buildForm(),this.isModalOpen=!0,this.getIntensityLevelForUser()}},{key:"userIntensityLevel",get:function(){return this._userIntensityLevel},set:function(e){e!=this._userIntensityLevel&&(this.AllPrograms=[],this.form&&this.form.get("exerciseProgramId").setValue(void 0)),this._userIntensityLevel=e}},{key:"getIntensityLevelForUser",value:function(){var e=this,t={};t.traineeId=this.filters.traineeId,t.traineeId&&t.traineeId>0&&this.traineeService.getTraineeIntensityLevelForUserByInput(t).subscribe(function(t){e.userIntensityLevel=t.intensityLevel})}},{key:"submitFormInternalForMultiple",value:function(){var e=this,t=this,i={items:[]},n=this.form.get("exerciseProgramId").value;n&&n.id&&(n=n.id),this.mutipleAssignItems.filter(function(e){return e.isSelected&&e.startSateTraining}).forEach(function(e){var t={};t.exerciseProgramId=n,t.startDate=e.startSateTraining,t.traineeId=e.id,i.items.push(t)}),this.service.assignMultipleByAssignInput(i).subscribe(function(i){if(t.clearStorage(),t.localCacheService.tempDisable(60),i.scheduled>0){var s=e.l.instant("::ProgramScheduledSuccessFullyFor",i.scheduled.toString());t.toaster.success(s)}if(i.succeeded>0){var r=e.l.instant("::ProgramAssignedSuccessFullyFor",i.succeeded.toString());t.toaster.info(r)}if(i.faild>0){var a=e.l.instant("::ProgramAssignedFailedFor",i.faild.toString());t.toaster.error(a)}t.assignExerciseProgramService.onAssigned.emit(n),setTimeout(function(){t.hideForm()},1)})}},{key:"clearStorage",value:function(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}},{key:"submitForm",value:function(){this.submitFormInternal(!1)}},{key:"submitFormInternal",value:function(e){var t=this,i=this;if(this.isMutipleAssign)this.submitFormInternalForMultiple();else if(!this.form.invalid){this.filters.exerciseProgramId=this.form.get("exerciseProgramId").value;var n=this.filters.exerciseProgramId;n&&n.id&&(n=n.id),this.filters.exerciseProgramId=n,this.filters.exerciseProgramId||(this.filters.exerciseProgramId=void 0);var s=this.form.get("startDate").value;console.log(s),console.log(typeof s),this.filters.startDate=this.dateService.parseMomentToString(s),this.filters.isOverride=e,this.service.assignByAssignInput(this.filters).pipe((0,c.x)(function(){return t.isModalBusy=!1})).subscribe(function(e){e?(setTimeout(function(){i.assignExerciseProgramService.onAssigned.emit(i.filters.exerciseProgramId)},2),i.toaster.success("::ProgramAssignedSuccessFully"),setTimeout(function(){i.hideForm()},1)):i.confirmation.warn("::ProgramOverride","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,d.h)(function(e){return e===r.Tv.Status.confirm}),(0,l.w)(function(){return i.submitFormInternal(!0),null})).subscribe(function(){})})}}},{key:"getAssignDate",value:function(e,t){var i=this,n=this;if(null==t)this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(function(s){t=s.startDays;var r=new Date;null!=t&&(r=i.addDays(r,t));var a=r.toLocalISOString();n.assignExerciseProgramService.onGetAssignDate.emit({id:e,dateString:a})});else{t>0&&t++,t++;var s=new Date;null!=t&&(s=this.addDays(s,t));var r=s.toLocalISOString();n.assignExerciseProgramService.onGetAssignDate.emit({id:e,dateString:r})}}},{key:"autoAssigne",value:function(e,t,i){null==i?(this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(function(e){i=e.startDays}),this.autoAssigneInternal(e,t,i)):(i>0&&i++,i++,this.autoAssigneInternal(e,t,i||0))}},{key:"autoAssigneInternal",value:function(e,t,i){var n=new Date;null!=i&&(n=this.addDays(n,i));var s=this,r=n.toLocalISOString();this.service.assignByAssignInput({exerciseProgramId:t,isOverride:!0,traineeId:e,traineeUserId:[],startDate:r}).subscribe(function(e){s.clearStorage(),s.assignExerciseProgramService.onAssigned.emit(s.filters.exerciseProgramId)})}},{key:"create",value:function(e,t){var i=this;this.isMutipleAssign=!1,this.filters.traineeId=e,this.selected=void 0,this.showForm();var n=new Date;null!=t?(t>0&&t++,t++,n=this.addDays(n,t),this.form.get("startDate").setValue(n)):this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(function(e){n=i.addDays(n,t=e.startDays),i.form.get("startDate").setValue(n)})}},{key:"createMultiple",value:function(e){this.filters.traineeId=void 0,this.isMutipleAssign=!0,this.selected=void 0,this.mutipleAssignItems=e,this.showForm(),this.form.get("startDate").setValue(new Date)}},{key:"addDays",value:function(e,t){if(0===t)return e;var i=new Date(e);return i.setDate(i.getDate()+t),i}},{key:"startSearchProgram",value:function(e){var t=this,i={};i.filter=e.query,i.intensityLevel=this.userIntensityLevel,i.maxResultCount=50,i.traineeId=this.filters.traineeId,this.service.getExerciseProgramLookup(i).subscribe(function(e){t.AllPrograms=e.items})}},{key:"onSelect",value:function(e){}},{key:"onClear",value:function(){this.filters.exerciseProgramId=void 0}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}},{key:"getExerciseProgramId",value:function(){if(!this.form)return null;if(!this.form.get("exerciseProgramId"))return null;var e=this.form.get("exerciseProgramId").value;return(null==e?void 0:e.id)?e.id:e}},{key:"assign2",value:function(){this.filters.exerciseProgramId=0,this.filters.exerciseProgramId||(this.filters.exerciseProgramId=void 0);var e=this.form.get("startDate").value;console.log(e),console.log(typeof e),this.filters.startDate=this.dateService.parseMomentToString(e),this.filters.isOverride=!1,this.service.suggestByAssignInput(this.filters).subscribe(function(e){})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(g.XNV),u.Y36(g.vR3),u.Y36(p.RT),u.Y36(m.s),u.Y36(r.YP),u.Y36(o.R),u.Y36(h.F),u.Y36(r.MJ),u.Y36(g.oQ8),u.Y36(f.I),u.Y36(a.qu))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-assign-exercise-program-to-user"]],outputs:{getAssignDate:"getAssignDate",autoAssigne:"autoAssigne",create:"create",createMultiple:"createMultiple"},features:[u._Bn([o.R])],decls:5,vars:2,consts:[["size","xl",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"app-assign-exercise-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"col-12"],["class","form-group col-md-4 col-12",4,"ngIf"],[1,"form-group","col-4"],["for","exercise-program-intensityLevel"],[1,"float-right"],["type","range","min","1","max","5","id","exercise-program-intensityLevel","name","intensityLevel",1,"form-control-range",3,"step","ngModel","ngModelOptions","ngModelChange"],[1,"form-group","col-md-4","col-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","exerciseProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","field","displayName","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","onClear","completeMethod","search"],["pTemplate","item"],[3,"programId",4,"ngIf"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],["for","app-user-coordinator-app-user-id"],["id","startDate","formControlName","startDate","name","startDate"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"],[3,"programId"]],template:function(e,t){1&e&&(u.TgZ(0,"abp-modal",0),u.NdJ("visibleChange",function(e){return t.isModalOpen=e}),u.YNc(1,L,3,3,"ng-template",null,1,u.W1O),u.YNc(3,B,30,28,"ng-template",null,2,u.W1O),u.qZA()),2&e&&u.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)},directives:[r.zS,a._Y,a.JL,g.YzZ,a.sg,v.hL,x.O5,a.eT,a.Fj,y.a,a.JJ,b.m,a.On,I.Qc,a.u,v.J5,Z.jx,D.L,O],pipes:[g.fuE],styles:["@media (max-width:768px){  .app-assign-exercise-program .p-autocomplete-panel{max-width:100%}}  .app-assign-exercise-program .program-name{white-space:normal}  .app-assign-exercise-program .badge{min-width:40px;font-size:90%;text-align:center}  .app-assign-exercise-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),e}()},89486:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var s=n(35366),r=function(){var e=function e(){i(this,e),this.onAssigned=new s.vpe,this.onGetAssignDate=new s.vpe};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e}()},21876:function(t,n,r){"use strict";r.d(n,{d:function(){return kt}});var a=r(46700),o=r(35366),c=r(2996),d=r(67917),l=r(83865),u=r(58450),g=r(89486),p=r(28450),m=r(65122),h=r(94773),f=r(55679),v=r(56410),x=r(73545),y=r(43117),b=r(31041),I=r(61116),Z=r(69244),D=r(89443),S=function(){var e=function(){function e(t,n){i(this,e),this.service=t,this.localCacheService=n,this.ttl=900}return s(e,[{key:"getDayKey",value:function(e){var t="assinged_ex_".concat(e.assignedExerciseProgramId,"_").concat(e.calendarDate).replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",t),t}},{key:"clearStorage",value:function(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}},{key:"save",value:function(e,t,i){var n=this;if((!e||e.isAllSuperSetsValid())&&(!e||e.isValid())){var s=e.convertToDto();if(e.id){var r={};r.dayNumber=s.dayNumber,r.calendarDate=s.calendarDate,r.assignedExerciseProgramId=s.assignedExerciseProgramId,r.assignedExerciseProgramDayItems=s.assignedExerciseProgramDayItems,r.exerciseProgramId=s.exerciseProgramId,r.name=s.name,r.nameEn=s.nameEn,this.service.update(e.id,r).subscribe(function(s){s.exerciseProgramName=e.exerciseProgramName;var r=new l.h(s.id,s.name,t,new u.x(s.exerciseProgramName,s));t.clearItems(),t.addItem(r),console.log(r);var a={};a.assignedExerciseProgramDay=s;try{var o=n.getDayKey(s),c=JSON.stringify({on:Date(),data:a});n.localCacheService.put(o,c,n.ttl)}catch(d){n.clearStorage()}i()},function(e){console.log(e)})}else{var a={};a.dayNumber=s.dayNumber,a.calendarDate=s.calendarDate,a.assignedExerciseProgramId=s.assignedExerciseProgramId,a.exerciseProgramId=s.exerciseProgramId,a.assignedExerciseProgramDayItems=s.assignedExerciseProgramDayItems,a.name=s.name,a.nameEn=s.nameEn,0!==a.assignedExerciseProgramDayItems.length||a.name&&" "!==a.name||(a.name="Rest Day",a.nameEn="Rest Day"),this.service.create(a).subscribe(function(e){var s=new l.h(e.id,e.name,t,new u.x(e.exerciseProgramName,e));t.addItem(s),console.log(s);var r={};r.assignedExerciseProgramDay=e;try{var a=n.getDayKey(e),o=JSON.stringify({on:Date(),data:r});n.localCacheService.put(a,o,n.ttl)}catch(c){n.clearStorage()}i()},function(e){console.log(e)})}}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.LFG(h.LM),o.LFG(y.F))},e.\u0275prov=o.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),E=r(16237),w=r(55e3),A=r(55794),k=r(23733),C=r(863);function T(e,t){1&e&&(o.TgZ(0,"h3"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::Exercises")," "))}function M(e,t){if(1&e&&(o.TgZ(0,"fieldset",41),o.TgZ(1,"legend",22),o.TgZ(2,"span",28),o._uU(3),o.qZA(),o.TgZ(4,"span",30),o._uU(5),o.qZA(),o.O4$(),o.TgZ(6,"svg",42),o._UZ(7,"path",26),o._UZ(8,"path",27),o.qZA(),o.qZA(),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(3),o.Oqu(i.name),o.xp6(2),o.Oqu(i.nameEn)}}function N(e,t){1&e&&o._UZ(0,"i",43)}function P(e,t){1&e&&o._UZ(0,"i",43)}function q(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return e.isExpaneded=!e.isExpaneded}),o._UZ(1,"i",45),o.qZA()}}function _(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",44),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return e.isExpaneded=!e.isExpaneded}),o._UZ(1,"i",46),o.qZA()}}function U(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",47),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(4).startDelete(e)}),o._UZ(1,"i",48),o.qZA()}}function O(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",49),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(4).cancelDelete(e)}),o._UZ(1,"i",50),o.qZA()}}function L(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",51),o.TgZ(1,"div",52),o.TgZ(2,"div",52),o.TgZ(3,"div",53),o.TgZ(4,"button",44),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(2).index;return o.oxw(3).down(e)}),o._UZ(5,"i",54),o.qZA(),o.TgZ(6,"button",44),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(2).index;return o.oxw(3).up(e)}),o._UZ(7,"i",55),o.qZA(),o.qZA(),o.TgZ(8,"div"),o._UZ(9,"app-exercise-item",56),o.qZA(),o.TgZ(10,"div",53),o.TgZ(11,"button",57),o.NdJ("click",function(){return o.CHM(i),o.oxw().$implicit.addNewDetail()}),o._uU(12),o.ALo(13,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(9),o.Q6J("exerciseItem",null==n?null:n.exercise),o.xp6(3),o.hij(" ",o.lcZ(13,2,"::AddGroup")," ")}}function J(e,t){1&e&&(o.TgZ(0,"div",4),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::ExerciseSeconds")," "))}function Y(e,t){1&e&&(o.TgZ(0,"div",4),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::Weight")," "))}function F(e,t){1&e&&(o.TgZ(0,"div",4),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::RepeatCount")," "))}function G(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",67),o.TgZ(1,"div",68),o.TgZ(2,"div",69),o._uU(3),o.ALo(4,"abpLocalization"),o.qZA(),o.TgZ(5,"div",70),o.TgZ(6,"button",71),o.NdJ("click",function(){return o.CHM(i),o.oxw().$implicit.addNewDetail()}),o._UZ(7,"i",72),o._uU(8),o.ALo(9,"abpLocalization"),o.qZA(),o.TgZ(10,"button",73),o.NdJ("click",function(){return o.CHM(i),o.oxw().$implicit.delete()}),o._UZ(11,"i",48),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&e){var n=o.oxw().index;o.xp6(3),o.AsE(" ",o.lcZ(4,3,"::Group")," ",n+1," "),o.xp6(5),o.hij(" ",o.lcZ(9,5,"::AddSubGroup")," ")}}function Q(e,t){if(1&e&&(o.TgZ(0,"div",4),o.TgZ(1,"div",81),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA(),o.qZA()),2&e){var i=o.oxw(2).index;o.xp6(2),o.AsE(" ",o.lcZ(3,2,"::Group")," ",i+1," ")}}function B(e,t){if(1&e&&(o.TgZ(0,"div",69),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e){var i=o.oxw().index;o.xp6(1),o.AsE(" ",o.lcZ(2,2,"::Group")," ",i+1," ")}}function z(e,t){if(1&e&&(o.TgZ(0,"div",82),o.TgZ(1,"is-empty",83),o.TgZ(2,"span",84),o._uU(3),o.ALo(4,"abpLocalization"),o.qZA(),o.qZA(),o.qZA()),2&e){var i=o.oxw(2).$implicit;o.xp6(1),o.Q6J("value",i.exerciseSeconds),o.xp6(2),o.Oqu(o.lcZ(4,2,"::Minute"))}}var j=function(e){return{"has-error":e}};function H(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",85),o.TgZ(1,"input",86),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw(2).$implicit.exerciseSeconds=e}),o.qZA(),o.qZA()}if(2&e){var n=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngClass",o.VKq(2,j,n.exerciseSecondsIsInvalid()))("ngModel",n.exerciseSeconds)}}function $(e,t){if(1&e&&(o.TgZ(0,"div",4),o.YNc(1,z,5,4,"div",76),o.YNc(2,H,2,4,"div",77),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",!i.isEditing),o.xp6(1),o.Q6J("ngIf",i.isEditing)}}function R(e,t){if(1&e&&(o.TgZ(0,"div",82),o._UZ(1,"is-empty",83),o.qZA()),2&e){var i=o.oxw(2).$implicit;o.xp6(1),o.Q6J("value",i.weight)}}function V(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",85),o.TgZ(1,"input",87),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw(2).$implicit.weight=e}),o.qZA(),o.qZA()}if(2&e){var n=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngClass",o.VKq(2,j,n.weightIsInvalid()))("ngModel",n.weight)}}function W(e,t){if(1&e&&(o.TgZ(0,"div",4),o.YNc(1,R,2,1,"div",76),o.YNc(2,V,2,4,"div",77),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",!i.isEditing),o.xp6(1),o.Q6J("ngIf",i.isEditing)}}function X(e,t){if(1&e&&(o.TgZ(0,"div",82),o._UZ(1,"is-empty",83),o.qZA()),2&e){var i=o.oxw(2).$implicit;o.xp6(1),o.Q6J("value",i.repeatCount)}}function K(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",85),o.TgZ(1,"input",88),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw(2).$implicit.repeatCount=e}),o.qZA(),o.qZA()}if(2&e){var n=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngClass",o.VKq(2,j,n.repeatCountIsInvalid()))("ngModel",n.repeatCount)}}function ee(e,t){if(1&e&&(o.TgZ(0,"div",4),o.YNc(1,X,2,1,"div",76),o.YNc(2,K,2,4,"div",77),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",!i.isEditing),o.xp6(1),o.Q6J("ngIf",i.isEditing)}}function te(e,t){if(1&e&&(o.TgZ(0,"div",82),o._UZ(1,"is-empty",83),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.Q6J("value",i.restSeconds)}}function ie(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",85),o.TgZ(1,"input",89),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().$implicit.restSeconds=e}),o.qZA(),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(1),o.Q6J("ngClass",o.VKq(2,j,n.restSecondsIsInvalid()))("ngModel",n.restSeconds)}}function ne(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",90),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).$implicit.convertToDropSet()}),o._UZ(1,"i",91),o.qZA()}}function se(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",92),o.NdJ("click",function(){return o.CHM(i),o.oxw().$implicit.undoDropSet()}),o._UZ(1,"i",93),o.qZA()}}var re=function(e,t){return{"text-muted ml-1 item-isDropSet border-left":e,"has-error":t}};function ae(e,t){if(1&e&&(o.TgZ(0,"form",74),o.YNc(1,Q,4,4,"div",61),o.YNc(2,B,3,4,"div",75),o.YNc(3,$,3,2,"div",61),o.YNc(4,W,3,2,"div",61),o.YNc(5,ee,3,2,"div",61),o.TgZ(6,"div",4),o.YNc(7,te,2,1,"div",76),o.YNc(8,ie,2,4,"div",77),o.qZA(),o.TgZ(9,"div",78),o.YNc(10,ne,2,0,"button",79),o.YNc(11,se,2,0,"button",80),o.TgZ(12,"button",73),o.NdJ("click",function(){return t.$implicit.delete()}),o._UZ(13,"i",48),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit,n=o.oxw().$implicit,s=o.oxw(2).$implicit,r=o.oxw(4);o.Q6J("ngClass",o.WLB(10,re,n.isDropSet,i.hasError)),o.xp6(1),o.Q6J("ngIf",!n.isDropSet),o.xp6(1),o.Q6J("ngIf",n.isDropSet),o.xp6(1),o.Q6J("ngIf",s.exerciseType===r.ExerciseTypes.Time),o.xp6(1),o.Q6J("ngIf",s.exerciseType===r.ExerciseTypes.Count),o.xp6(1),o.Q6J("ngIf",s.exerciseType===r.ExerciseTypes.Count),o.xp6(2),o.Q6J("ngIf",!i.isEditing&&!n.isDropSet),o.xp6(1),o.Q6J("ngIf",i.isEditing&&!n.isDropSet),o.xp6(2),o.Q6J("ngIf",!n.isDropSet),o.xp6(1),o.Q6J("ngIf",n.isDropSet)}}function oe(e,t){if(1&e&&(o.TgZ(0,"div",64),o.YNc(1,G,12,7,"div",65),o.TgZ(2,"div",4),o.YNc(3,ae,14,13,"form",66),o.qZA(),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(6);o.xp6(1),o.Q6J("ngIf",i.isDropSet),o.xp6(2),o.Q6J("ngForOf",i.assignedGroupsUnDeleted)("ngForTrackBy",n.trackByExerciseDayItemGroupModel)}}function ce(e,t){if(1&e&&(o.TgZ(0,"div",58),o.TgZ(1,"div",59),o._UZ(2,"div",60),o.YNc(3,J,3,3,"div",61),o.YNc(4,Y,3,3,"div",61),o.YNc(5,F,3,3,"div",61),o.TgZ(6,"div",4),o._uU(7),o.ALo(8,"abpLocalization"),o.ALo(9,"abpLocalization"),o.qZA(),o._UZ(10,"div",62),o.qZA(),o.YNc(11,oe,4,3,"div",63),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(4);o.xp6(3),o.Q6J("ngIf",i.exerciseType===n.ExerciseTypes.Time),o.xp6(1),o.Q6J("ngIf",i.exerciseType===n.ExerciseTypes.Count),o.xp6(1),o.Q6J("ngIf",i.exerciseType===n.ExerciseTypes.Count),o.xp6(2),o.AsE("",o.lcZ(8,7,"::Rest")," (",o.lcZ(9,9,"::Minute"),")"),o.xp6(4),o.Q6J("ngForOf",i.assignedGroupsContainersUnDeleted)("ngForTrackBy",n.trackByExerciseDayItemGroupContainerModel)}}function de(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",4),o.TgZ(1,"div",95),o.TgZ(2,"input",96),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw(2).$implicit.exerciseNote=e}),o.ALo(3,"abpLocalization"),o.qZA(),o.qZA(),o.qZA()}if(2&e){var n=o.oxw(2).$implicit;o.xp6(2),o.s9C("placeholder",o.lcZ(3,2,"::AddExerciseNote")),o.Q6J("ngModel",n.exerciseNote)}}function le(e,t){if(1&e&&(o.TgZ(0,"div",94),o.TgZ(1,"div",23),o.YNc(2,de,4,4,"div",61),o.qZA(),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(2),o.Q6J("ngIf",i)}}function ue(e,t){1&e&&(o.TgZ(0,"div"),o._UZ(1,"i",101),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"::SuperSetInvalidGroups")," "))}function ge(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",97),o.YNc(1,ue,4,3,"div",40),o.TgZ(2,"button",98),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().index,t=o.oxw().$implicit;return o.oxw(3).assignedExerciseDayModel.UnMergeSuperSet(t,e)}),o._uU(3),o.ALo(4,"abpLocalization"),o._UZ(5,"i",99),o.qZA(),o._UZ(6,"span",100),o.qZA()}if(2&e){var n=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngIf",!n.isSuperSetValid()),o.xp6(2),o.hij(" ",o.lcZ(4,2,"::SuperSet")," ")}}function pe(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",102),o.TgZ(1,"button",103),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(2),t=e.$implicit,n=e.index,s=o.oxw(3);return s.assignedExerciseDayModel.MergeSuperSet(t,s.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted[n+1])}),o._uU(2),o.ALo(3,"abpLocalization"),o._UZ(4,"i",104),o.qZA(),o._UZ(5,"span",100),o.qZA()}2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"::SuperSet")," "))}function me(e,t){1&e&&o._UZ(0,"div")}function he(e,t){if(1&e&&(o.TgZ(0,"fieldset",20),o.YNc(1,M,9,2,"fieldset",21),o.TgZ(2,"legend",22),o.TgZ(3,"div",23),o.TgZ(4,"div",24),o.O4$(),o.TgZ(5,"svg",25),o._UZ(6,"path",26),o._UZ(7,"path",27),o.qZA(),o.qZA(),o.kcU(),o.TgZ(8,"div",4),o.TgZ(9,"span",28),o._uU(10),o.YNc(11,N,1,0,"i",29),o.qZA(),o.TgZ(12,"span",30),o._uU(13),o.YNc(14,P,1,0,"i",29),o.qZA(),o.qZA(),o.TgZ(15,"div",24),o.YNc(16,q,2,0,"span",31),o.YNc(17,_,2,0,"span",31),o.qZA(),o.qZA(),o.qZA(),o.TgZ(18,"div"),o.YNc(19,U,2,0,"button",32),o.YNc(20,O,2,0,"button",33),o.qZA(),o.TgZ(21,"div",23),o.YNc(22,L,14,4,"div",34),o.TgZ(23,"div",35),o.YNc(24,ce,12,11,"div",36),o.qZA(),o.qZA(),o.YNc(25,le,3,1,"div",37),o.YNc(26,ge,7,4,"div",38),o.YNc(27,pe,6,3,"div",39),o.YNc(28,me,1,0,"div",40),o.qZA()),2&e){var i=t.$implicit,n=t.index,s=o.oxw(),r=s.$implicit,a=s.index,c=o.oxw(3);o.xp6(10),o.hij("",i.name," "),o.xp6(1),o.Q6J("ngIf",16===(null==i||null==i.exercise?null:i.exercise.statusGeneralLookupId)),o.xp6(2),o.hij("",i.nameEn," "),o.xp6(1),o.Q6J("ngIf",16===(null==i||null==i.exercise?null:i.exercise.statusGeneralLookupId)),o.xp6(2),o.Q6J("ngIf",i.isExpaneded&&!c.isDragging),o.xp6(1),o.Q6J("ngIf",!i.isExpaneded&&!c.isDragging),o.xp6(2),o.Q6J("ngIf",!c.isDeleting(i)),o.xp6(1),o.Q6J("ngIf",c.isDeleting(i)),o.xp6(2),o.Q6J("ngIf",i.isExpaneded&&!c.isDragging),o.xp6(2),o.Q6J("ngIf",i.isExpaneded&&!c.isDragging),o.xp6(1),o.Q6J("ngIf",i.isExpaneded&&!c.isDragging),o.xp6(1),o.Q6J("ngIf",n+1<r.assignedExerciseDayItemSetsUnDeleted.length),o.xp6(1),o.Q6J("ngIf",n+1>=r.assignedExerciseDayItemSetsUnDeleted.length&&a+1<c.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted.length),o.xp6(1),o.Q6J("ngIf",n+1>=r.assignedExerciseDayItemSetsUnDeleted.length)}}function fe(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",18),o.NdJ("cdkDragStarted",function(e){return o.CHM(i),o.oxw(3).dragStart(e)}),o.YNc(1,he,29,14,"fieldset",19),o.qZA()}if(2&e){var n=t.$implicit,s=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",n.assignedExerciseDayItemSetsUnDeleted)("ngForTrackBy",s.trackByExerciseDayItemSetModel)}}function ve(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",16),o.NdJ("cdkDropListDropped",function(e){return o.CHM(i),o.oxw(2).drop(e)}),o.YNc(1,fe,2,2,"div",17),o.qZA()}if(2&e){var n=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",n.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted)("ngForTrackBy",n.trackByExerciseDayItemModel)}}function xe(e,t){1&e&&(o.TgZ(0,"div",105),o.TgZ(1,"div",106),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"::SuperSetInvalidGroups")," "))}function ye(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",107),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).showExerciseForm()}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()}2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::AddExercise")," "))}function be(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",108),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).save()}),o._UZ(1,"i",109),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA()}2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"AbpUi::Save")," "))}function Ie(e,t){1&e&&(o.TgZ(0,"button",110,111),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"AbpUi::Cancel")," "))}function Ze(e,t){1&e&&o._UZ(0,"i",112)}function De(e,t){1&e&&o._UZ(0,"i",113)}function Se(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",114),o.TgZ(1,"div",53),o.TgZ(2,"app-exercise-selector",115),o.NdJ("productSelected",function(e){return o.CHM(i),o.oxw(2).productSelected(e)}),o.qZA(),o.qZA(),o.qZA()}}function Ee(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",3),o.TgZ(1,"div",4),o.YNc(2,ve,2,2,"div",5),o.YNc(3,xe,4,3,"div",6),o.TgZ(4,"div",7),o.YNc(5,ye,3,3,"button",8),o.YNc(6,be,4,3,"button",9),o.YNc(7,Ie,4,3,"button",10),o.TgZ(8,"div",11),o.NdJ("click",function(){o.CHM(i);var e=o.oxw();return e.isDragging=!e.isDragging}),o.YNc(9,Ze,1,0,"i",12),o.YNc(10,De,1,0,"i",13),o.TgZ(11,"label",14),o._uU(12),o.ALo(13,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.YNc(14,Se,3,0,"div",15),o.qZA()}if(2&e){var n=o.oxw();o.xp6(2),o.Q6J("ngIf",n.assignedExerciseDayModel),o.xp6(1),o.Q6J("ngIf",n.assignedExerciseDayModel&&!n.assignedExerciseDayModel.isAllSuperSetsValid()),o.xp6(2),o.Q6J("ngIf",!n.isAddingNewExcercise),o.xp6(1),o.Q6J("ngIf",n.isCanSave),o.xp6(1),o.Q6J("ngIf",n.isCanSave),o.xp6(2),o.Q6J("ngIf",!n.isDragging),o.xp6(1),o.Q6J("ngIf",n.isDragging),o.xp6(2),o.Oqu(o.lcZ(13,9,"::ReArrange")),o.xp6(2),o.Q6J("ngIf",n.isAddingNewExcercise)}}var we=function(){var t=function(){function t(e,n,s,r,a,c,d,l,u,g){i(this,t),this.list=e,this.track=n,this.service=s,this.assignedExerciseDayService=r,this.exerciseManageService=a,this.groupServiceTest=c,this.analyticsService=d,this.confirmation=l,this.dateService=u,this.fb=g,this.dataChanged=new o.vpe,this.bulkEdit=new o.vpe,this.isDragging=!1,this.trackByExerciseDayItemModel=function(e,t){return null==t?void 0:t.id},this.trackByExerciseDayItemSetModel=function(e,t){return null==t?void 0:t.id},this.trackByExerciseDayItemGroupContainerModel=function(e,t){return null==t?void 0:t.dropSetId},this.trackByExerciseDayItemGroupModel=function(e,t){return null==t?void 0:t.id},this.isModalBusy=!1,this.isModalOpen=!1,this.isEditBulkExersises=!1,this.isAddingBulkExersisesBefore=!1,this.ExerciseTypes=D.$,this.isAddingNewExcercise=!0,this.isCanSave=!1,this.lastSearchedExercise="",this.isShowAddingExercise=!1,this.deleting=[]}return s(t,[{key:"ngOnInit",value:function(){}},{key:"hideForm",value:function(){this.isModalOpen=!1}},{key:"showForm",value:function(){this.form&&this.form.reset(),this.isModalOpen=!0}},{key:"create",value:function(e,t){var i=this;this.isCanSave=!0,this.day=e;var n={};n.dayNumber=e.dayId,n.calendarDate=this.dateService.removeUtcDate(e.startDate).toISOString(),n.assignedExerciseProgramId=t,this.assignedExerciseDayModel=new u.x(n.exerciseProgramName,n),this.showExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(function(e){i.showExerciseForm()})}},{key:"update",value:function(e,t){var i=this;this.day=e,this.isCanSave=!0,this.assignedExerciseDayModel=new u.x(t.exerciseProgramName,t.convertToDto()),this.hideExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(function(e){i.showExerciseForm()})}},{key:"cancel",value:function(){}},{key:"updateBulk",value:function(e,t,i){var n=this;console.log(e);var s=e[0].day;this.selectedItems=e,this.isEditBulkExersises=!0,this.isAddingBulkExersisesBefore=i,this.isCanSave=!0,this.day=s;var r={};r.dayNumber=s.dayId,r.exerciseProgramId=t,this.assignedExerciseDayModel=new u.x(r.exerciseProgramName,r),this.showExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(function(e){n.showExerciseForm()})}},{key:"save",value:function(){var t=this,i=this;if(this.confirmDelete(),i.analyticsService.log(m.O.do_save_Program_assigned_exercise),this.isEditBulkExersises){var n=this.assignedExerciseDayModel;this.selectedItems.forEach(function(s,r){var a;if(t.assignedExerciseDayModel=new u.x(s.extraData.exerciseProgramName,s.extraData.convertToDto()),t.isAddingBulkExersisesBefore){var o=e(n.assignedExerciseDayItems);o.push.apply(o,e(t.assignedExerciseDayModel.assignedExerciseDayItems)),t.assignedExerciseDayModel.assignedExerciseDayItems=o}else(a=t.assignedExerciseDayModel.assignedExerciseDayItems).push.apply(a,e(n.assignedExerciseDayItems));t.assignedExerciseDayService.save(t.assignedExerciseDayModel,s.day,function(){r==t.selectedItems.length-1&&i.hideForm(),i.bulkEdit.emit(i.assignedExerciseDayModel)})})}else this.assignedExerciseDayService.save(i.assignedExerciseDayModel,i.day,function(){i.hideForm()})}},{key:"showExerciseForm",value:function(){this.buildForm(),this.isAddingNewExcercise=!0,this.isShowAddingExercise=!1}},{key:"hideExerciseForm",value:function(){}},{key:"buildForm",value:function(){var e=this;this.form=this.fb.group({exerciseId:[null,[b.kI.required]],exercise:[null,[]],exerciseItem:[null,[b.kI.required]]}),setTimeout(function(){e.form.get("exerciseItem").valueChanges.subscribe(function(t){t&&t.id?(e.form.get("exerciseId").setValue(t.id),e.form.get("exercise").setValue(t)):(e.form.get("exerciseId").reset(),e.form.get("exercise").reset())}),e.form.get("exerciseId").valueChanges.subscribe(function(t){t&&e.isAddingNewExcercise&&setTimeout(function(){e.submitForm()},10)})},10)}},{key:"submitForm",value:function(){var e=this;if(!this.form.invalid){var t=this.form.get("exerciseId").value;this.exerciseManageService.getWithNavigationProperties(t).subscribe(function(t){e.assignedExerciseDayModel.addNewDetail(t.exerciseGroups,t.exercise),e.isCanSave=!0,e.hideExerciseForm()})}}},{key:"productSelected",value:function(e){var t=this,i=0;e.forEach(function(n){i++,t.exerciseManageService.getWithNavigationProperties(n.id).subscribe(function(n){t.assignedExerciseDayModel.addNewDetail(n.exerciseGroups,n.exercise),i>=e.length&&(t.isCanSave=!0,t.hideExerciseForm())})})}},{key:"startSearchExercise",value:function(e){var t=this,i={};i.filter=e.query,this.lastSearchedExercise=e.query||"",this.service.getExerciseLookup(i).subscribe(function(e){t.AllExercises=e.items,t.isShowAddingExercise=0==e.items.length})}},{key:"onSelect",value:function(e){}},{key:"onClear",value:function(){this.form.reset()}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}},{key:"createNewExercise",value:function(e){e.create(this.lastSearchedExercise)}},{key:"onCreateNewExercise",value:function(e){var t=this;this.startSearchExercise({query:e.exerciseName}),setTimeout(function(){t.form.get("exerciseItem").setValue(e)},1e3)}},{key:"drop",value:function(t){var i=e(this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted);(0,Z.bA)(i,t.previousIndex,t.currentIndex),this.assignedExerciseDayModel.assignedExerciseDayItems=i}},{key:"up",value:function(t){var i=e(this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted);(0,Z.bA)(i,t,t+1),this.assignedExerciseDayModel.assignedExerciseDayItems=i}},{key:"down",value:function(t){var i=e(this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted);(0,Z.bA)(i,t,t-1),this.assignedExerciseDayModel.assignedExerciseDayItems=i}},{key:"isDeleting",value:function(e){return this.deleting.filter(function(t){return t==e}).length>0}},{key:"startDelete",value:function(e){var t=this;this.deleting.push(e),e.isExpaneded=!1,setTimeout(function(){t.isDeleting(e)&&(t.deleting=t.deleting.filter(function(t){return t!==e}),e.delete())},5e3)}},{key:"cancelDelete",value:function(e){this.deleting=this.deleting.filter(function(t){return t!==e}),e.isExpaneded=!0}},{key:"confirmDelete",value:function(){this.deleting.forEach(function(e){e.delete()}),this.deleting=[]}},{key:"dragStart",value:function(e){this.isDragging=!0}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o.Y36(a.XNV),o.Y36(a.vR3),o.Y36(h.LM),o.Y36(S),o.Y36(h.zu),o.Y36(h.C),o.Y36(m.y),o.Y36(f.YP),o.Y36(c.R),o.Y36(b.qu))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-assigned-exercise-program-modal-day"]],outputs:{dataChanged:"dataChanged",bulkEdit:"bulkEdit"},features:[o._Bn([a.XNV,c.R])],decls:5,vars:3,consts:[["size","xl",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[1,"row","assigned-program-popup","small-scrollbar"],[1,"col"],["style","height: calc(100vh - 150px); overflow-y: auto; min-height: 200px","class","example-list border rounded mt-2 fade-in-top","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"col-sm-12","modal-footer","p-1"],["class","btn btn-outline-success add-new-exercise mt-1","style","position: absolute;right: 0px;",3,"click",4,"ngIf"],["Class","btn btn-success btn-save",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary btn-cancel",4,"ngIf"],[1,"btn",2,"position","absolute","left","0px",3,"click"],["class","fa fa-toggle-off custom-green action-boarder",4,"ngIf"],["class","fa fa-toggle-on custom-green action-boarder text-success",4,"ngIf"],[1,"mx-2"],["class","col-4",4,"ngIf"],["cdkDropList","",1,"example-list","border","rounded","mt-2","fade-in-top",2,"height","calc(100vh - 150px)","overflow-y","auto","min-height","200px",3,"cdkDropListDropped"],["cdkDrag","","class","example-box",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"example-box",3,"cdkDragStarted"],["class","card col-12 hiding-container app-bg-gray-light round-borders",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","col-12","hiding-container","app-bg-gray-light","round-borders"],["class","hiding-container app-bg-gray-light round-borders","style","min-width: 100px !important; padding: auto 30px; left: -30px; ",4,"cdkDragPreview"],[1,"set-item","text-center"],[1,"row"],[1,"col-auto"],["width","24px","fill","currentColor","viewBox","0 0 24 24","cdkDragHandle","",1,"holder"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"view-rtl"],["class","fa fa-exclamation  text-danger",4,"ngIf"],[1,"view-ltr"],["class","btn btn-sm",3,"click",4,"ngIf"],["class","btn btn-danger btn-circle delete-exercise auto-hide",3,"click",4,"ngIf"],["class","btn btn-warning btn-circle delete-exercise",3,"click",4,"ngIf"],["class","col-3","style","min-height: 100px",4,"ngIf"],[1,"col-9"],["class","text-muted text-sm",4,"ngIf"],["class","excercise-footer my-2",4,"ngIf"],["class","text-center m-1 dropset-spiltter",4,"ngIf"],["class","text-center m-1 dropset-spiltter text-muted auto-hide",4,"ngIf"],[4,"ngIf"],[1,"hiding-container","app-bg-gray-light","round-borders",2,"min-width","100px !important","padding","auto 30px","left","-30px"],["width","24px","fill","currentColor","viewBox","0 0 24 24",1,"holder"],[1,"fa","fa-exclamation","text-danger"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-caret-down"],[1,"fa","fa-chevron-up"],[1,"btn","btn-danger","btn-circle","delete-exercise","auto-hide",3,"click"],[1,"fa","fa-times"],[1,"btn","btn-warning","btn-circle","delete-exercise",3,"click"],[1,"fa","fa-undo"],[1,"col-3",2,"min-height","100px"],[1,""],[1,"text-center"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],[3,"exerciseItem"],[1,"btn-sm","btn","btn-outline-success",3,"click"],[1,"text-muted","text-sm"],[1,"row","pb-2","border-bottom"],[1,"col-3"],["class","col",4,"ngIf"],[1,"col-sm-3"],["class","row border-bottom align-items-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","border-bottom","align-items-center"],["class","col-12",4,"ngIf"],["class","row align-items-center py-1",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[1,"row","py-1"],[1,"col","text-dark"],[1,"col-7","item-actions","text-right"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-default","text-danger","btn-circle",3,"click"],[1,"row","align-items-center","py-1",3,"ngClass"],["class","col  text-dark",4,"ngIf"],["class","value-containers",4,"ngIf"],["class","input-containers input-group",4,"ngIf"],[1,"col-sm-3","item-actions","text-right"],["class","btn btn-sm btn-default text-success btn-circle",3,"click",4,"ngIf"],["class","btn btn-sm btn-default text-warning btn-circle",3,"click",4,"ngIf"],[1,"text-dark"],[1,"value-containers"],[3,"value"],[1,"text-muted"],[1,"input-containers","input-group"],["type","number","min","0","max","100000","pattern","[0-9]","name","exerciseSeconds",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","weight",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","repeatCount",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","restSeconds",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"btn","btn-sm","btn-default","text-success","btn-circle",3,"click"],[1,"fa","fa-layer-group"],[1,"btn","btn-sm","btn-default","text-warning","btn-circle",3,"click"],[1,"fa","fa-share"],[1,"excercise-footer","my-2"],[1,"d-block","input-containers","input-group"],[1,"rounded","w-100","form-control",2,"max-width","100% !important",3,"ngModel","placeholder","ngModelChange"],[1,"text-center","m-1","dropset-spiltter"],[1,"btn","badge","badge-info",3,"click"],[1,"fa","fa-link","text-secondary"],[1,"spiltter-bar","border"],[1,"fa","fa-exclamation-circle","text-danger",2,"font-size","large"],[1,"text-center","m-1","dropset-spiltter","text-muted","auto-hide"],[1,"btn","badge","badge-default",3,"click"],[1,"fa","fa-link"],[1,"mt-3"],[1,"alert","alert-danger"],[1,"btn","btn-outline-success","add-new-exercise","mt-1",2,"position","absolute","right","0px",3,"click"],["Class","btn btn-success btn-save",3,"click"],[1,"fa","fa-check"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],[1,"fa","fa-toggle-off","custom-green","action-boarder"],[1,"fa","fa-toggle-on","custom-green","action-boarder","text-success"],[1,"col-4"],[3,"productSelected"]],template:function(e,t){1&e&&(o.TgZ(0,"abp-modal",0),o.NdJ("visibleChange",function(e){return t.isModalOpen=e}),o.YNc(1,T,3,3,"ng-template",null,1,o.W1O),o.YNc(3,Ee,15,11,"ng-template",null,2,o.W1O),o.qZA()),2&e&&o.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",!1)},directives:[f.zS,I.O5,Z.Wj,I.sg,Z.Zt,Z.pV,Z.Bh,E.z,b._Y,b.JL,b.F,I.mk,w.K,b.qQ,b.Fd,b.wV,b.Fj,A.a,b.c5,b.JJ,b.On,k.m,C.s],pipes:[a.fuE],styles:[".text-sm[_ngcontent-%COMP%]{font-size:smaller}ul[_ngcontent-%COMP%]{margin:0}legend[_ngcontent-%COMP%]{width:auto;padding:0 20px;font-size:14px;background:#fff;border-radius:24px;border:1px solid #ddd}.btn-circle[_ngcontent-%COMP%]{border-radius:50%;width:25px;height:25px;padding:0;margin:0 3px;line-height:24px;vertical-align:middle}.item-actions[_ngcontent-%COMP%]   .btn-circle[_ngcontent-%COMP%]{background:#fff}.delete-exercise[_ngcontent-%COMP%]{position:absolute;right:12px;top:-30px;width:25px;height:25px;padding:0;text-align:center;line-height:24px;vertical-align:middle} .rtl .assigned-program-popup .delete-exercise{left:12px;right:auto}@media (min-width:992px){.hiding-container[_ngcontent-%COMP%]   .auto-hide[_ngcontent-%COMP%]{opacity:0}.hiding-container[_ngcontent-%COMP%]:hover   .auto-hide[_ngcontent-%COMP%]{opacity:1}}.dropset-spiltter[_ngcontent-%COMP%]   .spiltter-bar[_ngcontent-%COMP%]{position:absolute;display:block;bottom:-32px;left:50%;right:50%;height:36px;border:.1px solid}.text-dark[_ngcontent-%COMP%]{color:#343a40!important;font-size:13px;font-weight:700}.round-borders[_ngcontent-%COMP%]{border-radius:4px}input.has-error[_ngcontent-%COMP%]{border:1px solid brown}input.form-control[_ngcontent-%COMP%]{max-width:85px}.app-bg-gray-light[_ngcontent-%COMP%]{background:#f7f7f7!important}.input-containers[_ngcontent-%COMP%]{align-items:center}.item-isDropSet[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;border-right-width:5px!important;border-left-width:5px!important}.item-isDropSet[_ngcontent-%COMP%]:first-child{border-top:0}.add-new-exercise[_ngcontent-%COMP%]{border-radius:50px;margin-top:-20px}.add-new-exercise[_ngcontent-%COMP%]:not(:hover){background:#fff}.custom-add-more[_ngcontent-%COMP%]{position:absolute;top:60px;width:93%}.holder[_ngcontent-%COMP%]{height:15px;color:gray}.cdk-drag-preview[_ngcontent-%COMP%]{z-index:10000!important;transform:rotate3d(10,10,10,-2deg);box-shadow:10px 10px 10px rgba(0,0,0,.1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.text-dark[_ngcontent-%COMP%]{font-size:11px}"]}),t}(),Ae=r(38749),ke=r(98462),Ce=r(11520),Te=r(28157),Me=r(99046),Ne=r(42163),Pe=r(28451);function qe(e,t){1&e&&(o.TgZ(0,"h3"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::MoveToLibrary")," "))}function _e(e,t){if(1&e&&(o.TgZ(0,"span",16),o._uU(1),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.hij(" ",i.selectionCount," ")}}function Ue(e,t){if(1&e&&(o.TgZ(0,"p",14),o._uU(1),o.qZA(),o.YNc(2,_e,2,1,"span",15)),2&e){var i=t.$implicit;o.xp6(1),o.hij(" ",i.displayName," "),o.xp6(1),o.Q6J("ngIf",i.selectionCount>0)}}function Oe(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"form",3),o.NdJ("ngSubmit",function(){return o.CHM(i),o.oxw().submitForm()}),o.TgZ(1,"div",4),o.TgZ(2,"div",5),o.TgZ(3,"label",6),o._uU(4),o.ALo(5,"abpLocalization"),o.qZA(),o.TgZ(6,"p-autoComplete",7),o.NdJ("onClear",function(){return o.CHM(i),o.oxw().onClear()})("completeMethod",function(e){return o.CHM(i),o.oxw().startSearchProgram(e)})("search",function(e){return o.CHM(i),o.oxw().startSearchProgram(e)}),o.ALo(7,"abpLocalization"),o.YNc(8,Ue,3,2,"ng-template",8),o.qZA(),o.qZA(),o.qZA(),o.TgZ(9,"div",9),o.TgZ(10,"button",10,11),o._uU(12),o.ALo(13,"abpLocalization"),o.qZA(),o.TgZ(14,"button",12),o._UZ(15,"i",13),o._uU(16),o.ALo(17,"abpLocalization"),o.qZA(),o.qZA(),o.qZA()}if(2&e){var n=o.oxw();o.Q6J("formGroup",n.form),o.xp6(4),o.hij(" ",o.lcZ(5,8,"::ExerciseProgram")," "),o.xp6(2),o.s9C("placeholder",o.lcZ(7,10,"::ExerciseProgram")),o.Q6J("suggestions",n.AllPrograms)("type",n.searchType())("dropdown",!0),o.xp6(6),o.hij(" ",o.lcZ(13,12,"AbpUi::Cancel")," "),o.xp6(4),o.hij(" ",o.lcZ(17,14,"::Ok")," ")}}var Le=function(){var e=function(){function e(t,n,s,r,a,o,c,d,l,u,g){i(this,e),this.list=t,this.track=n,this.service=s,this.traineeService=r,this.confirmation=a,this.dateService=o,this.localCacheService=c,this.toaster=d,this.l=l,this.assignExerciseProgramService=u,this.fb=g,this.isModalBusy=!1,this.isModalOpen=!1}return s(e,[{key:"ngOnInit",value:function(){}},{key:"buildForm",value:function(){this.form=this.fb.group({exerciseProgramId:[null,[b.kI.required]]})}},{key:"submitForm",value:function(){var e,t=this,i=this;if(!this.form.invalid){var n=this.form.get("exerciseProgramId").value,s={dayIds:"",assignedProgramId:this.assignedProgramId,dayDates:this.days.map(function(e){return e.toISOString()}).toString(),programId:null!==(e=null==n?void 0:n.id)&&void 0!==e?e:n};this.service.moveToLibe(s).pipe((0,Ce.x)(function(){return t.isModalBusy=!1})).subscribe(function(e){i.toaster.success("::Success"),setTimeout(function(){i.hideForm()},1)})}}},{key:"hideForm",value:function(){var e=this;this.isModalOpen=!1,setTimeout(function(){e.form.reset()},100)}},{key:"showForm",value:function(){this.buildForm(),this.isModalOpen=!0}},{key:"create",value:function(e,t){var i;this.days=e.map(function(e){return e.day.startDate}),this.assignedProgramId=null!==(i=null==t?void 0:t.id)&&void 0!==i?i:t,this.showForm()}},{key:"startSearchProgram",value:function(e){var t=this,i={};i.filter=e.query,i.maxResultCount=50,i.IsOnlyPrivate=!0,this.service.getExerciseProgramLookup(i).subscribe(function(e){t.AllPrograms=e.items})}},{key:"onSelect",value:function(e){}},{key:"onClear",value:function(){}},{key:"searchType",value:function(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.XNV),o.Y36(a.vR3),o.Y36(h.RT),o.Y36(Te.s),o.Y36(f.YP),o.Y36(c.R),o.Y36(y.F),o.Y36(f.MJ),o.Y36(a.oQ8),o.Y36(g.I),o.Y36(b.qu))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-move-to-lib-exercise-program"]],outputs:{create:"create"},features:[o._Bn([c.R])],decls:5,vars:2,consts:[["size","md",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"move-to-lib-exercise-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","exerciseProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","field","displayName","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","onClear","completeMethod","search"],["pTemplate","item"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"]],template:function(e,t){1&e&&(o.TgZ(0,"abp-modal",0),o.NdJ("visibleChange",function(e){return t.isModalOpen=e}),o.YNc(1,qe,3,3,"ng-template",null,1,o.W1O),o.YNc(3,Oe,18,16,"ng-template",null,2,o.W1O),o.qZA()),2&e&&o.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)},directives:[f.zS,b._Y,b.JL,a.YzZ,b.sg,Me.hL,Ne.Qc,b.JJ,b.u,Me.J5,k.m,Pe.jx,I.O5],pipes:[a.fuE],styles:["@media (max-width:768px){  .move-to-lib-exercise-program .p-autocomplete-panel{max-width:100%}}  .move-to-lib-exercise-program .program-name{white-space:normal}  .move-to-lib-exercise-program .badge{min-width:40px;font-size:90%;text-align:center}  .move-to-lib-exercise-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),e}(),Je=r(46140),Ye=["adjust"];function Fe(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).save()}),o._UZ(1,"i",11),o.qZA()}}function Ge(e,t){if(1&e&&(o.TgZ(0,"div",12),o._uU(1),o.qZA()),2&e){var i=o.oxw(2);o.xp6(1),o.hij(" ",i.assignedExerciseDayModel.exerciseProgramName," ")}}function Qe(e,t){1&e&&(o.TgZ(0,"div",13),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::Updated")," "))}function Be(e,t){if(1&e&&(o.TgZ(0,"div",28),o._uU(1),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.hij(" ",i.repeatCount," ")}}function ze(e,t){if(1&e&&(o.TgZ(0,"div",28),o._uU(1),o.qZA()),2&e){var i=o.oxw().$implicit;o.xp6(1),o.hij(" ",i.exerciseSeconds," ")}}var je=function(e){return{" border-left pl-2":e}};function He(e,t){if(1&e&&(o.TgZ(0,"span",26),o.TgZ(1,"span"),o.YNc(2,Be,2,1,"div",27),o.YNc(3,ze,2,1,"div",27),o.qZA(),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(2).$implicit;o.Q6J("ngClass",o.VKq(3,je,i.isDropSet)),o.xp6(2),o.Q6J("ngIf",12==n.exerciseType),o.xp6(1),o.Q6J("ngIf",13==n.exerciseType)}}function $e(e,t){if(1&e&&(o.TgZ(0,"span"),o.YNc(1,He,4,5,"span",25),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(5);o.xp6(1),o.Q6J("ngForOf",i.assignedGroups)("ngForTrackBy",n.trackByExerciseDayItemGroupModel)}}function Re(e,t){if(1&e&&(o.TgZ(0,"div",22),o.TgZ(1,"span"),o.TgZ(2,"div",23),o._uU(3),o.qZA(),o._uU(4," X "),o.qZA(),o.YNc(5,$e,2,2,"span",24),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(3);o.xp6(3),o.hij(" ",i.assignedGroupsContainers.length," "),o.xp6(2),o.Q6J("ngForOf",i.assignedGroupsContainers)("ngForTrackBy",n.trackByExerciseDayItemGroupContainerModel)}}function Ve(e,t){1&e&&(o.TgZ(0,"td"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::ExerciseSeconds")," "))}function We(e,t){1&e&&(o.TgZ(0,"td"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::RepeatCount")," "))}function Xe(e,t){1&e&&(o.TgZ(0,"td"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::Weight")," "))}function Ke(e,t){if(1&e&&(o.TgZ(0,"span"),o.TgZ(1,"table",29),o.TgZ(2,"tr"),o.YNc(3,Ve,3,3,"td",21),o.YNc(4,We,3,3,"td",21),o.YNc(5,Xe,3,3,"td",21),o.TgZ(6,"td"),o._uU(7),o.ALo(8,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){var i=o.oxw(2).$implicit;o.xp6(3),o.Q6J("ngIf",13==i.exerciseType),o.xp6(1),o.Q6J("ngIf",12==i.exerciseType),o.xp6(1),o.Q6J("ngIf",12==i.exerciseType),o.xp6(2),o.Oqu(o.lcZ(8,4,"::Rest"))}}function et(e,t){if(1&e&&(o.TgZ(0,"span"),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()),2&e){var i=o.oxw().index;o.xp6(1),o.AsE("",o.lcZ(2,2,"::Group")," ",i+1,"")}}function tt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",34),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(6).showAdjust_exerciseSeconds(e)}),o._uU(1),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(1),o.hij(" ",n.exerciseSeconds," ")}}function it(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",34),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(6).showAdjust_repeatCount(e)}),o._uU(1),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(1),o.hij(" ",n.repeatCount," ")}}function nt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",35),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(6).showAdjust_weight(e)}),o._uU(1),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(1),o.Oqu(n.weight)}}function st(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"span",36),o.NdJ("click",function(){o.CHM(i);var e=o.oxw().$implicit;return o.oxw(6).showAdjust_restSeconds(e)}),o._uU(1),o.qZA()}if(2&e){var n=o.oxw().$implicit;o.xp6(1),o.Oqu(n.restSeconds)}}function rt(e,t){if(1&e&&(o.TgZ(0,"div",26),o.YNc(1,et,3,4,"span",21),o.TgZ(2,"table",29),o.TgZ(3,"tr"),o.TgZ(4,"td"),o.YNc(5,tt,2,1,"span",31),o.qZA(),o.TgZ(6,"td"),o.YNc(7,it,2,1,"span",31),o.qZA(),o.TgZ(8,"td"),o.YNc(9,nt,2,1,"span",32),o.qZA(),o.TgZ(10,"td"),o.YNc(11,st,2,1,"span",33),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e){var i=t.$implicit,n=o.oxw().$implicit;o.Q6J("ngClass",o.VKq(6,je,n.isDropSet)),o.xp6(1),o.Q6J("ngIf",n.isDropSet),o.xp6(4),o.Q6J("ngIf",i.exerciseSeconds&&i.exerciseSeconds>0),o.xp6(2),o.Q6J("ngIf",i.repeatCount&&i.repeatCount>0),o.xp6(2),o.Q6J("ngIf",i.weight&&i.weight>0),o.xp6(2),o.Q6J("ngIf",i.restSeconds&&i.restSeconds>0)}}var at=function(e){return{"is-dropset":e}};function ot(e,t){if(1&e&&(o.TgZ(0,"div"),o.TgZ(1,"span"),o._uU(2),o.ALo(3,"abpLocalization"),o.qZA(),o.TgZ(4,"div",30),o.YNc(5,rt,12,8,"div",25),o.qZA(),o.qZA()),2&e){var i=t.$implicit,n=t.index,s=o.oxw(5);o.xp6(2),o.AsE("",o.lcZ(3,5,"::Group")," ",n+1,""),o.xp6(2),o.Q6J("ngClass",o.VKq(7,at,i.isDropSet)),o.xp6(1),o.Q6J("ngForOf",i.assignedGroups)("ngForTrackBy",s.trackByExerciseDayItemGroupModel)}}function ct(e,t){if(1&e&&(o.TgZ(0,"div",22),o.YNc(1,Ke,9,6,"span",21),o.YNc(2,ot,6,9,"div",24),o.qZA()),2&e){var i=o.oxw().$implicit,n=o.oxw(3);o.xp6(1),o.Q6J("ngIf",i.assignedGroupsContainers.length>0),o.xp6(1),o.Q6J("ngForOf",i.assignedGroupsContainers)("ngForTrackBy",n.trackByExerciseDayItemGroupContainerModel)}}function dt(e,t){1&e&&(o.TgZ(0,"div",38),o.TgZ(1,"div",39),o._uU(2),o.ALo(3,"abpLocalization"),o._UZ(4,"i",40),o.qZA(),o.qZA()),2&e&&(o.xp6(2),o.hij(" ",o.lcZ(3,1,"::SuperSet")," "))}function lt(e,t){if(1&e&&(o.TgZ(0,"div"),o.YNc(1,dt,5,3,"div",37),o.qZA()),2&e){var i=o.oxw().index,n=o.oxw().$implicit;o.xp6(1),o.Q6J("ngIf",i+1<n.assignedExerciseDayItemSets.length)}}function ut(e,t){if(1&e&&(o.TgZ(0,"li",16),o.TgZ(1,"span",17),o.TgZ(2,"span",18),o._uU(3),o.qZA(),o.TgZ(4,"span",19),o._uU(5),o.qZA(),o.qZA(),o.YNc(6,Re,6,3,"div",20),o.YNc(7,ct,3,3,"div",20),o.YNc(8,lt,2,1,"div",21),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(3);o.xp6(3),o.Oqu(i.name),o.xp6(2),o.Oqu(i.nameEn),o.xp6(1),o.Q6J("ngIf",!n.isSummary),o.xp6(1),o.Q6J("ngIf",!n.isSummary&&!1),o.xp6(1),o.Q6J("ngIf",!n.isSummary)}}function gt(e,t){if(1&e&&(o.TgZ(0,"ul",14),o.YNc(1,ut,9,5,"li",15),o.qZA()),2&e){var i=t.$implicit,n=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",i.assignedExerciseDayItemSets)("ngForTrackBy",n.trackByExerciseDayItemSetModel)}}function pt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div"),o.TgZ(1,"div",3),o.TgZ(2,"input",4),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw().name=e}),o.qZA(),o.TgZ(3,"div",5),o.YNc(4,Fe,2,0,"button",6),o.qZA(),o.qZA(),o.YNc(5,Ge,2,1,"div",7),o.YNc(6,Qe,3,3,"div",8),o.YNc(7,gt,2,2,"ul",9),o.qZA()}if(2&e){var n=o.oxw();o.Gre("exercise-program iitem-",n.assignedExerciseDayModel.id,""),o.xp6(2),o.Q6J("ngModel",n.name),o.xp6(2),o.Q6J("ngIf",n.assignedExerciseDayModel.name!=n.name),o.xp6(1),o.Q6J("ngIf",n.assignedExerciseDayModel.exerciseProgramName),o.xp6(1),o.Q6J("ngIf",n.assignedExerciseDayModel.exerciseProgramId&&n.assignedExerciseDayModel.lastModificationTime),o.xp6(1),o.Q6J("ngForOf",n.assignedExerciseDayModel.assignedExerciseDayItems)("ngForTrackBy",n.trackByExerciseDayItemModel)}}var mt=function(){var e=function(){function e(t,n,s,r,a,o,c,d,l,u){i(this,e),this.list=t,this.track=n,this.service=s,this.service2=r,this.confirmation=a,this.assignedExerciseDayService=o,this.dateService=c,this.langService=d,this.fb=l,this.loclization=u,this.trackByExerciseDayItemModel=function(e,t){return null==t?void 0:t.id},this.trackByExerciseDayItemSetModel=function(e,t){return null==t?void 0:t.id},this.trackByExerciseDayItemGroupContainerModel=function(e,t){return null==t?void 0:t.dropSetId},this.trackByExerciseDayItemGroupModel=function(e,t){return null==t?void 0:t.id},this.isSummary=!0}return s(e,[{key:"assignedExerciseDayModel",get:function(){return this._assignedExerciseDayModel},set:function(e){this._assignedExerciseDayModel=e,this.name=e.name}},{key:"ngOnInit",value:function(){}},{key:"name",get:function(){return this._name},set:function(e){this._name=e}},{key:"save",value:function(){var e=this,t=this,i=this.assignedExerciseDayModel.convertToDto();i.name=this.name,this.service.update(this.assignedExerciseDayModel.id,i).subscribe(function(i){e.assignedExerciseDayModel.name=i.name,e.assignedExerciseDayModel.name=i.name,e.assignedExerciseDayModel.id=i.id;var n=new l.h(i.id,i.name,e.day,e.assignedExerciseDayModel);t.day.clearItems(),t.day.addItem(n)})}},{key:"showAdjust_repeatCount",value:function(e){this.selected=e,this.editOption="repeatCount",this.adjust.show(this.selected.repeatCount,this.loclization.instant("::RepeatCount"))}},{key:"showAdjust_exerciseSeconds",value:function(e){this.selected=e,this.editOption="exerciseSeconds",this.adjust.show(this.selected.exerciseSeconds,this.loclization.instant("::ExerciseSeconds"))}},{key:"showAdjust_weight",value:function(e){this.selected=e,this.editOption="weight",this.adjust.show(this.selected.weight,this.loclization.instant("::Weight"))}},{key:"showAdjust_restSeconds",value:function(e){this.selected=e,this.editOption="restSeconds",this.adjust.show(this.selected.restSeconds,this.loclization.instant("::RestSeconds"))}},{key:"onPastConfirm",value:function(e){var t=this,i=e;"repeatCount"==this.editOption?this.selected.repeatCount=i:"weight"==this.editOption&&(this.selected.weight=i),"restSeconds"==this.editOption&&(this.selected.restSeconds=i),"exerciseSeconds"==this.editOption&&(this.selected.exerciseSeconds=i),setTimeout(function(){t.assignedExerciseDayService.save(t.assignedExerciseDayModel,t.day,function(){})},500)}},{key:"suggest",value:function(){var e={};e.exerciseProgramId=this.assignedExerciseDayModel.assignedExerciseProgramId;var t=this.assignedExerciseDayModel.calendarDate;console.log(t),console.log(typeof t),e.startDate=this.dateService.parseMomentToString(t),e.isOverride=!1,e.traineeId=this.traineeUserId,this.service2.suggestByAssignInput(e).subscribe(function(e){})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.XNV),o.Y36(a.vR3),o.Y36(h.LM),o.Y36(h.RT),o.Y36(f.YP),o.Y36(S),o.Y36(c.R),o.Y36(x.C),o.Y36(b.qu),o.Y36(a.oQ8))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-assigned-exercise-program-day"]],viewQuery:function(e,t){var i;(1&e&&o.Gf(Ye,5),2&e)&&(o.iGM(i=o.CRH())&&(t.adjust=i.first))},inputs:{day:"day",traineeUserId:"traineeUserId",assignedExerciseDayModel:"assignedExerciseDayModel",isSummary:"isSummary"},features:[o._Bn([a.XNV,c.R])],decls:5,vars:8,consts:[[3,"class",4,"ngIf"],[3,"step","modalTitle","modalLabel","onConfirm"],["adjust",""],[1,"input-group"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","badge badge-light text-wraped",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","list-exercises",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"badge","badge-light","text-wraped"],[1,"badge","badge-primary"],[1,"list-exercises"],["class","",4,"ngFor","ngForOf","ngForTrackBy"],[1,""],[1,"d-inline","set-item"],[1,"view-rtl"],[1,"view-ltr"],["class","list-itemSets text-muted text-sm",4,"ngIf"],[4,"ngIf"],[1,"list-itemSets","text-muted","text-sm"],[1,"badge","badge-pill","badge-info-old"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],[1,"table",2,"margin-bottom","0px"],[1,"list-subSets",3,"ngClass"],["class","badge badge-pill badge-primary",3,"click",4,"ngIf"],["class","badge badge-pill badge-info",3,"click",4,"ngIf"],["class","badge badge-pill badge-secondary",3,"click",4,"ngIf"],[1,"badge","badge-pill","badge-primary",3,"click"],[1,"badge","badge-pill","badge-info",3,"click"],[1,"badge","badge-pill","badge-secondary",3,"click"],["class","text-center m-1",4,"ngIf"],[1,"text-center","m-1"],[1,"badge","badge-info"],[1,"fa","fa-link"]],template:function(e,t){1&e&&(o.YNc(0,pt,8,9,"div",0),o.TgZ(1,"past-adjust",1,2),o.NdJ("onConfirm",function(e){return t.onPastConfirm(e)}),o.ALo(3,"abpLocalization"),o.ALo(4,"abpLocalization"),o.qZA()),2&e&&(o.Q6J("ngIf",t.assignedExerciseDayModel),o.xp6(1),o.s9C("modalTitle",o.lcZ(3,4,"::AdjustValues")),o.s9C("modalLabel",o.lcZ(4,6,"::Adjust")),o.Q6J("step",1))},directives:[I.O5,ke.m,b.Fj,b.JJ,b.On,k.m,I.sg,I.mk],pipes:[a.fuE],styles:['.text-sm[_ngcontent-%COMP%]{font-size:smaller}  .exercise-program ul{list-style-position:inside;padding-left:10px}@media (max-width:1199px){  .exercise-program ul{padding-left:5px}} .rtl .exercise-program ul{padding-right:10px;padding-left:0}@media (max-width:1199px){ .rtl .exercise-program ul{padding-right:5px;padding-left:0}}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#eee}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{display:inline-block;content:"-";vertical-align:middle}@media (max-width:991px){.list-details[_ngcontent-%COMP%]{display:flex}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}}.list-subSets[_ngcontent-%COMP%]:not(.is-dropset){list-style:none;padding-right:0!important;padding-left:0!important}.list-subSets.is-dropset[_ngcontent-%COMP%]{padding:0}.list-subSets.is-dropset[_ngcontent-%COMP%]   li.border-left[_ngcontent-%COMP%]{border-width:3px!important}.list-subSets[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{min-width:18px;padding-bottom:0}.list-subSets[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], .list-subSets[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 2px}@media (min-width:992px){.list-subSets[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{width:50px}}.set-item[_ngcontent-%COMP%]{font-size:11px}ul.list-exercises[_ngcontent-%COMP%]{margin-bottom:2px;margin-right:4px;list-style:disc}.input-group[_ngcontent-%COMP%]{width:92%!important;margin-right:auto;margin-left:auto}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4%}']}),e}(),ht=["modal"],ft=["adjust"],vt=["multiplay"],xt=["board"];function yt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",19),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(2);return o.MAs(8).create(e.traineeUserId,null)}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()}2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::AssignExerciseProgram")," "))}function bt(e,t){if(1&e&&(o.TgZ(0,"div",12),o._UZ(1,"div",13),o.TgZ(2,"div",14),o.TgZ(3,"div",15),o.TgZ(4,"div",13),o._UZ(5,"i",16),o.TgZ(6,"h5"),o._uU(7),o.ALo(8,"abpLocalization"),o.qZA(),o.TgZ(9,"p",17),o._uU(10),o.ALo(11,"abpLocalization"),o.qZA(),o.YNc(12,yt,3,3,"button",18),o.qZA(),o.qZA(),o.qZA(),o._UZ(13,"div",13),o.qZA()),2&e){var i=o.oxw();o.xp6(7),o.hij(" ",o.lcZ(8,3,"::NotAssignedTip")," "),o.xp6(3),o.hij(" ",o.lcZ(11,5,"::NotAssignedTip2")," "),o.xp6(2),o.Q6J("ngIf",!i.isCurrentUserAdmin)}}function It(e,t){1&e&&(o.TgZ(0,"div",12),o._UZ(1,"div",13),o.TgZ(2,"div",14),o.TgZ(3,"div",15),o.TgZ(4,"div",13),o._UZ(5,"i",16),o.TgZ(6,"h5"),o._uU(7),o.ALo(8,"abpLocalization"),o.qZA(),o.TgZ(9,"p",17),o._uU(10),o.ALo(11,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o._UZ(12,"div",13),o.qZA()),2&e&&(o.xp6(7),o.hij(" ",o.lcZ(8,2,"::AssingingTip")," "),o.xp6(3),o.hij(" ",o.lcZ(11,4,"::AssingingTip2")," "))}function Zt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",26),o.NdJ("click",function(){o.CHM(i),o.oxw();var e=o.MAs(1),t=o.oxw();return o.MAs(18).create(e.selectedItems,t.selected)}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()}2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,1,"::MoveToLibrary")))}function Dt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",27),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).editSelectedItems(!0)}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA(),o.TgZ(3,"button",27),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).editSelectedItems(!1)}),o._uU(4),o.ALo(5,"abpLocalization"),o.qZA()}2&e&&(o.xp6(1),o.Oqu(o.lcZ(2,2,"::AddExerciseBefore")),o.xp6(3),o.Oqu(o.lcZ(5,4,"::AddExerciseAfter")))}function St(e,t){if(1&e&&o._UZ(0,"app-assigned-exercise-program-day",28),2&e){var i=t.extraData,n=t.day,s=o.oxw(2);o.Q6J("assignedExerciseDayModel",i)("isSummary",s.isSummary)("day",n)("traineeUserId",s.traineeUserId)}}function Et(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"button",37),o.NdJ("click",function(){o.CHM(i);var e=o.oxw(3);return o.MAs(8).create(e.traineeUserId,null)}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()}2&e&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::AssignExerciseProgram")," "))}function wt(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"div",29),o.TgZ(1,"div",30),o.TgZ(2,"input",31),o.NdJ("ngModelChange",function(e){return o.CHM(i),o.oxw(2).isSummary=e}),o.qZA(),o.TgZ(3,"label",32),o._uU(4),o.ALo(5,"abpLocalization"),o.qZA(),o.qZA(),o.TgZ(6,"div",33),o.YNc(7,Et,3,3,"button",34),o.TgZ(8,"button",35),o.NdJ("click",function(){return o.CHM(i),o.oxw(2).refreshCache()}),o._UZ(9,"i",36),o.qZA(),o.qZA(),o.qZA()}if(2&e){var n=o.oxw(2);o.xp6(2),o.Q6J("ngModel",n.isSummary),o.xp6(2),o.Oqu(o.lcZ(5,3,"::SummaryView")),o.xp6(3),o.Q6J("ngIf",!n.isCurrentUserAdmin)}}function At(e,t){if(1&e){var i=o.EpF();o.TgZ(0,"app-board-container",20,21),o.NdJ("weekCreated",function(e){return o.CHM(i),o.oxw().weekCreated(e)})("weekDeleted",function(e){return o.CHM(i),o.oxw().weekDeleted(e)})("itemDeletedBulk",function(e){return o.CHM(i),o.oxw().itemDeletedBulk(e)})("itemDeleted",function(e){return o.CHM(i),o.oxw().itemDeleted(e)})("itemCreated",function(e){return o.CHM(i),o.oxw().itemCreated(e)})("itemCopiedMoved",function(e){return o.CHM(i),o.oxw().itemCopiedMoved(e)})("itemEdited",function(e){return o.CHM(i),o.oxw().itemEdited(e)}),o.YNc(2,Zt,3,3,"ng-template",null,22,o.W1O),o.YNc(4,Dt,6,6,"ng-template",null,23,o.W1O),o.YNc(6,St,1,4,"ng-template",null,24,o.W1O),o.YNc(8,wt,10,5,"ng-template",null,25,o.W1O),o.qZA()}if(2&e){var n=o.oxw();o.Q6J("isDayFullHight",!n.isSummary)}}var kt=function(){var e=function(){function e(t,n,s,r,a,c,d,l,u,g,p,m,h,f,v){i(this,e),this.list=t,this.track=n,this.programService=s,this.dayService=r,this.assignExerciseProgramService=a,this.confirmation=c,this.dateService=d,this.route=l,this.langService=u,this.router=g,this.toaster=p,this.localCacheService=m,this.permissionService=h,this.analyticsService=f,this.fb=v,this.refresh=new o.vpe,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.isLoading=!0,this.isAssigned=!0,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1,this.ttl=900,this.isForceRefresh=!1}return s(e,[{key:"ngOnInit",value:function(){var e=this;this.analyticsService.log(m.O.View_Program_assigned_exercise),this.loadProgram(),this.sub=this.assignExerciseProgramService.onAssigned.subscribe(function(t){e.onAssigned(t)})}},{key:"onAssigned",value:function(e){var t=this;setTimeout(function(){t.sub&&t.sub.unsubscribe(),t.refresh.emit()},100)}},{key:"loadProgram",value:function(){var e=this.route.snapshot.params.id;e||(e=this.traineeUserId),this.loadProgramByUserId(e)}},{key:"loadProgramByUserId",value:function(e){var t=this,i=this,n={};n.traineeId=e,this.programService.getCurrent(n).pipe((0,p.z)(i.localCacheService,"AssignedExerciseProg".concat(e),1)).subscribe(function(n){if(i.scheduledExerciseProgramId=n.scheduledExerciseProgramId,i.scheduledExerciseProgramId)return i.isLoading=!1,void setTimeout(function(){i.loadProgramByUserId(e)},5e3);n.assignedExerciseProgramId?(t.selected=n.assignedExerciseProgramId,i.loadSimpleDays(function(){return i.initialProgram()})):t.isAssigned=!1})}},{key:"loadSimpleDays",value:function(e){var t=this,i=this,n={};n.assignedExerciseProgramId=this.selected,n.maxResultCount=1e3,i.dayService.getListSimple(i.selected).subscribe(function(n){i.selectedDaysSimple=n,t.selectedDays={items:[],totalCount:0},e()})}},{key:"initialProgram",value:function(){var e=d.w.TwoWeeks;this.isLoading=!1;var t=this;setTimeout(function(){t.board.setup(2,e,!1,new Date,"assigned-ex",t.traineeUserId.toString())},10)}},{key:"dataChanged",value:function(e){var t=this;setTimeout(function(){t.sub&&t.sub.unsubscribe(),t.refresh.emit()},1e3)}},{key:"dayDataChanged",value:function(e){}},{key:"bulkEditSaved",value:function(e){this.board.clearSelection()}},{key:"weekCreated",value:function(e){var t=this,i=this;e.days.forEach(function(e,n){var s,r,a;e.InitiateItems();var o=((null===(s=i.selectedDays)||void 0===s?void 0:s.items)||[]).filter(function(i){return t.dateService.isSameDate(new Date(i.assignedExerciseProgramDay.calendarDate),e.startDate)});if(o.length>0){var c=o[0].assignedExerciseProgramDay,d=new l.h(c.id,c.name,e,new u.x(c.exerciseProgramName,c));e.addItem(d)}else{var g=((null===(r=i.selectedDaysSimple)||void 0===r?void 0:r.items)||[]).filter(function(i){return t.dateService.isSameDate(new Date(i.calendarDate),e.startDate)});if(g.length>0){var p=i.getSelectedDay(g[0]);if(p){var m=p.assignedExerciseProgramDay;i.selectedDays.items=(null===(a=i.selectedDays)||void 0===a?void 0:a.items)||[],e.addItem(new l.h(m.id,m.name,e,new u.x(m.exerciseProgramName,m)))}else i.dayService.getWithDetailsAsync(t.selected,g[0].calendarDate).subscribe(function(t){var n;i.selectedDays.items=(null===(n=i.selectedDays)||void 0===n?void 0:n.items)||[];var s={};s.assignedExerciseProgramDay=t,i.setSelectedDay(s),e.addItem(new l.h(t.id,t.name,e,new u.x(t.exerciseProgramName,t)))})}}})}},{key:"weekDeleted",value:function(e){}},{key:"itemDeleted",value:function(e){}},{key:"itemDeletedBulk",value:function(e){var t={};t.ids=e.map(function(e){return e.itemId}),this.dayService.deleteBulk(t).subscribe()}},{key:"itemEdited",value:function(e){this.modal.update(e.day,e.extraData)}},{key:"itemCreated",value:function(e){this.modal.create(e,this.selected)}},{key:"editSelectedItems",value:function(e){this.modal.updateBulk(this.board.selectedItems,this.selected,e)}},{key:"itemCopiedMoved",value:function(e){var t=this,i=[];e.data.forEach(function(e){var n;(n={}).newDayDate=t.dateService.removeUtcDate(e.day.startDate).toISOString(),n.oldDayId=e.item.itemId,n.oldDayDate=t.dateService.removeUtcDate(e.item.day.startDate).toISOString(),console.log("itemCopiedMoved",e.item.extraData.assignedExerciseProgramId),n.OldProgramId=e.item.extraData.assignedExerciseProgramId,i.push(n)});var n={};n.copy=e.isCopy,n.programId=this.selected,n.moveData=i,this.pastData=e.data,this.pastDataInput=n,this.isShowPastModal=!0,n.copy?this.adjust.show():(this.pastDataInput.adjustValues=0,this.pastConfimed())}},{key:"onAdjustConfirm",value:function(e){this.pastDataInput.adjustValues=e,this.pastDataInput.copy&&1===this.pastDataInput.moveData.length?this.multiplay.show(1):this.pastConfimed()}},{key:"onMultiplyConfirm",value:function(e){var t=e-1;t=t<0?0:t,this.pastDataInput.multiplyFactor=t,this.pastConfimed()}},{key:"getDayKey",value:function(e){var t="assinged_ex_".concat(e.assignedExerciseProgramId,"_").concat(e.calendarDate).replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",t),t}},{key:"setSelectedDay",value:function(e){this.selectedDays.items.push(e);try{var t=this.getDayKey(e.assignedExerciseProgramDay),i=JSON.stringify({on:Date(),data:e});this.localCacheService.put(t,i,this.ttl)}catch(n){this.clearStorage()}}},{key:"clearStorage",value:function(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}},{key:"getSelectedDay",value:function(e){var t,i,n=this,s=this.getDayKey(e),r=this.localCacheService.get(s);if(!r||0===r.length)return null;var a=JSON.parse(r);return(null===(i=null===(t=null==a?void 0:a.data)||void 0===t?void 0:t.assignedExerciseProgramDay)||void 0===i?void 0:i.calendarDate)&&a.on?(a.data.assignedExerciseProgramDay.calendarDate=new Date(a.data.assignedExerciseProgramDay.calendarDate),this.isForceRefresh?(setTimeout(function(){n.isForceRefresh=!1},2e3),null):a.data):null}},{key:"refreshCache",value:function(){var e=this;e.clearStorage(),e.selectedDays.items=[],e.selectedDaysSimple.items=[],e.loadSimpleDays(function(){e.isForceRefresh=!0,e.board.calendarService.boardDto.weeks.forEach(function(t,i){t.isVisible&&e.weekCreated(t)})})}},{key:"pastConfimed",value:function(){var e=this;e.programService.moveItemByInput(e.pastDataInput).subscribe(function(t){e.pastData.forEach(function(t){e.selectedDays.items=e.selectedDays.items.filter(function(e){return e.assignedExerciseProgramDay.id!=t.item.itemId}),e.board.deattachItem(t.item)}),t.items.forEach(function(t){e.setSelectedDay(t);var i=new l.h(t.assignedExerciseProgramDay.id,t.assignedExerciseProgramDay.name,void 0,new u.x(t.assignedExerciseProgramDay.exerciseProgramName,t.assignedExerciseProgramDay));e.board.attachItemOnDate(i,new Date(t.assignedExerciseProgramDay.calendarDate))}),e.toaster.success("::Pasted","::ItemsPasteSuccessfully"),e.analyticsService.log(m.O.do_past_Program_assigned_exercise)})}},{key:"assign",value:function(){alert(this.board.selectedItems.length)}},{key:"isCurrentUserAdmin",get:function(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}]),e}();return e.\u0275fac=function(t){return new(t||e)(o.Y36(a.XNV),o.Y36(a.vR3),o.Y36(h.RT),o.Y36(h.LM),o.Y36(g.I),o.Y36(f.YP),o.Y36(c.R),o.Y36(v.gz),o.Y36(x.C),o.Y36(v.F0),o.Y36(f.MJ),o.Y36(y.F),o.Y36(a.$AH),o.Y36(m.y),o.Y36(b.qu))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-assigned-exercise-program-manage"]],viewQuery:function(e,t){var i;(1&e&&(o.Gf(ht,5),o.Gf(ft,5),o.Gf(vt,5),o.Gf(xt,5)),2&e)&&(o.iGM(i=o.CRH())&&(t.modal=i.first),o.iGM(i=o.CRH())&&(t.adjust=i.first),o.iGM(i=o.CRH())&&(t.multiplay=i.first),o.iGM(i=o.CRH())&&(t.board=i.first))},inputs:{traineeUserId:"traineeUserId"},outputs:{refresh:"refresh"},features:[o._Bn([a.XNV,c.R,g.I])],decls:19,vars:17,consts:[[1,"assigned-exercise-program-manage"],["class","d-flex bg-white rounded border",4,"ngIf"],[3,"hidden"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited",4,"ngIf"],[3,"dataChanged","bulkEdit"],["modal",""],["assign",""],[3,"modalTitle","modalLabel","onConfirm"],["adjust",""],[3,"step","modalTitle","modalLabel","onConfirm"],["multiplay",""],["moveToLib",""],[1,"d-flex","bg-white","rounded","border"],[1,"col"],[1,"col-xl-4","col-lg-6"],[1,"py-5","fade-in-top","text-center"],[1,"fa","fa-exclamation-triangle","fa-3x","text-primary","mb-4"],[1,"text-muted"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["selectionEditContent",""],["itemContent",""],["navContent",""],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],[3,"assignedExerciseDayModel","isSummary","day","traineeUserId"],[1,"d-flex","justify-content-sm-end"],[1,"custom-control","custom-switch",2,"margin-left","12px"],["type","checkbox","id","isSummary1",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isSummary1",1,"custom-control-label"],[1,"btn-group"],["class","btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-outline-success","btn-sm",3,"click"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.YNc(1,bt,14,7,"div",1),o.YNc(2,It,13,6,"div",1),o.TgZ(3,"div",2),o.YNc(4,At,10,1,"app-board-container",3),o.TgZ(5,"app-assigned-exercise-program-modal-day",4,5),o.NdJ("dataChanged",function(e){return t.dayDataChanged(e)})("bulkEdit",function(e){return t.bulkEditSaved(e)}),o.qZA(),o._UZ(7,"app-assign-exercise-program-to-user",null,6),o.TgZ(9,"past-adjust",7,8),o.NdJ("onConfirm",function(e){return t.onAdjustConfirm(e)}),o.ALo(11,"abpLocalization"),o.ALo(12,"abpLocalization"),o.qZA(),o.TgZ(13,"past-adjust",9,10),o.NdJ("onConfirm",function(e){return t.onMultiplyConfirm(e)}),o.ALo(15,"abpLocalization"),o.ALo(16,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o._UZ(17,"app-move-to-lib-exercise-program",null,11)),2&e&&(o.xp6(1),o.Q6J("ngIf",t.isLoading&&!t.isAssigned),o.xp6(1),o.Q6J("ngIf",!t.isLoading&&t.scheduledExerciseProgramId),o.xp6(1),o.Q6J("hidden",t.scheduledExerciseProgramId),o.xp6(1),o.Q6J("ngIf",!t.isLoading&&t.isAssigned),o.xp6(5),o.s9C("modalTitle",o.lcZ(11,9,"::AdjustValues")),o.s9C("modalLabel",o.lcZ(12,11,"::Adjust")),o.xp6(4),o.s9C("modalTitle",o.lcZ(15,13,"::MultiplyValues")),o.s9C("modalLabel",o.lcZ(16,15,"::Multiply")),o.Q6J("step",1))},directives:[I.O5,we,Ae.K,ke.m,Le,Je.U,mt,b.Wl,b.JJ,b.On,k.m],pipes:[a.fuE],styles:[""]}),e}()},17013:function(e,t,n){"use strict";n.r(t),n.d(t,{AssignedExerciseProgramModule:function(){return E}});var s,r=n(46700),a=n(55679),o=n(10135),c=n(99046),d=n(83845),l=n(73756),u=n(56410),g=n(21876),p=n(35366),m=[{path:"assigned/:id",component:g.d,canActivate:[r.a1M,r.nG9]}],h=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[u.Bz.forChild(m)],u.Bz]}),e}(),f=n(56137),v=n(99416),x=n(56874),y=n(8266),b=n(69244),I=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[r.IR2,b._t,a.e2,l.Ck,d.vv,c.h2,o.lQ,o.M,y.ExerciseModule,f.m,o.XC]]}),e}(),Z=n(75795),D=n(17288),S=function(){var e=function e(){i(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({providers:[],imports:[[x.e,v.vO,r.IR2,a.e2,l.Ck,d.vv,c.h2,o.lQ,o.M,f.m,D.JH,o.XC,Z.c]]}),e}(),E=((s=function e(){i(this,e)}).\u0275fac=function(e){return new(e||s)},s.\u0275mod=p.oAB({type:s}),s.\u0275inj=p.cJS({imports:[[h,x.e,v.vO,r.IR2,a.e2,l.Ck,d.vv,c.h2,o.lQ,o.M,f.m,o.XC,I,S]]}),s)},1094:function(e,t,n){"use strict";n.d(t,{H:function(){return u},m:function(){return g}});var r=n(35366),a=n(89443),o=n(30212),c=n(40594),d=function(){function e(t,n){i(this,e),this.group=t,this.parent=n,this.onDeleted=new r.vpe,this.isEditing=!0,this.isDeleted=!1,this.id=t.id,this.dropSetId=t.dropSetId,this.restSeconds=t.restSeconds,this.exerciseSeconds=t.exerciseSeconds,this.repeatCount=t.repeatCount,this.weight=t.weight,this.actualExerciseSeconds=t.actualExerciseSeconds,this.actualRepeatCount=t.actualRepeatCount,this.actualWeight=t.actualWeight,this.tempGuid=c.i.generate()}return s(e,[{key:"exerciseSeconds",get:function(){return this._exerciseSeconds},set:function(e){if(this._exerciseSeconds!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.exerciseSeconds||0)>0){var n=(e||0)+((e||0)-(i.exerciseSeconds||0));n<0&&(n=0),setTimeout(function(){t.exerciseSeconds=n},10)}else setTimeout(function(){t.exerciseSeconds=e<0?0:e},10)}}this._exerciseSeconds=e}},{key:"repeatCount",get:function(){return this._repeatCount},set:function(e){if(this._repeatCount!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.repeatCount||0)>0){var n=(e||0)+((e||0)-(i.repeatCount||0));n<0&&(n=0),setTimeout(function(){t.repeatCount=n},10)}else setTimeout(function(){t.repeatCount=e<0?0:e},10)}}this._repeatCount=e}},{key:"restSeconds",get:function(){return this._restSeconds},set:function(e){if(this._restSeconds!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.restSeconds||0)>0){var n=(e||0)+((e||0)-(i.restSeconds||0));n<0&&(n=0),setTimeout(function(){t.restSeconds=n},10)}else setTimeout(function(){t.restSeconds=e<0?0:e},10)}}this._restSeconds=e}},{key:"weight",get:function(){return this._weight},set:function(e){if(this._weight!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.weight||0)>0){var n=(e||0)+((e||0)-(i.weight||0));n<0&&(n=0),setTimeout(function(){t.weight=n},10)}else setTimeout(function(){t.weight=e<0?0:e},10)}}this._weight=e}},{key:"isDropSet",get:function(){return!!(this.dropSetId&&this.dropSetId.length>0)}},{key:"undoDropSet",value:function(){var e=this,t=this.parent;e.dropSetId=void 0,this.parent.assignedGroups=this.parent.assignedGroupsUnDeleted.filter(function(t){return t!=e}),this.parent.parent.appendGroup(e.convertToDto()),0==t.assignedGroupsUnDeleted.length&&t.delete()}},{key:"edit",value:function(){this.isEditing=!0,this.backup={weight:this.weight,exerciseSeconds:this.exerciseSeconds,repeatCount:this.repeatCount,restSeconds:this.restSeconds,actualExerciseSeconds:this.actualExerciseSeconds,actualRepeatCount:this.actualRepeatCount,actualWeight:this.actualWeight}}},{key:"cancel",value:function(){this.isEditing=!1,this.exerciseSeconds=this.backup.exerciseSeconds,this.repeatCount=this.backup.repeatCount,this.restSeconds=this.backup.restSeconds,this.weight=this.backup.weight}},{key:"exerciseSecondsIsInvalid",value:function(){return null!=this.exerciseSeconds&&void 0!==this.exerciseSeconds&&(this.exerciseSeconds<0||this.exerciseSeconds>1e3)||!!o.d.InIntegerCheckerInvalid(this.exerciseSeconds)}},{key:"restSecondsIsInvalid",value:function(){return null!=this.restSeconds&&void 0!==this.restSeconds&&(this.restSeconds<0||this.restSeconds>1e3)||!!o.d.InIntegerCheckerInvalid(this.restSeconds)}},{key:"repeatCountIsInvalid",value:function(){return null!=this.repeatCount&&void 0!==this.repeatCount&&(this.repeatCount<0||this.repeatCount>1e3)||!!o.d.InIntegerCheckerInvalid(this.repeatCount)}},{key:"weightIsInvalid",value:function(){return null!=this.weight&&void 0!==this.weight&&(this.weight<0||this.weight>1e3)}},{key:"hasError",value:function(){return this.exerciseSecondsIsInvalid()||this.weightIsInvalid()||this.repeatCountIsInvalid()||this.restSecondsIsInvalid()}},{key:"save",value:function(){this.hasError()||(this.isEditing=!1)}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"convertToDto",value:function(){var e={};return e.id=this.id,e.dropSetId=this.dropSetId||void 0,e.exerciseSeconds=this.exerciseSeconds||void 0,e.repeatCount=this.repeatCount||void 0,e.restSeconds=this.restSeconds||void 0,e.weight=this.weight||void 0,e}}]),e}(),l=function(){function e(t,n){i(this,e),this.dropSetId=t,this.parent=n,this.onDeleted=new r.vpe,this.assignedGroups=[],this.isDeleted=!1}return s(e,[{key:"assignedGroupsUnDeleted",get:function(){return this.assignedGroups.filter(function(e){return!e.isDeleted})}},{key:"add",value:function(e){var t=this,i=this,n=new d(e,this);return n.onDeleted.subscribe(function(e){0===i.assignedGroupsUnDeleted.length&&t.delete()}),this.assignedGroups.push(n),n}},{key:"getPreItem",value:function(e){var t,i,n=this;return this.isDropSet?(this.assignedGroupsUnDeleted.forEach(function(n){n===e&&(t=i),i=n}),t):(this.parent.assignedGroupsContainersUnDeleted.forEach(function(e){e===n&&(t=i),i=e.assignedGroupsUnDeleted[0]}),t)}},{key:"getNextItem",value:function(e){var t,i=this,n=!1;return this.isDropSet?(this.assignedGroupsUnDeleted.forEach(function(i){n&&!t&&(t=i),n=i===e}),t):(this.parent.assignedGroupsContainersUnDeleted.forEach(function(e){n&&!t&&(t=e.assignedGroupsUnDeleted[0]),n=e===i}),t)}},{key:"isDropSet",get:function(){return!!(this.dropSetId&&this.dropSetId.length>0)}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"isValid",value:function(){var e=!0;return this.assignedGroupsUnDeleted.forEach(function(t){e&&(e=!t.hasError())}),e}},{key:"addNewDetail",value:function(){var e={};e.dropSetId=this.dropSetId;var t=this.add(e);return t.edit(),t}},{key:"convertToDropSet",value:function(){var e=this;this.dropSetId=c.i.generate(),this.assignedGroups.forEach(function(t){t.restSeconds=0,t.dropSetId=e.dropSetId})}},{key:"isEditing",value:function(){var e=!1;return this.assignedGroupsUnDeleted.forEach(function(t){e=e||t.isEditing}),e}}]),e}(),u=function(){function e(t){var n=this;i(this,e),this.onDeleted=new r.vpe,this.isCollapsed=!0,this.isExpaneded=!0,this.assignedGroupsContainers=[],this.isDeleted=!1,this.id=t.id,this.exerciseId=t.exerciseId,this.exerciseNote=t.exerciseNote,t.exercise?this.exerciseType=t.exercise.exerciseTypeGeneralLookupId:(console.log("unknown type"),this.exerciseType=a.$.Count),this.exercise=t.exercise,this.name=t.name,this.nameEn=t.nameEn,this.progressStatus=t.actualDataChange?g.Changed:100==t.completePercent?g.Completed:g.Missing,t.assignedExerciseProgramDayItemGroups&&t.assignedExerciseProgramDayItemGroups.length>0?t.assignedExerciseProgramDayItemGroups.forEach(function(e){n.appendGroup(e)}):this.addFakeData()}return s(e,[{key:"assignedGroupsContainersUnDeleted",get:function(){return this.assignedGroupsContainers.filter(function(e){return!e.isDeleted})}},{key:"addFakeData",value:function(){}},{key:"appendGroup",value:function(e){var t=new d(e,null),i=this.assignedGroupsContainers.filter(function(e){return e.dropSetId==t.dropSetId});if(t.isDropSet&&i.length>0){var n=i[0],s=n.add(e);return this.listenToDelete(n),s}var r=new l(t.dropSetId,this),a=r.add(e);return this.assignedGroupsContainers.push(r),this.listenToDelete(r),a}},{key:"listenToDelete",value:function(e){var t=this;e.onDeleted.subscribe(function(e){0===t.assignedGroupsContainersUnDeleted.length&&t.delete()})}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"isValid",value:function(){var e=!0;return this.assignedGroupsContainersUnDeleted.forEach(function(t){e&&(e=t.isValid())}),e}},{key:"addNewDetail",value:function(){this.appendGroup({}).edit()}},{key:"convertToDto",value:function(){var e={};return e.id=this.id,e.name=this.name,e.nameEn=this.nameEn,e.exerciseId=this.exerciseId,e.exerciseNote=this.exerciseNote,e.exercise=this.exercise,e.assignedExerciseProgramDayItemGroups=[],this.assignedGroupsContainersUnDeleted.forEach(function(t){t.assignedGroupsUnDeleted.forEach(function(t){e.assignedExerciseProgramDayItemGroups.push(t.convertToDto())})}),e}},{key:"isEditing",value:function(){var e=!1;return this.assignedGroupsContainersUnDeleted.forEach(function(t){e=e||t.isEditing()}),e}}]),e}(),g=function(e){return e[e.Missing=0]="Missing",e[e.Changed=1]="Changed",e[e.Completed=2]="Completed",e}({})},58450:function(e,t,n){"use strict";n.d(t,{x:function(){return c}});var r=n(35366),a=n(1094),o=function(){function e(t){var n=this;i(this,e),this.onDeleted=new r.vpe,this.assignedExerciseDayItemSets=[],this.isDeleted=!1,this.id=t.id,this.name=t.name,t.assignedExerciseProgramDayItemSets&&t.assignedExerciseProgramDayItemSets.length>0?t.assignedExerciseProgramDayItemSets.forEach(function(e){n.addSet(e)}):this.addFakeData()}return s(e,[{key:"assignedExerciseDayItemSetsUnDeleted",get:function(){return this.assignedExerciseDayItemSets.filter(function(e){return!e.isDeleted})}},{key:"addSet",value:function(e){var t=this,i=new a.H(e);i.onDeleted.subscribe(function(e){0===t.assignedExerciseDayItemSetsUnDeleted.length&&t.delete()}),this.assignedExerciseDayItemSets.push(i)}},{key:"addFakeData",value:function(){}},{key:"delete",value:function(){this.isDeleted=!0,this.onDeleted.emit()}},{key:"convertToDto",value:function(){var e={};return e.id=this.id,e.name=this.name,e.assignedExerciseProgramDayItemSets=[],this.assignedExerciseDayItemSetsUnDeleted.forEach(function(t){e.assignedExerciseProgramDayItemSets.push(t.convertToDto())}),e}},{key:"isSuperSetValid",value:function(){var e,t=this.assignedExerciseDayItemSetsUnDeleted.map(function(e){return e.assignedGroupsContainersUnDeleted.length}),i=!0;return t.forEach(function(t){void 0!==e&&e!==t&&(i=!1),e=t}),i}},{key:"isValid",value:function(){var e=!0;return this.assignedExerciseDayItemSetsUnDeleted.forEach(function(t){e&&(e=t.isValid())}),e}},{key:"isEditing",value:function(){var e=!1;return this.assignedExerciseDayItemSetsUnDeleted.forEach(function(t){e=e||t.isEditing()}),e}}]),e}(),c=function(){function e(t,n){var s=this;i(this,e),this.exerciseProgramName=t,this.onEmpty=new r.vpe,this.assignedExerciseDayItems=[],console.log(n.calendarDate,t),n&&(this.id=n.id,this.dayNumber=n.dayNumber,this.calendarDate=n.calendarDate,this.completePercent=n.completePercent,this.name=n.name||" ",this.nameEn=n.nameEn||" ",this.lastModificationTime=n.lastModificationTime,this.assignedExerciseProgramId=n.assignedExerciseProgramId,this.exerciseProgramId=n.exerciseProgramId,n.assignedExerciseProgramDayItems&&n.assignedExerciseProgramDayItems.length>0?n.assignedExerciseProgramDayItems.forEach(function(e){s.add(e)}):this.addFakeData())}return s(e,[{key:"assignedExerciseDayItemsUnDeleted",get:function(){return this.assignedExerciseDayItems.filter(function(e){return!e.isDeleted})}},{key:"addFakeData",value:function(){}},{key:"add",value:function(e,t,i){var n=this;if(i){e.assignedExerciseProgramDayItemSets=e.assignedExerciseProgramDayItemSets||[];var s={};s.exerciseId=i.id,s.exercise=i,s.name=i.exerciseName,s.nameEn=i.exerciseNameEn,s.assignedExerciseProgramDayItemGroups=[],t.forEach(function(e){var t={};t.restSeconds=e.restSeconds,t.exerciseSeconds=e.exerciseSeconds,t.repeatCount=e.repeatCount,t.weight=e.weight,s.assignedExerciseProgramDayItemGroups.push(t)}),t&&0!==t.length||s.assignedExerciseProgramDayItemGroups.push({}),e.assignedExerciseProgramDayItemSets.push(s)}var r=new o(e);return r.onDeleted.subscribe(function(e){0===n.assignedExerciseDayItemsUnDeleted.length&&n.onEmpty.emit()}),this.assignedExerciseDayItems.push(r),r}},{key:"addNewDetail",value:function(e,t){this.add({},e,t)}},{key:"UnMergeSuperSet",value:function(e,t){var i=new o({});e.assignedExerciseDayItemSetsUnDeleted.forEach(function(n,s){s>t&&(e.assignedExerciseDayItemSets=e.assignedExerciseDayItemSets.filter(function(e){return e!=n}),i.assignedExerciseDayItemSets.push(n))}),this.assignedExerciseDayItems.splice(this.assignedExerciseDayItems.indexOf(e)+1,0,i)}},{key:"MergeSuperSet",value:function(e,t){t.assignedExerciseDayItemSetsUnDeleted.forEach(function(i){t.assignedExerciseDayItemSets=t.assignedExerciseDayItemSets.filter(function(e){return e!=i}),e.assignedExerciseDayItemSets.push(i)}),t.delete()}},{key:"convertToDto",value:function(){var e={};return e.id=this.id,e.dayNumber=this.dayNumber,e.calendarDate=this.calendarDate,e.exerciseProgramId=this.exerciseProgramId,e.exerciseProgramName=this.exerciseProgramName,e.completePercent=this.completePercent,e.assignedExerciseProgramId=this.assignedExerciseProgramId,e.name=this.name,e.nameEn=this.nameEn,e.lastModificationTime=this.lastModificationTime,e.assignedExerciseProgramDayItems=[],this.assignedExerciseDayItemsUnDeleted.forEach(function(t){e.assignedExerciseProgramDayItems.push(t.convertToDto())}),console.log(e,this),e}},{key:"isAllSuperSetsValid",value:function(){var e=!0;return this.assignedExerciseDayItemsUnDeleted.forEach(function(t){e&&(e=t.isSuperSetValid())}),e}},{key:"isValid",value:function(){var e=!0;return this.assignedExerciseDayItemsUnDeleted.forEach(function(t){e&&(e=t.isValid())}),e}},{key:"isEditing",value:function(){var e=!1;return this.assignedExerciseDayItemsUnDeleted.forEach(function(t){e=e||t.isEditing()}),e}}]),e}()},28157:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var s=n(35366),r=n(46700),a=function(){var e=function e(t){var n=this;i(this,e),this.restService=t,this.apiName="Default",this.changeCoordinatorForTraineeByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/change-trainee-coordinator",body:e},{apiName:n.apiName})},this.deleteAccount=function(){return n.restService.request({method:"POST",url:"/api/app/trainees/DeleteAccount"},{apiName:n.apiName})},this.exportListPayments=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/export",body:e},{apiName:n.apiName})},this.get=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e)},{apiName:n.apiName})},this.getByUserId=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/get-by-user-id")},{apiName:n.apiName})},this.getCommitmentSummary=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/get-commitment-summary",body:e},{apiName:n.apiName})},this.getGeneralStatistics=function(){return n.restService.request({method:"GET",url:"/api/app/trainees/general-statistics"},{apiName:n.apiName})},this.getLisGuid=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/GetLisGuidAsync",body:e},{apiName:n.apiName})},this.getListByStatus=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/trainee-without-progress",body:e},{apiName:n.apiName})},this.getListPayments=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/traineepayment",body:e},{apiName:n.apiName})},this.getNotesListByDate=function(e,t,i,s){return n.restService.request({method:"GET",url:"/api/app/trainees/Note-ByDay",params:{traineeId:e,day:t,maxResultCount:i,skipCount:s}},{apiName:n.apiName})},this.getSimpleList=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list",body:e},{apiName:n.apiName})},this.getSimpleList2=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list2",body:e},{apiName:n.apiName})},this.getSimpleListSummary=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/simple-list-summary",body:e},{apiName:n.apiName})},this.getTraineBodyMassChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/bodymass")},{apiName:n.apiName})},this.getTraineeFatsChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/fats")},{apiName:n.apiName})},this.getTraineeIntensityLevelForUserByInput=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/GetTraineeIntensityLevelForUser",params:{traineeId:e.traineeId}},{apiName:n.apiName})},this.getTraineeMesurmentsById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/Mesurments",params:{id:e}},{apiName:n.apiName})},this.getTraineeMusclesChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/muscles")},{apiName:n.apiName})},this.getGetTraineeProfileGeneralById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/general?id=".concat(e)},{apiName:n.apiName})},this.getGetTraineeProfileGeneral2ById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/general2?id=".concat(e)},{apiName:n.apiName})},this.getTraineeOverviewBasicInfoById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/overview?id=".concat(e)},{apiName:n.apiName})},this.getTraineeProfileSummaryById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/profile?id=".concat(e)},{apiName:n.apiName})},this.getTraineeStatisticsByTraineeIdAndInDate=function(e,t){return n.restService.request({method:"GET",url:"/api/app/trainees/get-trainee-statistics",params:{traineeId:e,inDate:t}},{apiName:n.apiName})},this.getTraineeWaightChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/weight")},{apiName:n.apiName})},this.getRefreshTrainee=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/refresh/".concat(e)},{apiName:n.apiName})},this.getTraineeWaterChartById=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/".concat(e,"/chart/water")},{apiName:n.apiName})},this.getWithNavigationProperties=function(e){return n.restService.request({method:"GET",url:"/api/app/trainees/with-navigation-properties/".concat(e)},{apiName:n.apiName})},this.updateTraineeByTraineeIdAndWeightAndMusclesWeightAndFatPercentAndInDate=function(e,t,i,s,r){return n.restService.request({method:"POST",url:"/api/app/trainees/update-trainee",params:{traineeId:e,weight:t,musclesWeight:i,fatPercent:s,inDate:r}},{apiName:n.apiName})},this.updateTraineeOverviewByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees",body:e},{apiName:n.apiName})},this.changeCoachForTraineeByInput=function(e){return n.restService.request({method:"POST",url:"/api/app/trainees/AssignNewCoach",body:e},{apiName:n.apiName})},this.deleteNoteAttachmentById=function(e,t){return n.restService.request({method:"DELETE",url:"/api/app/trainees/DeleteNoteAttachment",params:{id:e,attachmentOrderId:t}},{apiName:n.apiName})}};return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.vgb))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()}}])}();