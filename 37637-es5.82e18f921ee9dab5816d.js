!function(){function t(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,i){(null==i||i>t.length)&&(i=t.length);for(var e=0,n=new Array(i);e<i;e++)n[e]=t[e];return n}function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function n(t,i){for(var e=0;e<i.length;e++){var n=i[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,i,e){return i&&n(t.prototype,i),e&&n(t,e),t}(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[37637],{63491:function(t,i,n){"use strict";n.d(i,{C:function(){return r}});var r=function(){function t(){e(this,t),this.calorie=0,this.proteins=0,this.carbs=0,this.fats=0}return o(t,[{key:"add",value:function(t){t&&(this.calorie+=t.calorie,this.proteins+=t.proteins,this.carbs+=t.carbs,this.fats+=t.fats)}}]),t}()},62914:function(t,i,n){"use strict";n.d(i,{C:function(){return o}});var o=function t(){e(this,t)}},9445:function(i,n,r){"use strict";r.d(n,{A:function(){return M}});var a=r(46700),l=r(35366),u=r(47701),c=r(28450),s=r(94773),g=r(73545),f=r(43117),p=r(42373),d=r(3183),h=r(31041),m=r(23733),Z=r(61116),v=r(53181),b=r(29871),A=r(57066),y=r(52201);function x(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"span",19),l.NdJ("click",function(){return l.CHM(e),l.oxw().clear()}),l._UZ(1,"i",20),l.qZA()}}function q(t,i){1&t&&l._UZ(0,"i",37)}var T=function(t){return{attachmentId:t,entity:"Nutrition"}};function C(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"div",7),l.TgZ(1,"div",24),l.TgZ(2,"div",25),l.TgZ(3,"div",26),l.TgZ(4,"div",27),l.YNc(5,q,1,0,"i",28),l._UZ(6,"img",29),l.ALo(7,"async"),l.ALo(8,"imgdownload"),l.qZA(),l.qZA(),l.TgZ(9,"div",30),l.TgZ(10,"button",31),l.NdJ("click",function(){var t=l.CHM(e).$implicit;return l.oxw(2).selectItem(t.nutrition)}),l.TgZ(11,"span",32),l._UZ(12,"app-highlighter",33),l.qZA(),l.TgZ(13,"span",34),l._UZ(14,"app-highlighter",33),l.qZA(),l.qZA(),l.TgZ(15,"div",35),l._UZ(16,"app-nutrition-totals",36),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){var n=i.$implicit,o=l.oxw(2);l.xp6(5),l.Q6J("ngIf",!n.nutrition.imageAttachmentId),l.xp6(1),l.Q6J("src",l.lcZ(7,11,l.lcZ(8,13,l.VKq(15,T,n.nutrition.imageAttachmentId))),l.LSH),l.xp6(6),l.Q6J("value",n.nutrition.nutritionName)("filter",null==o.filter?null:o.filter.nutritionName),l.xp6(2),l.Q6J("value",n.nutrition.nutritionNameEn)("filter",null==o.filter?null:o.filter.nutritionName),l.xp6(2),l.Q6J("isShowPercent",!1)("defaultCalories",n.nutrition.calories)("proteins",n.nutrition.proteins)("carbs",n.nutrition.carbs)("fats",n.nutrition.fats)}}function N(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"button",38),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).loadData()}),l._uU(1),l.ALo(2,"abpLocalization"),l.qZA()}2&t&&(l.xp6(1),l.hij(" ",l.lcZ(2,1,"::LoadMore2")," "))}function k(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"div",21),l.NdJ("scroll",function(t){return l.CHM(e),l.oxw().onScroll(t)}),l.TgZ(1,"div",1),l.YNc(2,C,17,17,"div",22),l.TgZ(3,"div",7),l.YNc(4,N,3,3,"button",23),l.qZA(),l.qZA(),l.qZA()}if(2&t){var n=l.oxw();l.xp6(2),l.Q6J("ngForOf",n.result.items),l.xp6(2),l.Q6J("ngIf",n.isShowMore())}}function w(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"div",39),l._UZ(2,"i",40),l.TgZ(3,"p",41),l._uU(4),l.ALo(5,"abpLocalization"),l.qZA(),l._UZ(6,"br"),l._UZ(7,"br"),l.TgZ(8,"button",42),l.NdJ("click",function(){l.CHM(e),l.oxw();var t=l.MAs(27);return l.MAs(37).create(t.value)}),l._uU(9),l.ALo(10,"abpLocalization"),l.qZA(),l.qZA(),l.qZA()}2&t&&(l.xp6(4),l.hij(" ",l.lcZ(5,2,"::AddNutritionTip")," "),l.xp6(5),l.hij(" ",l.lcZ(10,4,"::AddNutritionIfNotExist")," "))}var J=function(){return{standalone:!0}},M=function(){var i=function(){function i(t,n,o,r,a){e(this,i),this.service=t,this.langService=n,this.localCacheService=o,this.serviceCategory=r,this.mobileHelperService=a,this.productSelected=new l.vpe,this.filter={},this.isLoading=!0,this.selectedItem1="::SwitchAll",this.selectedItem2="::SwitchAll",this.isMobile=!0,this.query={},this.showSearch=!0}return o(i,[{key:"ngOnInit",value:function(){this.loadDataAgain(),setTimeout(function(){document.getElementsByTagName("app-nutrition-selector")[0].scrollIntoView()},100)}},{key:"selectCategory",value:function(t,i){this.selectedItem1=i,this.loadDataAgain()}},{key:"selectGenra",value:function(t,i){this.selectedItem2=i,this.loadDataAgain()}},{key:"loadDataAgain",value:function(){this.query.skipCount=-1,this.result=void 0,this.loadData()}},{key:"isShowMore",value:function(){return!this.result||this.result.items.length<this.result.totalCount}},{key:"loadData",value:function(){var i=this;i.query.maxResultCount=this.query.maxResultCount||18,i.query.skipCount=i.query.skipCount<0?0:i.result.items.length,i.filter.statusGeneralLookupId=15,console.log(i.filter),this.isLoading=!0;var e=Object.assign(Object.assign({},i.query),i.filter),n="nutritionSelector_".concat(JSON.stringify(e));i.service.getList(e).pipe((0,u.b)(1e3)).pipe((0,c.z)(i.localCacheService,n,60)).subscribe(function(e){var n=new a.wLZ;n.items=[],n.totalCount=0,i.query.skipCount>0&&i.result&&(n.totalCount=i.result.totalCount,n.items=t(i.result.items)),i.result?(e.items.forEach(function(t){n.items.some(function(i){return i.nutrition.id===t.nutrition.id})?console.log("Ignore duplicated value"):n.items.push(t)}),n.totalCount=e.totalCount):n=e,setTimeout(function(){i.result=n,i.isLoading=!1},5)})}},{key:"filterText",get:function(){return this.filter.nutritionName},set:function(t){var i=this;this.filter.nutritionName=t,setTimeout(function(){i.query.skipCount=-1,i.loadData()},10)}},{key:"filterByName",value:function(t){this.filter.nutritionName=t,this.showSearch=!1,this.loadDataAgain()}},{key:"clear",value:function(){this.showSearch=!0,this.filter.nutritionName=void 0,this.loadDataAgain()}},{key:"selectItem",value:function(t){var i=Object.assign({},t);i.nutritionCategory=void 0,this.productSelected.emit(i)}},{key:"onCreateNewNutrition",value:function(t){this.loadDataAgain()}},{key:"onScroll",value:function(t){var i=t.target;i.scrollHeight-i.scrollTop<=i.clientHeight+1&&this.loadData()}}]),i}();return i.\u0275fac=function(t){return new(t||i)(l.Y36(s.iJ),l.Y36(g.C),l.Y36(f.F),l.Y36(s.Ur),l.Y36(p.k4))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-nutrition-selector"]],hostBindings:function(t,i){1&t&&l.NdJ("scroll",function(t){return i.onScroll(t)},!1,l.Jf7)},outputs:{productSelected:"productSelected"},decls:38,vars:32,consts:[[1,"card","p-3","text-center","small-scrollbar","mb-0"],[1,"row"],[1,"col-6"],[1,"form-group"],[3,"lookupNameProp","getFn","ngModel","ngModelOptions","ngModelChange"],["id","NutritionGenra","name","NutritionGenra",1,"custom-select","form-control","valid",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"col-12"],[1,"input-group","p-3",2,"flex-wrap","wrap"],["id","filterTextFilter",1,"form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["filterTextControl",""],[1,"input-group-prepend"],["class","input-group-text btn btn-outline-primary",3,"click",4,"ngIf"],[1,"input-group-text","btn","btn-primary",3,"click"],[1,"fas","fa-search","d-block"],["class","bg-g-2",3,"scroll",4,"ngIf"],["class","row",4,"ngIf"],[3,"hideList","onSaved"],["appNutrition",""],[1,"input-group-text","btn","btn-outline-primary",3,"click"],[1,"far","fa-times-circle","d-block"],[1,"bg-g-2",3,"scroll"],["class","col-12",4,"ngFor","ngForOf"],["class","btn btn-primary","id","load_more",3,"click",4,"ngIf"],[1,"card","shadow-sm","p-0"],[1,"card-body-old","row"],[1,"col-4"],[1,"img-thumbnail",2,"background","#343a4012 !important","min-height","100px"],["class","fa fa-utensils fa-3x text-primary","style","margin: 22px auto",4,"ngIf"],["alt","",1,"s-icon-lg",3,"src"],[1,"col-8"],[1,"btn","btn-block","btn-outline-success",3,"click"],[1,"view-rtl"],[3,"value","filter"],[1,"view-ltr"],[2,"margin","auto -7px"],[3,"isShowPercent","defaultCalories","proteins","carbs","fats"],[1,"fa","fa-utensils","fa-3x","text-primary",2,"margin","22px auto"],["id","load_more",1,"btn","btn-primary",3,"click"],[1,"col","text-center","mt-5","pt-5"],[1,"fab","fa-nutritionix","fa-3x","text-primary","my-4"],[1,"text-muted"],[1,"btn","btn-sm","btn-outline-success","custom-add-more",3,"click"]],template:function(t,i){if(1&t){var e=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"label"),l._uU(5),l.ALo(6,"abpLocalization"),l.qZA(),l.TgZ(7,"sw-lookup-select",4),l.NdJ("ngModelChange",function(t){return i.filter.categoryId=t})("ngModelChange",function(){return i.loadDataAgain()}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(8,"div",2),l.TgZ(9,"div",3),l.TgZ(10,"label"),l._uU(11),l.ALo(12,"abpLocalization"),l.qZA(),l.TgZ(13,"select",5),l.NdJ("ngModelChange",function(t){return i.filter.genraId=t})("ngModelChange",function(){return i.loadDataAgain()}),l._UZ(14,"option"),l.TgZ(15,"option",6),l._uU(16),l.ALo(17,"abpLocalization"),l.qZA(),l.TgZ(18,"option",6),l._uU(19),l.ALo(20,"abpLocalization"),l.qZA(),l.TgZ(21,"option",6),l._uU(22),l.ALo(23,"abpLocalization"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",7),l.TgZ(25,"div",8),l.TgZ(26,"input",9,10),l.NdJ("keyup.enter",function(t){return i.filterByName(t.target.value)})("ngModelChange",function(t){return i.filterText=t}),l.ALo(28,"abpLocalization"),l.qZA(),l.TgZ(29,"div",11),l.YNc(30,x,2,0,"span",12),l.TgZ(31,"span",13),l.NdJ("click",function(){l.CHM(e);var t=l.MAs(27);return i.filterByName(t.value)}),l._UZ(32,"i",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(33,"div",7),l.YNc(34,k,5,2,"div",15),l.YNc(35,w,11,6,"div",16),l.qZA(),l.qZA(),l.qZA(),l.TgZ(36,"app-nutrition",17,18),l.NdJ("onSaved",function(t){return i.onCreateNewNutrition(t)}),l.qZA()}2&t&&(l.xp6(5),l.hij(" ",l.lcZ(6,19,"::NutritionCategory")," "),l.xp6(2),l.Q6J("lookupNameProp",i.langService.isRtl?"displayName":"displayNameEn")("getFn",i.service.getNutritionCategoryLookup)("ngModel",i.filter.categoryId)("ngModelOptions",l.DdM(31,J)),l.xp6(4),l.hij(" ",l.lcZ(12,21,"::NutritionGenra")," "),l.xp6(2),l.Q6J("ngModel",i.filter.genraId),l.xp6(2),l.Q6J("ngValue",1),l.xp6(1),l.Oqu(l.lcZ(17,23,"::Carbs")),l.xp6(2),l.Q6J("ngValue",2),l.xp6(1),l.Oqu(l.lcZ(20,25,"::Proteins")),l.xp6(2),l.Q6J("ngValue",3),l.xp6(1),l.Oqu(l.lcZ(23,27,"::Fats")),l.xp6(4),l.s9C("placeholder",l.lcZ(28,29,"::Search")),l.Q6J("ngModel",i.filterText),l.xp6(4),l.Q6J("ngIf",!i.showSearch),l.xp6(4),l.Q6J("ngIf",i.result&&i.result.items.length>0),l.xp6(1),l.Q6J("ngIf",!(i.result&&0!==i.result.items.length||i.isLoading)),l.xp6(1),l.Q6J("hideList",!0))},directives:[d.X,h.JJ,h.On,m.m,h.EJ,h.YN,h.Kr,h.Fj,Z.O5,v.J,Z.sg,b.$,A.r],pipes:[a.fuE,Z.Ov,y.H],styles:[".bg-g-2[_ngcontent-%COMP%]{max-height:60vh;overflow-y:scroll;overflow-x:hidden}.s-icon-lg[_ngcontent-%COMP%]{width:83px;height:73px;-o-object-fit:cover;object-fit:cover}@media (max-width:992px){.s-icon-lg[_ngcontent-%COMP%]{width:45px;height:45px}}"]}),i}()}}])}();