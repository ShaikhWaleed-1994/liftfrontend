(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[37637],{63491:function(t,i,e){"use strict";e.d(i,{C:function(){return n}});class n{constructor(){this.calorie=0,this.proteins=0,this.carbs=0,this.fats=0}add(t){t&&(this.calorie+=t.calorie,this.proteins+=t.proteins,this.carbs+=t.carbs,this.fats+=t.fats)}}},62914:function(t,i,e){"use strict";e.d(i,{C:function(){return n}});class n{}},9445:function(t,i,e){"use strict";e.d(i,{A:function(){return w}});var n=e(46700),o=e(35366),r=e(47701),l=e(28450),a=e(94773),s=e(73545),c=e(43117),u=e(42373),g=e(3183),p=e(31041),d=e(23733),h=e(61116),f=e(53181),Z=e(29871),m=e(57066),A=e(52201);function x(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"span",19),o.NdJ("click",function(){return o.CHM(t),o.oxw().clear()}),o._UZ(1,"i",20),o.qZA()}}function b(t,i){1&t&&o._UZ(0,"i",37)}const v=function(t){return{attachmentId:t,entity:"Nutrition"}};function q(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"div",7),o.TgZ(1,"div",24),o.TgZ(2,"div",25),o.TgZ(3,"div",26),o.TgZ(4,"div",27),o.YNc(5,b,1,0,"i",28),o._UZ(6,"img",29),o.ALo(7,"async"),o.ALo(8,"imgdownload"),o.qZA(),o.qZA(),o.TgZ(9,"div",30),o.TgZ(10,"button",31),o.NdJ("click",function(){const i=o.CHM(t).$implicit;return o.oxw(2).selectItem(i.nutrition)}),o.TgZ(11,"span",32),o._UZ(12,"app-highlighter",33),o.qZA(),o.TgZ(13,"span",34),o._UZ(14,"app-highlighter",33),o.qZA(),o.qZA(),o.TgZ(15,"div",35),o._UZ(16,"app-nutrition-totals",36),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=i.$implicit,e=o.oxw(2);o.xp6(5),o.Q6J("ngIf",!t.nutrition.imageAttachmentId),o.xp6(1),o.Q6J("src",o.lcZ(7,11,o.lcZ(8,13,o.VKq(15,v,t.nutrition.imageAttachmentId))),o.LSH),o.xp6(6),o.Q6J("value",t.nutrition.nutritionName)("filter",null==e.filter?null:e.filter.nutritionName),o.xp6(2),o.Q6J("value",t.nutrition.nutritionNameEn)("filter",null==e.filter?null:e.filter.nutritionName),o.xp6(2),o.Q6J("isShowPercent",!1)("defaultCalories",t.nutrition.calories)("proteins",t.nutrition.proteins)("carbs",t.nutrition.carbs)("fats",t.nutrition.fats)}}function T(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"button",38),o.NdJ("click",function(){return o.CHM(t),o.oxw(2).loadData()}),o._uU(1),o.ALo(2,"abpLocalization"),o.qZA()}2&t&&(o.xp6(1),o.hij(" ",o.lcZ(2,1,"::LoadMore2")," "))}function C(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"div",21),o.NdJ("scroll",function(i){return o.CHM(t),o.oxw().onScroll(i)}),o.TgZ(1,"div",1),o.YNc(2,q,17,17,"div",22),o.TgZ(3,"div",7),o.YNc(4,T,3,3,"button",23),o.qZA(),o.qZA(),o.qZA()}if(2&t){const t=o.oxw();o.xp6(2),o.Q6J("ngForOf",t.result.items),o.xp6(2),o.Q6J("ngIf",t.isShowMore())}}function N(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"div",1),o.TgZ(1,"div",39),o._UZ(2,"i",40),o.TgZ(3,"p",41),o._uU(4),o.ALo(5,"abpLocalization"),o.qZA(),o._UZ(6,"br"),o._UZ(7,"br"),o.TgZ(8,"button",42),o.NdJ("click",function(){o.CHM(t),o.oxw();const i=o.MAs(27);return o.MAs(37).create(i.value)}),o._uU(9),o.ALo(10,"abpLocalization"),o.qZA(),o.qZA(),o.qZA()}2&t&&(o.xp6(4),o.hij(" ",o.lcZ(5,2,"::AddNutritionTip")," "),o.xp6(5),o.hij(" ",o.lcZ(10,4,"::AddNutritionIfNotExist")," "))}const y=function(){return{standalone:!0}};let w=(()=>{class t{constructor(t,i,e,n,r){this.service=t,this.langService=i,this.localCacheService=e,this.serviceCategory=n,this.mobileHelperService=r,this.productSelected=new o.vpe,this.filter={},this.isLoading=!0,this.selectedItem1="::SwitchAll",this.selectedItem2="::SwitchAll",this.isMobile=!0,this.query={},this.showSearch=!0}ngOnInit(){this.loadDataAgain(),setTimeout(()=>{document.getElementsByTagName("app-nutrition-selector")[0].scrollIntoView()},100)}selectCategory(t,i){this.selectedItem1=i,this.loadDataAgain()}selectGenra(t,i){this.selectedItem2=i,this.loadDataAgain()}loadDataAgain(){this.query.skipCount=-1,this.result=void 0,this.loadData()}isShowMore(){return!this.result||this.result.items.length<this.result.totalCount}loadData(){const t=this;t.query.maxResultCount=this.query.maxResultCount||18,t.query.skipCount=t.query.skipCount<0?0:t.result.items.length,t.filter.statusGeneralLookupId=15,console.log(t.filter),this.isLoading=!0;const i=Object.assign(Object.assign({},t.query),t.filter),e=`nutritionSelector_${JSON.stringify(i)}`;t.service.getList(i).pipe((0,r.b)(1e3)).pipe((0,l.z)(t.localCacheService,e,60)).subscribe(i=>{let e=new n.wLZ;e.items=[],e.totalCount=0,t.query.skipCount>0&&t.result&&(e.totalCount=t.result.totalCount,e.items=[...t.result.items]),t.result?(i.items.forEach(t=>{e.items.some(i=>i.nutrition.id===t.nutrition.id)?console.log("Ignore duplicated value"):e.items.push(t)}),e.totalCount=i.totalCount):e=i,setTimeout(()=>{t.result=e,t.isLoading=!1},5)})}get filterText(){return this.filter.nutritionName}set filterText(t){this.filter.nutritionName=t,setTimeout(()=>{this.query.skipCount=-1,this.loadData()},10)}filterByName(t){this.filter.nutritionName=t,this.showSearch=!1,this.loadDataAgain()}clear(){this.showSearch=!0,this.filter.nutritionName=void 0,this.loadDataAgain()}selectItem(t){const i=Object.assign({},t);i.nutritionCategory=void 0,this.productSelected.emit(i)}onCreateNewNutrition(t){this.loadDataAgain()}onScroll(t){let i=t.target;i.scrollHeight-i.scrollTop<=i.clientHeight+1&&this.loadData()}}return t.\u0275fac=function(i){return new(i||t)(o.Y36(a.iJ),o.Y36(s.C),o.Y36(c.F),o.Y36(a.Ur),o.Y36(u.k4))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-nutrition-selector"]],hostBindings:function(t,i){1&t&&o.NdJ("scroll",function(t){return i.onScroll(t)},!1,o.Jf7)},outputs:{productSelected:"productSelected"},decls:38,vars:32,consts:[[1,"card","p-3","text-center","small-scrollbar","mb-0"],[1,"row"],[1,"col-6"],[1,"form-group"],[3,"lookupNameProp","getFn","ngModel","ngModelOptions","ngModelChange"],["id","NutritionGenra","name","NutritionGenra",1,"custom-select","form-control","valid",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"col-12"],[1,"input-group","p-3",2,"flex-wrap","wrap"],["id","filterTextFilter",1,"form-control",3,"ngModel","placeholder","keyup.enter","ngModelChange"],["filterTextControl",""],[1,"input-group-prepend"],["class","input-group-text btn btn-outline-primary",3,"click",4,"ngIf"],[1,"input-group-text","btn","btn-primary",3,"click"],[1,"fas","fa-search","d-block"],["class","bg-g-2",3,"scroll",4,"ngIf"],["class","row",4,"ngIf"],[3,"hideList","onSaved"],["appNutrition",""],[1,"input-group-text","btn","btn-outline-primary",3,"click"],[1,"far","fa-times-circle","d-block"],[1,"bg-g-2",3,"scroll"],["class","col-12",4,"ngFor","ngForOf"],["class","btn btn-primary","id","load_more",3,"click",4,"ngIf"],[1,"card","shadow-sm","p-0"],[1,"card-body-old","row"],[1,"col-4"],[1,"img-thumbnail",2,"background","#343a4012 !important","min-height","100px"],["class","fa fa-utensils fa-3x text-primary","style","margin: 22px auto",4,"ngIf"],["alt","",1,"s-icon-lg",3,"src"],[1,"col-8"],[1,"btn","btn-block","btn-outline-success",3,"click"],[1,"view-rtl"],[3,"value","filter"],[1,"view-ltr"],[2,"margin","auto -7px"],[3,"isShowPercent","defaultCalories","proteins","carbs","fats"],[1,"fa","fa-utensils","fa-3x","text-primary",2,"margin","22px auto"],["id","load_more",1,"btn","btn-primary",3,"click"],[1,"col","text-center","mt-5","pt-5"],[1,"fab","fa-nutritionix","fa-3x","text-primary","my-4"],[1,"text-muted"],[1,"btn","btn-sm","btn-outline-success","custom-add-more",3,"click"]],template:function(t,i){if(1&t){const t=o.EpF();o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"div",2),o.TgZ(3,"div",3),o.TgZ(4,"label"),o._uU(5),o.ALo(6,"abpLocalization"),o.qZA(),o.TgZ(7,"sw-lookup-select",4),o.NdJ("ngModelChange",function(t){return i.filter.categoryId=t})("ngModelChange",function(){return i.loadDataAgain()}),o.qZA(),o.qZA(),o.qZA(),o.TgZ(8,"div",2),o.TgZ(9,"div",3),o.TgZ(10,"label"),o._uU(11),o.ALo(12,"abpLocalization"),o.qZA(),o.TgZ(13,"select",5),o.NdJ("ngModelChange",function(t){return i.filter.genraId=t})("ngModelChange",function(){return i.loadDataAgain()}),o._UZ(14,"option"),o.TgZ(15,"option",6),o._uU(16),o.ALo(17,"abpLocalization"),o.qZA(),o.TgZ(18,"option",6),o._uU(19),o.ALo(20,"abpLocalization"),o.qZA(),o.TgZ(21,"option",6),o._uU(22),o.ALo(23,"abpLocalization"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(24,"div",7),o.TgZ(25,"div",8),o.TgZ(26,"input",9,10),o.NdJ("keyup.enter",function(t){return i.filterByName(t.target.value)})("ngModelChange",function(t){return i.filterText=t}),o.ALo(28,"abpLocalization"),o.qZA(),o.TgZ(29,"div",11),o.YNc(30,x,2,0,"span",12),o.TgZ(31,"span",13),o.NdJ("click",function(){o.CHM(t);const e=o.MAs(27);return i.filterByName(e.value)}),o._UZ(32,"i",14),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(33,"div",7),o.YNc(34,C,5,2,"div",15),o.YNc(35,N,11,6,"div",16),o.qZA(),o.qZA(),o.qZA(),o.TgZ(36,"app-nutrition",17,18),o.NdJ("onSaved",function(t){return i.onCreateNewNutrition(t)}),o.qZA()}2&t&&(o.xp6(5),o.hij(" ",o.lcZ(6,19,"::NutritionCategory")," "),o.xp6(2),o.Q6J("lookupNameProp",i.langService.isRtl?"displayName":"displayNameEn")("getFn",i.service.getNutritionCategoryLookup)("ngModel",i.filter.categoryId)("ngModelOptions",o.DdM(31,y)),o.xp6(4),o.hij(" ",o.lcZ(12,21,"::NutritionGenra")," "),o.xp6(2),o.Q6J("ngModel",i.filter.genraId),o.xp6(2),o.Q6J("ngValue",1),o.xp6(1),o.Oqu(o.lcZ(17,23,"::Carbs")),o.xp6(2),o.Q6J("ngValue",2),o.xp6(1),o.Oqu(o.lcZ(20,25,"::Proteins")),o.xp6(2),o.Q6J("ngValue",3),o.xp6(1),o.Oqu(o.lcZ(23,27,"::Fats")),o.xp6(4),o.s9C("placeholder",o.lcZ(28,29,"::Search")),o.Q6J("ngModel",i.filterText),o.xp6(4),o.Q6J("ngIf",!i.showSearch),o.xp6(4),o.Q6J("ngIf",i.result&&i.result.items.length>0),o.xp6(1),o.Q6J("ngIf",!(i.result&&0!==i.result.items.length||i.isLoading)),o.xp6(1),o.Q6J("hideList",!0))},directives:[g.X,p.JJ,p.On,d.m,p.EJ,p.YN,p.Kr,p.Fj,h.O5,f.J,h.sg,Z.$,m.r],pipes:[n.fuE,h.Ov,A.H],styles:[".bg-g-2[_ngcontent-%COMP%]{max-height:60vh;overflow-y:scroll;overflow-x:hidden}.s-icon-lg[_ngcontent-%COMP%]{width:83px;height:73px;-o-object-fit:cover;object-fit:cover}@media (max-width:992px){.s-icon-lg[_ngcontent-%COMP%]{width:45px;height:45px}}"]}),t})()}}]);