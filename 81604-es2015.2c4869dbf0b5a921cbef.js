(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[81604],{81604:function(t,i,e){"use strict";e.r(i),e.d(i,{NutritionProgramModule:function(){return $i}});var n=e(46700),o=e(55679),a=e(10135),r=e(99046),s=e(83845),l=e(73756),c=e(56410),d=e(2996),u=e(67917),p=e(83865),g=e(69244),m=e(35366),h=e(63491);class f{constructor(t){this.onDeleted=new m.vpe,this.isEditing=!0,this.isDeleted=!1,this.isSubmitted=!1,this.id=t.id,this.nutrition=t.nutrition,this.nutritionNote=t.nutritionNote,this.optionId=t.optionId,this.quantity=t.quantity}getCalorie(){return this.nutrition?this.nutrition.calories*this.quantity:null}getCarbs(){return this.nutrition?this.nutrition.carbs*this.quantity:null}getProteins(){return this.nutrition?this.nutrition.proteins*this.quantity:null}getFats(){return this.nutrition?this.nutrition.fats*this.quantity:null}getNutritionTotals(){let t=new h.C;const i=this.quantity||0;return this.nutrition&&(t.calorie=this.nutrition.calories*i,t.carbs=this.nutrition.carbs*i,t.fats=this.nutrition.fats*i,t.proteins=this.nutrition.proteins*i),t}getImage(){var t;return null===(t=this.nutrition)||void 0===t?void 0:t.imageAttachmentId}edit(){this.isSubmitted=!1,this.isEditing=!0,this.backup={nutrition:this.nutrition,quantity:this.quantity}}cancel(){this.backup&&this.backup.nutrition?(this.isEditing=!1,this.nutrition=this.backup.nutrition,this.quantity=this.backup.quantity):this.delete()}quantityIsInvalid(){return!!this.isSubmitted&&(!this.quantity||this.quantity<0)}nutritionIsInvalid(){return!(!this.isSubmitted||this.nutrition&&this.nutrition.id)}hasErrors(){return this.quantityIsInvalid()||this.nutritionIsInvalid()}save(){this.isSubmitted=!0,this.hasErrors()||(this.isEditing=!1)}delete(){this.isDeleted=!0,this.onDeleted.emit()}convertToDto(){var t;let i={};return i.id=this.id,i.nutritionId=null===(t=this.nutrition)||void 0===t?void 0:t.id,i.nutritionNote=this.nutritionNote,i.optionId=this.optionId,i.nutrition=this.nutrition,i.quantity=this.quantity||void 0,i}get NutritionNoteVisible(){var t;return this._NutritionNoteVisible||(null!==(t=this.nutritionNote)&&void 0!==t?t:"").length>0}set NutritionNoteVisible(t){this._NutritionNoteVisible=t,t||(this.nutritionNote=void 0)}}class b{constructor(t){this.onDeleted=new m.vpe,this.details=[],this.visibleOption2=!1,this.visibleOption3=!1,this.selectedOptionId=1,this.isDeleted=!1,this.isAddingNewItem=!1,this.id=t.id,this.name=t.mealName,this.mealNotes1=t.mealNotes1,this.mealNotes2=t.mealNotes2,this.mealNotes3=t.mealNotes3,t.nutritionProgramDayItemDetails&&t.nutritionProgramDayItemDetails.length>0?t.nutritionProgramDayItemDetails.forEach(t=>{this.appendGroup(t)}):this.addFakeData()}get detailsUnDeleted(){return this.details.filter(t=>!t.isDeleted)}get detailsUnDeletedForActiveOption(){return this.details.filter(t=>!t.isDeleted&&t.optionId===this.selectedOptionId)}GetDetailsUnDeletedForActiveOptionVisible(t){return!(2!==t||!this.visibleOption2)||!(3!==t||!this.visibleOption3)||this.details.filter(i=>!i.isDeleted&&i.optionId==t).length>0}addOption(){return this.GetDetailsUnDeletedForActiveOptionVisible(2)?this.GetDetailsUnDeletedForActiveOptionVisible(3)?void 0:(this.visibleOption3=!0,void(this.selectedOptionId=3)):(this.visibleOption2=!0,void(this.selectedOptionId=2))}addFakeData(){}appendGroup(t){t.optionId=t.optionId||this.selectedOptionId;let i=new f(t);return this.details.push(i),this.listenToDelete(i),i}listenToDelete(t){t.onDeleted.subscribe(t=>{0==this.detailsUnDeleted.length&&this.delete()})}isEditing(){let t=!1;return this.detailsUnDeleted.forEach(i=>{t=t||i.isEditing}),t}delete(){this.isDeleted=!0,this.onDeleted.emit()}addNewDetail(t){const i=this.selectedOptionId;if(this.detailsUnDeleted.length>0){const e=this.detailsUnDeleted[this.detailsUnDeleted.length-1];if(e.optionId===i&&!e.nutrition)return e.nutrition=t,void(e.quantity=1);if(e.optionId===i&&e.nutrition.id==t.id)return void(e.quantity=(e.quantity||0)+1)}let e={};t&&(e.nutrition=t,e.nutritionId=t.id,e.optionId=i,e.quantity=1),this.appendGroup(e).edit()}convertToDto(){let t={};return t.id=this.id,t.mealName=this.name,t.mealNotes1=this.mealNotes1,t.mealNotes2=this.mealNotes2,t.mealNotes3=this.mealNotes3,t.nutritionProgramDayItemDetails=[],this.detailsUnDeleted.forEach(i=>{t.nutritionProgramDayItemDetails.push(i.convertToDto())}),t}isValid(){let t=!0;return this.detailsUnDeleted.forEach(t=>{t.isSubmitted=!0,t.save()}),this.detailsUnDeleted.forEach(i=>{t&&(t=!i.hasErrors())}),this.detailsUnDeleted.forEach(t=>{t.edit(),t.isSubmitted=!0}),t}getCalorie(){let t=0;return this.detailsUnDeletedForActiveOption.forEach(i=>{t+=i.getCalorie()}),t}getCarbs(){let t=0;return this.detailsUnDeletedForActiveOption.forEach(i=>{t+=i.getCarbs()}),t}getProteins(){let t=0;return this.detailsUnDeletedForActiveOption.forEach(i=>{t+=i.getProteins()}),t}getFats(){let t=0;return this.detailsUnDeletedForActiveOption.forEach(i=>{t+=i.getFats()}),t}getNutritionTotals(){let t=new h.C;return this.detailsUnDeletedForActiveOption.forEach(i=>{t.add(i.getNutritionTotals())}),t}get mealNotes(){return 1===this.selectedOptionId?this.mealNotes1:2===this.selectedOptionId?this.mealNotes2:3===this.selectedOptionId?this.mealNotes3:void 0}set mealNotes(t){1===this.selectedOptionId&&(this.mealNotes1=t),2===this.selectedOptionId&&(this.mealNotes2=t),3===this.selectedOptionId&&(this.mealNotes3=t)}}class Z{constructor(t){this.onDeleted=new m.vpe,this.nutritionDayItems=[],this.isEditingMealName=!1,t&&(this.totalDayCaloriesMin=t.totalDayCaloriesMin,this.totalDayCaloriesMax=t.totalDayCaloriesMax,this.id=t.id,this.dayNumber=t.dayNumber,this.name=t.name||" ",this.nutritionProgramId=t.nutritionProgramId,t.nutritionProgramDayItems&&t.nutritionProgramDayItems.length>0?t.nutritionProgramDayItems.forEach(t=>{this.add(t)}):this.addFakeData())}get nutritionDayItemsUnDeleted(){return this.nutritionDayItems.filter(t=>!t.isDeleted)}addFakeData(){}add(t){const i=this,e=i.nutritionDayItemsUnDeleted.filter(i=>i.name==t.mealName);if(e.length>0)return e[0];let n=new b(t);return n.onDeleted.subscribe(t=>{i.onDeleted.emit(i.nutritionDayItemsUnDeleted.length)}),this.nutritionDayItems.push(n),n}addNewDetail(t){let i={};i.mealName=t,this.add(i).addNewDetail()}convertToDto(){let t={};return t.id=this.id,t.dayNumber=this.dayNumber,t.nutritionProgramId=this.nutritionProgramId,t.totalDayCaloriesMin=this.totalDayCaloriesMin,t.totalDayCaloriesMax=this.totalDayCaloriesMax,t.name=this.name,t.nutritionProgramDayItems=[],this.nutritionDayItemsUnDeleted.forEach(i=>{t.nutritionProgramDayItems.push(i.convertToDto())}),t}isAllSuperSetsValid(){let t=!0;return this.nutritionDayItemsUnDeleted.forEach(t=>{t.isValid()}),this.nutritionDayItemsUnDeleted.forEach(i=>{t&&(t=i.isValid())}),t}isEditing(){let t=!1;return this.nutritionDayItemsUnDeleted.forEach(i=>{t=t||i.isEditing()}),t}getCalorie(){let t=0;return this.nutritionDayItemsUnDeleted.forEach(i=>{t+=i.getCalorie()}),t}getCarbs(){let t=0;return this.nutritionDayItemsUnDeleted.forEach(i=>{t+=i.getCarbs()}),t}getFats(){let t=0;return this.nutritionDayItemsUnDeleted.forEach(i=>{t+=i.getFats()}),t}getProteins(){let t=0;return this.nutritionDayItemsUnDeleted.forEach(i=>{t+=i.getProteins()}),t}getNutritionTotals(){let t=new h.C;return this.nutritionDayItemsUnDeleted.forEach(i=>{t.add(i.getNutritionTotals())}),t}up(t){const i=[...this.nutritionDayItemsUnDeleted],e=i.indexOf(t);(0,g.bA)(i,e,e+1),this.nutritionDayItems=i}down(t){const i=[...this.nutritionDayItemsUnDeleted],e=i.indexOf(t);(0,g.bA)(i,e,e-1),this.nutritionDayItems=i}}var v=e(62914),A=e(65122),x=e(56296),y=e(94773),C=e(14160),N=e(73545),M=e(31041),w=e(46140),T=e(30212),I=e(43835),D=e(44689),q=e(11520),O=e(44019),_=e(40878),L=e(17434),P=e(42373),U=e(61116),k=e(23733),J=e(55794),F=e(99416),S=e(1254),E=e(28451);const Y=["tagInput"];function Q(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",5),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).isAdvanced=!0}),m.ALo(1,"abpLocalization"),m._UZ(2,"i",6),m.TgZ(3,"span"),m._uU(4),m.ALo(5,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.Q6J("ngbTooltip",m.lcZ(1,2,"::Activate")),m.xp6(4),m.hij(" ",m.lcZ(5,4,"::isAdvanced")," "))}function z(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",5),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).isAdvanced=!1}),m.ALo(1,"abpLocalization"),m._UZ(2,"i",7),m.TgZ(3,"span"),m._uU(4),m.ALo(5,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.Q6J("ngbTooltip",m.lcZ(1,2,"::Deactivate")),m.xp6(4),m.hij(" ",m.lcZ(5,4,"::isAdvanced")," "))}function V(t,i){if(1&t&&(m.TgZ(0,"h3"),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA(),m.TgZ(3,"div",3),m.YNc(4,Q,6,6,"div",4),m.YNc(5,z,6,6,"div",4),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.hij(" ",m.lcZ(2,3,t.selected?t.isReadOnly?"::View":"AbpUi::Edit":"::NewNutritionProgram")," "),m.xp6(3),m.Q6J("ngIf",!t.isAdvanced),m.xp6(1),m.Q6J("ngIf",t.isAdvanced)}}function H(t,i){1&t&&(m.TgZ(0,"div",47),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::InPublicLibrary")," "))}function j(t,i){1&t&&(m.TgZ(0,"label",48),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::CreatedBy")," "))}function $(t,i){if(1&t&&(m.TgZ(0,"div",13),m.YNc(1,H,3,3,"div",45),m.YNc(2,j,3,3,"label",46),m._uU(3),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",!t.getAssignedToCoach),m.xp6(1),m.Q6J("ngIf",t.getAssignedToCoach),m.xp6(1),m.hij(" ",t.getAssignedToCoach," ")}}function G(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",51),m.NdJ("click",function(i){return m.CHM(t),m.oxw(3).clearAssignedCoach(i)}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}2&t&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"::MoveToPublicLibrary")))}function R(t,i){if(1&t&&(m.TgZ(0,"div",49),m.YNc(1,G,3,3,"button",50),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.Q6J("ngIf",t.isAssignedToCoach)}}function B(t,i){1&t&&(m.TgZ(0,"span",52),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"::Optional")))}function W(t,i){1&t&&(m.TgZ(0,"span",52),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"::Optional")))}const K=function(t){return{"d-none":t}};function X(t,i){if(1&t&&(m.TgZ(0,"div",53),m.TgZ(1,"label",54),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA(),m.TgZ(4,"select",55),m._UZ(5,"option"),m.TgZ(6,"option",56),m._uU(7),m.ALo(8,"abpLocalization"),m.qZA(),m.TgZ(9,"option",56),m._uU(10),m.ALo(11,"abpLocalization"),m.qZA(),m.TgZ(12,"option",56),m._uU(13),m.ALo(14,"abpLocalization"),m.qZA(),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.Q6J("ngClass",m.VKq(16,K,!t.isAdvanced)),m.xp6(2),m.Oqu(m.lcZ(3,8,"::ProgramCategory")),m.xp6(4),m.Q6J("ngValue",0),m.xp6(1),m.Oqu(m.lcZ(8,10,"::Normal")),m.xp6(2),m.Q6J("ngValue",1),m.xp6(1),m.Oqu(m.lcZ(11,12,"::SelfTraining")),m.xp6(2),m.Q6J("ngValue",2),m.xp6(1),m.Oqu(m.lcZ(14,14,"::LiftPrime"))}}function tt(t,i){1&t&&(m.TgZ(0,"span",52),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"::Optional")))}function it(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",59),m.TgZ(1,"span"),m._uU(2),m.TgZ(3,"span",60),m.NdJ("click",function(i){const e=m.CHM(t).$implicit;return m.oxw(3).removeItemCategories(i,e.value)}),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=i.$implicit,e=m.oxw(3);m.xp6(2),m.hij(" ",e.langService.isRtl?t.name:t.nameEn," ")}}function et(t,i){1&t&&(m.TgZ(0,"span",61),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::NutritionCategories")," "))}function nt(t,i){if(1&t&&(m.YNc(0,it,4,1,"div",57),m.YNc(1,et,3,3,"span",58)),2&t){const t=i.$implicit;m.Q6J("ngForOf",t),m.xp6(1),m.Q6J("ngIf",!t||0===t.length)}}function ot(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",59),m.TgZ(1,"span"),m._uU(2),m.TgZ(3,"span",60),m.NdJ("click",function(i){const e=m.CHM(t).$implicit;return m.oxw(3).removeItemGoals(i,e.value)}),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=i.$implicit,e=m.oxw(3);m.xp6(2),m.hij(" ",e.langService.isRtl?t.name:t.nameEn," ")}}function at(t,i){1&t&&(m.TgZ(0,"span",61),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::Goals")," "))}function rt(t,i){if(1&t&&(m.YNc(0,ot,4,1,"div",57),m.YNc(1,at,3,3,"span",58)),2&t){const t=i.$implicit;m.Q6J("ngForOf",t),m.xp6(1),m.Q6J("ngIf",!t||0===t.length)}}const st=function(){return[32]};function lt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"form",8,9),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw().submitForm()}),m.TgZ(2,"div",10),m.YNc(3,$,4,3,"div",11),m.YNc(4,R,2,1,"div",12),m.TgZ(5,"div",13),m.TgZ(6,"label",14),m._uU(7),m.ALo(8,"abpLocalization"),m.qZA(),m._UZ(9,"input",15),m.qZA(),m.TgZ(10,"div",16),m.TgZ(11,"label",17),m._uU(12),m.ALo(13,"abpLocalization"),m.YNc(14,B,3,3,"span",18),m.qZA(),m._UZ(15,"input",19),m.qZA(),m.TgZ(16,"div",13),m.TgZ(17,"label",20),m._uU(18),m.ALo(19,"abpLocalization"),m.qZA(),m._UZ(20,"input",21),m.qZA(),m.TgZ(21,"div",16),m.TgZ(22,"label",22),m._uU(23),m.ALo(24,"abpLocalization"),m.YNc(25,W,3,3,"span",18),m.qZA(),m._UZ(26,"input",23),m.qZA(),m.TgZ(27,"div",13),m.TgZ(28,"label",24),m._uU(29),m.ALo(30,"abpLocalization"),m.qZA(),m._UZ(31,"input",25),m.qZA(),m.TgZ(32,"div",26),m.TgZ(33,"label",27),m._uU(34),m.ALo(35,"abpLocalization"),m.qZA(),m._UZ(36,"input",28),m.qZA(),m.TgZ(37,"div",26),m.TgZ(38,"label",29),m._uU(39),m.ALo(40,"abpLocalization"),m.qZA(),m._UZ(41,"input",30),m.qZA(),m.YNc(42,X,15,18,"div",31),m.TgZ(43,"div",16),m.TgZ(44,"label",32),m._uU(45),m.ALo(46,"abpLocalization"),m.YNc(47,tt,3,3,"span",18),m.qZA(),m._UZ(48,"tag-input",33,34),m.ALo(50,"abpLocalization"),m.ALo(51,"abpLocalization"),m.qZA(),m.TgZ(52,"div",35),m.TgZ(53,"label",36),m._uU(54),m.ALo(55,"abpLocalization"),m.qZA(),m.TgZ(56,"p-multiSelect",37),m.NdJ("onFocus",function(i){return m.CHM(t),m.oxw().onInputFocus(i)}),m.YNc(57,nt,2,2,"ng-template",38),m.qZA(),m.qZA(),m.TgZ(58,"div",35),m.TgZ(59,"label",36),m._uU(60),m.ALo(61,"abpLocalization"),m.qZA(),m.TgZ(62,"p-multiSelect",39),m.NdJ("onFocus",function(i){return m.CHM(t),m.oxw().onInputFocus(i)}),m.YNc(63,rt,2,2,"ng-template",38),m.qZA(),m.qZA(),m.TgZ(64,"div",40),m.TgZ(65,"button",41,42),m._uU(67),m.ALo(68,"abpLocalization"),m.qZA(),m.TgZ(69,"button",43),m._UZ(70,"i",44),m._uU(71),m.ALo(72,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.Q6J("formGroup",t.form),m.xp6(3),m.Q6J("ngIf",t.isCurrentUserAdmin),m.xp6(1),m.Q6J("ngIf",t.isCurrentUserAdmin),m.xp6(3),m.hij(" ",m.lcZ(8,44,"::NutriitionProgramName")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(72,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(13,46,"::Description")," "),m.xp6(2),m.Q6J("ngIf",!t.isReadOnly),m.xp6(4),m.hij(" ",m.lcZ(19,48,"::NutriitionProgramNameEn")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(74,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(24,50,"::DescriptionEn")," "),m.xp6(2),m.Q6J("ngIf",!t.isReadOnly),m.xp6(4),m.hij(" ",m.lcZ(30,52,"::NumberOfMeals")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(76,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(35,54,"::CaloriesFrom")," "),m.xp6(3),m.Q6J("ngClass",m.VKq(78,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(40,56,"::CaloriesTo")," "),m.xp6(3),m.Q6J("abpPermission","Physic.SelfTraining"),m.xp6(1),m.Q6J("ngClass",m.VKq(80,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(46,58,"::Tags")," "),m.xp6(2),m.Q6J("ngIf",!t.isReadOnly),m.xp6(1),m.s9C("secondaryPlaceholder",m.lcZ(50,60,"::Tags")),m.s9C("placeholder",m.lcZ(51,62,"::AddTag")),m.Q6J("onAdding",t.onAdding)("separatorKeyCodes",m.DdM(82,st)),m.xp6(4),m.Q6J("ngClass",m.VKq(83,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(55,64,"::NutritionCategories")," "),m.xp6(2),m.Q6J("options",t.categoriesList)("virtualScroll",!0)("optionLabel",t.langService.isRtl?"name":"nameEn")("showHeader",!t.isMobile)("showTransitionOptions","0ms")("hideTransitionOptions","0ms")("maxSelectedLabels",4),m.xp6(2),m.Q6J("ngClass",m.VKq(85,K,!t.isAdvanced)),m.xp6(2),m.hij(" ",m.lcZ(61,66,"::Goals")," "),m.xp6(2),m.Q6J("options",t.goalsList)("virtualScroll",!0)("optionLabel",t.langService.isRtl?"name":"nameEn")("showHeader",!t.isMobile)("showTransitionOptions","0ms")("hideTransitionOptions","0ms")("maxSelectedLabels",4),m.xp6(5),m.hij(" ",m.lcZ(68,68,"AbpUi::Cancel")," "),m.xp6(4),m.hij(" ",m.lcZ(72,70,"AbpUi::Save")," ")}}let ct=(()=>{class t{constructor(t,i,e,n,o,a,r,s,l){this.list=t,this.track=i,this.service=e,this.permissionService=n,this.mobileHelperService=o,this.langService=a,this.confirmation=r,this.dateService=s,this.fb=l,this.dataChanged=new m.vpe,this.isMobile=!1,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.isAdvanced=!1,this.categoriesList=[],this.goalsList=[],this.preventSubmit=!1}ngOnInit(){this.isMobile=this.mobileHelperService.GetMobile();const t=this;this.service.getNutritionCategoriesLookup().subscribe(i=>t.categoriesList=i.items.map(t=>new L.Cf(t))),this.service.getGoalsLookup().subscribe(i=>t.goalsList=i.items.map(t=>new L.Cf(t)))}removeItemCategories(t,i){t.preventDefault(),t.stopPropagation();let e=this.form.get("categories").value;return e=e.filter(t=>t!=i),this.form.get("categories").setValue(e),!1}removeItemGoals(t,i){t.preventDefault(),t.stopPropagation();let e=this.form.get("goals").value;return e=e.filter(t=>t!=i),this.form.get("goals").setValue(e),!1}onInputFocus(t){setTimeout(()=>{},500)}buildForm(){var t,i,e,n;let{programCategory:o,nutriitionProgramName:a,nutriitionProgramNameEn:r,description:s,descriptionEn:l,tags:c,daysCount:d,coachAppUserId:u,statusGeneralLookupId:p,caloriesTo:g,caloriesFrom:m,numberOfMeals:h}=(null===(t=this.selected)||void 0===t?void 0:t.nutritionProgram)||{};const f=((null===(i=this.selected)||void 0===i?void 0:i.categories)||[]).map(t=>new dt(t)),b=((null===(e=this.selected)||void 0===e?void 0:e.goals)||[]).map(t=>new ut(t));h<=1&&(h=1),g||(g=0),m||(m=0),c=(c||"").trim();let Z=[];c.length>0&&c.split(",").forEach(t=>{Z.push({value:t,display:t})}),null!=d&&void 0!==d&&""!=d||(d=d||"0");let v={};(null===(n=this.selected)||void 0===n?void 0:n.appUser)&&(v.id=this.selected.appUser.id,v.displayName=this.selected.appUser.name),this.form=this.fb.group({programCategory:[null!=o?o:0,[M.kI.required]],nutriitionProgramName:[null!=a?a:null,[M.kI.required,M.kI.minLength(1),M.kI.maxLength(255)]],nutriitionProgramNameEn:[null!=r?r:null,[M.kI.required,M.kI.minLength(1),M.kI.maxLength(255)]],description:[null!=s?s:null,[M.kI.maxLength(255)]],descriptionEn:[null!=l?l:null,[M.kI.maxLength(255)]],tags:[null!=c?c:null,[]],tagsList:[Z,[]],daysCount:[null!=d?d:null,[M.kI.required,M.kI.min(0),M.kI.max(365)]],coachAppUserId:[null!=u?u:null,[]],coachAppUserId2:[null!=v?v:null,[]],statusGeneralLookupId:[null!=p?p:null,[]],caloriesTo:[g,[M.kI.required,T.d.isIntegerValidator(),M.kI.max(999999)]],caloriesFrom:[m,[M.kI.required,T.d.isIntegerValidator(),M.kI.max(999999)]],numberOfMeals:[h,[M.kI.required,T.d.isIntegerValidator(),M.kI.max(10)]],categories:[f,[]],goals:[b,[]]}),this.form.get("caloriesTo").setValidators([M.kI.required,T.d.isIntegerValidator(),T.d.GreaterThanValidator(this.form.get("caloriesFrom")),M.kI.max(999999)]),this.form.get("caloriesFrom").valueChanges.subscribe(t=>{this.form.get("caloriesTo").updateValueAndValidity()}),this.form.get("coachAppUserId2").valueChanges.subscribe(t=>{t&&t.id?this.form.get("coachAppUserId").setValue(t.id):this.form.get("coachAppUserId").reset()})}get isAssignedToCoach(){return this.form.get("coachAppUserId2").value&&this.form.get("coachAppUserId2").value.id}get getAssignedToCoach(){var t;return null===(t=this.form.get("coachAppUserId2").value)||void 0===t?void 0:t.displayName}clearAssignedCoach(t){t.preventDefault(),t.stopPropagation();const i=this;this.confirmation.warn("::MoveExerciseProgramToPublicLibraryConfirm","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,I.h)(t=>t===o.Tv.Status.confirm),(0,D.w)(()=>(i.form.get("coachAppUserId2").setValue({}),null))).subscribe(()=>{})}hideForm(){this.isModalOpen=!1,this.form.reset()}showForm(){this.buildForm(),this.isModalOpen=!0}onAdding(t){return this.preventSubmit=!0,setTimeout(()=>{this.preventSubmit=!1},500),(0,_.of)(t)}submitForm(){if(this.tagInput.preventSubmit)return;if(this.form.invalid)return;let t=this.form.value,i=[...t.tagsList||[]].map(t=>t.value);t.tagsList=void 0,t.tags=i.toString(),t.numberOfMeals=(t.numberOfMeals||0).toString(),t.categories=(t.categories||[]).map(t=>t.id),t.goals=(t.goals||[]).map(t=>t.id);const e=!!this.selected,n=e?this.service.update(this.selected.nutritionProgram.id,t):this.service.create(t);this.isModalBusy=!0,n.pipe((0,q.x)(()=>this.isModalBusy=!1),(0,O.b)(()=>this.hideForm())).subscribe(t=>{setTimeout(()=>{this.dataChanged.emit({isUpdating:e,nutrition:t})},10)})}create(){this.selected=void 0,this.showForm()}update(t){this.service.getWithNavigationProperties(t.nutritionProgram.id).subscribe(t=>{this.selected=t,this.showForm()})}startSearchUser(t){let i={};i.filter=t.query,this.service.getAppUserLookup(i).subscribe(t=>{this.AllUsers=t.items})}onSelect(t){}onClear(){}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}get isCurrentUserAdmin(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(n.XNV),m.Y36(n.vR3),m.Y36(x.l),m.Y36(n.$AH),m.Y36(P.k4),m.Y36(N.C),m.Y36(o.YP),m.Y36(d.R),m.Y36(M.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-nutrition-program-info"]],viewQuery:function(t,i){if(1&t&&m.Gf(Y,5),2&t){let t;m.iGM(t=m.CRH())&&(i.tagInput=t.first)}},outputs:{dataChanged:"dataChanged",create:"create",update:"update"},features:[m._Bn([n.XNV,d.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[1,"col","mt-1"],["class","action-item cursor pull-left",3,"ngbTooltip","click",4,"ngIf"],[1,"action-item","cursor","pull-left",3,"ngbTooltip","click"],[1,"fa","fa-toggle-off","custom-green","action-boarder"],[1,"fa","fa-toggle-on","custom-green","action-boarder","text-success"],["validateOnSubmit","",3,"formGroup","ngSubmit"],["form1",""],[1,"mt-2","fade-in-top","row"],["class","form-group col-md-4",4,"ngIf"],["class","form-group col-8",4,"ngIf"],[1,"form-group","col-md-4"],["for","nutrition-program-nutrition-program-name"],["id","nutrition-program-nutrition-program-name","formControlName","nutriitionProgramName","maxlength","255","minlength","1","autofocus","",1,"form-control"],[1,"form-group","col-md-8",3,"ngClass"],["for","nutrition-program-description"],["class","optional-input badge badge-info",4,"ngIf"],["id","nutrition-program-description","formControlName","description",1,"form-control"],["for","nutrition-program-nutrition-program-name-en"],["id","nutrition-program-nutrition-program-name-en","formControlName","nutriitionProgramNameEn","maxlength","255","minlength","1",1,"form-control"],["for","nutrition-program-description-en"],["id","nutrition-program-description-en","formControlName","descriptionEn",1,"form-control"],["for","numberOfMeals"],["type","number","id","numberOfMeals","formControlName","numberOfMeals","max","10","min","1","step","1",1,"form-control"],[1,"form-group","col-md-4",3,"ngClass"],["for","caloriesFrom"],["type","number","id","caloriesFrom","formControlName","caloriesFrom","min","0","step","1",1,"form-control"],["for","aloriesTo"],["type","number","id","caloriesTo","formControlName","caloriesTo","min","0","step","1",1,"form-control"],["class","form-group col-4",3,"ngClass",4,"abpPermission"],["for","nutrition-program-tags"],["id","nutrition-program-tags","formControlName","tagsList",3,"onAdding","separatorKeyCodes","secondaryPlaceholder","placeholder"],["tagInput",""],[1,"form-group","col-md-12",3,"ngClass"],["for","app-user-coordinator-app-user-id",2,"display","block"],["name","categories","id","storeCategoryLinks","itemSize","30","formControlName","categories","dataKey","id",1,"sw-tags","form-control",3,"options","virtualScroll","optionLabel","showHeader","showTransitionOptions","hideTransitionOptions","maxSelectedLabels","onFocus"],["pTemplate","selectedItems"],["name","goals","id","storeCategoryLinks","itemSize","30","formControlName","goals","dataKey","id",1,"sw-tags","form-control",3,"options","virtualScroll","optionLabel","showHeader","showTransitionOptions","hideTransitionOptions","maxSelectedLabels","onFocus"],[1,"col-sm-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],["class","badge badge-success",4,"ngIf"],["for","app-user-assigned-app-user-id","style","display: block;",4,"ngIf"],[1,"badge","badge-success"],["for","app-user-assigned-app-user-id",2,"display","block"],[1,"form-group","col-8"],["class","btn btn-sm btn-success mt-4",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-success","mt-4",3,"click"],[1,"optional-input","badge","badge-info"],[1,"form-group","col-4",3,"ngClass"],["for","programCategory"],["id","programCategory","name","programCategory","formControlName","programCategory",1,"custom-select","form-control","valid"],[3,"ngValue"],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"]],template:function(t,i){1&t&&(m.TgZ(0,"abp-modal",0),m.NdJ("visibleChange",function(t){return i.isModalOpen=t}),m.YNc(1,V,6,5,"ng-template",null,1,m.W1O),m.YNc(3,lt,73,87,"ng-template",null,2,m.W1O),m.qZA()),2&t&&m.Q6J("busy",i.isModalBusy)("visible",i.isModalOpen)("suppressUnsavedChangesWarning",i.isReadOnly)},directives:[o.zS,U.O5,a._L,M._Y,M.JL,n.YzZ,M.sg,r.hL,M.Fj,M.JJ,M.u,r.J5,k.m,M.nD,M.wO,n.Uqp,U.mk,M.wV,M.Fd,M.qQ,J.a,n.l97,F.m7,S.NU,E.jx,M.EJ,M.YN,M.Kr,U.sg],pipes:[n.fuE],encapsulation:2}),t})();class dt{constructor(t){this.id=t.id,this.name=t.nutritionCategoryName,this.nameEn=t.nutritionCategoryNameEn}}class ut{constructor(t){this.id=t.id,this.name=t.goalName,this.nameEn=t.goalNameEn}}var pt=e(40524),gt=e(43252),mt=e(53181),ht=e(57066),ft=e(42163),bt=e(9445),Zt=e(52201);function vt(t,i){1&t&&(m.TgZ(0,"h3"),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()),2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::Meals")," "))}function At(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",38),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).$implicit.isEditingMealName=!0}),m._UZ(1,"i",39),m.qZA()}}function xt(t,i){if(1&t&&(m.TgZ(0,"legend",36),m._uU(1),m.YNc(2,At,2,0,"button",37),m.qZA()),2&t){const t=m.oxw().$implicit,i=m.oxw(3);m.xp6(1),m.hij(" ",t.name," "),m.xp6(1),m.Q6J("ngIf",i.isEditableGlobalMode)}}function yt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",44),m.NdJ("click",function(){return m.CHM(t),m.oxw(2).$implicit.isEditingMealName=!1}),m._UZ(1,"i",45),m.qZA()}}function Ct(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"legend",36),m.TgZ(1,"div",40),m.TgZ(2,"input",41),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw().$implicit.name=i}),m.qZA(),m.TgZ(3,"div",42),m.YNc(4,yt,2,0,"button",43),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit,i=m.oxw(3);m.xp6(2),m.Q6J("ngModel",t.name),m.xp6(2),m.Q6J("ngIf",i.isEditableGlobalMode)}}function Nt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",46),m.NdJ("click",function(){return m.CHM(t),m.oxw().$implicit.delete()}),m._UZ(1,"i",47),m.qZA()}}function Mt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",24),m.NdJ("click",function(){return m.CHM(t),m.oxw().$implicit.selectedOptionId=2}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.ekj("active",2===t.selectedOptionId),m.xp6(1),m.hij(" ",m.lcZ(2,3,"::Option2")," ")}}function wt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",24),m.NdJ("click",function(){return m.CHM(t),m.oxw().$implicit.selectedOptionId=3}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.ekj("active",3===t.selectedOptionId),m.xp6(1),m.hij(" ",m.lcZ(2,3,"::Option3")," ")}}function Tt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",48),m.NdJ("click",function(){return m.CHM(t),m.oxw().$implicit.addOption()}),m._UZ(1,"i",49),m.qZA()}}function It(t,i){if(1&t&&(m.TgZ(0,"span",50),m._UZ(1,"app-nutrition-totals",51),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("isShowPercent",!1)("defaultCalories",t.getCalorie()||0)("proteins",(null==t?null:t.getNutritionTotals().proteins)||0)("carbs",(null==t?null:t.getNutritionTotals().carbs)||0)("fats",(null==t?null:t.getNutritionTotals().fats)||0)}}function Dt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",function(){m.CHM(t);const i=m.oxw(),e=i.$implicit,n=i.index,o=m.oxw().$implicit;return m.oxw(3).down(e,o,n,o.selectedOptionId)}),m._UZ(1,"i",22),m.qZA()}}function qt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",21),m.NdJ("click",function(){m.CHM(t);const i=m.oxw(),e=i.$implicit,n=i.index,o=m.oxw().$implicit;return m.oxw(3).up(e,o,n,o.selectedOptionId)}),m._UZ(1,"i",23),m.qZA()}}const Ot=function(t){return{attachmentId:t,entity:"Nutrition"}};function _t(t,i){if(1&t&&(m._UZ(0,"img",72),m.ALo(1,"async"),m.ALo(2,"imgdownload")),2&t){const t=m.oxw(2).$implicit;m.Q6J("src",m.lcZ(1,2,m.lcZ(2,4,m.VKq(6,Ot,t.getImage()))),m.LSH)("title",t.getImage())}}function Lt(t,i){if(1&t&&(m.TgZ(0,"div"),m.YNc(1,_t,3,8,"img",71),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",t.getImage())}}function Pt(t,i){if(1&t&&(m.TgZ(0,"div",73),m.TgZ(1,"span",74),m._uU(2),m.qZA(),m.TgZ(3,"span",75),m._uU(4),m.qZA(),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(2),m.Oqu(null==t||null==t.nutrition?null:t.nutrition.nutritionName),m.xp6(2),m.Oqu(null==t||null==t.nutrition?null:t.nutrition.nutritionNameEn)}}function Ut(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"p-autoComplete",82),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw(2).$implicit.nutrition=i})("onClear",function(){return m.CHM(t),m.oxw(6).onClear()})("completeMethod",function(i){return m.CHM(t),m.oxw(6).startSearchNutrition(i)})("search",function(i){return m.CHM(t),m.oxw(6).startSearchNutrition(i)}),m.ALo(1,"abpLocalization"),m.qZA()}if(2&t){const t=m.oxw(2).$implicit,i=m.oxw(4);m.s9C("placeholder",m.lcZ(1,6,"::AddNutritionRequiredLabel")),m.Q6J("ngModel",t.nutrition)("suggestions",i.AllNutritions)("type",i.searchType())("dropdown",!0)("field",i.langService.isRtl?"nutritionName":"nutritionNameEn")}}function kt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",83),m.NdJ("click",function(){m.CHM(t);const i=m.oxw(2).$implicit,e=m.oxw(4),n=m.MAs(6);return e.createNewNutrition(n,i)}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}2&t&&(m.xp6(1),m.Oqu(m.lcZ(2,1,"::AddNutritionIfNotExist")))}function Jt(t,i){if(1&t&&(m.TgZ(0,"option",87),m._uU(1),m.qZA()),2&t){const t=i.$implicit,e=m.oxw(7);m.Q6J("ngValue",t),m.xp6(1),m.hij(" ",e.langService.isRtl?t.nutritionName:t.nutritionNameEn," ")}}const Ft=function(){return{standalone:!0}};function St(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",84),m.TgZ(1,"div",85),m.TgZ(2,"label",77),m._uU(3),m.ALo(4,"abpLocalization"),m.qZA(),m.TgZ(5,"select",86),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw(2).$implicit.nutrition=i}),m._UZ(6,"option",87),m.YNc(7,Jt,2,2,"option",88),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2).$implicit,i=m.oxw(4);m.xp6(3),m.hij(" ",m.lcZ(4,4,"::AddNutritionRequiredLabel")," "),m.xp6(2),m.Q6J("ngModel",t.nutrition)("ngModelOptions",m.DdM(6,Ft)),m.xp6(2),m.Q6J("ngForOf",i.AllNutritions)}}const Et=function(t){return{"has-error":t}};function Yt(t,i){if(1&t&&(m.TgZ(0,"div",76),m.TgZ(1,"label",77),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA(),m.TgZ(4,"div",78),m.YNc(5,Ut,2,8,"p-autoComplete",79),m.YNc(6,kt,3,3,"button",80),m.qZA(),m.YNc(7,St,8,7,"div",81),m.qZA()),2&t){const t=m.oxw().$implicit,i=m.oxw(4);m.xp6(2),m.Oqu(m.lcZ(3,8,"::AddNutritionRequiredLabel")),m.xp6(2),m.Tol(t.isSubmitted?"isSubmitted":"not-isSubmitted"),m.Q6J("ngClass",m.VKq(10,Et,t.nutritionIsInvalid())),m.xp6(1),m.Q6J("ngIf",!i.isMobile),m.xp6(1),m.Q6J("ngIf",i.isShowAddingNutrition),m.xp6(1),m.Q6J("ngIf",i.isMobile)}}function Qt(t,i){if(1&t&&(m.TgZ(0,"div",73),m._uU(1),m.ALo(2,"number"),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.AsE(" ",m.xi3(2,2,t.quantity,"1.0-1")," ",null==t.nutrition||null==t.nutrition.unit?null:t.nutrition.unit.unitName," ")}}function zt(t,i){if(1&t&&(m.TgZ(0,"span",74),m._uU(1),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(null==t.nutrition||null==t.nutrition.unit?null:t.nutrition.unit.unitName)}}function Vt(t,i){if(1&t&&(m.TgZ(0,"span",75),m._uU(1),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.Oqu(null==t.nutrition||null==t.nutrition.unit?null:t.nutrition.unit.unitNameEn)}}function Ht(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",76),m.TgZ(1,"label"),m.YNc(2,zt,2,1,"span",89),m.YNc(3,Vt,2,1,"span",90),m.qZA(),m.TgZ(4,"input",91),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw().$implicit.quantity=i}),m.ALo(5,"abpLocalization"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw().$implicit;m.xp6(2),m.Q6J("ngIf",null==t.nutrition||null==t.nutrition.unit?null:t.nutrition.unit.unitName),m.xp6(1),m.Q6J("ngIf",null==t.nutrition||null==t.nutrition.unit?null:t.nutrition.unit.unitNameEn),m.xp6(1),m.s9C("placeholder",m.lcZ(5,5,"::AddQuantityRequiredLabel")),m.Q6J("ngModel",t.quantity)("ngClass",m.VKq(7,Et,t.quantityIsInvalid()))}}function jt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",92),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().$implicit;return i.NutritionNoteVisible=!i.NutritionNoteVisible}),m._UZ(1,"i",93),m.qZA()}}function $t(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",94),m.NdJ("click",function(){return m.CHM(t),m.oxw().$implicit.delete()}),m._UZ(1,"i",47),m.TgZ(2,"span",95),m._uU(3),m.ALo(4,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.xp6(3),m.Oqu(m.lcZ(4,1,"AbpUi::Delete")))}function Gt(t,i){if(1&t&&(m.TgZ(0,"div",73),m._uU(1),m.qZA()),2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.hij(" ",t.nutritionNote," ")}}function Rt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",76),m.TgZ(1,"input",35),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw(2).$implicit.nutritionNote=i}),m.ALo(2,"abpLocalization"),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(2).$implicit;m.xp6(1),m.s9C("placeholder",m.lcZ(2,2,"::AddNutritionNote")),m.Q6J("ngModel",t.nutritionNote)}}function Bt(t,i){if(1&t&&(m.TgZ(0,"div",96),m.YNc(1,Gt,2,1,"div",61),m.YNc(2,Rt,3,4,"div",62),m.qZA()),2&t){const t=m.oxw().$implicit;m.xp6(1),m.Q6J("ngIf",!t.isEditing),m.xp6(1),m.Q6J("ngIf",t.isEditing)}}function Wt(t,i){if(1&t&&(m.TgZ(0,"div",52),m.TgZ(1,"div",9),m.TgZ(2,"div",53),m.TgZ(3,"div"),m.O4$(),m.TgZ(4,"svg",54),m._UZ(5,"path",55),m._UZ(6,"path",56),m.qZA(),m.qZA(),m.kcU(),m.TgZ(7,"div",57),m.YNc(8,Dt,2,0,"button",58),m._UZ(9,"br"),m.YNc(10,qt,2,0,"button",58),m.qZA(),m.YNc(11,Lt,2,1,"div",59),m.qZA(),m.TgZ(12,"div",60),m.TgZ(13,"div",9),m.TgZ(14,"div",60),m.YNc(15,Pt,5,2,"div",61),m.YNc(16,Yt,8,12,"div",62),m.qZA(),m.TgZ(17,"div",63),m.YNc(18,Qt,3,5,"div",61),m.YNc(19,Ht,6,9,"div",62),m.qZA(),m.TgZ(20,"div",64),m.TgZ(21,"div",65),m.YNc(22,jt,2,0,"button",66),m.YNc(23,$t,5,3,"button",67),m.qZA(),m.qZA(),m.qZA(),m.TgZ(24,"div",9),m.TgZ(25,"div",68),m.TgZ(26,"div",69),m._UZ(27,"app-nutrition-totals",51),m.qZA(),m.qZA(),m.YNc(28,Bt,3,2,"div",70),m.qZA(),m.qZA(),m.qZA(),m.qZA()),2&t){const t=i.$implicit,e=i.index,n=m.oxw().$implicit,o=m.oxw(3);m.xp6(8),m.Q6J("ngIf",e>0),m.xp6(2),m.Q6J("ngIf",e<n.detailsUnDeletedForActiveOption.length-1),m.xp6(1),m.Q6J("ngIf",t.getImage()),m.xp6(4),m.Q6J("ngIf",!t.isEditing),m.xp6(1),m.Q6J("ngIf",t.isEditing),m.xp6(2),m.Q6J("ngIf",!t.isEditing),m.xp6(1),m.Q6J("ngIf",t.isEditing),m.xp6(3),m.Q6J("ngIf",null==t?null:t.nutrition),m.xp6(1),m.Q6J("ngIf",o.isEditableGlobalMode),m.xp6(4),m.Q6J("isShowPercent",!1)("defaultCalories",t.getCalorie()||0)("proteins",(null==t?null:t.getNutritionTotals().proteins)||0)("carbs",(null==t?null:t.getNutritionTotals().carbs)||0)("fats",(null==t?null:t.getNutritionTotals().fats)||0),m.xp6(1),m.Q6J("ngIf",null==t?null:t.NutritionNoteVisible)}}function Kt(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",97),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().$implicit;return m.oxw(3).addNewNutrition(i)}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::AddNutrition")," "))}const Xt=function(t){return{"selected-fieldset":t}};function ti(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"fieldset",15),m.YNc(1,xt,3,2,"legend",16),m.YNc(2,Ct,5,2,"legend",16),m.TgZ(3,"div",17),m.YNc(4,Nt,2,0,"button",18),m.qZA(),m.TgZ(5,"div",19),m.TgZ(6,"div",20),m.TgZ(7,"button",21),m.NdJ("click",function(){const i=m.CHM(t).$implicit;return m.oxw(3).nutritionDayModel.down(i)}),m._UZ(8,"i",22),m.qZA(),m.TgZ(9,"button",21),m.NdJ("click",function(){const i=m.CHM(t).$implicit;return m.oxw(3).nutritionDayModel.up(i)}),m._UZ(10,"i",23),m.qZA(),m.TgZ(11,"div",24),m.NdJ("click",function(){return i.$implicit.selectedOptionId=1}),m._uU(12),m.ALo(13,"abpLocalization"),m.qZA(),m.YNc(14,Mt,3,5,"div",25),m.YNc(15,wt,3,5,"div",25),m.YNc(16,Tt,2,0,"div",26),m.qZA(),m.TgZ(17,"div",27),m.YNc(18,It,2,5,"span",28),m.qZA(),m.qZA(),m._UZ(19,"div"),m.TgZ(20,"div",29),m.NdJ("cdkDropListDropped",function(i){const e=m.CHM(t).$implicit;return m.oxw(3).drop(i,e,e.selectedOptionId)}),m.YNc(21,Wt,29,15,"div",30),m.qZA(),m.TgZ(22,"div",31),m.TgZ(23,"div",32),m.YNc(24,Kt,3,3,"button",33),m.qZA(),m.TgZ(25,"div",34),m.TgZ(26,"input",35),m.NdJ("ngModelChange",function(t){return i.$implicit.mealNotes=t}),m.ALo(27,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=i.$implicit,e=m.oxw(3);m.Q6J("ngClass",m.VKq(20,Xt,!(!e.isHasOneMeal(null)&&t!==e.lastAddedNutritionDayItem))),m.xp6(1),m.Q6J("ngIf",!t.isEditingMealName),m.xp6(1),m.Q6J("ngIf",t.isEditingMealName),m.xp6(2),m.Q6J("ngIf",e.isEditableGlobalMode),m.xp6(7),m.ekj("active",1===t.selectedOptionId),m.xp6(1),m.hij(" ",m.lcZ(13,16,"::Option1")," "),m.xp6(2),m.Q6J("ngIf",t.GetDetailsUnDeletedForActiveOptionVisible(2)),m.xp6(1),m.Q6J("ngIf",t.GetDetailsUnDeletedForActiveOptionVisible(3)),m.xp6(1),m.Q6J("ngIf",!t.GetDetailsUnDeletedForActiveOptionVisible(3)||!t.GetDetailsUnDeletedForActiveOptionVisible(2)),m.xp6(2),m.Q6J("ngIf",t.getCalorie()),m.xp6(3),m.Q6J("ngForOf",t.detailsUnDeletedForActiveOption)("ngForTrackBy",e.trackByNutritionDayItemDetailModel),m.xp6(3),m.Q6J("ngIf",e.isEditableGlobalMode&&!e.isHasOneMeal(t)&&t!==e.lastAddedNutritionDayItem),m.xp6(2),m.s9C("placeholder",m.lcZ(27,18,"::AddMealNote")),m.Q6J("ngModel",t.mealNotes)}}function ii(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",101),m.NdJ("click",function(){return m.CHM(t),m.oxw(4).showNutritionForm()}),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA()}2&t&&(m.xp6(1),m.hij(" ",m.lcZ(2,1,"::AddMeal")," "))}function ei(t,i){if(1&t&&(m.TgZ(0,"span",50),m._UZ(1,"app-nutrition-totals",102),m.qZA()),2&t){const t=m.oxw(4);m.xp6(1),m.Q6J("defaultCalories",t.nutritionDayModel.getCalorie()||0)("proteins",t.nutritionDayModel.getNutritionTotals().proteins)("carbs",t.nutritionDayModel.getNutritionTotals().carbs)("fats",t.nutritionDayModel.getNutritionTotals().fats)}}function ni(t,i){if(1&t&&(m.TgZ(0,"div",98),m.TgZ(1,"div",99),m.YNc(2,ii,3,3,"button",100),m.YNc(3,ei,2,4,"span",28),m.qZA(),m.qZA()),2&t){const t=m.oxw(3);m.xp6(2),m.Q6J("ngIf",t.canAddMoreMeals()&&t.isEditableGlobalMode),m.xp6(1),m.Q6J("ngIf",t.nutritionDayModel.getNutritionTotals())}}function oi(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",103),m.TgZ(1,"div",104),m.TgZ(2,"form",105),m.NdJ("ngSubmit",function(){return m.CHM(t),m.oxw(3).submitForm()}),m.TgZ(3,"div",106),m.TgZ(4,"div",107),m.TgZ(5,"div",108),m.TgZ(6,"div",109),m.TgZ(7,"label",110),m._uU(8),m.ALo(9,"abpLocalization"),m.qZA(),m.TgZ(10,"div",40),m._UZ(11,"input",111),m.TgZ(12,"div",42),m._UZ(13,"input",112),m.ALo(14,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(15,"div",113),m._UZ(16,"i",114),m._UZ(17,"br"),m.TgZ(18,"span",115),m._uU(19),m.ALo(20,"abpLocalization"),m.qZA(),m._UZ(21,"br"),m._UZ(22,"br"),m._UZ(23,"br"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(3);m.xp6(2),m.Q6J("formGroup",t.form),m.xp6(6),m.Oqu(m.lcZ(9,4,"::MealName")),m.xp6(5),m.s9C("value",m.lcZ(14,6,"::Save")),m.xp6(6),m.Oqu(m.lcZ(20,8,"::AddMealTip"))}}function ai(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",103),m.TgZ(1,"h3"),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA(),m.TgZ(4,"app-nutrition-selector",116),m.NdJ("productSelected",function(i){return m.CHM(t),m.oxw(3).productSelected(i,null)}),m.qZA(),m.qZA()}if(2&t){const t=m.oxw(3);m.xp6(2),m.AsE(" ",m.lcZ(3,2,"::AddNutrition")," (",t.lastAddedNutritionDayItem.name,") ")}}function ri(t,i){1&t&&(m.TgZ(0,"div",103),m.TgZ(1,"div",117),m._UZ(2,"i",114),m._UZ(3,"br"),m.TgZ(4,"span",115),m._uU(5),m.ALo(6,"abpLocalization"),m.qZA(),m._UZ(7,"br"),m._UZ(8,"br"),m._UZ(9,"br"),m.qZA(),m.qZA()),2&t&&(m.xp6(5),m.Oqu(m.lcZ(6,1,"::SearchNutrition")))}function si(t,i){if(1&t&&(m.TgZ(0,"div",8),m.TgZ(1,"div",9),m.TgZ(2,"div",10),m.TgZ(3,"div",9),m.TgZ(4,"div",11),m.YNc(5,ti,28,22,"fieldset",12),m.qZA(),m.YNc(6,ni,4,2,"div",13),m.qZA(),m.qZA(),m.YNc(7,oi,24,10,"div",14),m.YNc(8,ai,5,4,"div",14),m.YNc(9,ri,10,3,"div",14),m.qZA(),m.qZA()),2&t){const t=m.oxw(2);m.xp6(5),m.Q6J("ngForOf",t.nutritionDayModel.nutritionDayItemsUnDeleted)("ngForTrackBy",t.trackByNutritionDayItemModel),m.xp6(1),m.Q6J("ngIf",!t.isAddingNewExcercise),m.xp6(1),m.Q6J("ngIf",t.isAddingNewExcercise),m.xp6(1),m.Q6J("ngIf",!t.isAddingNewExcercise&&t.lastAddedNutritionDayItem),m.xp6(1),m.Q6J("ngIf",!t.isAddingNewExcercise&&!t.lastAddedNutritionDayItem)}}function li(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",122),m.NdJ("click",function(){return m.CHM(t),m.oxw(3).save()}),m._UZ(1,"i",45),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA()}2&t&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"AbpUi::Save")," "))}function ci(t,i){if(1&t&&(m.TgZ(0,"div",118),m.TgZ(1,"button",119,120),m._uU(3),m.ALo(4,"abpLocalization"),m.qZA(),m.YNc(5,li,4,3,"button",121),m.qZA()),2&t){const t=m.oxw(2);m.xp6(3),m.hij(" ",m.lcZ(4,2,"AbpUi::Cancel")," "),m.xp6(2),m.Q6J("ngIf",!t.isAddingNewExcercise)}}function di(t,i){if(1&t&&(m.TgZ(0,"div",5),m.YNc(1,si,10,6,"div",6),m.YNc(2,ci,6,4,"div",7),m.qZA()),2&t){const t=m.oxw();m.xp6(1),m.Q6J("ngIf",t.nutritionDayModel),m.xp6(1),m.Q6J("ngIf",t.isCanSave&&t.isEditableGlobalMode&&!t.isAddingNewExcercise)}}let ui=(()=>{class t{constructor(t,i,e,n,o,a,r,s,l,c,d,u,p){this.list=t,this.track=i,this.service=e,this.localization=n,this._attachmentService=o,this.langService=a,this.nutritionManageService=r,this.mobileHelperService=s,this.confirmation=l,this.dateService=c,this.environment=d,this.analyticsService=u,this.fb=p,this.dataChanged=new m.vpe,this.trackByNutritionDayItemModel=(t,i)=>null==i?void 0:i.id,this.trackByNutritionDayItemDetailModel=(t,i)=>null==i?void 0:i.id,this.trackByNutrition=(t,i)=>null==i?void 0:i.id,this.isModalBusy=!1,this.isModalOpen=!1,this.apiUrl="",this.isMobile=!1,this.isEditableGlobalMode=!0,this.programConstrains=new v.C,this.suppressUnsavedChangesWarning=!1,this.isAddingNewExcercise=!1,this.isCanSave=!1,this.lastSearchedNutrition="",this.isShowAddingNutrition=!1}ngOnInit(){this.apiUrl=this.environment.getApiUrl()}hideForm(){this.isModalOpen=!1,this.form&&this.form.reset()}showForm(){this.lastAddedNutritionDayItem=void 0,this.form&&this.form.reset(),this.isShowAddingNutrition=!1,this.isModalOpen=!0,this.isMobile&&this.startSearchNutrition({query:""})}create(t,i,e){this.isEditableGlobalMode=!0,this.programConstrains=e,this.isCanSave=!0,this.day=t;let n={};n.dayNumber=t.dayId,n.nutritionProgramId=i,this.nutritionDayModel=new Z(n);for(let o=0;o<e.numberOfMeals;o++)this.nutritionDayModel.addNewDetail(this.localization.instant("::AMeal")+" "+(o+1));this.hideNutritionForm(),this.showForm(),this.nutritionDayModel.onDeleted.subscribe(t=>{0===t?this.showNutritionForm():1===t&&(this.lastAddedNutritionDayItem=this.nutritionDayModel.nutritionDayItemsUnDeleted[0])})}update(t,i,e){this.isEditableGlobalMode=!0,this.programConstrains=e,this.day=t,this.isCanSave=!0,this.nutritionDayModel=new Z(i.convertToDto()),this.hideNutritionForm(),this.showForm(),this.nutritionDayModel.onDeleted.subscribe(t=>{0===t?this.showNutritionForm():1===t&&(this.lastAddedNutritionDayItem=this.nutritionDayModel.nutritionDayItemsUnDeleted[0])}),1===this.nutritionDayModel.nutritionDayItemsUnDeleted.length&&(this.lastAddedNutritionDayItem=this.nutritionDayModel.nutritionDayItemsUnDeleted[0])}isHasOneMeal(t){let i=1===this.nutritionDayModel.nutritionDayItemsUnDeleted.length;return i&&null!=t&&this.addNewNutrition(t),i}display(t,i,e){this.isEditableGlobalMode=!1,this.programConstrains=e,this.day=t,this.isCanSave=!0,this.nutritionDayModel=new Z(i.convertToDto()),this.hideNutritionForm(),this.showForm(),this.nutritionDayModel.onDeleted.subscribe(t=>{0===t&&this.showNutritionForm()})}cancel(){this.form&&this.form.reset(),this.suppressUnsavedChangesWarning=!0,this.isModalBusy=!1}save(){if(this.nutritionDayModel&&!this.nutritionDayModel.isAllSuperSetsValid())return;if(this.isCaloriesError())return;const t=this;let i=this.nutritionDayModel.convertToDto();if(t.analyticsService.log(A.O.do_save_Program_planed_nutrition),this.nutritionDayModel.id){let e={};e.dayNumber=i.dayNumber,e.nutritionProgramId=i.nutritionProgramId,e.nutritionProgramDayItems=i.nutritionProgramDayItems,e.name=i.name,this.service.update(this.nutritionDayModel.id,e).subscribe(i=>{t.nutritionDayModel=new Z(i);let e=new p.h(i.dayNumber,i.name,this.day,t.nutritionDayModel);t.day.clearItems(),t.day.addItem(e),t.hideForm(),t.dataChanged.emit(this.nutritionDayModel)})}else{let e={};e.dayNumber=i.dayNumber,e.nutritionProgramId=i.nutritionProgramId,e.nutritionProgramDayItems=i.nutritionProgramDayItems,e.name=i.name,this.service.create(e).subscribe(i=>{t.nutritionDayModel=new Z(i),t.day.addItem(new p.h(i.id,i.name,this.day,t.nutritionDayModel)),t.hideForm(),t.dataChanged.emit(this.nutritionDayModel)})}}showNutritionForm(){this.buildForm(),this.isAddingNewExcercise=!0}hideNutritionForm(){this.isAddingNewExcercise=!1}canAddMoreMeals(){return!(this.programConstrains.numberOfMeals&&this.programConstrains.numberOfMeals>0)||this.nutritionDayModel.nutritionDayItemsUnDeleted.length<this.programConstrains.numberOfMeals}isCaloriesError(){return!1}buildForm(){this.form=this.fb.group({mealName:[null,[M.kI.required]]})}submitForm(){if(this.form.invalid)return;const t=this.form.get("mealName").value;this.isCanSave=!0,this.hideNutritionForm(),this.nutritionDayModel.addNewDetail(t),this.lastAddedNutritionDayItem=this.nutritionDayModel.nutritionDayItemsUnDeleted[this.nutritionDayModel.nutritionDayItemsUnDeleted.length-1]}startSearchNutrition(t){let i={};i.filter=t.query,i.maxResultCount=50,this.lastSearchedNutrition=t.query||"",this.service.getNutritionLookup(i).subscribe(t=>{this.AllNutritions=t.items,this.isShowAddingNutrition=0==t.items.length})}onSelect(t){}onClear(){}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}createNewNutrition(t,i){this.selctedNutritionDayItemGroup=i,t.create(this.lastSearchedNutrition)}onCreateNewNutrition(t){this.startSearchNutrition({query:t.nutritionName}),setTimeout(()=>{this.selctedNutritionDayItemGroup.nutrition=t},1e3)}drop(t,i,e){let n=[...i.detailsUnDeleted].filter(t=>t.optionId!=e),o=[...i.detailsUnDeletedForActiveOption];(0,g.bA)(o,t.previousIndex,t.currentIndex),i.details=[...o,...n]}up(t,i,e,n){if(e<i.details.length-1){let t=[...i.detailsUnDeleted].filter(t=>t.optionId!=n),o=[...i.detailsUnDeletedForActiveOption];(0,g.bA)(o,e,e+1),i.details=[...o,...t]}}down(t,i,e,n){if(e>0){let t=[...i.detailsUnDeleted].filter(t=>t.optionId!=n),o=[...i.detailsUnDeletedForActiveOption];(0,g.bA)(o,e,e-1),i.details=[...o,...t]}}addNewNutrition(t){t.isAddingNewItem=!t.isAddingNewItem,this.lastAddedNutritionDayItem=t,this.isAddingNewExcercise=!1}productSelected(t,i){null!=i||(i=this.lastAddedNutritionDayItem),i.isAddingNewItem=!1,i&&(i.isAddingNewItem=!1,i.addNewDetail(t))}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(n.XNV),m.Y36(n.vR3),m.Y36(pt.o),m.Y36(n.oQ8),m.Y36(gt.L),m.Y36(N.C),m.Y36(y.iJ),m.Y36(P.k4),m.Y36(o.YP),m.Y36(d.R),m.Y36(n.L$R),m.Y36(A.y),m.Y36(M.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-nutrition-program-modal-day"]],outputs:{dataChanged:"dataChanged"},features:[m._Bn([n.XNV,d.R])],decls:7,vars:4,consts:[["size","xl",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[3,"hideList","onSaved"],["appNutrition",""],[1,"program-popup","small-scrollbar"],["class","mt-2 fade-in-top",4,"ngIf"],["class","col-sm-12 modal-footer mt-0 p-1",4,"ngIf"],[1,"mt-2","fade-in-top"],[1,"row"],[1,"col-8"],[1,"col-12",2,"height","calc(100vh - 180px)","overflow-y","auto","min-height","200px"],["class","hiding-container bg-light-2 round-borders",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","col",4,"ngIf"],["class","col-4",4,"ngIf"],[1,"hiding-container","bg-light-2","round-borders",3,"ngClass"],["class","set-item text-center",4,"ngIf"],[1,"delete-nutrition-day-item"],["class","btn btn-danger delete-nutrition auto-hide",3,"click",4,"ngIf"],[1,"option-container","row"],[1,"btn-group","col-auto"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],[1,"btn","btn-secondary",3,"click"],["class","btn btn-secondary",3,"active","click",4,"ngIf"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"col-auto"],["class","totals",4,"ngIf"],["cdkDropList","",1,"nutritions-con",3,"cdkDropListDropped"],["class","nutrition-row","cdkDrag","",4,"ngFor","ngForOf","ngForTrackBy"],[1,"excercise-footer"],[1,"btn-group","d-inline-block","col-auto"],["class","btn-sm btn btn-outline-success auto-hide",3,"click",4,"ngIf"],[1,"d-inline-block","input-containers","input-group","mb-2","col"],[1,"rounded","w-100","form-control",3,"ngModel","placeholder","ngModelChange"],[1,"set-item","text-center"],["class","btn no-shadow btn-sm text-primary m-0 p-0",3,"click",4,"ngIf"],[1,"btn","no-shadow","btn-sm","text-primary","m-0","p-0",3,"click"],[1,"fa","fa-pen"],[1,"input-group"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["class","btn btn-sm text-success m-0 p-0",3,"click",4,"ngIf"],[1,"btn","btn-sm","text-success","m-0","p-0",3,"click"],[1,"fa","fa-check"],[1,"btn","btn-danger","delete-nutrition","auto-hide",3,"click"],[1,"fa","fa-times"],[1,"btn","btn-success",3,"click"],[1,"fa","fa-plus"],[1,"totals"],[3,"isShowPercent","defaultCalories","proteins","carbs","fats"],["cdkDrag","",1,"nutrition-row"],[1,"col-3","my-auto","d-flex"],["cdkDragHandle","","width","24px","fill","currentColor","viewBox","0 0 24 24",1,"holder"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[2,"display","inline-block","text-align","center"],["class","btn btn-sm",3,"click",4,"ngIf"],[4,"ngIf"],[1,"col","my-auto"],["class","value-containers",4,"ngIf"],["class","d-block input-containers input-group",4,"ngIf"],[1,"col-auto","my-auto"],[1,"col-auto","text-center","text-lg-right","text-sm-center","my-auto"],[1,"action-btns"],["class","btn btn-link",3,"click",4,"ngIf"],["class","btn btn-sm px-1 text-danger",3,"click",4,"ngIf"],[1,"col-6"],[1,"mt-2","text-center"],["class","col-6 mt-1",4,"ngIf"],["class","img-fluid rounded","alt","",3,"src","title",4,"ngIf"],["alt","",1,"img-fluid","rounded",3,"src","title"],[1,"value-containers"],[1,"view-rtl"],[1,"view-ltr"],[1,"d-block","input-containers","input-group"],["for","general-lookup-store-type-general-lookup-id"],[3,"ngClass"],["id","nutritionItem","name","nutritionItem","dataKey","id","class","w-100","forceSelection","true",3,"ngModel","suggestions","type","dropdown","placeholder","field","ngModelChange","onClear","completeMethod","search",4,"ngIf"],["class","btn btn-sm btn-outline-success btn-block",3,"click",4,"ngIf"],["class","form-inline",4,"ngIf"],["id","nutritionItem","name","nutritionItem","dataKey","id","forceSelection","true",1,"w-100",3,"ngModel","suggestions","type","dropdown","placeholder","field","ngModelChange","onClear","completeMethod","search"],[1,"btn","btn-sm","btn-outline-success","btn-block",3,"click"],[1,"form-inline"],[1,"form-group","w-100"],["id","nutritionItem","name","nutritionItem",1,"custom-select","form-control",3,"ngModel","ngModelOptions","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["class","view-rtl",4,"ngIf"],["class","view-ltr",4,"ngIf"],["type","number","min","0","max","1000000",1,"rounded","w-100","form-control",3,"ngModel","placeholder","ngClass","ngModelChange"],[1,"btn","btn-link",3,"click"],[1,"fa","fa-pen","text-primary"],[1,"btn","btn-sm","px-1","text-danger",3,"click"],[1,"d-lg-none","d-inline-block","ml-2"],[1,"col-6","mt-1"],[1,"btn-sm","btn","btn-outline-success","auto-hide",3,"click"],[1,"col"],[1,"nutrition-footer"],["style","position: absolute;right: 0px;","class","mx-3 btn btn-outline-success add-btn",3,"click",4,"ngIf"],[1,"mx-3","btn","btn-outline-success","add-btn",2,"position","absolute","right","0px",3,"click"],[3,"defaultCalories","proteins","carbs","fats"],[1,"col-4"],[1,"text-center","col"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"row","app-bg-gray-light"],[1,"col","mx-auto"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-12"],["for","mealName"],["autofocus","","formControlName","mealName","id","mealName","maxlength","255","minlength","1",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"value"],[1,"col","text-center","mt-5","pt-5"],[1,"fab","fa-nutritionix","text-primary",2,"font-size","48px"],[1,"text-muted"],[3,"productSelected"],[1,"col","text-center","text-center","mt-5","pt-5"],[1,"col-sm-12","modal-footer","mt-0","p-1"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["Class","btn btn-success btn-save",3,"click",4,"ngIf"],["Class","btn btn-success btn-save",3,"click"]],template:function(t,i){1&t&&(m.TgZ(0,"abp-modal",0),m.NdJ("visibleChange",function(t){return i.isModalOpen=t}),m.YNc(1,vt,3,3,"ng-template",null,1,m.W1O),m.YNc(3,di,3,2,"ng-template",null,2,m.W1O),m.qZA(),m.TgZ(5,"app-nutrition",3,4),m.NdJ("onSaved",function(t){return i.onCreateNewNutrition(t)}),m.qZA()),2&t&&(m.Q6J("busy",i.isModalBusy)("visible",i.isModalOpen)("suppressUnsavedChangesWarning",i.suppressUnsavedChangesWarning),m.xp6(5),m.Q6J("hideList",!0))},directives:[o.zS,mt.J,U.O5,U.sg,U.mk,g.Wj,M.Fj,M.JJ,M.On,k.m,ht.r,g.Zt,g.Bh,ft.Qc,M.EJ,M.YN,M.Kr,M.qQ,M.Fd,M.wV,J.a,M._Y,M.JL,n.YzZ,M.sg,r.hL,n.Uqp,M.u,r.J5,M.nD,M.wO,bt.A],pipes:[n.fuE,U.Ov,Zt.H,U.JJ],styles:[".has-error[_ngcontent-%COMP%]{border:1px solid red}.program-popup[_ngcontent-%COMP%]   .badge-inner[_ngcontent-%COMP%]{background-color:#fff;color:#000;font-size:100%}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]{padding:20px 16px;border:1px solid #e5e5e5;border-radius:8px;margin-bottom:0}.program-popup[_ngcontent-%COMP%]   fieldset.selected-fieldset[_ngcontent-%COMP%]{background:#ffc10733!important;border:1px solid #ffc107}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   legend[_ngcontent-%COMP%]{width:auto;border:1px solid #d5d5d5;border-radius:50px;padding:3px 14px;background:#fff;margin-bottom:0;font-size:14px;position:relative;z-index:2}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]{text-align:left;transition:all .4s ease-in-out;transform:translateY(-50px);height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;padding:0;width:24px;height:24px;line-height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .delete-nutrition-day-item[_ngcontent-%COMP%]   button.auto-hide[_ngcontent-%COMP%]{opacity:0;height:0}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]:hover   .delete-nutrition-day-item[_ngcontent-%COMP%]   .auto-hide[_ngcontent-%COMP%]{opacity:1;height:24px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]{padding:10px 0;border-bottom:1px solid #e5e5e5}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]:first-of-type{padding-top:0}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]:last-of-type{margin-bottom:20px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .input-containers[_ngcontent-%COMP%]{align-items:center}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .input-containers[_ngcontent-%COMP%]   .input-group-append[_ngcontent-%COMP%]{vertical-align:middle;display:inline-block;margin-right:6px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#fff}@media screen and (min-width:991px){.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50%;padding:0!important;width:25px;height:25px;line-height:25px}}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .nutritions-con[_ngcontent-%COMP%]   .nutrition-row[_ngcontent-%COMP%]   .action-btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(:last-child){margin-left:10px}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .excercise-footer[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:center}.program-popup[_ngcontent-%COMP%]   fieldset[_ngcontent-%COMP%]   .excercise-footer[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:10px}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]{display:flex;flex-flow:column nowrap;align-items:center}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   .totals[_ngcontent-%COMP%]{margin-top:15px}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{transform:translateY(18px)}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:50px;background:#fff;position:relative;z-index:1}.program-popup[_ngcontent-%COMP%]   .nutrition-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#00824e}.img-fluid[_ngcontent-%COMP%]{max-width:58px}.alert[_ngcontent-%COMP%]{padding:3px}.alert.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da}[_nghost-%COMP%]     .modal{display:block!important}[_nghost-%COMP%]     .modal-header{padding:0 16px}[_nghost-%COMP%]     .modal-dialog{overflow-y:visible!important;overflow-y:initial!important}[_nghost-%COMP%]     .modal-body{height:80vh;overflow-y:auto;padding:0 14px 6px}.badge.badge-inner[_ngcontent-%COMP%]{display:block;margin:3px}.option-container[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:-26px;margin-bottom:15px}.cdk-drag-preview[_ngcontent-%COMP%]{z-index:10000!important;transform:rotate3d(10,10,10,-2deg);box-shadow:10px 10px 10px rgba(0,0,0,.1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t})();var pi=e(98462);function gi(t,i){if(1&t&&(m.TgZ(0,"h1",6),m._uU(1),m.qZA()),2&t){const t=m.oxw(2);m.xp6(1),m.hij(" ",t.nutritionDayModel.totalDayCaloriesMin," ")}}const mi=function(t,i,e){return{"text-primary":t,"text-warning":i,"text-danger":e}};function hi(t,i){if(1&t&&(m.TgZ(0,"h3",7),m._uU(1),m.qZA()),2&t){const t=m.oxw(2);m.Q6J("ngClass",m.kEZ(3,mi,!t.isShowAlert(1.05),t.isShowAlert(1.05)&&!t.isShowAlert(1.1),t.isShowAlert(1.1))),m.xp6(1),m.AsE(" ",t.nutritionDayModel.totalDayCaloriesMin," ~ ",t.nutritionDayModel.totalDayCaloriesMax," ")}}function fi(t,i){if(1&t&&(m.TgZ(0,"div",1),m.TgZ(1,"h5",2),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA(),m.YNc(4,gi,2,1,"h1",3),m.YNc(5,hi,2,7,"h3",4),m.TgZ(6,"div",5),m._uU(7),m.ALo(8,"abpLocalization"),m.qZA(),m.qZA()),2&t){const t=m.oxw();m.xp6(2),m.hij(" ",m.lcZ(3,4,"::NutritionValue")," "),m.xp6(2),m.Q6J("ngIf",t.nutritionDayModel.totalDayCaloriesMin===t.nutritionDayModel.totalDayCaloriesMax),m.xp6(1),m.Q6J("ngIf",t.nutritionDayModel.totalDayCaloriesMin!==t.nutritionDayModel.totalDayCaloriesMax),m.xp6(2),m.hij(" ",m.lcZ(8,6,"::CalorieItem")," ")}}let bi=(()=>{class t{constructor(t,i,e,n,o,a){this.list=t,this.track=i,this.service=e,this.confirmation=n,this.dateService=o,this.fb=a,this.trackByNutritionDayItemModel=(t,i)=>null==i?void 0:i.id,this.trackByNutritionDayItemDetailModel=(t,i)=>null==i?void 0:i.id,this.isEditable=!0,this.isSummary=!0}ngOnInit(){}isShowAlert(t){return!!this.nutritionDayModel&&this.nutritionDayModel.totalDayCaloriesMax>this.nutritionDayModel.totalDayCaloriesMin*t}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(n.XNV),m.Y36(n.vR3),m.Y36(y.oo),m.Y36(o.YP),m.Y36(d.R),m.Y36(M.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-nutrition-program-day"]],inputs:{isEditable:"isEditable",nutritionDayModel:"nutritionDayModel",isSummary:"isSummary"},features:[m._Bn([n.XNV,d.R])],decls:1,vars:1,consts:[["class","text-center",4,"ngIf"],[1,"text-center"],[1,"m-0"],["class","text-primary m-0",4,"ngIf"],["class","m-0",3,"ngClass",4,"ngIf"],[1,"text-muted","mb-3"],[1,"text-primary","m-0"],[1,"m-0",3,"ngClass"]],template:function(t,i){1&t&&m.YNc(0,fi,9,8,"div",0),2&t&&m.Q6J("ngIf",i.nutritionDayModel)},directives:[U.O5,U.mk],pipes:[n.fuE],encapsulation:2}),t})();const Zi=["modal"],vi=["board"],Ai=["multiplay"];function xi(t,i){}function yi(t,i){if(1&t&&m._UZ(0,"app-nutrition-program-day",10),2&t){const t=i.extraData,e=m.oxw();m.Q6J("nutritionDayModel",t)("isSummary",e.isSummary)("isEditable",null==e.selected?null:e.selected.editable)}}function Ci(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",19),m.NdJ("click",function(){m.CHM(t);const i=m.oxw(2);return m.MAs(9).update(i.selected)}),m._UZ(1,"i",20),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA()}2&t&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"::EditNutritionProgram")," "))}function Ni(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",11),m.TgZ(1,"div",12),m.TgZ(2,"h3"),m._uU(3),m.qZA(),m.qZA(),m.TgZ(4,"div",13),m.TgZ(5,"div",14),m.TgZ(6,"div",15),m.TgZ(7,"button",16),m.NdJ("click",function(){m.CHM(t);const i=m.oxw();return i.duplicate(i.selected)}),m._UZ(8,"i",17),m._uU(9),m.ALo(10,"abpLocalization"),m.qZA(),m.YNc(11,Ci,4,3,"button",18),m.qZA(),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(3),m.Oqu(t.langService.isRtl?null==t.selected||null==t.selected.nutritionProgram?null:t.selected.nutritionProgram.nutriitionProgramName:null==t.selected||null==t.selected.nutritionProgram?null:t.selected.nutritionProgram.nutriitionProgramNameEn),m.xp6(6),m.hij(" ",m.lcZ(10,3,"::Duplicate")," "),m.xp6(2),m.Q6J("ngIf",null==t.selected?null:t.selected.editable)}}let Mi=(()=>{class t{constructor(t,i,e,n,o,a,r,s,l,c,d,u,p,g){this.list=t,this.track=i,this.programService=e,this.dayService=n,this.navLoadingService=o,this.confirmation=a,this.dateService=r,this.route=s,this.permissionService=l,this.langService=c,this.router=d,this.toaster=u,this.analyticsService=p,this.fb=g,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.programConstrains=new v.C,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1}ngOnInit(){this.loadProgram(),this.analyticsService.log(A.O.View_Program_planed_nutrition)}loadProgram(){let t=this.route.snapshot.params.id;isNaN(t)?this.router.navigate(["/nutrition-programs"]):(this.programId=Number(t),this.reloadDays(!0))}reloadDays(t){const i=this;this.programService.getWithNavigationProperties(i.programId).subscribe(e=>{i.selected=e,i.programConstrains.numberOfMeals=i.selected.nutritionProgram.numberOfMeals,i.programConstrains.caloriesFrom=i.selected.nutritionProgram.caloriesFrom,i.programConstrains.caloriesTo=i.selected.nutritionProgram.caloriesTo;let n={};n.nutritionProgramId=e.nutritionProgram.id,n.maxResultCount=1e3,i.dayService.getList(n).subscribe(e=>{i.selectedDays=e,i.updateTotals(),t&&i.initialProgram()})})}updateTotals(){}initialProgram(){var t,i;const e=this.selectedDays.items.reduce((t,i)=>i.nutritionProgramDay.dayNumber>t.nutritionProgramDay.dayNumber?i:t,this.selectedDays.items[0]);let n=Math.ceil(+this.selected.nutritionProgram.daysCount/7);n<1&&(n=1),e&&(null===(t=e.nutritionProgramDay)||void 0===t?void 0:t.dayNumber)>7&&(n=Math.ceil(+(null===(i=e.nutritionProgramDay)||void 0===i?void 0:i.dayNumber)/7));let o=u.w.TwoWeeks;2==n?o=u.w.TwoWeeks:3==n?o=u.w.ThreeWeeks:n>=4&&(o=u.w.FourWeeks),this.board.setup(n,o,!0,void 0,"planed-nut","0")}dataChanged(t){setTimeout(()=>{window.location.reload()},1e3)}dayDataChanged(t){this.reloadDays(!1)}weekCreated(t){t.days.forEach((t,i)=>{t.InitiateItems();let e=this.selectedDays.items.filter(i=>i.nutritionProgramDay.dayNumber==t.dayId);if(e.length>0){const i=e[0].nutritionProgramDay;t.addItem(new p.h(i.id,i.name,t,new Z(i)))}})}weekDeleted(t){}itemDeleted(t){console.log("itemDeleted"),this.dayService.delete(t.itemId).subscribe(i=>{this.selectedDays.items=this.selectedDays.items.filter(i=>i.nutritionProgramDay.id!=t.itemId),this.updateTotals()})}itemViewed(t){this.modal.display(t.day,t.extraData,this.programConstrains)}itemEdited(t){this.modal.update(t.day,t.extraData,this.programConstrains)}itemCreated(t){this.modal.create(t,this.selected.nutritionProgram.id,this.programConstrains)}itemCopiedMoved(t){let i=[];console.log(t.data),t.data.forEach(t=>{let e;e={},e.newDayNumber=t.day.dayId,e.oldDayId=t.item.extraData.id,e.oldDayDate=this.dateService.removeUtcDate(t.item.day.startDate).toISOString(),i.push(e)});let e={};e.copy=t.isCopy,e.programId=this.selected.nutritionProgram.id,e.moveData=i,this.pastData=t.data,this.pastDataInput=e,this.isShowPastModal=!0,e.copy&&1===this.pastDataInput.moveData.length?this.multiplay.show(1):(this.pastDataInput.adjustValues=0,this.pastConfimed())}onMultiplyConfirm(t){let i=t-1;i=i<0?0:i,this.pastDataInput.multiplyFactor=i,this.pastConfimed()}pastConfimed(){const t=this,i=this.pastDataInput;i.programId=t.selected.nutritionProgram.id,t.programService.moveItemByInput(i).subscribe(i=>{this.pastData.forEach(i=>{t.selectedDays.items=t.selectedDays.items.filter(t=>t.nutritionProgramDay.id!=i.item.itemId),t.board.deattachItem(i.item)}),i.items.forEach(i=>{t.selectedDays.items=t.selectedDays.items.filter(t=>t.nutritionProgramDay.id!=i.nutritionProgramDay.id),t.selectedDays.items.push(i);let e=new p.h(i.nutritionProgramDay.id,i.nutritionProgramDay.name,void 0,new Z(i.nutritionProgramDay));t.board.attachItem(e,i.nutritionProgramDay.dayNumber)}),t.updateTotals(),t.toaster.success("::Pasted","::ItemsPasteSuccessfully"),t.analyticsService.log(A.O.do_past_Program_planed_nutrition)})}get isCurrentUserAdmin(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}duplicate(t){this.navLoadingService.setLoader(!0),this.programService.duplicate(t.nutritionProgram.id).subscribe(t=>{this.navLoadingService.setLoader(!1),window.location.href="/nutrition-programs/"+t.id})}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(n.XNV),m.Y36(n.vR3),m.Y36(x.l),m.Y36(y.oo),m.Y36(C.a),m.Y36(o.YP),m.Y36(d.R),m.Y36(c.gz),m.Y36(n.$AH),m.Y36(N.C),m.Y36(c.F0),m.Y36(o.MJ),m.Y36(A.y),m.Y36(M.qu))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-nutrition-program-manage"]],viewQuery:function(t,i){if(1&t&&(m.Gf(Zi,5),m.Gf(vi,5),m.Gf(Ai,5)),2&t){let t;m.iGM(t=m.CRH())&&(i.modal=t.first),m.iGM(t=m.CRH())&&(i.board=t.first),m.iGM(t=m.CRH())&&(i.multiplay=t.first)}},features:[m._Bn([n.XNV,d.R])],decls:16,vars:9,consts:[[3,"IsEditable","isDayFullHight","itemViewed","weekCreated","weekDeleted","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["itemContent",""],["navContent",""],[3,"dataChanged"],["info",""],["modal",""],[3,"step","modalTitle","modalLabel","onConfirm"],["multiplay",""],[3,"nutritionDayModel","isSummary","isEditable"],[1,"row"],[1,"col","pt-2"],[1,"col-auto"],[1,"d-flex"],[1,"text-lg-right","pt-2","btn-group"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-copy","mr-1"],["class","btn btn-success btn-sm","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-pen","mr-1"]],template:function(t,i){1&t&&(m.TgZ(0,"app-board-container",0,1),m.NdJ("itemViewed",function(t){return i.itemViewed(t)})("weekCreated",function(t){return i.weekCreated(t)})("weekDeleted",function(t){return i.weekDeleted(t)})("itemDeleted",function(t){return i.itemDeleted(t)})("itemCreated",function(t){return i.itemCreated(t)})("itemCopiedMoved",function(t){return i.itemCopiedMoved(t)})("itemEdited",function(t){return i.itemEdited(t)}),m.YNc(2,xi,0,0,"ng-template",null,2,m.W1O),m.YNc(4,yi,1,3,"ng-template",null,3,m.W1O),m.YNc(6,Ni,12,5,"ng-template",null,4,m.W1O),m.qZA(),m.TgZ(8,"app-nutrition-program-info",5,6),m.NdJ("dataChanged",function(t){return i.dataChanged(t)}),m.qZA(),m.TgZ(10,"app-nutrition-program-modal-day",5,7),m.NdJ("dataChanged",function(t){return i.dayDataChanged(t)}),m.qZA(),m.TgZ(12,"past-adjust",8,9),m.NdJ("onConfirm",function(t){return i.onMultiplyConfirm(t)}),m.ALo(14,"abpLocalization"),m.ALo(15,"abpLocalization"),m.qZA()),2&t&&(m.Q6J("IsEditable",null==i.selected?null:i.selected.editable)("isDayFullHight",!1),m.xp6(12),m.s9C("modalTitle",m.lcZ(14,5,"::MultiplyValues")),m.s9C("modalLabel",m.lcZ(15,7,"::Multiply")),m.Q6J("step",1))},directives:[w.U,ct,ui,pi.m,bi,U.O5],pipes:[n.fuE],encapsulation:2}),t})();var wi=e(64569),Ti=e(8183),Ii=e(17647),Di=e(55e3);function qi(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"button",42),m.NdJ("click",function(){return m.CHM(t),m.oxw(),m.MAs(80).create()}),m._UZ(1,"i",43),m._uU(2),m.ALo(3,"abpLocalization"),m.qZA()}2&t&&(m.xp6(2),m.hij(" ",m.lcZ(3,1,"::NewNutritionProgram")," "))}const Oi=function(){return{standalone:!0}};function _i(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",19),m.TgZ(1,"div",20),m.TgZ(2,"label",44),m._uU(3),m.ALo(4,"abpLocalization"),m.qZA(),m.TgZ(5,"p-autoComplete",45),m.NdJ("ngModelChange",function(i){return m.CHM(t),m.oxw().filters.coachAppUserId=i})("onClear",function(){return m.CHM(t),m.oxw().onClear()})("completeMethod",function(i){return m.CHM(t),m.oxw().startSearchUser(i)})("search",function(i){return m.CHM(t),m.oxw().startSearchUser(i)}),m.ALo(6,"abpLocalization"),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=m.oxw();m.xp6(3),m.hij(" ",m.lcZ(4,7,"::CoachName")," "),m.xp6(2),m.s9C("placeholder",m.lcZ(6,9,"::CoachName")),m.Q6J("ngModel",t.filters.coachAppUserId)("ngModelOptions",m.DdM(11,Oi))("suggestions",t.AllUsers)("type",t.searchType())("dropdown",!0)}}function Li(t,i){if(1&t&&(m.TgZ(0,"span",48),m._uU(1),m.qZA()),2&t){const t=i.$implicit;m.xp6(1),m.hij(" ",t," ")}}function Pi(t,i){if(1&t&&(m.TgZ(0,"span",46),m.TgZ(1,"h4"),m._uU(2),m.qZA(),m.YNc(3,Li,2,1,"span",47),m.qZA()),2&t){const t=i.row,e=m.oxw();m.xp6(2),m.Oqu(e.langService.isRtl?t.nutritionProgram.nutriitionProgramName:t.nutritionProgram.nutriitionProgramNameEn),m.xp6(1),m.Q6J("ngForOf",e.getTags(t.nutritionProgram.tags))}}function Ui(t,i){if(1&t&&(m.TgZ(0,"div",49),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA(),m.TgZ(3,"span",46),m._UZ(4,"is-empty",50),m.qZA()),2&t){const t=i.row,e=m.oxw();m.xp6(1),m.Oqu(m.lcZ(2,2,"::Description")),m.xp6(3),m.Q6J("value",e.langService.isRtl?t.nutritionProgram.description:t.nutritionProgram.descriptionEn)}}function ki(t,i){if(1&t&&(m.TgZ(0,"div",49),m._uU(1),m.ALo(2,"abpLocalization"),m.qZA(),m.TgZ(3,"span",46),m.TgZ(4,"is-empty",50),m._uU(5),m.ALo(6,"abpLocalization"),m.qZA(),m.qZA()),2&t){const t=i.row;m.xp6(1),m.Oqu(m.lcZ(2,3,"::DaysCount")),m.xp6(3),m.Q6J("value",t.nutritionProgram.daysCount),m.xp6(1),m.hij(" ",m.lcZ(6,5,"::ADay")," ")}}function Ji(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",56),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().row;return m.oxw(),m.MAs(80).update(i)}),m._UZ(1,"i",57),m.TgZ(2,"div"),m._uU(3),m.ALo(4,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.xp6(3),m.hij(" ",m.lcZ(4,1,"AbpUi::Edit")," "))}function Fi(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",54),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().row;return m.oxw().activate(i)}),m.ALo(1,"abpLocalization"),m._UZ(2,"i",58),m.TgZ(3,"div"),m._uU(4),m.ALo(5,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.Q6J("ngbTooltip",m.lcZ(1,2,"::Activate")),m.xp6(4),m.hij(" ",m.lcZ(5,4,"::StatusGeneralLookup")," "))}function Si(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",54),m.NdJ("click",function(){m.CHM(t);const i=m.oxw().row;return m.oxw().deactivate(i)}),m.ALo(1,"abpLocalization"),m._UZ(2,"i",59),m.TgZ(3,"div"),m._uU(4),m.ALo(5,"abpLocalization"),m.qZA(),m.qZA()}2&t&&(m.Q6J("ngbTooltip",m.lcZ(1,2,"::Deactivate")),m.xp6(4),m.hij(" ",m.lcZ(5,4,"::StatusGeneralLookup")," "))}function Ei(t,i){if(1&t){const t=m.EpF();m.TgZ(0,"div",51),m.YNc(1,Ji,5,3,"div",52),m.YNc(2,Fi,6,6,"div",53),m.YNc(3,Si,6,6,"div",53),m.TgZ(4,"div",54),m.NdJ("click",function(){const i=m.CHM(t).row;return m.oxw().view(i)}),m.ALo(5,"abpLocalization"),m._UZ(6,"i",55),m.TgZ(7,"div"),m._uU(8),m.ALo(9,"abpLocalization"),m.qZA(),m.qZA(),m.qZA()}if(2&t){const t=i.row,e=m.oxw();m.xp6(1),m.Q6J("ngIf",t.editable),m.xp6(1),m.Q6J("ngIf",t.nutritionProgram.statusGeneralLookupId==e.ItemStatus.Deactivated),m.xp6(1),m.Q6J("ngIf",t.nutritionProgram.statusGeneralLookupId==e.ItemStatus.Activated),m.xp6(1),m.Q6J("ngbTooltip",m.lcZ(5,5,"::View")),m.xp6(4),m.hij(" ",m.lcZ(9,7,"::View")," ")}}const Yi=function(t){return{emptyMessage:t}},Qi=[{path:":id",component:Mi,canActivate:[n.a1M,n.nG9]},{path:"",component:(()=>{class t{constructor(t,i,e,n,o,a,r,s,l){this.list=t,this.track=i,this.service=e,this.confirmation=n,this.dateService=o,this.toast=a,this.langService=r,this.permissionService=s,this.router=l,this.data={items:[],totalCount:0},this.ItemStatus=Ti.M,this.filters={publicLibraryFilter:wi.wx.All},this.PublicLibraryFilter=wi.wx,this.isFiltersHidden=!0,this.isShowActive=!0,this.isLoading=!0}get showFilter(){return this._showFilter}set showFilter(t){this._showFilter=t,this.isFiltersHidden=!t}ngOnInit(){this.getData=t=>{let i,e=Object.assign({},this.filters);return this.isShowActive&&(e.statusGeneralLookupId=15),i=e.coachAppUserId,e.coachAppUserId=i&&i.id?i.id:void 0,this.service.getList(Object.assign(Object.assign({},t),e)).pipe((0,q.x)(()=>this.isLoading=!1))},this.setData=t=>this.data=t,this.list.hookToQuery(this.getData).subscribe(this.setData)}clearFilters(){this.filters={},this.filters.publicLibraryFilter=wi.wx.All,this.list.get()}activate(t){if(!t.editable)return void this.toast.error("::NutritionProgramBelongsToAnotherCoach");const i=this;this.confirmation.warn("::ActivatNutritionProgramConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,I.h)(t=>t===o.Tv.Status.confirm),(0,D.w)(()=>(this.service.enableExerciseProgramById(t.nutritionProgram.id).subscribe(t=>{this.toast.success("::ActivatedSuccessfully");let e={};e.skipCount=10*this.list.page,i.getData(e).subscribe(t=>{0==t.items.length?i.list.get():i.setData(t)})}),null))).subscribe(()=>{})}deactivate(t){if(!t.editable)return void this.toast.error("::NutritionProgramBelongsToAnotherCoach");const i=this;this.confirmation.warn("::DeactivateNutritionProgramConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,I.h)(t=>t===o.Tv.Status.confirm),(0,D.w)(()=>(this.service.disableExerciseProgramById(t.nutritionProgram.id).subscribe(t=>{this.toast.success("::DeactivatedSuccessfully");let e={};e.skipCount=10*this.list.page,i.getData(e).subscribe(t=>{0==t.items.length?i.list.get():i.setData(t)})}),null))).subscribe(()=>{})}dataChanged(t){const i=this;let e={};e.skipCount=10*this.list.page,i.getData(e).subscribe(t=>{0==t.items.length?i.list.get():i.setData(t)}),t&&!t.isUpdating&&this.router.navigate(["nutrition-programs",t.nutrition.id])}view(t){this.router.navigate(["nutrition-programs",t.nutritionProgram.id])}getTags(t){return(t||"").split(",").filter(t=>t&&t.trim().length>0)}get isCurrentUserAdmin(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}startSearchUser(t){let i={};i.filter=t.query,this.service.getAppUserLookup(i).subscribe(t=>{this.AllUsers=t.items})}onSelect(t){}onClear(){this.filters.coachAppUserId=void 0}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}}return t.\u0275fac=function(i){return new(i||t)(m.Y36(n.XNV),m.Y36(n.vR3),m.Y36(x.l),m.Y36(o.YP),m.Y36(d.R),m.Y36(o.MJ),m.Y36(N.C),m.Y36(n.$AH),m.Y36(c.F0))},t.\u0275cmp=m.Xpm({type:t,selectors:[["app-nutrition-program"]],features:[m._Bn([n.XNV,d.R])],decls:81,vars:65,consts:[[1,"row","entry-row","align-items-center"],[1,"col-12","col-sm-auto","content-header-container"],[1,"col-lg-auto","pl-lg-0"],[1,"col-lg"],[1,"text-lg-right","pt-2"],[1,"custom-control","custom-switch"],["type","checkbox","id","customSwitch1",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","customSwitch1",1,"custom-control-label"],[1,"col-auto"],[1,"btn-group"],["type","button","routerLink","/nutritions",1,"btn","btn-secondary","btn-lg"],["aria-hidden","true",1,"fa","fa-utensils","mr-1"],["class","btn btn-success btn-new btn-lg","type","button",3,"click",4,"abpPermission"],["id","advanced-content-filters",3,"ngbCollapse"],[1,"card","mb-4"],[1,"card-body"],[3,"keyup.enter"],["filterForm",""],[1,"row"],[1,"col-12","col-md-6"],[1,"form-group"],["for","filterTextFilter"],["id","filterTextFilter","maxlength","100",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],["class","col-12 col-md-6",4,"ngIf"],[1,"col-12"],[1,"col"],[1,"text-lg-right"],[1,"btn-group","mt-4"],[1,"btn","btn-secondary",3,"click"],["id","customstatusSwitch1","type","checkbox",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","customstatusSwitch1",1,"custom-control-label"],[1,"col-md-12","align-self-end","mb-3"],["type","button",1,"btn","btn-outline-primary","btn-block",3,"click"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["default","",1,"app-dataview",3,"messages","rows","count","list"],["prop","nutritionProgram.nutriitionProgramName",3,"name","width"],["ngx-datatable-cell-template",""],["prop","nutritionProgram.description",3,"name","width"],["prop","nutritionProgram.daysCount",3,"name","width"],[3,"name","maxWidth","width","sortable"],[3,"dataChanged"],["info",""],["type","button",1,"btn","btn-success","btn-new","btn-lg",3,"click"],["aria-hidden","true",1,"fa","fa-plus","mr-1"],[2,"display","block"],["id","coachAppUserId","name","coachAppUserId","dataKey","id","field","displayName","forceSelection","true",1,"",3,"ngModel","ngModelOptions","suggestions","type","dropdown","placeholder","ngModelChange","onClear","completeMethod","search"],[1,"custom-black","custom-600"],["class","badge badge-info m-1",4,"ngFor","ngForOf"],[1,"badge","badge-info","m-1"],[1,"custom-gray","custom-600"],[3,"value"],[1,"action-items"],["class","action-item",3,"click",4,"ngIf"],["class","action-item",3,"ngbTooltip","click",4,"ngIf"],[1,"action-item",3,"ngbTooltip","click"],[1,"fa","fa-eye","custom-green","action-boarder"],[1,"action-item",3,"click"],[1,"fa","fa-pen","custom-green"],[1,"fa","fa-toggle-off","custom-green","action-boarder"],[1,"fa","fa-toggle-on","custom-green","action-boarder","text-success"]],template:function(t,i){1&t&&(m.TgZ(0,"div",0),m.TgZ(1,"div",1),m._UZ(2,"abp-breadcrumb"),m.qZA(),m._UZ(3,"div",2),m.TgZ(4,"div",3),m.TgZ(5,"div",4),m.TgZ(6,"div",5),m.TgZ(7,"input",6),m.NdJ("ngModelChange",function(t){return i.showFilter=t}),m.qZA(),m.TgZ(8,"label",7),m._uU(9),m.ALo(10,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(11,"div",8),m.TgZ(12,"div",4),m.TgZ(13,"div",9),m.TgZ(14,"a",10),m._UZ(15,"i",11),m._uU(16),m.ALo(17,"abpLocalization"),m.qZA(),m.YNc(18,qi,4,3,"button",12),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(19,"div",13),m.TgZ(20,"div",14),m.TgZ(21,"div",15),m.TgZ(22,"form",16,17),m.NdJ("keyup.enter",function(){return i.list.get()}),m.TgZ(24,"div",18),m.TgZ(25,"div",19),m.TgZ(26,"div",20),m.TgZ(27,"label",21),m._uU(28),m.ALo(29,"abpLocalization"),m.qZA(),m.TgZ(30,"input",22),m.NdJ("ngModelChange",function(t){return i.filters.filterText=t}),m.qZA(),m.qZA(),m.qZA(),m.YNc(31,_i,7,12,"div",23),m.TgZ(32,"div",24),m.TgZ(33,"div",18),m.TgZ(34,"div",25),m.TgZ(35,"div",26),m.TgZ(36,"div",27),m.TgZ(37,"div",28),m.NdJ("click",function(){return i.filters.publicLibraryFilter=i.PublicLibraryFilter.All}),m._uU(38),m.ALo(39,"abpLocalization"),m.qZA(),m.TgZ(40,"div",28),m.NdJ("click",function(){return i.filters.publicLibraryFilter=i.PublicLibraryFilter.PublicOnly}),m._uU(41),m.ALo(42,"abpLocalization"),m.qZA(),m.TgZ(43,"div",28),m.NdJ("click",function(){return i.filters.publicLibraryFilter=i.PublicLibraryFilter.PrivateOnly}),m._uU(44),m.ALo(45,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(46,"div",25),m.TgZ(47,"div",26),m.TgZ(48,"div",5),m.TgZ(49,"input",29),m.NdJ("ngModelChange",function(t){return i.isShowActive=t}),m.qZA(),m.TgZ(50,"label",30),m._uU(51),m.ALo(52,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(53,"div",31),m.TgZ(54,"div",18),m._UZ(55,"div",25),m.TgZ(56,"div",8),m.TgZ(57,"button",32),m.NdJ("click",function(){return i.clearFilters()}),m.TgZ(58,"span"),m._uU(59),m.ALo(60,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.TgZ(61,"div",8),m.TgZ(62,"button",33),m.NdJ("click",function(){return i.list.get()}),m.TgZ(63,"span"),m._uU(64),m.ALo(65,"abpLocalization"),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.qZA(),m.TgZ(66,"ngx-datatable",34),m.TgZ(67,"ngx-datatable-column",35),m.ALo(68,"abpLocalization"),m.YNc(69,Pi,4,2,"ng-template",36),m.qZA(),m.TgZ(70,"ngx-datatable-column",37),m.ALo(71,"abpLocalization"),m.YNc(72,Ui,5,4,"ng-template",36),m.qZA(),m.TgZ(73,"ngx-datatable-column",38),m.ALo(74,"abpLocalization"),m.YNc(75,ki,7,7,"ng-template",36),m.qZA(),m.TgZ(76,"ngx-datatable-column",39),m.ALo(77,"abpLocalization"),m.YNc(78,Ei,10,9,"ng-template",36),m.qZA(),m.qZA(),m.TgZ(79,"app-nutrition-program-info",40,41),m.NdJ("dataChanged",function(t){return i.dataChanged(t)}),m.qZA()),2&t&&(m.xp6(7),m.Q6J("ngModel",i.showFilter),m.xp6(2),m.Oqu(m.lcZ(10,36,"::SeeAdvancedFilters")),m.xp6(7),m.hij(" ",m.lcZ(17,38,"::Menu:Nutritions")," "),m.xp6(2),m.Q6J("abpPermission","Physic.NutritionPrograms.Create"),m.xp6(1),m.Q6J("ngbCollapse",i.isFiltersHidden),m.xp6(9),m.hij(" ",m.lcZ(29,40,"::SearchFor")," "),m.xp6(2),m.Q6J("ngModel",i.filters.filterText)("ngModelOptions",m.DdM(62,Oi)),m.xp6(1),m.Q6J("ngIf",i.isCurrentUserAdmin),m.xp6(6),m.ekj("active",i.filters.publicLibraryFilter===i.PublicLibraryFilter.All),m.xp6(1),m.hij(" ",m.lcZ(39,42,"::All")," "),m.xp6(2),m.ekj("active",i.filters.publicLibraryFilter===i.PublicLibraryFilter.PublicOnly),m.xp6(1),m.hij(" ",m.lcZ(42,44,"::PublicOnly")," "),m.xp6(2),m.ekj("active",i.filters.publicLibraryFilter===i.PublicLibraryFilter.PrivateOnly),m.xp6(1),m.hij(" ",m.lcZ(45,46,"::PrivateOnly")," "),m.xp6(5),m.Q6J("ngModel",i.isShowActive),m.xp6(2),m.Oqu(m.lcZ(52,48,"::ViewActiveOnly")),m.xp6(8),m.Oqu(m.lcZ(60,50,"::Clear")),m.xp6(5),m.Oqu(m.lcZ(65,52,"::Search")),m.xp6(2),m.Q6J("messages",m.VKq(63,Yi,i.isLoading?"<div class=loader><div></div></div>":"<div class=data-empty></div>"))("rows",i.data.items)("count",i.data.totalCount)("list",i.list),m.xp6(1),m.s9C("name",m.lcZ(68,54,"::NutriitionProgramName")),m.Q6J("width",200),m.xp6(3),m.s9C("name",m.lcZ(71,56,"::Description")),m.Q6J("width",200),m.xp6(3),m.s9C("name",m.lcZ(74,58,"::DaysCount")),m.Q6J("width",100),m.xp6(3),m.Q6J("name",m.lcZ(77,60,"AbpUi::Actions"))("maxWidth",350)("width",350)("sortable",!1))},directives:[o.LI,M.Wl,M.JJ,M.On,k.m,c.yS,n.l97,a._D,M._Y,M.JL,M.F,M.Fj,M.nD,U.O5,Ii.nE,o.x7,o.j3,Ii.UC,Ii.vq,ct,ft.Qc,U.sg,Di.K,a._L],pipes:[n.fuE],encapsulation:2}),t})(),canActivate:[n.a1M,n.nG9]}];let zi=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[c.Bz.forChild(Qi)],c.Bz]}),t})();var Vi=e(56137),Hi=e(56874),ji=e(64479);let $i=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=m.oAB({type:t}),t.\u0275inj=m.cJS({imports:[[zi,n.IR2,o.e2,l.Ck,s.vv,r.h2,a.lQ,a.M,Vi.m,a.XC,Hi.e,F.vO,ji.NutritionProgramDayModule]]}),t})()}}]);