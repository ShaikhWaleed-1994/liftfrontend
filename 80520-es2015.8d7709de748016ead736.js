(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[80520],{20999:function(e,t,o){"use strict";o.d(t,{d:function(){return s}});var i=o(35366),r=o(46700);let s=(()=>{class e{constructor(e){this.restService=e,this.apiName="Default",this.create=e=>this.restService.request({method:"POST",url:"/api/app/stores",body:e},{apiName:this.apiName}),this.delete=e=>this.restService.request({method:"DELETE",url:`/api/app/stores/${e}`},{apiName:this.apiName}),this.disableStoreById=e=>this.restService.request({method:"POST",url:`/api/app/stores/disable-status/${e}`},{apiName:this.apiName}),this.enableStoreById=e=>this.restService.request({method:"POST",url:`/api/app/stores/enable-status/${e}`},{apiName:this.apiName}),this.get=e=>this.restService.request({method:"GET",url:`/api/app/stores/${e}`},{apiName:this.apiName}),this.getCityLookup=e=>this.restService.request({method:"GET",url:"/api/app/stores/city-lookup",params:{filter:e.filter,countryId:e.countryId,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:this.apiName}),this.getCountryLookup=e=>this.restService.request({method:"GET",url:"/api/app/stores/store-country-lookup",params:{filter:e.filter,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:this.apiName}),this.getGeneralLookupLookup=e=>this.restService.request({method:"GET",url:"/api/app/stores/general-lookup-lookup",params:{filter:e.filter,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:this.apiName}),this.getList=e=>this.restService.request({method:"GET",url:"/api/app/stores",params:{filterText:e.filterText,storeName:e.storeName,storeDescription:e.storeDescription,photosAttachmentIdMin:e.photosAttachmentIdMin,photosAttachmentIdMax:e.photosAttachmentIdMax,longitude:e.longitude,latitude:e.latitude,mapLocationUrl:e.mapLocationUrl,cityId:e.cityId,storeTypeGeneralLookupId:e.storeTypeGeneralLookupId,storeCategoryId:e.storeCategoryId,statusGeneralLookupId:e.statusGeneralLookupId,sorting:e.sorting,skipCount:e.skipCount,maxResultCount:e.maxResultCount}},{apiName:this.apiName}),this.getStoreCategoryLookup=(e,t)=>this.restService.request({method:"GET",url:"/api/app/stores/store-category-lookup",params:{filter:e.filter,skipCount:e.skipCount,maxResultCount:e.maxResultCount,storeType:t}},{apiName:this.apiName}),this.getStoreKinds=()=>this.restService.request({method:"GET",url:"/api/app/stores/store-kinds"},{apiName:this.apiName}),this.getStoreQrById=e=>this.restService.request({method:"GET",url:"/api/app/stores/store-qr",params:{id:e}},{apiName:this.apiName}),this.getWithNavigationProperties=e=>this.restService.request({method:"GET",url:`/api/app/stores/with-navigation-properties/${e}`},{apiName:this.apiName}),this.update=(e,t)=>this.restService.request({method:"PUT",url:`/api/app/stores/${e}`,body:t},{apiName:this.apiName})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.vgb))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},22077:function(e,t,o){"use strict";o.d(t,{b:function(){return c}});var i=o(46700),r=o(35366),s=o(31041),l=o(45908),a=o(23733),n=o(61116);function d(e,t){if(1&e&&(r.TgZ(0,"option",1),r._uU(1),r.qZA()),2&e){const e=t.$implicit,o=r.oxw();r.Q6J("ngValue",e.id),r.xp6(1),r.Oqu(e[o.lookupNameProp])}}let c=(()=>{class e extends i.ksn{constructor(e,t){super(t),this.service=e,this.injector=t,this.lookupNameProp="displayName",this.disabled=!1,this.datas=[],this.pageQuery={maxResultCount:1e3,skipCount:0}}get country(){return this._country}set country(e){this._country!=e&&setTimeout(()=>{this.isFirst?this.isFirst=!1:this.value=void 0},500),this._country=e,this.get()}ngOnInit(){this.get(),this.isFirst=!0}getLookupRequestDto(e){let t={};return e&&(t.filter=e),t.maxResultCount=1e3,t}get(){let e=this.getLookupRequestDto(this.pageQuery.filter);e.countryId=this._country,this.service.getCityLookup(e).subscribe(({items:e})=>{this.datas=e})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(l.o),r.Y36(r.zs3))},e.\u0275cmp=r.Xpm({type:e,selectors:[["abp-city-lookup-select"]],inputs:{lookupNameProp:"lookupNameProp",disabled:"disabled",country:"country"},features:[r._Bn([{provide:s.JU,useExisting:(0,r.Gpc)(()=>e),multi:!0}]),r.qOj],decls:3,vars:3,consts:[[1,"custom-select","form-control",3,"ngModel","disabled","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(r.TgZ(0,"select",0),r.NdJ("ngModelChange",function(e){return t.value=e}),r._UZ(1,"option",1),r.YNc(2,d,2,2,"option",2),r.qZA()),2&e&&(r.Q6J("ngModel",t.value)("disabled",t.disabled),r.xp6(2),r.Q6J("ngForOf",t.datas))},directives:[s.EJ,a.m,s.JJ,s.On,s.YN,s.Kr,n.sg],encapsulation:2}),e})()},80520:function(e,t,o){"use strict";o.r(t),o.d(t,{StoreModule:function(){return eo}});var i=o(46700),r=o(55679),s=o(10135),l=o(99046),a=o(83845),n=o(73756),d=o(56410),c=o(2996),u=o(11520),p=o(43835),m=o(44689),g=o(45908),h=function(e){return e[e.None=0]="None",e[e.Promocodes=1]="Promocodes",e[e.Meals=2]="Meals",e[e.Championship=3]="Championship",e[e.Course=4]="Course",e}({});(0,i.Uoq)(h);var f=o(35366),y=o(20999),Z=o(44879),v=o(73545),b=o(31041),L=o(23733),A=o(61116),C=o(17647),I=o(47701),x=o(44019),q=o(30212),k=o(1663),T=o(62880),N=o(3183),U=o(22077),O=o(97116),S=o(1254),_=o(28451),w=o(55794);function J(e,t){if(1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,e.selected?"AbpUi::Edit":"::NewStore")," ")}}function D(e,t){1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::View")," "))}function F(e,t){if(1&e&&(f._uU(0," general "),f.YNc(1,J,3,3,"h3",3),f.YNc(2,D,3,3,"h3",3)),2&e){const e=f.oxw();f.xp6(1),f.Q6J("ngIf",!e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isReadOnly)}}function V(e,t){if(1&e&&(f.TgZ(0,"option",51),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw(2);f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}function P(e,t){1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",68),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"input",69),f.qZA()),2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,2,"::MaxDeliveryPriceCategoryName")," "),f.xp6(2),f.Q6J("readOnly",!0))}function Q(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function R(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",70),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,Q,3,3,"span",71),f.qZA(),f._UZ(5,"input",72),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory1")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory1")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function z(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function Y(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",73),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,z,3,3,"span",71),f.qZA(),f._UZ(5,"input",74),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory2")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory2")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function M(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function E(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",75),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,M,3,3,"span",71),f.qZA(),f._UZ(5,"input",76),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory3")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory3")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function j(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function K(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",77),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,j,3,3,"span",71),f.qZA(),f._UZ(5,"input",78),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory4")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory4")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function G(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function W(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",79),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,G,3,3,"span",71),f.qZA(),f._UZ(5,"input",80),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory5")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory5")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function B(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function H(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",81),f._uU(2),f.ALo(3,"abpLocalization"),f.YNc(4,B,3,3,"span",71),f.qZA(),f._UZ(5,"input",82),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::deliveryPriceCategory6")," "),f.xp6(2),f.Q6J("ngIf",e.isOptional("deliveryPriceCategory6")),f.xp6(1),f.Q6J("readOnly",e.isReadOnly)}}function $(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",85),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",86),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(3).removeItem(t,o.value)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(2),f.hij(" ",e.label," ")}}function X(e,t){1&e&&(f.TgZ(0,"span",87),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::StoreCategory")," "))}function ee(e,t){if(1&e&&(f.YNc(0,$,4,1,"div",83),f.YNc(1,X,3,3,"span",84)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function te(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",88),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"sw-lookup-select",89),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::StatusGeneralLookup")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getItemStatusLookup:e.lookupService.getItemStatusLookupValues)("disabled",e.isReadOnly)}}function oe(e,t){1&e&&(f.TgZ(0,"button",90),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"AbpUi::Save")," "))}function ie(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",4),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().submitForm()}),f.TgZ(1,"div",5),f.TgZ(2,"div",6),f.TgZ(3,"label",7),f._uU(4),f.ALo(5,"abpLocalization"),f.qZA(),f._UZ(6,"input",8),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"label",9),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f._UZ(11,"input",10),f.qZA(),f.TgZ(12,"div",6),f.TgZ(13,"label",11),f._uU(14),f.ALo(15,"abpLocalization"),f.qZA(),f._UZ(16,"input",12),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"label",14),f._uU(19),f.ALo(20,"abpLocalization"),f.qZA(),f._UZ(21,"input",15),f.qZA(),f.TgZ(22,"div",6),f.TgZ(23,"label",16),f._uU(24),f.ALo(25,"abpLocalization"),f.qZA(),f._UZ(26,"input",17),f.qZA(),f.TgZ(27,"div",18),f.TgZ(28,"label",19),f._uU(29),f.ALo(30,"abpLocalization"),f.TgZ(31,"span",20),f._uU(32),f.ALo(33,"abpLocalization"),f.qZA(),f.qZA(),f._UZ(34,"input",21),f.qZA(),f.TgZ(35,"div",6),f.TgZ(36,"label",22),f._uU(37),f.ALo(38,"abpLocalization"),f.qZA(),f._UZ(39,"input",23),f.qZA(),f.TgZ(40,"div",18),f.TgZ(41,"label",24),f._uU(42),f.ALo(43,"abpLocalization"),f.TgZ(44,"span",20),f._uU(45),f.ALo(46,"abpLocalization"),f.qZA(),f.qZA(),f._UZ(47,"input",25),f.qZA(),f.TgZ(48,"div",6),f.TgZ(49,"label",26),f._uU(50),f.ALo(51,"abpLocalization"),f.qZA(),f._UZ(52,"input",27),f.qZA(),f.TgZ(53,"div",18),f.TgZ(54,"label",28),f._uU(55),f.ALo(56,"abpLocalization"),f.qZA(),f._UZ(57,"input",29),f.qZA(),f.TgZ(58,"div",30),f.TgZ(59,"label",31),f._uU(60),f.ALo(61,"abpLocalization"),f.qZA(),f._UZ(62,"input",32),f.qZA(),f.TgZ(63,"div",30),f.TgZ(64,"label",33),f._uU(65),f.ALo(66,"abpLocalization"),f.qZA(),f._UZ(67,"input",34),f.qZA(),f.TgZ(68,"div",30),f.TgZ(69,"label",35),f._uU(70),f.ALo(71,"abpLocalization"),f.qZA(),f._UZ(72,"input",36),f.qZA(),f.TgZ(73,"div",30),f.TgZ(74,"label",37),f._uU(75),f.ALo(76,"abpLocalization"),f.qZA(),f._UZ(77,"input",38),f.qZA(),f.TgZ(78,"div",13),f.TgZ(79,"label",39),f._uU(80),f.ALo(81,"abpLocalization"),f.TgZ(82,"span",20),f._uU(83),f.ALo(84,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(85,"sw-attachment",40),f.NdJ("attachmentUpdated",function(t){return f.CHM(e),f.oxw().attachmentUpdated(t)}),f.qZA(),f.qZA(),f.TgZ(86,"div",6),f.TgZ(87,"label",41),f._uU(88),f.ALo(89,"abpLocalization"),f.qZA(),f._UZ(90,"input",42),f.qZA(),f.TgZ(91,"div",6),f.TgZ(92,"label",43),f._uU(93),f.ALo(94,"abpLocalization"),f.qZA(),f._UZ(95,"ngx-intl-tel-input",44),f.ALo(96,"abpLocalization"),f.qZA(),f.TgZ(97,"div",6),f.TgZ(98,"label",45),f._uU(99),f.ALo(100,"abpLocalization"),f.qZA(),f._UZ(101,"sw-lookup-select",46),f.qZA(),f.TgZ(102,"div",6),f.TgZ(103,"label",47),f._uU(104),f.ALo(105,"abpLocalization"),f.qZA(),f._UZ(106,"abp-city-lookup-select",48),f.qZA(),f.TgZ(107,"div",6),f.TgZ(108,"label",49),f._uU(109),f.ALo(110,"abpLocalization"),f.qZA(),f.TgZ(111,"select",50),f._UZ(112,"option",51),f.YNc(113,V,2,2,"option",52),f.qZA(),f.qZA(),f.TgZ(114,"div",6),f.TgZ(115,"label",53),f._uU(116),f.ALo(117,"abpLocalization"),f.qZA(),f._UZ(118,"sw-lookup-select",54),f.qZA(),f.YNc(119,P,5,4,"div",55),f.YNc(120,R,6,5,"div",55),f.YNc(121,Y,6,5,"div",55),f.YNc(122,E,6,5,"div",55),f.YNc(123,K,6,5,"div",55),f.YNc(124,W,6,5,"div",55),f.YNc(125,H,6,5,"div",55),f.TgZ(126,"div",6),f.TgZ(127,"label",56),f._uU(128),f.ALo(129,"abpLocalization"),f.qZA(),f._UZ(130,"input",57),f.qZA(),f.TgZ(131,"div",6),f.TgZ(132,"label",58),f._uU(133),f.ALo(134,"abpLocalization"),f.qZA(),f._UZ(135,"input",59),f.qZA(),f.TgZ(136,"div",13),f.TgZ(137,"label",60),f._uU(138),f.ALo(139,"abpLocalization"),f.qZA(),f.TgZ(140,"p-multiSelect",61,62),f.YNc(142,ee,2,2,"ng-template",63),f.qZA(),f.qZA(),f.YNc(143,te,5,5,"div",55),f.TgZ(144,"div",64),f.TgZ(145,"button",65,66),f._uU(147),f.ALo(148,"abpLocalization"),f.qZA(),f.YNc(149,oe,3,3,"button",67),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",e.form),f.xp6(4),f.hij(" ",f.lcZ(5,74,"::StoreName")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(10,76,"::AddressAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(15,78,"::AddressEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(20,80,"::mapLocationUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(25,82,"::Rating")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(30,84,"::StoreDescription")," "),f.xp6(3),f.Oqu(f.lcZ(33,86,"::Optional")),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(38,88,"::discount")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(43,90,"::StoreDescriptionEn")," "),f.xp6(3),f.Oqu(f.lcZ(46,92,"::Optional")),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(51,94,"::Promocode")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(56,96,"::MerchantUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(61,98,"::UseTitleAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(66,100,"::UseTitleEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(71,102,"::UseDescriptionAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(76,104,"::UseDescriptionEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(81,106,"::PhotosAttachmentId")," "),f.xp6(3),f.Oqu(f.lcZ(84,108,"::Optional")),f.xp6(2),f.Q6J("maxFilesCount",1)("readonly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(89,110,"::Email")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(94,112,"::Mobile")," "),f.xp6(2),f.Q6J("searchCountryPlaceholder",f.lcZ(96,114,"::SearchCountry"))("inputId","store-store-mobile")("inputReadOnly",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(100,116,"::Country")," "),f.xp6(2),f.Q6J("getFn",e.service.getCountryLookup)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(105,118,"::City")," "),f.xp6(2),f.Q6J("country",e.countryId.value)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(110,120,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("abpDisabled",e.isReadOnly),f.xp6(2),f.Q6J("ngForOf",e.AllStoreKinds),f.xp6(3),f.hij(" ",f.lcZ(117,122,"::DeliveryGeneralLookupId")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getDeliveryTypesLookup:e.lookupService.getDeliveryTypesLookupValues)("disabled",e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(1),f.Q6J("ngIf",e.isShowCoordinates),f.xp6(3),f.hij(" ",f.lcZ(129,124,"::Latitude")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(134,126,"::Longitude")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(139,128,"::StoreCategory")," "),f.xp6(2),f.Q6J("options",e.linksListData)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4),f.xp6(3),f.Q6J("ngIf",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(148,130,"AbpUi::Cancel")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly)}}let re=(()=>{class e{constructor(e,t,o,i,r,s,l,a,n){this.track=e,this.service=t,this._router=o,this.confirmation=i,this.lookupService=r,this.dateService=s,this.langService=l,this.localizationService=a,this.fb=n,this.refresh=new f.vpe,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.ItemStatus=g.Ms,this.isLoading=!0,this.requiredFields=[],this.feilds=[],this.isUpdatingMaxDeliveryPriceCategoryName=!1}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds()}clearFilters(){this.filters={}}get storeKindId(){return this.form.get("storeKindId")}get countryId(){return this.form.get("countryId")}get storeCategoryId(){return this.form.get("storeCategoryId")}get storeCategoryLinks(){return this.form.get("storeCategoryLinks")}buildForm(){var e;const{storeName:t,addressAr:o,addressEn:i,rating:r,storeDescription:s,mobile:l,email:a,photosAttachmentId:n,longitude:d,latitude:c,deliveryPriceCategory1:u,deliveryPriceCategory2:p,deliveryPriceCategory3:m,deliveryPriceCategory4:g,deliveryPriceCategory5:h,deliveryPriceCategory6:f,maxDeliveryPriceCategoryName:y,mapLocationUrl:Z,countryId:v,cityId:L,storeKindId:A,deliveryGeneralLookupId:C,storeCategoryId:x,statusGeneralLookupId:k,storeCategoryLinks:T,discount:N,promoCode:U,merchantUrl:O,useTitleAr:S,useTitleEn:_,useDescriptionAr:w,useDescriptionEn:J,storeDescriptionEn:D}=(null===(e=this.selected)||void 0===e?void 0:e.store)||{};this.form=this.fb.group({storeName:[null!=t?t:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressAr:[null!=o?o:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressEn:[null!=i?i:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],rating:[null!=r?r:null,[b.kI.min(0),b.kI.max(5)]],storeDescription:[null!=s?s:null,[b.kI.required,q.d.InvalidCharacterValidator()]],email:[null!=a?a:null,[b.kI.required,q.d.InvalidCharacterValidator(),q.d.EmailValidator()]],mobile:[null!=l?l:null,[b.kI.required]],photosAttachmentId:[null!=n?n:0,[]],longitude:[null!=d?d:null,[b.kI.required]],latitude:[null!=c?c:null,[b.kI.required]],deliveryPriceCategory1:[null!=u?u:null,[b.kI.min(0)]],deliveryPriceCategory2:[null!=p?p:null,[b.kI.min(0)]],deliveryPriceCategory3:[null!=m?m:null,[b.kI.min(0)]],deliveryPriceCategory4:[null!=g?g:null,[b.kI.min(0)]],deliveryPriceCategory5:[null!=h?h:null,[b.kI.min(0)]],deliveryPriceCategory6:[null!=f?f:null,[b.kI.min(0)]],maxDeliveryPriceCategoryName:[null!=y?y:null,[]],mapLocationUrl:[null!=Z?Z:null,[q.d.UrlValidator()]],countryId:[null!=v?v:null,[b.kI.required]],cityId:[null!=L?L:null,[b.kI.required]],storeKindId:[null!=A?A:null,[b.kI.required]],deliveryGeneralLookupId:[null!=C?C:null,[b.kI.required]],storeCategoryId:[null!=x?x:null,[]],statusGeneralLookupId:[null!=k?k:null,[]],storeCategoryLinks:[null!=T?T:null,[b.kI.required]],photosAttachmentFiles:[void 0],discount:[N||"",[b.kI.required,q.d.InvalidCharacterValidator()]],promoCode:[U||"",[b.kI.required,q.d.InvalidCharacterValidator()]],merchantUrl:[O||"",[b.kI.required]],useTitleAr:[S||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useTitleEn:[_||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useDescriptionAr:[w||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useDescriptionEn:[J||"",[b.kI.required,q.d.InvalidCharacterValidator()]],storeDescriptionEn:[D||"",[b.kI.required,q.d.InvalidCharacterValidator()]]}),A&&this.getCategoies(A),setTimeout(()=>{this.isModalOpen=!0},500),this.updateMaxDeliveryPriceCategoryName(),this.feilds.forEach(e=>{this.form.get(e).valueChanges.subscribe(e=>this.updateMaxDeliveryPriceCategoryName())}),this.form.get("storeKindId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCategoies(e),e!=this.form.get("storeKindId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)}),this.form.get("deliveryGeneralLookupId").valueChanges.subscribe(e=>{this.updateMaxDeliveryPriceCategoryName(),this.form.get("deliveryGeneralLookupId").value==se.WithDelivery&&(this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.updateValueAndValidity())})}isOptional(e){return!this.requiredFields.some(t=>t==e)}updateMaxDeliveryPriceCategoryName(){if(!this.isUpdatingMaxDeliveryPriceCategoryName){if(this.isUpdatingMaxDeliveryPriceCategoryName=!0,this.form.get("deliveryGeneralLookupId").value==se.WithDelivery){let e=!1,t=this.feilds[this.feilds.length-1];if(this.requiredFields=[],this.feilds.forEach(o=>{o==t&&(e=!0),this.form.get(o).value&&this.form.get(o).value>0&&(e=!0);const i=e;i?this.requiredFields.push(o):this.requiredFields=this.requiredFields.filter(e=>e!=o),i?(this.form.get(o).setValidators([b.kI.required,b.kI.min(0)]),this.form.get(o).setValue(this.form.get(o).value),this.form.get(o).updateValueAndValidity()):(this.form.get(o).clearValidators(),this.form.get(o).setValidators([b.kI.min(0)]),this.form.get(o).updateValueAndValidity())}),this.requiredFields.length>0){const e=this.localizationService.instant("::"+this.requiredFields[0]);this.form.get("maxDeliveryPriceCategoryName").setValue(e)}else this.form.get("maxDeliveryPriceCategoryName").setValue(void 0)}else this.requiredFields=[],this.feilds.forEach(e=>{this.form.get(e).setValue(void 0),this.form.get(e).clearValidators(),this.form.get(e).updateValueAndValidity()}),this.form.get("maxDeliveryPriceCategoryName").setValue(void 0);this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{this.isUpdatingMaxDeliveryPriceCategoryName=!1},10)}}get isShowCoordinates(){var e,t,o;return(null!==(o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("deliveryGeneralLookupId"))||void 0===t?void 0:t.value)&&void 0!==o?o:se.WithoutDelivery)==se.WithDelivery}attachmentUpdated(e){this.form.get("photosAttachmentFiles").setValue(e.files.toString())}getCategoies(e){this.service.getStoreCategoryLookup({},e).subscribe(e=>{let t=e.items.map(e=>{let t={};return t.label=e.displayName,t.value=e.id,t});setTimeout(()=>{this.linksListData=t},10)})}hideForm(){this.isModalOpen=!1,this.isReadOnly=!1,this.form.reset()}showForm(e){this.buildForm(),this.isReadOnly=e}removeItem(e,t){return e.preventDefault(),e.stopPropagation(),this.selected.store.storeCategoryLinks=(this.selected.store.storeCategoryLinks||[]).filter(e=>e!==t)||[],!1}submitForm(){if(this.form.invalid)return console.log("invalid",this.form.errors),console.log(this.form.controls.storeName.errors),console.log(this.form.controls.addressAr.errors),console.log(this.form.controls.addressEn.errors),console.log(this.form.controls.rating.errors),console.log(this.form.controls.storeDescription.errors),console.log(this.form.controls.mobile.errors),console.log(this.form.controls.email.errors),console.log(this.form.controls.photosAttachmentId.errors),console.log(this.form.controls.longitude.errors),console.log(this.form.controls.latitude.errors),console.log(this.form.controls.deliveryPriceCategory1.errors),console.log(this.form.controls.deliveryPriceCategory2.errors),console.log(this.form.controls.deliveryPriceCategory3.errors),console.log(this.form.controls.deliveryPriceCategory4.errors),console.log(this.form.controls.deliveryPriceCategory5.errors),console.log(this.form.controls.deliveryPriceCategory6.errors),console.log(this.form.controls.maxDeliveryPriceCategoryName.errors),console.log(this.form.controls.mapLocationUrl.errors),console.log(this.form.controls.countryId.errors),console.log(this.form.controls.cityId.errors),console.log(this.form.controls.storeKindId.errors),console.log(this.form.controls.deliveryGeneralLookupId.errors),console.log(this.form.controls.storeCategoryId.errors),console.log(this.form.controls.statusGeneralLookupId.errors),console.log(this.form.controls.storeCategoryLinks.errors),console.log(this.form.controls.discount.errors),console.log(this.form.controls.promoCode.errors),console.log(this.form.controls.merchantUrl.errors),console.log(this.form.controls.useTitleAr.errors),console.log(this.form.controls.useTitleEn.errors),console.log(this.form.controls.useDescriptionAr.errors),console.log(this.form.controls.useDescriptionEn.errors),console.log(this.form.controls.storeDescriptionEn.errors),!1;this.storeCategoryLinks.value&&this.form.patchValue({storeCategoryLinks:this.storeCategoryLinks.value.map(e=>e.value)}),this.form.get("mobile").setValue(this.form.get("mobile").value.e00Number);const e=this.selected?this.service.update(this.selected.store.id,this.form.value):this.service.create(this.form.value);this.isModalBusy=!0,e.pipe((0,u.x)(()=>this.isModalBusy=!1),(0,x.b)(()=>this.hideForm())).subscribe(()=>this.refresh.emit())}create(){this.selected=void 0,this.showForm(!1)}update(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!1),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}pathcLinks(){this.form.patchValue({storeCategoryLinks:this.linksListData})}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}view(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!0),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}editItems(e){this._router.navigate(["store-menus"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(()=>this.refresh.emit())}loadStoreKinds(){this.service.getStoreKinds().subscribe(e=>{this.AllStoreKinds=e})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store-general"]],inputs:{create:"create",update:"update"},outputs:{refresh:"refresh",view:"view"},features:[f._Bn([i.XNV,c.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-4"],["for","store-store-name"],["id","store-store-name","formControlName","storeName","maxlength","255","minlength","1","autofocus","",1,"form-control",3,"readOnly"],["for","store-store-address-ar"],["id","store-store-address-ar","formControlName","addressAr","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-address-en"],["id","store-store-address-en","formControlName","addressEn","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-12"],["for","store-store-mapLocationUrl"],["id","store-store-mapLocationUrl","formControlName","mapLocationUrl","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-rating"],["id","store-store-rating","formControlName","rating","type","number",1,"form-control",3,"readOnly"],[1,"form-group","col-md-8"],["for","store-store-description"],[1,"optional-input","badge","badge-info"],["id","store-store-description","formControlName","storeDescription",1,"form-control",3,"readOnly"],["for","store-store-discount"],["id","store-store-discount","formControlName","discount",1,"form-control",3,"readOnly"],["for","store-store-description-en"],["id","store-store-description-en","formControlName","storeDescriptionEn",1,"form-control",3,"readOnly"],["for","store-store-promocode"],["id","store-store-promocode","formControlName","promoCode",1,"form-control",3,"readOnly"],["for","store-store-merchantUrl"],["id","store-store-merchantUrl","formControlName","merchantUrl",1,"form-control",3,"readOnly"],[1,"form-group","col-md-6"],["for","store-store-useTitleAr"],["id","store-store-useTitleAr","formControlName","useTitleAr",1,"form-control",3,"readOnly"],["for","store-store-useTitleEn"],["id","store-store-useTitleEn","formControlName","useTitleEn",1,"form-control",3,"readOnly"],["for","store-store-useDescriptionAr"],["id","store-store-useDescriptionAr","formControlName","useDescriptionAr",1,"form-control",3,"readOnly"],["for","store-store-useDescriptionEn"],["id","store-store-useDescriptionEn","formControlName","useDescriptionEn",1,"form-control",3,"readOnly"],["for","store-photos-attachment-id"],["id","store-photos-attachment-id","formControlName","photosAttachmentId","acceptTypes",".png,.jpg,.jpeg","Entity","Store","name","photosAttachmentId",3,"maxFilesCount","readonly","attachmentUpdated"],["for","store-store-email"],["id","store-store-email","formControlName","email","maxlength","70",1,"form-control",3,"readOnly"],["for","store-store-mobile"],["name","mobile","formControlName","mobile",3,"searchCountryPlaceholder","inputId","inputReadOnly"],["for","country-country-id"],["id","country-country-id","formControlName","countryId",3,"getFn","lookupNameProp","disabled"],["for","city-city-id"],["formControlName","cityId",3,"country","lookupNameProp","disabled"],["for","storeKindId"],["name","storeKindId","id","storeKindId","formControlName","storeKindId",1,"custom-select","form-control",3,"abpDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","DeliveryGeneralLookupId"],["id","DeliveryGeneralLookupId","formControlName","deliveryGeneralLookupId",3,"getFn","disabled"],["class","form-group col-md-4",4,"ngIf"],["for","store-store-Latitude"],["id","store-store-Latitude","formControlName","latitude","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-longitude"],["id","store-store-longitude","formControlName","longitude","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-category-store-category-id"],["name","storeCategoryLinks","id","storeCategoryLinks","itemSize","30","formControlName","storeCategoryLinks","optionLabel","label","dataKey","value",1,"sw-tags",3,"options","virtualScroll","disabled","maxSelectedLabels"],["selectedActivity",""],["pTemplate","selectedItems"],[1,"col-sm-12","modal-footer"],["type","button",1,"pull-left","btn-wide","btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit","class","pull-left btn-wide btn btn-success btn-save",4,"ngIf"],["for","store-store-MaxDeliveryPriceCategoryName"],["id","store-store-MaxDeliveryPriceCategoryName","formControlName","maxDeliveryPriceCategoryName",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory1"],["class","optional-input badge badge-info",4,"ngIf"],["id","store-store-DeliveryPriceCategory1","formControlName","deliveryPriceCategory1","type","number","min","0",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory2"],["id","store-store-DeliveryPriceCategory2","formControlName","deliveryPriceCategory2","type","number","min","0",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory3"],["id","store-store-DeliveryPriceCategory3","formControlName","deliveryPriceCategory3","type","number","min","0",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory4"],["id","store-store-DeliveryPriceCategory4","formControlName","deliveryPriceCategory4","type","number","min","0",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory5"],["id","store-store-DeliveryPriceCategory5","formControlName","deliveryPriceCategory5","type","number","min","0",1,"form-control",3,"readOnly"],["for","store-store-DeliveryPriceCategory6"],["id","store-store-DeliveryPriceCategory6","formControlName","deliveryPriceCategory6","type","number","min","0",1,"form-control",3,"readOnly"],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"],["for","general-lookup-status-general-lookup-id"],["id","statusGeneralLookupId","formControlName","statusGeneralLookupId",3,"getFn","disabled"],["type","submit",1,"pull-left","btn-wide","btn","btn-success","btn-save"]],template:function(e,t){1&e&&(f.TgZ(0,"abp-modal",0),f.NdJ("visibleChange",function(e){return t.isModalOpen=e}),f.YNc(1,F,3,2,"ng-template",null,1,f.W1O),f.YNc(3,ie,150,132,"ng-template",null,2,f.W1O),f.qZA()),2&e&&f.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",t.isReadOnly)},directives:[r.zS,A.O5,b._Y,b.JL,i.YzZ,b.sg,l.hL,b.Fj,b.JJ,b.u,l.J5,L.m,b.nD,b.wO,i.Uqp,b.wV,k.Y,T.F,N.X,U.b,b.EJ,O.x3,b.YN,b.Kr,A.sg,S.NU,_.jx,b.qQ,w.a],pipes:[i.fuE],encapsulation:2}),e})();var se=function(e){return e[e.WithoutDelivery=42]="WithoutDelivery",e[e.WithDelivery=43]="WithDelivery",e}({});function le(e,t){if(1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,e.selected?"AbpUi::Edit":"::Course")," ")}}function ae(e,t){1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::View")," "))}function ne(e,t){if(1&e&&(f.YNc(0,le,3,3,"h3",3),f.YNc(1,ae,3,3,"h3",3)),2&e){const e=f.oxw();f.Q6J("ngIf",!e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isReadOnly)}}function de(e,t){1&e&&(f.TgZ(0,"span",25),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function ce(e,t){if(1&e&&(f.TgZ(0,"div",19),f.TgZ(1,"label",51),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"abp-city-lookup-select",52),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,4,"::City")," "),f.xp6(2),f.Q6J("country",e.countryId.value)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly)}}function ue(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",58),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",59),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(4).removeItem(t,o.id)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,o=f.oxw(4);f.xp6(2),f.hij(" ",o.langService.isRtl?e.displayName:e.displayNameEn," ")}}function pe(e,t){1&e&&(f.TgZ(0,"span",60),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::City")," "))}function me(e,t){if(1&e&&(f.YNc(0,ue,4,1,"div",56),f.YNc(1,pe,3,3,"span",57)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function ge(e,t){if(1&e&&(f.TgZ(0,"div",13),f.TgZ(1,"label",53),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f.TgZ(4,"p-multiSelect",54,55),f.YNc(6,me,2,2,"ng-template",45),f.qZA(),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,6,"::City")," "),f.xp6(2),f.s9C("optionLabel",e.langService.getLookupNameProp()),f.Q6J("options",e.citiesList)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4)}}function he(e,t){if(1&e&&(f.TgZ(0,"option",40),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw(2);f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}function fe(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",58),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",59),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(3).removeItem(t,o.value)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(2),f.hij(" ",e.label," ")}}function ye(e,t){1&e&&(f.TgZ(0,"span",60),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::StoreCategory")," "))}function Ze(e,t){if(1&e&&(f.YNc(0,fe,4,1,"div",56),f.YNc(1,ye,3,3,"span",57)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function ve(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",61),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"sw-lookup-select",62),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::StatusGeneralLookup")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getItemStatusLookup:e.lookupService.getItemStatusLookupValues)("disabled",e.isReadOnly)}}function be(e,t){1&e&&(f.TgZ(0,"button",63),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"AbpUi::Save")," "))}function Le(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",4),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().submitForm()}),f.TgZ(1,"div",5),f.TgZ(2,"div",6),f.TgZ(3,"label",7),f._uU(4),f.ALo(5,"abpLocalization"),f.qZA(),f._UZ(6,"input",8),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"label",9),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f._UZ(11,"input",10),f.qZA(),f.TgZ(12,"div",6),f.TgZ(13,"label",11),f._uU(14),f.ALo(15,"abpLocalization"),f.qZA(),f._UZ(16,"input",12),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"label",14),f._uU(19),f.ALo(20,"abpLocalization"),f.qZA(),f._UZ(21,"input",15),f.qZA(),f.TgZ(22,"div",16),f.TgZ(23,"label",17),f._uU(24),f.ALo(25,"abpLocalization"),f.qZA(),f._UZ(26,"input",18),f.qZA(),f.TgZ(27,"div",19),f.TgZ(28,"label",20),f._uU(29),f.ALo(30,"abpLocalization"),f.qZA(),f._UZ(31,"input",21),f.qZA(),f.TgZ(32,"div",19),f.TgZ(33,"label",22),f._uU(34),f.ALo(35,"abpLocalization"),f.qZA(),f._UZ(36,"input",23),f.qZA(),f.TgZ(37,"div",19),f.TgZ(38,"label",24),f._uU(39),f.ALo(40,"abpLocalization"),f.TgZ(41,"span",25),f._uU(42),f.ALo(43,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(44,"sw-attachment",26),f.NdJ("attachmentUpdated",function(t){return f.CHM(e),f.oxw().attachmentUpdated(t)}),f.qZA(),f.qZA(),f.TgZ(45,"div",19),f.TgZ(46,"label",27),f._uU(47),f.ALo(48,"abpLocalization"),f.qZA(),f._UZ(49,"input",28),f.qZA(),f.TgZ(50,"div",6),f.TgZ(51,"label",29),f._uU(52),f.ALo(53,"abpLocalization"),f.qZA(),f._UZ(54,"ngx-intl-tel-input",30),f.ALo(55,"abpLocalization"),f.qZA(),f.TgZ(56,"div",6),f.TgZ(57,"label",31),f._uU(58),f.ALo(59,"abpLocalization"),f.qZA(),f.YNc(60,de,3,3,"span",32),f._UZ(61,"input",33),f.qZA(),f.TgZ(62,"div",6),f.TgZ(63,"label",34),f._uU(64),f.ALo(65,"abpLocalization"),f.qZA(),f._UZ(66,"sw-lookup-select",35),f.qZA(),f.YNc(67,ce,5,6,"div",36),f.YNc(68,ge,7,8,"div",37),f.TgZ(69,"div",19),f.TgZ(70,"label",38),f._uU(71),f.ALo(72,"abpLocalization"),f.qZA(),f.TgZ(73,"select",39),f._UZ(74,"option",40),f.YNc(75,he,2,2,"option",41),f.qZA(),f.qZA(),f.TgZ(76,"div",13),f.TgZ(77,"label",42),f._uU(78),f.ALo(79,"abpLocalization"),f.qZA(),f.TgZ(80,"p-multiSelect",43,44),f.YNc(82,Ze,2,2,"ng-template",45),f.qZA(),f.qZA(),f.YNc(83,ve,5,5,"div",46),f.TgZ(84,"div",47),f.TgZ(85,"button",48,49),f._uU(87),f.ALo(88,"abpLocalization"),f.qZA(),f.YNc(89,be,3,3,"button",50),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",e.form),f.xp6(4),f.hij(" ",f.lcZ(5,44,"::StoreName")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(10,46,"::AddressAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(15,48,"::AddressEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(20,50,"::MapLocationURL")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(25,52,"::MerchantUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(30,54,"::UseTitleAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(35,56,"::UseTitleEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(40,58,"::PhotosAttachmentId")," "),f.xp6(3),f.Oqu(f.lcZ(43,60,"::Optional")),f.xp6(2),f.Q6J("maxFilesCount",1)("readonly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(48,62,"::Email")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(53,64,"::Mobile")," "),f.xp6(2),f.Q6J("searchCountryPlaceholder",f.lcZ(55,66,"::SearchCountry"))("inputId","store-store-mobile")("inputReadOnly",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(59,68,"::OrderInList")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(65,70,"::Country")," "),f.xp6(2),f.Q6J("getFn",e.service.getCountryLookup)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.selected),f.xp6(1),f.Q6J("ngIf",!e.selected),f.xp6(3),f.hij(" ",f.lcZ(72,72,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("abpDisabled",e.isReadOnly),f.xp6(2),f.Q6J("ngForOf",e.AllStoreKinds),f.xp6(3),f.hij(" ",f.lcZ(79,74,"::StoreCategory")," "),f.xp6(2),f.Q6J("options",e.linksListData)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4),f.xp6(3),f.Q6J("ngIf",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(88,76,"AbpUi::Cancel")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly)}}let Ae=(()=>{class e{constructor(e,t,o,i,r,s,l,a,n){this.track=e,this.service=t,this._router=o,this.confirmation=i,this.lookupService=r,this.dateService=s,this.langService=l,this.localizationService=a,this.fb=n,this.refresh=new f.vpe,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.ItemStatus=g.Ms,this.citiesList=[],this.pageQuery={maxResultCount:1e3,skipCount:0},this.isLoading=!0,this.requiredFields=[],this.feilds=[],this.isUpdatingMaxDeliveryPriceCategoryName=!1,this.relatedStoreKinds=h.Course}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds()}clearFilters(){this.filters={}}get storeKindId(){return this.form.get("storeKindId")}get countryId(){return this.form.get("countryId")}get storeCategoryId(){return this.form.get("storeCategoryId")}get storeCategoryLinks(){return this.form.get("storeCategoryLinks")}get cityIds(){return this.form.get("cityId")}buildForm(){var e;const{storeName:t,addressAr:o,addressEn:i,mobile:r,email:s,photosAttachmentId:l,maxDeliveryPriceCategoryName:a,mapLocationUrl:n,countryId:d,cityId:c,storeKindId:u,storeCategoryId:p,statusGeneralLookupId:m,storeCategoryLinks:g,merchantUrl:h,useTitleAr:f,useTitleEn:y,orderInList:Z}=(null===(e=this.selected)||void 0===e?void 0:e.store)||{};this.form=this.fb.group({storeName:[null!=t?t:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressAr:[null!=o?o:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressEn:[null!=i?i:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],email:[null!=s?s:null,[b.kI.required,q.d.InvalidCharacterValidator(),q.d.EmailValidator()]],mobile:[null!=r?r:null,[b.kI.required]],photosAttachmentId:[null!=l?l:0,[]],maxDeliveryPriceCategoryName:[null!=a?a:null,[]],mapLocationUrl:[null!=n?n:null,[b.kI.required,q.d.UrlValidator()]],countryId:[null!=d?d:null,[b.kI.required]],cityId:[null!=c?c:null,[b.kI.required]],storeKindId:[null!=u?u:null,[b.kI.required]],deliveryGeneralLookupId:[42,[b.kI.required]],storeCategoryId:[null!=p?p:null,[]],statusGeneralLookupId:[null!=m?m:null,[]],storeCategoryLinks:[null!=g?g:null,[b.kI.required]],photosAttachmentFiles:[void 0],merchantUrl:[h||"",[b.kI.required]],useTitleAr:[f||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useTitleEn:[y||"",[b.kI.required,q.d.InvalidCharacterValidator()]],orderInList:[null!=Z?Z:0,[]]}),u&&this.getCategoies(u),setTimeout(()=>{this.isModalOpen=!0},500),d&&this.getCities(d),this.updateMaxDeliveryPriceCategoryName(),this.feilds.forEach(e=>{this.form.get(e).valueChanges.subscribe(e=>this.updateMaxDeliveryPriceCategoryName())}),this.form.get("storeKindId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCategoies(e),e!=this.form.get("storeKindId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)}),this.form.get("deliveryGeneralLookupId").valueChanges.subscribe(e=>{this.updateMaxDeliveryPriceCategoryName(),this.form.get("deliveryGeneralLookupId").value==Ce.WithDelivery&&(this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.updateValueAndValidity())}),this.form.get("countryId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCities(e),e!=this.form.get("countryId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)})}isOptional(e){return!this.requiredFields.some(t=>t==e)}updateMaxDeliveryPriceCategoryName(){if(!this.isUpdatingMaxDeliveryPriceCategoryName){if(this.isUpdatingMaxDeliveryPriceCategoryName=!0,this.form.get("deliveryGeneralLookupId").value==Ce.WithDelivery){let e=!1,t=this.feilds[this.feilds.length-1];if(this.requiredFields=[],this.feilds.forEach(o=>{o==t&&(e=!0),this.form.get(o).value&&this.form.get(o).value>0&&(e=!0);const i=e;i?this.requiredFields.push(o):this.requiredFields=this.requiredFields.filter(e=>e!=o),i?(this.form.get(o).setValidators([b.kI.required,b.kI.min(0)]),this.form.get(o).setValue(this.form.get(o).value),this.form.get(o).updateValueAndValidity()):(this.form.get(o).clearValidators(),this.form.get(o).setValidators([b.kI.min(0)]),this.form.get(o).updateValueAndValidity())}),this.requiredFields.length>0){const e=this.localizationService.instant("::"+this.requiredFields[0]);this.form.get("maxDeliveryPriceCategoryName").setValue(e)}else this.form.get("maxDeliveryPriceCategoryName").setValue(void 0)}else this.requiredFields=[],this.feilds.forEach(e=>{this.form.get(e).setValue(void 0),this.form.get(e).clearValidators(),this.form.get(e).updateValueAndValidity()}),this.form.get("maxDeliveryPriceCategoryName").setValue(void 0);this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{this.isUpdatingMaxDeliveryPriceCategoryName=!1},10)}}get isShowCoordinates(){var e,t,o;return(null!==(o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("deliveryGeneralLookupId"))||void 0===t?void 0:t.value)&&void 0!==o?o:Ce.WithoutDelivery)==Ce.WithDelivery}attachmentUpdated(e){this.form.get("photosAttachmentFiles").setValue(e.files.toString())}getCategoies(e){this.service.getStoreCategoryLookup({},e).subscribe(e=>{let t=e.items.map(e=>{let t={};return t.label=e.displayName,t.value=e.id,t});setTimeout(()=>{this.linksListData=t},10)})}getLookupRequestDto(e){let t={};return e&&(t.filter=e),t.maxResultCount=1e3,t}getCities(e){let t=this.getLookupRequestDto(this.pageQuery.filter);t.countryId=e,this.service.getCityLookup(t).subscribe(({items:e})=>{this.citiesList=e})}hideForm(){this.isModalOpen=!1,this.isReadOnly=!1,this.form.reset()}showForm(e){this.buildForm(),this.isReadOnly=e}removeItem(e,t){return e.preventDefault(),e.stopPropagation(),this.selected.store.storeCategoryLinks=(this.selected.store.storeCategoryLinks||[]).filter(e=>e!==t)||[],!1}submitForm(){if(this.form.invalid)return console.log("invalid",this.form.errors),console.log(this.form.controls.storeName.errors),console.log(this.form.controls.addressAr.errors),console.log(this.form.controls.addressEn.errors),console.log(this.form.controls.rating.errors),console.log(this.form.controls.storeDescription.errors),console.log(this.form.controls.mobile.errors),console.log(this.form.controls.email.errors),console.log(this.form.controls.photosAttachmentId.errors),console.log(this.form.controls.longitude.errors),console.log(this.form.controls.latitude.errors),console.log(this.form.controls.deliveryPriceCategory1.errors),console.log(this.form.controls.deliveryPriceCategory2.errors),console.log(this.form.controls.deliveryPriceCategory3.errors),console.log(this.form.controls.deliveryPriceCategory4.errors),console.log(this.form.controls.deliveryPriceCategory5.errors),console.log(this.form.controls.deliveryPriceCategory6.errors),console.log(this.form.controls.maxDeliveryPriceCategoryName.errors),console.log(this.form.controls.mapLocationUrl.errors),console.log(this.form.controls.countryId.errors),console.log(this.form.controls.cityId.errors),console.log(this.form.controls.storeKindId.errors),console.log(this.form.controls.deliveryGeneralLookupId.errors),console.log(this.form.controls.storeCategoryId.errors),console.log(this.form.controls.statusGeneralLookupId.errors),console.log(this.form.controls.storeCategoryLinks.errors),console.log(this.form.controls.discount.errors),console.log(this.form.controls.promoCode.errors),console.log(this.form.controls.merchantUrl.errors),console.log(this.form.controls.useTitleAr.errors),console.log(this.form.controls.useTitleEn.errors),console.log(this.form.controls.useDescriptionAr.errors),console.log(this.form.controls.useDescriptionEn.errors),console.log(this.form.controls.storeDescriptionEn.errors),!1;this.storeCategoryLinks.value&&this.form.patchValue({storeCategoryLinks:this.storeCategoryLinks.value.map(e=>e.value)}),!this.selected&&this.cityIds.value&&this.form.patchValue({cityId:this.cityIds.value.map(e=>e.id)}),this.form.get("mobile").setValue(this.form.get("mobile").value.e00Number);let e=this.form.value;this.selected||(e.cityIds=e.cityId,e.cityId=null);const t=this.selected?this.service.update(this.selected.store.id,e):this.service.create(e);this.isModalBusy=!0,t.pipe((0,u.x)(()=>this.isModalBusy=!1),(0,x.b)(()=>this.hideForm())).subscribe(()=>this.refresh.emit())}create(){this.selected=void 0,this.showForm(!1)}update(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!1),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}pathcLinks(){this.form.patchValue({storeCategoryLinks:this.linksListData})}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}view(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!0),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}editItems(e){this._router.navigate(["store-menus"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(()=>this.refresh.emit())}loadStoreKinds(){const e=this;this.service.getStoreKinds().subscribe(t=>{e.AllStoreKinds=t.filter(t=>t.kind===e.relatedStoreKinds),console.log(t,e.AllStoreKinds,e.relatedStoreKinds)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store-course"]],inputs:{relatedStoreKinds:"relatedStoreKinds"},outputs:{refresh:"refresh"},features:[f._Bn([i.XNV,c.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-4"],["for","store-store-name"],["id","store-store-name","formControlName","storeName","maxlength","255","minlength","1","autofocus","",1,"form-control",3,"readOnly"],["for","store-store-address-ar"],["id","store-store-address-ar","formControlName","addressAr","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-address-en"],["id","store-store-address-en","formControlName","addressEn","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-12"],["for","store-store-mapLocationUrl"],["id","store-store-mapLocationUrl","formControlName","mapLocationUrl","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-8"],["for","store-store-merchantUrl"],["id","store-store-merchantUrl","formControlName","merchantUrl",1,"form-control",3,"readOnly"],[1,"form-group","col-md-6"],["for","store-store-useTitleAr"],["id","store-store-useTitleAr","formControlName","useTitleAr",1,"form-control",3,"readOnly"],["for","store-store-useTitleEn"],["id","store-store-useTitleEn","formControlName","useTitleEn",1,"form-control",3,"readOnly"],["for","store-photos-attachment-id"],[1,"optional-input","badge","badge-info"],["id","store-photos-attachment-id","formControlName","photosAttachmentId","acceptTypes",".png,.jpg,.jpeg","Entity","Store","name","photosAttachmentId",3,"maxFilesCount","readonly","attachmentUpdated"],["for","store-store-email"],["id","store-store-email","formControlName","email","maxlength","70",1,"form-control",3,"readOnly"],["for","store-store-mobile"],["name","mobile","formControlName","mobile",3,"searchCountryPlaceholder","inputId","inputReadOnly"],["for","coach-order-in-list"],["class","optional-input badge badge-info",4,"ngIf"],["id","coach-order-in-list","type","number","formControlName","orderInList",1,"form-control"],["for","country-country-id"],["id","country-country-id","formControlName","countryId",3,"getFn","lookupNameProp","disabled"],["class","form-group col-md-6",4,"ngIf"],["class","form-group col-md-12",4,"ngIf"],["for","storeKindId"],["name","storeKindId","id","storeKindId","formControlName","storeKindId",1,"custom-select","form-control",3,"abpDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","store-category-store-category-id"],["name","storeCategoryLinks","id","storeCategoryLinks","itemSize","30","formControlName","storeCategoryLinks","optionLabel","label","dataKey","value",1,"sw-tags",3,"options","virtualScroll","disabled","maxSelectedLabels"],["selectedActivity",""],["pTemplate","selectedItems"],["class","form-group col-md-4",4,"ngIf"],[1,"col-sm-12","modal-footer"],["type","button",1,"pull-left","btn-wide","btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit","class","pull-left btn-wide btn btn-success btn-save",4,"ngIf"],["for","city-city-id"],["formControlName","cityId",3,"country","lookupNameProp","disabled"],["for","cityId"],["name","cityId","id","cityId","itemSize","30","formControlName","cityId","dataKey","id",1,"sw-tags",3,"options","virtualScroll","disabled","optionLabel","maxSelectedLabels"],["selectedCity",""],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"],["for","general-lookup-status-general-lookup-id"],["id","statusGeneralLookupId","formControlName","statusGeneralLookupId",3,"getFn","disabled"],["type","submit",1,"pull-left","btn-wide","btn","btn-success","btn-save"]],template:function(e,t){1&e&&(f.TgZ(0,"abp-modal",0),f.NdJ("visibleChange",function(e){return t.isModalOpen=e}),f.YNc(1,ne,2,2,"ng-template",null,1,f.W1O),f.YNc(3,Le,90,78,"ng-template",null,2,f.W1O),f.qZA()),2&e&&f.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",t.isReadOnly)},directives:[r.zS,A.O5,b._Y,b.JL,i.YzZ,b.sg,l.hL,b.Fj,b.JJ,b.u,l.J5,L.m,b.nD,b.wO,i.Uqp,k.Y,T.F,b.wV,N.X,b.EJ,O.x3,b.YN,b.Kr,A.sg,S.NU,_.jx,U.b],pipes:[i.fuE],encapsulation:2}),e})();var Ce=function(e){return e[e.WithoutDelivery=42]="WithoutDelivery",e[e.WithDelivery=43]="WithDelivery",e}({});function Ie(e,t){if(1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,e.selected?"AbpUi::Edit":"::Championship")," ")}}function xe(e,t){1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::View")," "))}function qe(e,t){if(1&e&&(f.YNc(0,Ie,3,3,"h3",3),f.YNc(1,xe,3,3,"h3",3)),2&e){const e=f.oxw();f.Q6J("ngIf",!e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isReadOnly)}}function ke(e,t){1&e&&(f.TgZ(0,"span",25),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function Te(e,t){1&e&&(f.TgZ(0,"span",25),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function Ne(e,t){1&e&&(f.TgZ(0,"span",25),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function Ue(e,t){if(1&e&&(f.TgZ(0,"div",19),f.TgZ(1,"label",53),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"abp-city-lookup-select",54),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,4,"::City")," "),f.xp6(2),f.Q6J("country",e.countryId.value)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly)}}function Oe(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",60),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",61),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(4).removeItem(t,o.id)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,o=f.oxw(4);f.xp6(2),f.hij(" ",o.langService.isRtl?e.displayName:e.displayNameEn," ")}}function Se(e,t){1&e&&(f.TgZ(0,"span",62),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::City")," "))}function _e(e,t){if(1&e&&(f.YNc(0,Oe,4,1,"div",58),f.YNc(1,Se,3,3,"span",59)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function we(e,t){if(1&e&&(f.TgZ(0,"div",13),f.TgZ(1,"label",55),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f.TgZ(4,"p-multiSelect",56,57),f.YNc(6,_e,2,2,"ng-template",47),f.qZA(),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,6,"::City")," "),f.xp6(2),f.s9C("optionLabel",e.langService.getLookupNameProp()),f.Q6J("options",e.citiesList)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4)}}function Je(e,t){if(1&e&&(f.TgZ(0,"option",42),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw(2);f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}function De(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",60),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",61),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(3).removeItem(t,o.value)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(2),f.hij(" ",e.label," ")}}function Fe(e,t){1&e&&(f.TgZ(0,"span",62),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::StoreCategory")," "))}function Ve(e,t){if(1&e&&(f.YNc(0,De,4,1,"div",58),f.YNc(1,Fe,3,3,"span",59)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function Pe(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",63),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"sw-lookup-select",64),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::StatusGeneralLookup")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getItemStatusLookup:e.lookupService.getItemStatusLookupValues)("disabled",e.isReadOnly)}}function Qe(e,t){1&e&&(f.TgZ(0,"button",65),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"AbpUi::Save")," "))}function Re(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",4),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().submitForm()}),f.TgZ(1,"div",5),f.TgZ(2,"div",6),f.TgZ(3,"label",7),f._uU(4),f.ALo(5,"abpLocalization"),f.qZA(),f._UZ(6,"input",8),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"label",9),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f._UZ(11,"input",10),f.qZA(),f.TgZ(12,"div",6),f.TgZ(13,"label",11),f._uU(14),f.ALo(15,"abpLocalization"),f.qZA(),f._UZ(16,"input",12),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"label",14),f._uU(19),f.ALo(20,"abpLocalization"),f.qZA(),f._UZ(21,"input",15),f.qZA(),f.TgZ(22,"div",16),f.TgZ(23,"label",17),f._uU(24),f.ALo(25,"abpLocalization"),f.qZA(),f._UZ(26,"input",18),f.qZA(),f.TgZ(27,"div",19),f.TgZ(28,"label",20),f._uU(29),f.ALo(30,"abpLocalization"),f.qZA(),f._UZ(31,"input",21),f.qZA(),f.TgZ(32,"div",19),f.TgZ(33,"label",22),f._uU(34),f.ALo(35,"abpLocalization"),f.qZA(),f._UZ(36,"input",23),f.qZA(),f.TgZ(37,"div",19),f.TgZ(38,"label",24),f._uU(39),f.ALo(40,"abpLocalization"),f.TgZ(41,"span",25),f._uU(42),f.ALo(43,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(44,"sw-attachment",26),f.NdJ("attachmentUpdated",function(t){return f.CHM(e),f.oxw().attachmentUpdated(t)}),f.qZA(),f.qZA(),f.TgZ(45,"div",19),f.TgZ(46,"label",27),f._uU(47),f.ALo(48,"abpLocalization"),f.qZA(),f._UZ(49,"input",28),f.qZA(),f.TgZ(50,"div",6),f.TgZ(51,"label",29),f._uU(52),f.ALo(53,"abpLocalization"),f.qZA(),f.YNc(54,ke,3,3,"span",30),f._UZ(55,"input",31),f.qZA(),f.TgZ(56,"div",6),f.TgZ(57,"label",29),f._uU(58),f.ALo(59,"abpLocalization"),f.qZA(),f.YNc(60,Te,3,3,"span",30),f._UZ(61,"input",32),f.qZA(),f.TgZ(62,"div",6),f.TgZ(63,"label",33),f._uU(64),f.ALo(65,"abpLocalization"),f.qZA(),f._UZ(66,"ngx-intl-tel-input",34),f.ALo(67,"abpLocalization"),f.qZA(),f.TgZ(68,"div",6),f.TgZ(69,"label",29),f._uU(70),f.ALo(71,"abpLocalization"),f.qZA(),f.YNc(72,Ne,3,3,"span",30),f._UZ(73,"input",35),f.qZA(),f.TgZ(74,"div",6),f.TgZ(75,"label",36),f._uU(76),f.ALo(77,"abpLocalization"),f.qZA(),f._UZ(78,"sw-lookup-select",37),f.qZA(),f.YNc(79,Ue,5,6,"div",38),f.YNc(80,we,7,8,"div",39),f.TgZ(81,"div",19),f.TgZ(82,"label",40),f._uU(83),f.ALo(84,"abpLocalization"),f.qZA(),f.TgZ(85,"select",41),f._UZ(86,"option",42),f.YNc(87,Je,2,2,"option",43),f.qZA(),f.qZA(),f.TgZ(88,"div",13),f.TgZ(89,"label",44),f._uU(90),f.ALo(91,"abpLocalization"),f.qZA(),f.TgZ(92,"p-multiSelect",45,46),f.YNc(94,Ve,2,2,"ng-template",47),f.qZA(),f.qZA(),f.YNc(95,Pe,5,5,"div",48),f.TgZ(96,"div",49),f.TgZ(97,"button",50,51),f._uU(99),f.ALo(100,"abpLocalization"),f.qZA(),f.YNc(101,Qe,3,3,"button",52),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",e.form),f.xp6(4),f.hij(" ",f.lcZ(5,48,"::StoreName")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(10,50,"::AddressAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(15,52,"::AddressEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(20,54,"::MapLocationURL")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(25,56,"::MerchantUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(30,58,"::UseTitleAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(35,60,"::UseTitleEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(40,62,"::PhotosAttachmentId")," "),f.xp6(3),f.Oqu(f.lcZ(43,64,"::Optional")),f.xp6(2),f.Q6J("maxFilesCount",1)("readonly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(48,66,"::Email")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(53,68,"::championshipDateString")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(59,70,"::championshipTimeString")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(65,72,"::Mobile")," "),f.xp6(2),f.Q6J("searchCountryPlaceholder",f.lcZ(67,74,"::SearchCountry"))("inputId","store-store-mobile")("inputReadOnly",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(71,76,"::OrderInList")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(77,78,"::Country")," "),f.xp6(2),f.Q6J("getFn",e.service.getCountryLookup)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.selected),f.xp6(1),f.Q6J("ngIf",!e.selected),f.xp6(3),f.hij(" ",f.lcZ(84,80,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("abpDisabled",e.isReadOnly),f.xp6(2),f.Q6J("ngForOf",e.AllStoreKinds),f.xp6(3),f.hij(" ",f.lcZ(91,82,"::StoreCategory")," "),f.xp6(2),f.Q6J("options",e.linksListData)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4),f.xp6(3),f.Q6J("ngIf",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(100,84,"AbpUi::Cancel")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly)}}let ze=(()=>{class e{constructor(e,t,o,i,r,s,l,a,n){this.track=e,this.service=t,this._router=o,this.confirmation=i,this.lookupService=r,this.dateService=s,this.langService=l,this.localizationService=a,this.fb=n,this.refresh=new f.vpe,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.ItemStatus=g.Ms,this.citiesList=[],this.pageQuery={maxResultCount:1e3,skipCount:0},this.isLoading=!0,this.requiredFields=[],this.feilds=[],this.isUpdatingMaxDeliveryPriceCategoryName=!1,this.relatedStoreKinds=h.Championship}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds()}clearFilters(){this.filters={}}get storeKindId(){return this.form.get("storeKindId")}get countryId(){return this.form.get("countryId")}get storeCategoryId(){return this.form.get("storeCategoryId")}get storeCategoryLinks(){return this.form.get("storeCategoryLinks")}get cityIds(){return this.form.get("cityId")}buildForm(){var e;const{storeName:t,addressAr:o,addressEn:i,mobile:r,email:s,photosAttachmentId:l,maxDeliveryPriceCategoryName:a,mapLocationUrl:n,countryId:d,cityId:c,storeKindId:u,storeCategoryId:p,statusGeneralLookupId:m,storeCategoryLinks:g,merchantUrl:h,useTitleAr:f,useTitleEn:y,orderInList:Z,championshipDateString:v,championshipTimeString:L}=(null===(e=this.selected)||void 0===e?void 0:e.store)||{};this.form=this.fb.group({storeName:[null!=t?t:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressAr:[null!=o?o:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressEn:[null!=i?i:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],email:[null!=s?s:null,[b.kI.required,q.d.InvalidCharacterValidator(),q.d.EmailValidator()]],mobile:[null!=r?r:null,[b.kI.required]],photosAttachmentId:[null!=l?l:0,[]],maxDeliveryPriceCategoryName:[null!=a?a:null,[]],mapLocationUrl:[null!=n?n:null,[b.kI.required,q.d.UrlValidator()]],countryId:[null!=d?d:null,[b.kI.required]],cityId:[null!=c?c:null,[b.kI.required]],storeKindId:[null!=u?u:null,[b.kI.required]],deliveryGeneralLookupId:[42,[b.kI.required]],storeCategoryId:[null!=p?p:null,[]],championshipDateString:[null!=v?v:null,[]],championshipTimeString:[null!=L?L:null,[]],statusGeneralLookupId:[null!=m?m:null,[]],storeCategoryLinks:[null!=g?g:null,[b.kI.required]],photosAttachmentFiles:[void 0],merchantUrl:[h||"",[b.kI.required]],useTitleAr:[f||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useTitleEn:[y||"",[b.kI.required,q.d.InvalidCharacterValidator()]],orderInList:[null!=Z?Z:0,[]]}),u&&this.getCategoies(u),setTimeout(()=>{this.isModalOpen=!0},500),d&&this.getCities(d),this.updateMaxDeliveryPriceCategoryName(),this.feilds.forEach(e=>{this.form.get(e).valueChanges.subscribe(e=>this.updateMaxDeliveryPriceCategoryName())}),this.form.get("storeKindId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCategoies(e),e!=this.form.get("storeKindId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)}),this.form.get("deliveryGeneralLookupId").valueChanges.subscribe(e=>{this.updateMaxDeliveryPriceCategoryName(),this.form.get("deliveryGeneralLookupId").value==Ye.WithDelivery&&(this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.updateValueAndValidity())}),this.form.get("countryId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCities(e),e!=this.form.get("countryId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)})}isOptional(e){return!this.requiredFields.some(t=>t==e)}updateMaxDeliveryPriceCategoryName(){if(!this.isUpdatingMaxDeliveryPriceCategoryName){if(this.isUpdatingMaxDeliveryPriceCategoryName=!0,this.form.get("deliveryGeneralLookupId").value==Ye.WithDelivery){let e=!1,t=this.feilds[this.feilds.length-1];if(this.requiredFields=[],this.feilds.forEach(o=>{o==t&&(e=!0),this.form.get(o).value&&this.form.get(o).value>0&&(e=!0);const i=e;i?this.requiredFields.push(o):this.requiredFields=this.requiredFields.filter(e=>e!=o),i?(this.form.get(o).setValidators([b.kI.required,b.kI.min(0)]),this.form.get(o).setValue(this.form.get(o).value),this.form.get(o).updateValueAndValidity()):(this.form.get(o).clearValidators(),this.form.get(o).setValidators([b.kI.min(0)]),this.form.get(o).updateValueAndValidity())}),this.requiredFields.length>0){const e=this.localizationService.instant("::"+this.requiredFields[0]);this.form.get("maxDeliveryPriceCategoryName").setValue(e)}else this.form.get("maxDeliveryPriceCategoryName").setValue(void 0)}else this.requiredFields=[],this.feilds.forEach(e=>{this.form.get(e).setValue(void 0),this.form.get(e).clearValidators(),this.form.get(e).updateValueAndValidity()}),this.form.get("maxDeliveryPriceCategoryName").setValue(void 0);this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{this.isUpdatingMaxDeliveryPriceCategoryName=!1},10)}}get isShowCoordinates(){var e,t,o;return(null!==(o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("deliveryGeneralLookupId"))||void 0===t?void 0:t.value)&&void 0!==o?o:Ye.WithoutDelivery)==Ye.WithDelivery}attachmentUpdated(e){this.form.get("photosAttachmentFiles").setValue(e.files.toString())}getCategoies(e){this.service.getStoreCategoryLookup({},e).subscribe(e=>{let t=e.items.map(e=>{let t={};return t.label=e.displayName,t.value=e.id,t});setTimeout(()=>{this.linksListData=t},10)})}getLookupRequestDto(e){let t={};return e&&(t.filter=e),t.maxResultCount=1e3,t}getCities(e){let t=this.getLookupRequestDto(this.pageQuery.filter);t.countryId=e,this.service.getCityLookup(t).subscribe(({items:e})=>{this.citiesList=e})}hideForm(){this.isModalOpen=!1,this.isReadOnly=!1,this.form.reset()}showForm(e){this.buildForm(),this.isReadOnly=e}removeItem(e,t){return e.preventDefault(),e.stopPropagation(),this.selected.store.storeCategoryLinks=(this.selected.store.storeCategoryLinks||[]).filter(e=>e!==t)||[],!1}submitForm(){if(this.form.invalid)return console.log("invalid",this.form.errors),console.log(this.form.controls.storeName.errors),console.log(this.form.controls.addressAr.errors),console.log(this.form.controls.addressEn.errors),console.log(this.form.controls.rating.errors),console.log(this.form.controls.storeDescription.errors),console.log(this.form.controls.mobile.errors),console.log(this.form.controls.email.errors),console.log(this.form.controls.photosAttachmentId.errors),console.log(this.form.controls.longitude.errors),console.log(this.form.controls.latitude.errors),console.log(this.form.controls.deliveryPriceCategory1.errors),console.log(this.form.controls.deliveryPriceCategory2.errors),console.log(this.form.controls.deliveryPriceCategory3.errors),console.log(this.form.controls.deliveryPriceCategory4.errors),console.log(this.form.controls.deliveryPriceCategory5.errors),console.log(this.form.controls.deliveryPriceCategory6.errors),console.log(this.form.controls.maxDeliveryPriceCategoryName.errors),console.log(this.form.controls.mapLocationUrl.errors),console.log(this.form.controls.countryId.errors),console.log(this.form.controls.cityId.errors),console.log(this.form.controls.storeKindId.errors),console.log(this.form.controls.deliveryGeneralLookupId.errors),console.log(this.form.controls.storeCategoryId.errors),console.log(this.form.controls.statusGeneralLookupId.errors),console.log(this.form.controls.storeCategoryLinks.errors),console.log(this.form.controls.discount.errors),console.log(this.form.controls.promoCode.errors),console.log(this.form.controls.merchantUrl.errors),console.log(this.form.controls.useTitleAr.errors),console.log(this.form.controls.useTitleEn.errors),console.log(this.form.controls.useDescriptionAr.errors),console.log(this.form.controls.useDescriptionEn.errors),console.log(this.form.controls.storeDescriptionEn.errors),!1;console.log(this.form.value),this.storeCategoryLinks.value&&this.form.patchValue({storeCategoryLinks:this.storeCategoryLinks.value.map(e=>e.value)}),!this.selected&&this.cityIds.value&&this.form.patchValue({cityId:this.cityIds.value.map(e=>e.id)}),this.form.get("mobile").setValue(this.form.get("mobile").value.e00Number);let e=this.form.value;this.selected||(e.cityIds=e.cityId,e.cityId=null);const t=this.selected?this.service.update(this.selected.store.id,e):this.service.create(e);this.isModalBusy=!0,t.pipe((0,u.x)(()=>this.isModalBusy=!1),(0,x.b)(()=>this.hideForm())).subscribe(()=>this.refresh.emit())}create(){this.selected=void 0,this.showForm(!1)}update(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!1),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}pathcLinks(){this.form.patchValue({storeCategoryLinks:this.linksListData})}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}view(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!0),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}editItems(e){this._router.navigate(["store-menus"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(()=>this.refresh.emit())}loadStoreKinds(){const e=this;this.service.getStoreKinds().subscribe(t=>{e.AllStoreKinds=t.filter(t=>t.kind===e.relatedStoreKinds),console.log(t,e.AllStoreKinds,e.relatedStoreKinds)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store-champ"]],inputs:{relatedStoreKinds:"relatedStoreKinds"},outputs:{refresh:"refresh"},features:[f._Bn([i.XNV,c.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-4"],["for","store-store-name"],["id","store-store-name","formControlName","storeName","maxlength","255","minlength","1","autofocus","",1,"form-control",3,"readOnly"],["for","store-store-address-ar"],["id","store-store-address-ar","formControlName","addressAr","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-address-en"],["id","store-store-address-en","formControlName","addressEn","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-12"],["for","store-store-mapLocationUrl"],["id","store-store-mapLocationUrl","formControlName","mapLocationUrl","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-8"],["for","store-store-merchantUrl"],["id","store-store-merchantUrl","formControlName","merchantUrl",1,"form-control",3,"readOnly"],[1,"form-group","col-md-6"],["for","store-store-useTitleAr"],["id","store-store-useTitleAr","formControlName","useTitleAr",1,"form-control",3,"readOnly"],["for","store-store-useTitleEn"],["id","store-store-useTitleEn","formControlName","useTitleEn",1,"form-control",3,"readOnly"],["for","store-photos-attachment-id"],[1,"optional-input","badge","badge-info"],["id","store-photos-attachment-id","formControlName","photosAttachmentId","acceptTypes",".png,.jpg,.jpeg","Entity","Store","name","photosAttachmentId",3,"maxFilesCount","readonly","attachmentUpdated"],["for","store-store-email"],["id","store-store-email","formControlName","email","maxlength","70",1,"form-control",3,"readOnly"],["for","coach-order-in-list"],["class","optional-input badge badge-info",4,"ngIf"],["id","championshipDateString","formControlName","championshipDateString",1,"form-control"],["id","championshipTimeString","formControlName","championshipTimeString",1,"form-control"],["for","store-store-mobile"],["name","mobile","formControlName","mobile",3,"searchCountryPlaceholder","inputId","inputReadOnly"],["id","coach-order-in-list","type","number","formControlName","orderInList",1,"form-control"],["for","country-country-id"],["id","country-country-id","formControlName","countryId",3,"getFn","lookupNameProp","disabled"],["class","form-group col-md-6",4,"ngIf"],["class","form-group col-md-12",4,"ngIf"],["for","storeKindId"],["name","storeKindId","id","storeKindId","formControlName","storeKindId",1,"custom-select","form-control",3,"abpDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","store-category-store-category-id"],["name","storeCategoryLinks","id","storeCategoryLinks","itemSize","30","formControlName","storeCategoryLinks","optionLabel","label","dataKey","value",1,"sw-tags",3,"options","virtualScroll","disabled","maxSelectedLabels"],["selectedActivity",""],["pTemplate","selectedItems"],["class","form-group col-md-4",4,"ngIf"],[1,"col-sm-12","modal-footer"],["type","button",1,"pull-left","btn-wide","btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit","class","pull-left btn-wide btn btn-success btn-save",4,"ngIf"],["for","city-city-id"],["formControlName","cityId",3,"country","lookupNameProp","disabled"],["for","cityId"],["name","cityId","id","cityId","itemSize","30","formControlName","cityId","dataKey","id",1,"sw-tags",3,"options","virtualScroll","disabled","optionLabel","maxSelectedLabels"],["selectedCity",""],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"],["for","general-lookup-status-general-lookup-id"],["id","statusGeneralLookupId","formControlName","statusGeneralLookupId",3,"getFn","disabled"],["type","submit",1,"pull-left","btn-wide","btn","btn-success","btn-save"]],template:function(e,t){1&e&&(f.TgZ(0,"abp-modal",0),f.NdJ("visibleChange",function(e){return t.isModalOpen=e}),f.YNc(1,qe,2,2,"ng-template",null,1,f.W1O),f.YNc(3,Re,102,86,"ng-template",null,2,f.W1O),f.qZA()),2&e&&f.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",t.isReadOnly)},directives:[r.zS,A.O5,b._Y,b.JL,i.YzZ,b.sg,l.hL,b.Fj,b.JJ,b.u,l.J5,L.m,b.nD,b.wO,i.Uqp,k.Y,T.F,b.wV,N.X,b.EJ,O.x3,b.YN,b.Kr,A.sg,S.NU,_.jx,U.b],pipes:[i.fuE],encapsulation:2}),e})();var Ye=function(e){return e[e.WithoutDelivery=42]="WithoutDelivery",e[e.WithDelivery=43]="WithDelivery",e}({});function Me(e,t){if(1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,e.selected?"AbpUi::Edit":"::PromocodeStore")," ")}}function Ee(e,t){1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::View")," "))}function je(e,t){if(1&e&&(f.YNc(0,Me,3,3,"h3",3),f.YNc(1,Ee,3,3,"h3",3)),2&e){const e=f.oxw();f.Q6J("ngIf",!e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isReadOnly)}}function Ke(e,t){1&e&&(f.TgZ(0,"span",20),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function Ge(e,t){if(1&e&&(f.TgZ(0,"div",30),f.TgZ(1,"label",65),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"abp-city-lookup-select",66),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,4,"::City")," "),f.xp6(2),f.Q6J("country",e.countryId.value)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly)}}function We(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",72),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",73),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(4).removeItem(t,o.id)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,o=f.oxw(4);f.xp6(2),f.hij(" ",o.langService.isRtl?e.displayName:e.displayNameEn," ")}}function Be(e,t){1&e&&(f.TgZ(0,"span",74),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::City")," "))}function He(e,t){if(1&e&&(f.YNc(0,We,4,1,"div",70),f.YNc(1,Be,3,3,"span",71)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function $e(e,t){if(1&e&&(f.TgZ(0,"div",13),f.TgZ(1,"label",67),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f.TgZ(4,"p-multiSelect",68,69),f.YNc(6,He,2,2,"ng-template",59),f.qZA(),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,6,"::City")," "),f.xp6(2),f.s9C("optionLabel",e.langService.getLookupNameProp()),f.Q6J("options",e.citiesList)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4)}}function Xe(e,t){if(1&e&&(f.TgZ(0,"option",54),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw(2);f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}function et(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",72),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",73),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(3).removeItem(t,o.value)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(2),f.hij(" ",e.label," ")}}function tt(e,t){1&e&&(f.TgZ(0,"span",74),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::StoreCategory")," "))}function ot(e,t){if(1&e&&(f.YNc(0,et,4,1,"div",70),f.YNc(1,tt,3,3,"span",71)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function it(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",75),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"sw-lookup-select",76),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::StatusGeneralLookup")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getItemStatusLookup:e.lookupService.getItemStatusLookupValues)("disabled",e.isReadOnly)}}function rt(e,t){1&e&&(f.TgZ(0,"button",77),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"AbpUi::Save")," "))}function st(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",4),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().submitForm()}),f.TgZ(1,"div",5),f.TgZ(2,"div",6),f.TgZ(3,"label",7),f._uU(4),f.ALo(5,"abpLocalization"),f.qZA(),f._UZ(6,"input",8),f.qZA(),f.TgZ(7,"div",6),f.TgZ(8,"label",9),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f._UZ(11,"input",10),f.qZA(),f.TgZ(12,"div",6),f.TgZ(13,"label",11),f._uU(14),f.ALo(15,"abpLocalization"),f.qZA(),f._UZ(16,"input",12),f.qZA(),f.TgZ(17,"div",13),f.TgZ(18,"label",14),f._uU(19),f.ALo(20,"abpLocalization"),f.qZA(),f._UZ(21,"input",15),f.qZA(),f.TgZ(22,"div",6),f.TgZ(23,"label",16),f._uU(24),f.ALo(25,"abpLocalization"),f.qZA(),f._UZ(26,"input",17),f.qZA(),f.TgZ(27,"div",18),f.TgZ(28,"label",19),f._uU(29),f.ALo(30,"abpLocalization"),f.TgZ(31,"span",20),f._uU(32),f.ALo(33,"abpLocalization"),f.qZA(),f.qZA(),f._UZ(34,"input",21),f.qZA(),f.TgZ(35,"div",6),f.TgZ(36,"label",22),f._uU(37),f.ALo(38,"abpLocalization"),f.qZA(),f._UZ(39,"input",23),f.qZA(),f.TgZ(40,"div",18),f.TgZ(41,"label",24),f._uU(42),f.ALo(43,"abpLocalization"),f.TgZ(44,"span",20),f._uU(45),f.ALo(46,"abpLocalization"),f.qZA(),f.qZA(),f._UZ(47,"input",25),f.qZA(),f.TgZ(48,"div",6),f.TgZ(49,"label",26),f._uU(50),f.ALo(51,"abpLocalization"),f.qZA(),f._UZ(52,"input",27),f.qZA(),f.TgZ(53,"div",18),f.TgZ(54,"label",28),f._uU(55),f.ALo(56,"abpLocalization"),f.qZA(),f._UZ(57,"input",29),f.qZA(),f.TgZ(58,"div",30),f.TgZ(59,"label",31),f._uU(60),f.ALo(61,"abpLocalization"),f.qZA(),f._UZ(62,"input",32),f.qZA(),f.TgZ(63,"div",30),f.TgZ(64,"label",33),f._uU(65),f.ALo(66,"abpLocalization"),f.qZA(),f._UZ(67,"input",34),f.qZA(),f.TgZ(68,"div",30),f.TgZ(69,"label",35),f._uU(70),f.ALo(71,"abpLocalization"),f.qZA(),f._UZ(72,"input",36),f.qZA(),f.TgZ(73,"div",30),f.TgZ(74,"label",37),f._uU(75),f.ALo(76,"abpLocalization"),f.qZA(),f._UZ(77,"input",38),f.qZA(),f.TgZ(78,"div",30),f.TgZ(79,"label",39),f._uU(80),f.ALo(81,"abpLocalization"),f.TgZ(82,"span",20),f._uU(83),f.ALo(84,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(85,"sw-attachment",40),f.NdJ("attachmentUpdated",function(t){return f.CHM(e),f.oxw().attachmentUpdated(t)}),f.qZA(),f.qZA(),f.TgZ(86,"div",30),f.TgZ(87,"label",41),f._uU(88),f.ALo(89,"abpLocalization"),f.qZA(),f._UZ(90,"input",42),f.qZA(),f.TgZ(91,"div",6),f.TgZ(92,"label",43),f._uU(93),f.ALo(94,"abpLocalization"),f.qZA(),f._UZ(95,"ngx-intl-tel-input",44),f.ALo(96,"abpLocalization"),f.qZA(),f.TgZ(97,"div",6),f.TgZ(98,"label",45),f._uU(99),f.ALo(100,"abpLocalization"),f.qZA(),f.YNc(101,Ke,3,3,"span",46),f._UZ(102,"input",47),f.qZA(),f.TgZ(103,"div",6),f.TgZ(104,"label",48),f._uU(105),f.ALo(106,"abpLocalization"),f.qZA(),f._UZ(107,"sw-lookup-select",49),f.qZA(),f.YNc(108,Ge,5,6,"div",50),f.YNc(109,$e,7,8,"div",51),f.TgZ(110,"div",30),f.TgZ(111,"label",52),f._uU(112),f.ALo(113,"abpLocalization"),f.qZA(),f.TgZ(114,"select",53),f._UZ(115,"option",54),f.YNc(116,Xe,2,2,"option",55),f.qZA(),f.qZA(),f.TgZ(117,"div",13),f.TgZ(118,"label",56),f._uU(119),f.ALo(120,"abpLocalization"),f.qZA(),f.TgZ(121,"p-multiSelect",57,58),f.YNc(123,ot,2,2,"ng-template",59),f.qZA(),f.qZA(),f.YNc(124,it,5,5,"div",60),f.TgZ(125,"div",61),f.TgZ(126,"button",62,63),f._uU(128),f.ALo(129,"abpLocalization"),f.qZA(),f.YNc(130,rt,3,3,"button",64),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",e.form),f.xp6(4),f.hij(" ",f.lcZ(5,60,"::StoreName")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(10,62,"::AddressAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(15,64,"::AddressEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(20,66,"::MapLocationURL")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(25,68,"::Rating")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(30,70,"::StoreDescription")," "),f.xp6(3),f.Oqu(f.lcZ(33,72,"::Optional")),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(38,74,"::discount")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(43,76,"::StoreDescriptionEn")," "),f.xp6(3),f.Oqu(f.lcZ(46,78,"::Optional")),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(51,80,"::Promocode")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(56,82,"::MerchantUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(61,84,"::UseTitleAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(66,86,"::UseTitleEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(71,88,"::UseDescriptionAr")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(76,90,"::UseDescriptionEn")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(81,92,"::PhotosAttachmentId")," "),f.xp6(3),f.Oqu(f.lcZ(84,94,"::Optional")),f.xp6(2),f.Q6J("maxFilesCount",1)("readonly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(89,96,"::Email")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(94,98,"::Mobile")," "),f.xp6(2),f.Q6J("searchCountryPlaceholder",f.lcZ(96,100,"::SearchCountry"))("inputId","store-store-mobile")("inputReadOnly",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(100,102,"::OrderInList")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(106,104,"::Country")," "),f.xp6(2),f.Q6J("getFn",e.service.getCountryLookup)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.selected),f.xp6(1),f.Q6J("ngIf",!e.selected),f.xp6(3),f.hij(" ",f.lcZ(113,106,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("abpDisabled",e.isReadOnly),f.xp6(2),f.Q6J("ngForOf",e.AllStoreKinds),f.xp6(3),f.hij(" ",f.lcZ(120,108,"::StoreCategory")," "),f.xp6(2),f.Q6J("options",e.linksListData)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4),f.xp6(3),f.Q6J("ngIf",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(129,110,"AbpUi::Cancel")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly)}}let lt=(()=>{class e{constructor(e,t,o,i,r,s,l,a,n){this.track=e,this.service=t,this._router=o,this.confirmation=i,this.lookupService=r,this.dateService=s,this.langService=l,this.localizationService=a,this.fb=n,this.refresh=new f.vpe,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.ItemStatus=g.Ms,this.citiesList=[],this.pageQuery={maxResultCount:1e3,skipCount:0},this.isLoading=!0,this.requiredFields=[],this.feilds=[],this.isUpdatingMaxDeliveryPriceCategoryName=!1,this.relatedStoreKinds=h.Promocodes}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds()}clearFilters(){this.filters={}}get storeKindId(){return this.form.get("storeKindId")}get countryId(){return this.form.get("countryId")}get storeCategoryId(){return this.form.get("storeCategoryId")}get storeCategoryLinks(){return this.form.get("storeCategoryLinks")}get cityIds(){return this.form.get("cityId")}buildForm(){var e;const{storeName:t,addressAr:o,addressEn:i,rating:r,storeDescription:s,mobile:l,email:a,photosAttachmentId:n,maxDeliveryPriceCategoryName:d,mapLocationUrl:c,countryId:u,cityId:p,storeKindId:m,storeCategoryId:g,statusGeneralLookupId:h,storeCategoryLinks:f,discount:y,promoCode:Z,merchantUrl:v,useTitleAr:L,useTitleEn:A,useDescriptionAr:C,useDescriptionEn:x,storeDescriptionEn:k,orderInList:T}=(null===(e=this.selected)||void 0===e?void 0:e.store)||{};this.form=this.fb.group({storeName:[null!=t?t:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressAr:[null!=o?o:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],addressEn:[null!=i?i:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],rating:[null!=r?r:null,[b.kI.min(0),b.kI.max(5)]],storeDescription:[null!=s?s:null,[b.kI.required,q.d.InvalidCharacterValidator()]],email:[null!=a?a:null,[b.kI.required,q.d.InvalidCharacterValidator(),q.d.EmailValidator()]],mobile:[null!=l?l:null,[b.kI.required]],photosAttachmentId:[null!=n?n:0,[]],maxDeliveryPriceCategoryName:[null!=d?d:null,[]],mapLocationUrl:[null!=c?c:null,[b.kI.required,q.d.UrlValidator()]],countryId:[null!=u?u:null,[b.kI.required]],cityId:[null!=p?p:null,[b.kI.required]],storeKindId:[null!=m?m:null,[b.kI.required]],deliveryGeneralLookupId:[42,[b.kI.required]],storeCategoryId:[null!=g?g:null,[]],statusGeneralLookupId:[null!=h?h:null,[]],storeCategoryLinks:[null!=f?f:null,[b.kI.required]],photosAttachmentFiles:[void 0],discount:[y||"",[b.kI.required,q.d.InvalidCharacterValidator()]],promoCode:[Z||"",[b.kI.required,q.d.InvalidCharacterValidator()]],merchantUrl:[v||"",[b.kI.required]],useTitleAr:[L||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useTitleEn:[A||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useDescriptionAr:[C||"",[b.kI.required,q.d.InvalidCharacterValidator()]],useDescriptionEn:[x||"",[b.kI.required,q.d.InvalidCharacterValidator()]],storeDescriptionEn:[k||"",[b.kI.required,q.d.InvalidCharacterValidator()]],orderInList:[null!=T?T:0,[]]}),m&&this.getCategoies(m),setTimeout(()=>{this.isModalOpen=!0},500),u&&this.getCities(u),this.updateMaxDeliveryPriceCategoryName(),this.feilds.forEach(e=>{this.form.get(e).valueChanges.subscribe(e=>this.updateMaxDeliveryPriceCategoryName())}),this.form.get("storeKindId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCategoies(e),e!=this.form.get("storeKindId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)}),this.form.get("deliveryGeneralLookupId").valueChanges.subscribe(e=>{this.updateMaxDeliveryPriceCategoryName(),this.form.get("deliveryGeneralLookupId").value==at.WithDelivery&&(this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.updateValueAndValidity())}),this.form.get("countryId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCities(e),e!=this.form.get("countryId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)})}isOptional(e){return!this.requiredFields.some(t=>t==e)}updateMaxDeliveryPriceCategoryName(){if(!this.isUpdatingMaxDeliveryPriceCategoryName){if(this.isUpdatingMaxDeliveryPriceCategoryName=!0,this.form.get("deliveryGeneralLookupId").value==at.WithDelivery){let e=!1,t=this.feilds[this.feilds.length-1];if(this.requiredFields=[],this.feilds.forEach(o=>{o==t&&(e=!0),this.form.get(o).value&&this.form.get(o).value>0&&(e=!0);const i=e;i?this.requiredFields.push(o):this.requiredFields=this.requiredFields.filter(e=>e!=o),i?(this.form.get(o).setValidators([b.kI.required,b.kI.min(0)]),this.form.get(o).setValue(this.form.get(o).value),this.form.get(o).updateValueAndValidity()):(this.form.get(o).clearValidators(),this.form.get(o).setValidators([b.kI.min(0)]),this.form.get(o).updateValueAndValidity())}),this.requiredFields.length>0){const e=this.localizationService.instant("::"+this.requiredFields[0]);this.form.get("maxDeliveryPriceCategoryName").setValue(e)}else this.form.get("maxDeliveryPriceCategoryName").setValue(void 0)}else this.requiredFields=[],this.feilds.forEach(e=>{this.form.get(e).setValue(void 0),this.form.get(e).clearValidators(),this.form.get(e).updateValueAndValidity()}),this.form.get("maxDeliveryPriceCategoryName").setValue(void 0);this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{this.isUpdatingMaxDeliveryPriceCategoryName=!1},10)}}get isShowCoordinates(){var e,t,o;return(null!==(o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("deliveryGeneralLookupId"))||void 0===t?void 0:t.value)&&void 0!==o?o:at.WithoutDelivery)==at.WithDelivery}attachmentUpdated(e){this.form.get("photosAttachmentFiles").setValue(e.files.toString())}getCategoies(e){console.log("get getCategoies",e),this.service.getStoreCategoryLookup({},e).subscribe(t=>{let o=t.items.map(e=>{let t={};return t.label=e.displayName,t.value=e.id,t});setTimeout(()=>{console.log("get getCategoies00",e),this.linksListData=o},10)})}getLookupRequestDto(e){let t={};return e&&(t.filter=e),t.maxResultCount=1e3,t}getCities(e){let t=this.getLookupRequestDto(this.pageQuery.filter);t.countryId=e,this.service.getCityLookup(t).subscribe(({items:e})=>{this.citiesList=e})}hideForm(){this.isModalOpen=!1,this.isReadOnly=!1,this.form.reset()}showForm(e){this.buildForm(),this.isReadOnly=e}removeItem(e,t){return e.preventDefault(),e.stopPropagation(),this.selected.store.storeCategoryLinks=(this.selected.store.storeCategoryLinks||[]).filter(e=>e!==t)||[],!1}submitForm(){if(this.form.invalid)return console.log("invalid",this.form.errors),console.log(this.form.controls.storeName.errors),console.log(this.form.controls.addressAr.errors),console.log(this.form.controls.addressEn.errors),console.log(this.form.controls.rating.errors),console.log(this.form.controls.storeDescription.errors),console.log(this.form.controls.mobile.errors),console.log(this.form.controls.email.errors),console.log(this.form.controls.photosAttachmentId.errors),console.log(this.form.controls.longitude.errors),console.log(this.form.controls.latitude.errors),console.log(this.form.controls.deliveryPriceCategory1.errors),console.log(this.form.controls.deliveryPriceCategory2.errors),console.log(this.form.controls.deliveryPriceCategory3.errors),console.log(this.form.controls.deliveryPriceCategory4.errors),console.log(this.form.controls.deliveryPriceCategory5.errors),console.log(this.form.controls.deliveryPriceCategory6.errors),console.log(this.form.controls.maxDeliveryPriceCategoryName.errors),console.log(this.form.controls.mapLocationUrl.errors),console.log(this.form.controls.countryId.errors),console.log(this.form.controls.cityId.errors),console.log(this.form.controls.storeKindId.errors),console.log(this.form.controls.deliveryGeneralLookupId.errors),console.log(this.form.controls.storeCategoryId.errors),console.log(this.form.controls.statusGeneralLookupId.errors),console.log(this.form.controls.storeCategoryLinks.errors),console.log(this.form.controls.discount.errors),console.log(this.form.controls.promoCode.errors),console.log(this.form.controls.merchantUrl.errors),console.log(this.form.controls.useTitleAr.errors),console.log(this.form.controls.useTitleEn.errors),console.log(this.form.controls.useDescriptionAr.errors),console.log(this.form.controls.useDescriptionEn.errors),console.log(this.form.controls.storeDescriptionEn.errors),!1;this.storeCategoryLinks.value&&this.form.patchValue({storeCategoryLinks:this.storeCategoryLinks.value.map(e=>e.value)}),!this.selected&&this.cityIds.value&&this.form.patchValue({cityId:this.cityIds.value.map(e=>e.id)}),this.form.get("mobile").setValue(this.form.get("mobile").value.e00Number);let e=this.form.value;this.selected||(e.cityIds=e.cityId,e.cityId=null);const t=this.selected?this.service.update(this.selected.store.id,e):this.service.create(e);this.isModalBusy=!0,t.pipe((0,u.x)(()=>this.isModalBusy=!1),(0,x.b)(()=>this.hideForm())).subscribe(()=>this.refresh.emit())}create(){this.selected=void 0,this.showForm(!1)}update(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!1),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}pathcLinks(){this.form.patchValue({storeCategoryLinks:this.linksListData})}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}view(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!0),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}editItems(e){this._router.navigate(["store-menus"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(()=>this.refresh.emit())}loadStoreKinds(){const e=this;this.service.getStoreKinds().subscribe(t=>{e.AllStoreKinds=t.filter(t=>t.kind===e.relatedStoreKinds),console.log(t,e.AllStoreKinds,e.relatedStoreKinds)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store-promo"]],inputs:{relatedStoreKinds:"relatedStoreKinds"},outputs:{refresh:"refresh"},features:[f._Bn([i.XNV,c.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-4"],["for","store-store-name"],["id","store-store-name","formControlName","storeName","maxlength","255","minlength","1","autofocus","",1,"form-control",3,"readOnly"],["for","store-store-address-ar"],["id","store-store-address-ar","formControlName","addressAr","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-address-en"],["id","store-store-address-en","formControlName","addressEn","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-12"],["for","store-store-mapLocationUrl"],["id","store-store-mapLocationUrl","formControlName","mapLocationUrl","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],["for","store-store-rating"],["id","store-store-rating","formControlName","rating","type","number",1,"form-control",3,"readOnly"],[1,"form-group","col-md-8"],["for","store-store-description"],[1,"optional-input","badge","badge-info"],["id","store-store-description","formControlName","storeDescription",1,"form-control",3,"readOnly"],["for","store-store-discount"],["id","store-store-discount","formControlName","discount",1,"form-control",3,"readOnly"],["for","store-store-description-en"],["id","store-store-description-en","formControlName","storeDescriptionEn",1,"form-control",3,"readOnly"],["for","store-store-promocode"],["id","store-store-promocode","formControlName","promoCode",1,"form-control",3,"readOnly"],["for","store-store-merchantUrl"],["id","store-store-merchantUrl","formControlName","merchantUrl",1,"form-control",3,"readOnly"],[1,"form-group","col-md-6"],["for","store-store-useTitleAr"],["id","store-store-useTitleAr","formControlName","useTitleAr",1,"form-control",3,"readOnly"],["for","store-store-useTitleEn"],["id","store-store-useTitleEn","formControlName","useTitleEn",1,"form-control",3,"readOnly"],["for","store-store-useDescriptionAr"],["id","store-store-useDescriptionAr","formControlName","useDescriptionAr",1,"form-control",3,"readOnly"],["for","store-store-useDescriptionEn"],["id","store-store-useDescriptionEn","formControlName","useDescriptionEn",1,"form-control",3,"readOnly"],["for","store-photos-attachment-id"],["id","store-photos-attachment-id","formControlName","photosAttachmentId","acceptTypes",".png,.jpg,.jpeg","Entity","Store","name","photosAttachmentId",3,"maxFilesCount","readonly","attachmentUpdated"],["for","store-store-email"],["id","store-store-email","formControlName","email","maxlength","70",1,"form-control",3,"readOnly"],["for","store-store-mobile"],["name","mobile","formControlName","mobile",3,"searchCountryPlaceholder","inputId","inputReadOnly"],["for","coach-order-in-list"],["class","optional-input badge badge-info",4,"ngIf"],["id","coach-order-in-list","type","number","formControlName","orderInList",1,"form-control"],["for","country-country-id"],["id","country-country-id","formControlName","countryId",3,"getFn","lookupNameProp","disabled"],["class","form-group col-md-6",4,"ngIf"],["class","form-group col-md-12",4,"ngIf"],["for","storeKindId"],["name","storeKindId","id","storeKindId","formControlName","storeKindId",1,"custom-select","form-control",3,"abpDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","store-category-store-category-id"],["name","storeCategoryLinks","id","storeCategoryLinks","itemSize","30","formControlName","storeCategoryLinks","optionLabel","label","dataKey","value",1,"sw-tags",3,"options","virtualScroll","disabled","maxSelectedLabels"],["selectedActivity",""],["pTemplate","selectedItems"],["class","form-group col-md-4",4,"ngIf"],[1,"col-sm-12","modal-footer"],["type","button",1,"pull-left","btn-wide","btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit","class","pull-left btn-wide btn btn-success btn-save",4,"ngIf"],["for","city-city-id"],["formControlName","cityId",3,"country","lookupNameProp","disabled"],["for","cityId"],["name","cityId","id","cityId","itemSize","30","formControlName","cityId","dataKey","id",1,"sw-tags",3,"options","virtualScroll","disabled","optionLabel","maxSelectedLabels"],["selectedCity",""],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"],["for","general-lookup-status-general-lookup-id"],["id","statusGeneralLookupId","formControlName","statusGeneralLookupId",3,"getFn","disabled"],["type","submit",1,"pull-left","btn-wide","btn","btn-success","btn-save"]],template:function(e,t){1&e&&(f.TgZ(0,"abp-modal",0),f.NdJ("visibleChange",function(e){return t.isModalOpen=e}),f.YNc(1,je,2,2,"ng-template",null,1,f.W1O),f.YNc(3,st,131,112,"ng-template",null,2,f.W1O),f.qZA()),2&e&&f.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",t.isReadOnly)},directives:[r.zS,A.O5,b._Y,b.JL,i.YzZ,b.sg,l.hL,b.Fj,b.JJ,b.u,l.J5,L.m,b.nD,b.wO,i.Uqp,b.wV,k.Y,T.F,N.X,b.EJ,O.x3,b.YN,b.Kr,A.sg,S.NU,_.jx,U.b],pipes:[i.fuE],encapsulation:2}),e})();var at=function(e){return e[e.WithoutDelivery=42]="WithoutDelivery",e[e.WithDelivery=43]="WithDelivery",e}({});function nt(e,t){if(1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e){const e=f.oxw(2);f.xp6(1),f.hij(" ",f.lcZ(2,1,e.selected?"AbpUi::Edit":"::Meals")," ")}}function dt(e,t){1&e&&(f.TgZ(0,"h3"),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::View")," "))}function ct(e,t){if(1&e&&(f.YNc(0,nt,3,3,"h3",3),f.YNc(1,dt,3,3,"h3",3)),2&e){const e=f.oxw();f.Q6J("ngIf",!e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.isReadOnly)}}function ut(e,t){1&e&&(f.TgZ(0,"span",17),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.Oqu(f.lcZ(2,1,"::Optional")))}function pt(e,t){if(1&e&&(f.TgZ(0,"div",15),f.TgZ(1,"label",43),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"abp-city-lookup-select",44),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,4,"::City")," "),f.xp6(2),f.Q6J("country",e.countryId.value)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly)}}function mt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",50),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",51),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(4).removeItem(t,o.id)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit,o=f.oxw(4);f.xp6(2),f.hij(" ",o.langService.isRtl?e.displayName:e.displayNameEn," ")}}function gt(e,t){1&e&&(f.TgZ(0,"span",52),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::City")," "))}function ht(e,t){if(1&e&&(f.YNc(0,mt,4,1,"div",48),f.YNc(1,gt,3,3,"span",49)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function ft(e,t){if(1&e&&(f.TgZ(0,"div",9),f.TgZ(1,"label",45),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f.TgZ(4,"p-multiSelect",46,47),f.YNc(6,ht,2,2,"ng-template",37),f.qZA(),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,6,"::City")," "),f.xp6(2),f.s9C("optionLabel",e.langService.getLookupNameProp()),f.Q6J("options",e.citiesList)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4)}}function yt(e,t){if(1&e&&(f.TgZ(0,"option",32),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw(2);f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}function Zt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",50),f.TgZ(1,"span"),f._uU(2),f.TgZ(3,"span",51),f.NdJ("click",function(t){const o=f.CHM(e).$implicit;return f.oxw(3).removeItem(t,o.value)}),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=t.$implicit;f.xp6(2),f.hij(" ",e.label," ")}}function vt(e,t){1&e&&(f.TgZ(0,"span",52),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"::StoreCategory")," "))}function bt(e,t){if(1&e&&(f.YNc(0,Zt,4,1,"div",48),f.YNc(1,vt,3,3,"span",49)),2&e){const e=t.$implicit;f.Q6J("ngForOf",e),f.xp6(1),f.Q6J("ngIf",!e||0===e.length)}}function Lt(e,t){if(1&e&&(f.TgZ(0,"div",6),f.TgZ(1,"label",53),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f._UZ(4,"sw-lookup-select",54),f.qZA()),2&e){const e=f.oxw(2);f.xp6(2),f.hij(" ",f.lcZ(3,3,"::StatusGeneralLookup")," "),f.xp6(2),f.Q6J("getFn",e.langService.isRtl?e.lookupService.getItemStatusLookup:e.lookupService.getItemStatusLookupValues)("disabled",e.isReadOnly)}}function At(e,t){1&e&&(f.TgZ(0,"button",55),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA()),2&e&&(f.xp6(1),f.hij(" ",f.lcZ(2,1,"AbpUi::Save")," "))}function Ct(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"form",4),f.NdJ("ngSubmit",function(){return f.CHM(e),f.oxw().submitForm()}),f.TgZ(1,"div",5),f.TgZ(2,"div",6),f.TgZ(3,"label",7),f._uU(4),f.ALo(5,"abpLocalization"),f.qZA(),f._UZ(6,"input",8),f.qZA(),f.TgZ(7,"div",9),f.TgZ(8,"label",10),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f._UZ(11,"input",11),f.qZA(),f.TgZ(12,"div",12),f.TgZ(13,"label",13),f._uU(14),f.ALo(15,"abpLocalization"),f.qZA(),f._UZ(16,"input",14),f.qZA(),f.TgZ(17,"div",15),f.TgZ(18,"label",16),f._uU(19),f.ALo(20,"abpLocalization"),f.TgZ(21,"span",17),f._uU(22),f.ALo(23,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(24,"sw-attachment",18),f.NdJ("attachmentUpdated",function(t){return f.CHM(e),f.oxw().attachmentUpdated(t)}),f.qZA(),f.qZA(),f.TgZ(25,"div",15),f.TgZ(26,"label",19),f._uU(27),f.ALo(28,"abpLocalization"),f.qZA(),f._UZ(29,"input",20),f.qZA(),f.TgZ(30,"div",6),f.TgZ(31,"label",21),f._uU(32),f.ALo(33,"abpLocalization"),f.qZA(),f._UZ(34,"ngx-intl-tel-input",22),f.ALo(35,"abpLocalization"),f.qZA(),f.TgZ(36,"div",6),f.TgZ(37,"label",23),f._uU(38),f.ALo(39,"abpLocalization"),f.qZA(),f.YNc(40,ut,3,3,"span",24),f._UZ(41,"input",25),f.qZA(),f.TgZ(42,"div",6),f.TgZ(43,"label",26),f._uU(44),f.ALo(45,"abpLocalization"),f.qZA(),f._UZ(46,"sw-lookup-select",27),f.qZA(),f.YNc(47,pt,5,6,"div",28),f.YNc(48,ft,7,8,"div",29),f.TgZ(49,"div",15),f.TgZ(50,"label",30),f._uU(51),f.ALo(52,"abpLocalization"),f.qZA(),f.TgZ(53,"select",31),f._UZ(54,"option",32),f.YNc(55,yt,2,2,"option",33),f.qZA(),f.qZA(),f.TgZ(56,"div",9),f.TgZ(57,"label",34),f._uU(58),f.ALo(59,"abpLocalization"),f.qZA(),f.TgZ(60,"p-multiSelect",35,36),f.YNc(62,bt,2,2,"ng-template",37),f.qZA(),f.qZA(),f.YNc(63,Lt,5,5,"div",38),f.TgZ(64,"div",39),f.TgZ(65,"button",40,41),f._uU(67),f.ALo(68,"abpLocalization"),f.qZA(),f.YNc(69,At,3,3,"button",42),f.qZA(),f.qZA(),f.qZA()}if(2&e){const e=f.oxw();f.Q6J("formGroup",e.form),f.xp6(4),f.hij(" ",f.lcZ(5,36,"::StoreName")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(10,38,"::mapLocationUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(15,40,"::MerchantUrl")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(20,42,"::PhotosAttachmentId")," "),f.xp6(3),f.Oqu(f.lcZ(23,44,"::Optional")),f.xp6(2),f.Q6J("maxFilesCount",1)("readonly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(28,46,"::Email")," "),f.xp6(2),f.Q6J("readOnly",e.isReadOnly),f.xp6(3),f.hij(" ",f.lcZ(33,48,"::Mobile")," "),f.xp6(2),f.Q6J("searchCountryPlaceholder",f.lcZ(35,50,"::SearchCountry"))("inputId","store-store-mobile")("inputReadOnly",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(39,52,"::OrderInList")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(45,54,"::Country")," "),f.xp6(2),f.Q6J("getFn",e.service.getCountryLookup)("lookupNameProp",e.langService.getLookupNameProp())("disabled",e.isReadOnly),f.xp6(1),f.Q6J("ngIf",e.selected),f.xp6(1),f.Q6J("ngIf",!e.selected),f.xp6(3),f.hij(" ",f.lcZ(52,56,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("abpDisabled",e.isReadOnly),f.xp6(2),f.Q6J("ngForOf",e.AllStoreKinds),f.xp6(3),f.hij(" ",f.lcZ(59,58,"::StoreCategory")," "),f.xp6(2),f.Q6J("options",e.linksListData)("virtualScroll",!0)("disabled",e.isReadOnly)("maxSelectedLabels",4),f.xp6(3),f.Q6J("ngIf",e.isReadOnly),f.xp6(4),f.hij(" ",f.lcZ(68,60,"AbpUi::Cancel")," "),f.xp6(2),f.Q6J("ngIf",!e.isReadOnly)}}let It=(()=>{class e{constructor(e,t,o,i,r,s,l,a,n){this.track=e,this.service=t,this._router=o,this.confirmation=i,this.lookupService=r,this.dateService=s,this.langService=l,this.localizationService=a,this.fb=n,this.refresh=new f.vpe,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.ItemStatus=g.Ms,this.citiesList=[],this.pageQuery={maxResultCount:1e3,skipCount:0},this.isLoading=!0,this.requiredFields=[],this.feilds=[],this.isUpdatingMaxDeliveryPriceCategoryName=!1,this.relatedStoreKinds=h.Meals}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds()}clearFilters(){this.filters={}}get storeKindId(){return this.form.get("storeKindId")}get countryId(){return this.form.get("countryId")}get storeCategoryId(){return this.form.get("storeCategoryId")}get storeCategoryLinks(){return this.form.get("storeCategoryLinks")}get cityIds(){return this.form.get("cityId")}buildForm(){var e;const{storeName:t,mobile:o,email:i,photosAttachmentId:r,maxDeliveryPriceCategoryName:s,countryId:l,cityId:a,storeKindId:n,storeCategoryId:d,statusGeneralLookupId:c,storeCategoryLinks:u,orderInList:p}=(null===(e=this.selected)||void 0===e?void 0:e.store)||{};this.form=this.fb.group({storeName:[null!=t?t:null,[q.d.InvalidCharacterValidator(),q.d.RequiredValidator(),b.kI.minLength(1),b.kI.maxLength(255)]],email:[null!=i?i:null,[b.kI.required,q.d.InvalidCharacterValidator(),q.d.EmailValidator()]],mobile:[null!=o?o:null,[b.kI.required]],photosAttachmentId:[null!=r?r:0,[]],maxDeliveryPriceCategoryName:[null!=s?s:null,[]],countryId:[null!=l?l:null,[b.kI.required]],cityId:[null!=a?a:null,[b.kI.required]],storeKindId:[null!=n?n:null,[b.kI.required]],deliveryGeneralLookupId:[42,[b.kI.required]],storeCategoryId:[null!=d?d:null,[]],statusGeneralLookupId:[null!=c?c:null,[]],storeCategoryLinks:[null!=u?u:null,[b.kI.required]],photosAttachmentFiles:[void 0],orderInList:[null!=p?p:0,[]]}),n&&this.getCategoies(n),setTimeout(()=>{this.isModalOpen=!0},500),l&&this.getCities(l),this.updateMaxDeliveryPriceCategoryName(),this.feilds.forEach(e=>{this.form.get(e).valueChanges.subscribe(e=>this.updateMaxDeliveryPriceCategoryName())}),this.form.get("storeKindId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCategoies(e),e!=this.form.get("storeKindId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)}),this.form.get("deliveryGeneralLookupId").valueChanges.subscribe(e=>{this.updateMaxDeliveryPriceCategoryName(),this.form.get("deliveryGeneralLookupId").value==xt.WithDelivery&&(this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.get("latitude").clearValidators(),this.form.get("latitude").setValidators([b.kI.required]),this.form.updateValueAndValidity())}),this.form.get("countryId").valueChanges.pipe((0,I.b)(500)).subscribe(e=>{this.getCities(e),e!=this.form.get("countryId").value&&setTimeout(()=>{this.form.patchValue({storeCategoryLinks:[]}),this.getCategoies(e)},10)})}isOptional(e){return!this.requiredFields.some(t=>t==e)}updateMaxDeliveryPriceCategoryName(){if(!this.isUpdatingMaxDeliveryPriceCategoryName){if(this.isUpdatingMaxDeliveryPriceCategoryName=!0,this.form.get("deliveryGeneralLookupId").value==xt.WithDelivery){let e=!1,t=this.feilds[this.feilds.length-1];if(this.requiredFields=[],this.feilds.forEach(o=>{o==t&&(e=!0),this.form.get(o).value&&this.form.get(o).value>0&&(e=!0);const i=e;i?this.requiredFields.push(o):this.requiredFields=this.requiredFields.filter(e=>e!=o),i?(this.form.get(o).setValidators([b.kI.required,b.kI.min(0)]),this.form.get(o).setValue(this.form.get(o).value),this.form.get(o).updateValueAndValidity()):(this.form.get(o).clearValidators(),this.form.get(o).setValidators([b.kI.min(0)]),this.form.get(o).updateValueAndValidity())}),this.requiredFields.length>0){const e=this.localizationService.instant("::"+this.requiredFields[0]);this.form.get("maxDeliveryPriceCategoryName").setValue(e)}else this.form.get("maxDeliveryPriceCategoryName").setValue(void 0)}else this.requiredFields=[],this.feilds.forEach(e=>{this.form.get(e).setValue(void 0),this.form.get(e).clearValidators(),this.form.get(e).updateValueAndValidity()}),this.form.get("maxDeliveryPriceCategoryName").setValue(void 0);this.form.updateValueAndValidity({onlySelf:!1,emitEvent:!0}),setTimeout(()=>{this.isUpdatingMaxDeliveryPriceCategoryName=!1},10)}}get isShowCoordinates(){var e,t,o;return(null!==(o=null===(t=null===(e=this.form)||void 0===e?void 0:e.get("deliveryGeneralLookupId"))||void 0===t?void 0:t.value)&&void 0!==o?o:xt.WithoutDelivery)==xt.WithDelivery}attachmentUpdated(e){this.form.get("photosAttachmentFiles").setValue(e.files.toString())}getCategoies(e){this.service.getStoreCategoryLookup({},e).subscribe(e=>{let t=e.items.map(e=>{let t={};return t.label=e.displayName,t.value=e.id,t});setTimeout(()=>{this.linksListData=t},10)})}getLookupRequestDto(e){let t={};return e&&(t.filter=e),t.maxResultCount=1e3,t}getCities(e){let t=this.getLookupRequestDto(this.pageQuery.filter);t.countryId=e,this.service.getCityLookup(t).subscribe(({items:e})=>{this.citiesList=e})}hideForm(){this.isModalOpen=!1,this.isReadOnly=!1,this.form.reset()}showForm(e){this.buildForm(),this.isReadOnly=e}removeItem(e,t){return e.preventDefault(),e.stopPropagation(),this.selected.store.storeCategoryLinks=(this.selected.store.storeCategoryLinks||[]).filter(e=>e!==t)||[],!1}submitForm(){if(this.form.invalid)return console.log("invalid",this.form.errors),console.log(this.form.controls.storeName.errors),console.log(this.form.controls.addressAr.errors),console.log(this.form.controls.addressEn.errors),console.log(this.form.controls.rating.errors),console.log(this.form.controls.storeDescription.errors),console.log(this.form.controls.mobile.errors),console.log(this.form.controls.email.errors),console.log(this.form.controls.photosAttachmentId.errors),console.log(this.form.controls.longitude.errors),console.log(this.form.controls.latitude.errors),console.log(this.form.controls.deliveryPriceCategory1.errors),console.log(this.form.controls.deliveryPriceCategory2.errors),console.log(this.form.controls.deliveryPriceCategory3.errors),console.log(this.form.controls.deliveryPriceCategory4.errors),console.log(this.form.controls.deliveryPriceCategory5.errors),console.log(this.form.controls.deliveryPriceCategory6.errors),console.log(this.form.controls.maxDeliveryPriceCategoryName.errors),console.log(this.form.controls.mapLocationUrl.errors),console.log(this.form.controls.countryId.errors),console.log(this.form.controls.cityId.errors),console.log(this.form.controls.storeKindId.errors),console.log(this.form.controls.deliveryGeneralLookupId.errors),console.log(this.form.controls.storeCategoryId.errors),console.log(this.form.controls.statusGeneralLookupId.errors),console.log(this.form.controls.storeCategoryLinks.errors),console.log(this.form.controls.discount.errors),console.log(this.form.controls.promoCode.errors),console.log(this.form.controls.merchantUrl.errors),console.log(this.form.controls.useTitleAr.errors),console.log(this.form.controls.useTitleEn.errors),console.log(this.form.controls.useDescriptionAr.errors),console.log(this.form.controls.useDescriptionEn.errors),console.log(this.form.controls.storeDescriptionEn.errors),!1;this.storeCategoryLinks.value&&this.form.patchValue({storeCategoryLinks:this.storeCategoryLinks.value.map(e=>e.value)}),!this.selected&&this.cityIds.value&&this.form.patchValue({cityId:this.cityIds.value.map(e=>e.id)}),this.form.get("mobile").setValue(this.form.get("mobile").value.e00Number);let e=this.form.value;this.selected||(e.cityIds=e.cityId,e.cityId=null);const t=this.selected?this.service.update(this.selected.store.id,e):this.service.create(e);this.isModalBusy=!0,t.pipe((0,u.x)(()=>this.isModalBusy=!1),(0,x.b)(()=>this.hideForm())).subscribe(()=>this.refresh.emit())}create(){this.selected=void 0,this.showForm(!1)}update(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!1),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}pathcLinks(){this.form.patchValue({storeCategoryLinks:this.linksListData})}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}view(e){this.selected=e,this.getCategoies(e.store.storeKindId),this.showForm(!0),e.storeCategoryLinks&&this.form.patchValue({storeCategoryLinks:e.storeCategoryLinks})}editItems(e){this._router.navigate(["store-menus"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(()=>this.refresh.emit())}loadStoreKinds(){const e=this;this.service.getStoreKinds().subscribe(t=>{e.AllStoreKinds=t.filter(t=>t.kind===e.relatedStoreKinds),console.log(t,e.AllStoreKinds,e.relatedStoreKinds)})}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store-meals"]],inputs:{relatedStoreKinds:"relatedStoreKinds"},outputs:{refresh:"refresh"},features:[f._Bn([i.XNV,c.R])],decls:5,vars:3,consts:[["size","lg",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[4,"ngIf"],["validateOnSubmit","",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-md-4"],["for","store-store-name"],["id","store-store-name","formControlName","storeName","maxlength","255","minlength","1","autofocus","",1,"form-control",3,"readOnly"],[1,"form-group","col-md-12"],["for","store-store-mapLocationUrl"],["id","store-store-mapLocationUrl","formControlName","mapLocationUrl","maxlength","255","minlength","1",1,"form-control",3,"readOnly"],[1,"form-group","col-md-8"],["for","store-store-merchantUrl"],["id","store-store-merchantUrl","formControlName","merchantUrl",1,"form-control",3,"readOnly"],[1,"form-group","col-md-6"],["for","store-photos-attachment-id"],[1,"optional-input","badge","badge-info"],["id","store-photos-attachment-id","formControlName","photosAttachmentId","acceptTypes",".png,.jpg,.jpeg","Entity","Store","name","photosAttachmentId",3,"maxFilesCount","readonly","attachmentUpdated"],["for","store-store-email"],["id","store-store-email","formControlName","email","maxlength","70",1,"form-control",3,"readOnly"],["for","store-store-mobile"],["name","mobile","formControlName","mobile",3,"searchCountryPlaceholder","inputId","inputReadOnly"],["for","coach-order-in-list"],["class","optional-input badge badge-info",4,"ngIf"],["id","coach-order-in-list","type","number","formControlName","orderInList",1,"form-control"],["for","country-country-id"],["id","country-country-id","formControlName","countryId",3,"getFn","lookupNameProp","disabled"],["class","form-group col-md-6",4,"ngIf"],["class","form-group col-md-12",4,"ngIf"],["for","storeKindId"],["name","storeKindId","id","storeKindId","formControlName","storeKindId",1,"custom-select","form-control",3,"abpDisabled"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","store-category-store-category-id"],["name","storeCategoryLinks","id","storeCategoryLinks","itemSize","30","formControlName","storeCategoryLinks","optionLabel","label","dataKey","value",1,"sw-tags",3,"options","virtualScroll","disabled","maxSelectedLabels"],["selectedActivity",""],["pTemplate","selectedItems"],["class","form-group col-md-4",4,"ngIf"],[1,"col-sm-12","modal-footer"],["type","button",1,"pull-left","btn-wide","btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit","class","pull-left btn-wide btn btn-success btn-save",4,"ngIf"],["for","city-city-id"],["formControlName","cityId",3,"country","lookupNameProp","disabled"],["for","cityId"],["name","cityId","id","cityId","itemSize","30","formControlName","cityId","dataKey","id",1,"sw-tags",3,"options","virtualScroll","disabled","optionLabel","maxSelectedLabels"],["selectedCity",""],["class","ui-multiselected-item-token ui-corner-all sw-tag",4,"ngFor","ngForOf"],["class","ui-multiselected-empty-token ui-corner-all sw-tag",4,"ngIf"],[1,"ui-multiselected-item-token","ui-corner-all","sw-tag"],[1,"remove-item",3,"click"],[1,"ui-multiselected-empty-token","ui-corner-all","sw-tag"],["for","general-lookup-status-general-lookup-id"],["id","statusGeneralLookupId","formControlName","statusGeneralLookupId",3,"getFn","disabled"],["type","submit",1,"pull-left","btn-wide","btn","btn-success","btn-save"]],template:function(e,t){1&e&&(f.TgZ(0,"abp-modal",0),f.NdJ("visibleChange",function(e){return t.isModalOpen=e}),f.YNc(1,ct,2,2,"ng-template",null,1,f.W1O),f.YNc(3,Ct,70,62,"ng-template",null,2,f.W1O),f.qZA()),2&e&&f.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",t.isReadOnly)},directives:[r.zS,A.O5,b._Y,b.JL,i.YzZ,b.sg,l.hL,b.Fj,b.JJ,b.u,l.J5,L.m,b.nD,b.wO,i.Uqp,k.Y,T.F,b.wV,N.X,b.EJ,O.x3,b.YN,b.Kr,A.sg,S.NU,_.jx,U.b],pipes:[i.fuE],encapsulation:2}),e})();var xt=function(e){return e[e.WithoutDelivery=42]="WithoutDelivery",e[e.WithDelivery=43]="WithDelivery",e}({}),qt=o(55e3),kt=o(52201);function Tt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",41),f.TgZ(1,"button",42),f._uU(2),f.ALo(3,"abpLocalization"),f.qZA(),f.TgZ(4,"div",43),f.TgZ(5,"a",44),f.NdJ("click",function(){return f.CHM(e),f.oxw(),f.MAs(71).create()}),f.TgZ(6,"span"),f._UZ(7,"i",45),f.qZA(),f.TgZ(8,"span",46),f._uU(9),f.ALo(10,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(11,"a",44),f.NdJ("click",function(){return f.CHM(e),f.oxw(),f.MAs(67).create()}),f.TgZ(12,"span"),f._UZ(13,"i",45),f.qZA(),f.TgZ(14,"span",46),f._uU(15),f.ALo(16,"abpLocalization"),f.qZA(),f.qZA(),f.TgZ(17,"a",44),f.NdJ("click",function(){return f.CHM(e),f.oxw(),f.MAs(69).create()}),f.TgZ(18,"span"),f._UZ(19,"i",45),f.qZA(),f.TgZ(20,"span",46),f._uU(21),f.ALo(22,"abpLocalization"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}2&e&&(f.xp6(2),f.hij(" ",f.lcZ(3,4,"::NewStore")," "),f.xp6(7),f.hij(" ",f.lcZ(10,6,"::PromocodeStore")," "),f.xp6(6),f.hij(" ",f.lcZ(16,8,"::Course")," "),f.xp6(6),f.hij(" ",f.lcZ(22,10,"::Championship")," "))}function Nt(e,t){if(1&e&&(f.TgZ(0,"option",23),f._uU(1),f.qZA()),2&e){const e=t.$implicit,o=f.oxw();f.Q6J("ngValue",e.id),f.xp6(1),f.hij(" ",o.langService.isRtl?e.storeKindName:e.storeKindNameEn," ")}}const Ut=function(e){return{attachmentId:e,entity:"Store"}};function Ot(e,t){1&e&&(f._UZ(0,"img",47),f.ALo(1,"async"),f.ALo(2,"imgdownload")),2&e&&f.Q6J("src",f.lcZ(1,1,f.lcZ(2,3,f.VKq(5,Ut,t.row.store.photosAttachmentId))),f.LSH)}function St(e,t){if(1&e&&(f.TgZ(0,"div",48),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA(),f.TgZ(3,"span",49),f._UZ(4,"is-empty",50),f.qZA()),2&e){const e=t.row;f.xp6(1),f.Oqu(f.lcZ(2,2,"::StoreName")),f.xp6(3),f.Q6J("value",e.store.storeName)}}function _t(e,t){if(1&e&&(f.TgZ(0,"div",48),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA(),f.TgZ(3,"span",49),f._UZ(4,"is-empty",50),f.qZA()),2&e){const e=t.row,o=f.oxw();f.xp6(1),f.Oqu(f.lcZ(2,2,"::City")),f.xp6(3),f.Q6J("value",o.langService.isRtl?null==e.city?null:e.city.cityName:null==e.city?null:e.city.cityNameEn)}}function wt(e,t){if(1&e&&(f.TgZ(0,"div",48),f._uU(1),f.ALo(2,"abpLocalization"),f.qZA(),f.TgZ(3,"span",49),f._UZ(4,"is-empty",50),f.qZA()),2&e){const e=t.row,o=f.oxw();f.xp6(1),f.Oqu(f.lcZ(2,2,"::StoreTypeGeneralLookup")),f.xp6(3),f.Q6J("value",o.langService.isRtl?e.storeKind.storeKindName:e.storeKind.storeKindNameEn)}}function Jt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).row;return f.oxw(),f.MAs(71).update(t)}),f._UZ(1,"i",56),f.TgZ(2,"div"),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,1,"AbpUi::Edit")))}function Dt(e,t){1&e&&(f.TgZ(0,"div"),f.YNc(1,Jt,5,3,"div",54),f.qZA()),2&e&&(f.xp6(1),f.Q6J("abpPermission","Physic.Stores.Edit"))}function Ft(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).row;return f.oxw(),f.MAs(73).update(t)}),f._UZ(1,"i",56),f.TgZ(2,"div"),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,1,"AbpUi::Edit")))}function Vt(e,t){1&e&&(f.TgZ(0,"div"),f.YNc(1,Ft,5,3,"div",54),f.qZA()),2&e&&(f.xp6(1),f.Q6J("abpPermission","Physic.Stores.Edit"))}function Pt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).row;return f.oxw(),f.MAs(69).update(t)}),f._UZ(1,"i",56),f.TgZ(2,"div"),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,1,"AbpUi::Edit")))}function Qt(e,t){1&e&&(f.TgZ(0,"div"),f.YNc(1,Pt,5,3,"div",54),f.qZA()),2&e&&(f.xp6(1),f.Q6J("abpPermission","Physic.Stores.Edit"))}function Rt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).row;return f.oxw(),f.MAs(67).update(t)}),f._UZ(1,"i",56),f.TgZ(2,"div"),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,1,"AbpUi::Edit")))}function zt(e,t){1&e&&(f.TgZ(0,"div"),f.YNc(1,Rt,5,3,"div",54),f.qZA()),2&e&&(f.xp6(1),f.Q6J("abpPermission","Physic.Stores.Edit"))}function Yt(e,t){1&e&&f._UZ(0,"i",60)}function Mt(e,t){1&e&&f._UZ(0,"i",61)}function Et(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",57),f.NdJ("click",function(){f.CHM(e);const t=f.oxw().row;return f.oxw().changeStatus(t)}),f.ALo(1,"abpLocalization"),f.YNc(2,Yt,1,0,"i",58),f.YNc(3,Mt,1,0,"i",59),f.TgZ(4,"div"),f._uU(5),f.ALo(6,"abpLocalization"),f.qZA(),f.qZA()}if(2&e){const e=f.oxw().row,t=f.oxw();f.Q6J("ngbTooltip",f.lcZ(1,4,e.store.statusGeneralLookupId!=t.ItemStatus.Disabled.valueOf()?"::Active":"::Deactive")),f.xp6(2),f.Q6J("ngIf",e.store.statusGeneralLookupId!=t.ItemStatus.Disabled.valueOf()),f.xp6(1),f.Q6J("ngIf",e.store.statusGeneralLookupId==t.ItemStatus.Disabled.valueOf()),f.xp6(2),f.Oqu(f.lcZ(6,6,"::StatusGeneralLookup"))}}function jt(e,t){if(1&e){const e=f.EpF();f.TgZ(0,"div",55),f.NdJ("click",function(){f.CHM(e);const t=f.oxw(2).row;return f.oxw().editItems(t)}),f._UZ(1,"i",62),f.TgZ(2,"div"),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f.qZA()}2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,1,"::EditItems")))}function Kt(e,t){1&e&&(f.TgZ(0,"div"),f.YNc(1,jt,5,3,"div",54),f.qZA()),2&e&&(f.xp6(1),f.Q6J("abpPermission","Physic.Stores.Edit"))}function Gt(e,t){if(1&e&&(f.TgZ(0,"div",51),f.YNc(1,Dt,2,1,"div",52),f.YNc(2,Vt,2,1,"div",52),f.YNc(3,Qt,2,1,"div",52),f.YNc(4,zt,2,1,"div",52),f.YNc(5,Et,7,8,"div",53),f.YNc(6,Kt,2,1,"div",52),f.qZA()),2&e){const e=t.row;f.xp6(1),f.Q6J("ngIf",1===e.storeKind.kind),f.xp6(1),f.Q6J("ngIf",2===e.storeKind.kind),f.xp6(1),f.Q6J("ngIf",3===e.storeKind.kind),f.xp6(1),f.Q6J("ngIf",4===e.storeKind.kind),f.xp6(1),f.Q6J("abpPermission","Physic.StoreMenus.Edit"),f.xp6(1),f.Q6J("ngIf",1!==e.storeKind.kind)}}const Wt=function(){return{standalone:!0}},Bt=function(e){return{emptyMessage:e}},Ht=[{path:"",component:(()=>{class e{constructor(e,t,o,i,r,s,l,a,n,d){this.list=e,this.track=t,this.service=o,this._router=i,this.confirmation=r,this.lookupService=s,this.dateService=l,this.langService=a,this.localizationService=n,this.fb=d,this.data={items:[],totalCount:0},this.filters={},this.isFiltersHidden=!0,this.ItemStatus=g.Ms,this.isLoading=!0}get showFilter(){return this._showFilter}set showFilter(e){this._showFilter=e,this.isFiltersHidden=!e}ngOnInit(){this.loadStoreKinds(),this.list.hookToQuery(e=>{let t=Object.assign({},this.filters);return this.service.getList(Object.assign(Object.assign({},e),t)).pipe((0,u.x)(()=>this.isLoading=!1))}).subscribe(e=>this.data=e)}clearFilters(){this.filters={},this.list.get()}qr(e){this.service.getStoreQrById(e.store.id).subscribe(e=>{var t=document.createElement("a");t.href=e.qr,t.download=e.storeName+" qr.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})}editItems(e){this._router.navigate(e.storeKind.kind===h.Course?["store-menus/sub-course"]:["store-menus/sub"],{queryParams:{id:e.store.id,storename:e.store.storeName}})}changeStatus(e){this.confirmation.warn(e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?"::ActiveConfirmationMessage":"::DeactiveConfirmationMessage","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,p.h)(e=>e===r.Tv.Status.confirm),(0,m.w)(()=>e.store.statusGeneralLookupId===g.Ms.Disabled.valueOf()?this.service.enableStoreById(e.store.id):this.service.disableStoreById(e.store.id))).subscribe(this.list.get)}loadStoreKinds(){this.service.getStoreKinds().subscribe(e=>{this.AllStoreKinds=e})}refresh(){this.list.get()}}return e.\u0275fac=function(t){return new(t||e)(f.Y36(i.XNV),f.Y36(i.vR3),f.Y36(y.d),f.Y36(d.F0),f.Y36(r.YP),f.Y36(Z.W),f.Y36(c.R),f.Y36(v.C),f.Y36(i.oQ8),f.Y36(b.qu))},e.\u0275cmp=f.Xpm({type:e,selectors:[["app-store"]],features:[f._Bn([i.XNV,c.R])],decls:74,vars:51,consts:[[1,"row","entry-row","align-items-center"],[1,"col-12","col-sm-auto","content-header-container"],[1,"content-header-title","custom-green"],[1,"col-lg","my-auto"],[1,"text-lg-right"],[1,"custom-control","custom-switch"],["type","checkbox","id","customSwitch1",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","customSwitch1",1,"custom-control-label"],[1,"col-auto"],["ngbDropdown","","class","dropdown ",4,"abpPermission"],["id","advanced-content-filters",3,"ngbCollapse"],[1,"card","mb-4"],[1,"card-body"],[3,"keyup.enter"],["filterForm",""],[1,"row"],[1,"col-md-8","col-sm-auto"],[1,"form-group"],["for","storeNameFilter"],["id","storeNameFilter",1,"form-control",3,"ngModel","ngModelOptions","ngModelChange"],[1,"col-md-4","col-sm-auto"],["for","storeKindId"],["name","filterstoreKindId","id","filterstoreKindId",1,"custom-select","form-control",3,"ngModel","ngModelChange"],[3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"col-md-12","align-self-end","mb-3"],[1,"col"],["type","button",1,"btn","btn-outline-primary","btn-block",3,"click"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],["default","",1,"app-dataview",3,"messages","rows","count","list","headerHeight"],["prop","store.storeName",3,"name"],["ngx-datatable-cell-template",""],["prop","city.cityName",3,"name"],["prop","generalLookup.generalLookupName",3,"name"],[3,"name","maxWidth","width","sortable"],[3,"refresh"],["general",""],["course",""],["champ",""],["promo",""],["meals",""],["ngbDropdown","",1,"dropdown"],["id","dropdownMenuLink","ngbDropdownToggle","",1,"btn","btn-success","btn-new","btn-lg"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-item","pointer",3,"click"],["aria-hidden","true",1,"fa","fa-plus","mr-1"],[1,""],["alt","",1,"s-icon-lg",3,"src"],[1,"custom-gray","custom-600"],[1,"custom-black","custom-600"],[3,"value"],[1,"action-items"],[4,"ngIf"],["class","action-item",3,"ngbTooltip","click",4,"abpPermission"],["class","action-item",3,"click",4,"abpPermission"],[1,"action-item",3,"click"],[1,"fa","fa-pen","custom-green"],[1,"action-item",3,"ngbTooltip","click"],["class","fas fa-toggle-on custom-green action-boarder text-success",4,"ngIf"],["class","fas fa-toggle-off custom-green action-boarder",4,"ngIf"],[1,"fas","fa-toggle-on","custom-green","action-boarder","text-success"],[1,"fas","fa-toggle-off","custom-green","action-boarder"],[1,"fas","fa-list-ol","custom-green"]],template:function(e,t){1&e&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"h1",2),f._uU(3),f.ALo(4,"abpLocalization"),f.qZA(),f._UZ(5,"abp-breadcrumb"),f.qZA(),f.TgZ(6,"div",3),f.TgZ(7,"div",4),f.TgZ(8,"div",5),f.TgZ(9,"input",6),f.NdJ("ngModelChange",function(e){return t.showFilter=e}),f.qZA(),f.TgZ(10,"label",7),f._uU(11),f.ALo(12,"abpLocalization"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(13,"div",8),f.TgZ(14,"div",4),f.YNc(15,Tt,23,12,"div",9),f.qZA(),f.qZA(),f.qZA(),f.TgZ(16,"div",10),f.TgZ(17,"div",11),f.TgZ(18,"div",12),f.TgZ(19,"form",13,14),f.NdJ("keyup.enter",function(){return t.list.get()}),f.TgZ(21,"div",15),f.TgZ(22,"div",16),f.TgZ(23,"div",17),f.TgZ(24,"label",18),f._uU(25),f.ALo(26,"abpLocalization"),f.qZA(),f.TgZ(27,"input",19),f.NdJ("ngModelChange",function(e){return t.filters.filterText=e}),f.qZA(),f.qZA(),f.qZA(),f.TgZ(28,"div",20),f.TgZ(29,"label",21),f._uU(30),f.ALo(31,"abpLocalization"),f.qZA(),f.TgZ(32,"select",22),f.NdJ("ngModelChange",function(e){return t.filters.storeTypeGeneralLookupId=e}),f._UZ(33,"option",23),f.YNc(34,Nt,2,2,"option",24),f.qZA(),f.qZA(),f.TgZ(35,"div",25),f.TgZ(36,"div",15),f._UZ(37,"div",26),f.TgZ(38,"div",8),f.TgZ(39,"button",27),f.NdJ("click",function(){return t.clearFilters()}),f.TgZ(40,"span"),f._uU(41),f.ALo(42,"abpLocalization"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(43,"div",8),f.TgZ(44,"button",28),f.NdJ("click",function(){return t.list.get()}),f.TgZ(45,"span"),f._uU(46),f.ALo(47,"abpLocalization"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(48,"ngx-datatable",29),f.TgZ(49,"ngx-datatable-column",30),f.ALo(50,"abpLocalization"),f.YNc(51,Ot,3,7,"ng-template",31),f.qZA(),f.TgZ(52,"ngx-datatable-column",30),f.ALo(53,"abpLocalization"),f.YNc(54,St,5,4,"ng-template",31),f.qZA(),f.TgZ(55,"ngx-datatable-column",32),f.ALo(56,"abpLocalization"),f.YNc(57,_t,5,4,"ng-template",31),f.qZA(),f.TgZ(58,"ngx-datatable-column",33),f.ALo(59,"abpLocalization"),f.YNc(60,wt,5,4,"ng-template",31),f.qZA(),f.TgZ(61,"ngx-datatable-column",34),f.ALo(62,"abpLocalization"),f.YNc(63,Gt,7,6,"ng-template",31),f.qZA(),f.qZA(),f.TgZ(64,"app-store-general",35,36),f.NdJ("refresh",function(){return t.refresh()}),f.qZA(),f.TgZ(66,"app-store-course",35,37),f.NdJ("refresh",function(){return t.refresh()}),f.qZA(),f.TgZ(68,"app-store-champ",35,38),f.NdJ("refresh",function(){return t.refresh()}),f.qZA(),f.TgZ(70,"app-store-promo",35,39),f.NdJ("refresh",function(){return t.refresh()}),f.qZA(),f.TgZ(72,"app-store-meals",35,40),f.NdJ("refresh",function(){return t.refresh()}),f.qZA()),2&e&&(f.xp6(3),f.Oqu(f.lcZ(4,26,"::Stores")),f.xp6(6),f.Q6J("ngModel",t.showFilter),f.xp6(2),f.Oqu(f.lcZ(12,28,"::SeeAdvancedFilters")),f.xp6(4),f.Q6J("abpPermission","Physic.Stores.Create"),f.xp6(1),f.Q6J("ngbCollapse",t.isFiltersHidden),f.xp6(9),f.hij(" ",f.lcZ(26,30,"::SearchFor")," "),f.xp6(2),f.Q6J("ngModel",t.filters.filterText)("ngModelOptions",f.DdM(48,Wt)),f.xp6(3),f.hij(" ",f.lcZ(31,32,"::StoreTypeGeneralLookup")," "),f.xp6(2),f.Q6J("ngModel",t.filters.storeTypeGeneralLookupId),f.xp6(2),f.Q6J("ngForOf",t.AllStoreKinds),f.xp6(7),f.Oqu(f.lcZ(42,34,"::Clear")),f.xp6(5),f.Oqu(f.lcZ(47,36,"::Search")),f.xp6(2),f.Q6J("messages",f.VKq(49,Bt,t.isLoading?"<div class=loader><div></div></div>":"<div class=data-empty></div>"))("rows",t.data.items)("count",t.data.totalCount)("list",t.list)("headerHeight",0),f.xp6(1),f.s9C("name",f.lcZ(50,38,"::StoreName")),f.xp6(3),f.s9C("name",f.lcZ(53,40,"::StoreName")),f.xp6(3),f.s9C("name",f.lcZ(56,42,"::City")),f.xp6(3),f.s9C("name",f.lcZ(59,44,"::StoreTypeGeneralLookup")),f.xp6(3),f.Q6J("name",f.lcZ(62,46,"AbpUi::Actions"))("maxWidth",400)("width",400)("sortable",!1))},directives:[r.LI,b.Wl,b.JJ,b.On,L.m,i.l97,s._D,b._Y,b.JL,b.F,b.Fj,b.EJ,b.YN,b.Kr,A.sg,C.nE,r.x7,r.j3,C.UC,C.vq,re,Ae,ze,lt,It,s.jt,s.iD,s.Vi,qt.K,A.O5,s._L],pipes:[i.fuE,A.Ov,kt.H],styles:[".s-icon-lg[_ngcontent-%COMP%]{width:72px;height:72px;border-radius:50%;padding:2px;-o-object-fit:cover;object-fit:cover}@media (max-width:992px){.s-icon-lg[_ngcontent-%COMP%]{width:45px;height:45px}}"]}),e})(),canActivate:[i.a1M,i.nG9]}];let $t=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[d.Bz.forChild(Ht)],d.Bz]}),e})();var Xt=o(56137);let eo=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=f.oAB({type:e}),e.\u0275inj=f.cJS({imports:[[$t,i.IR2,r.e2,n.Ck,a.vv,l.h2,s.lQ,s.M,Xt.m,s.XC]]}),e})()}}]);