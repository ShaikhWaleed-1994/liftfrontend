(self.webpackChunkPhysic=self.webpackChunkPhysic||[]).push([[17013],{38749:function(e,t,i){"use strict";i.d(t,{K:function(){return Q}});var s=i(55679),r=i(31041),n=i(2996),a=i(11520),o=i(43835),c=i(44689),d=i(35366),l=i(46700),g=i(94773),p=i(28157),u=i(43117),m=i(89486),h=i(99046),x=i(61116),f=i(55794),y=i(23733),v=i(42163),b=i(28451),I=i(40739),Z=i(67917),D=i(83865),S=i(40906),E=i(26289),w=i(14160),C=i(73545),A=i(65122),T=i(46140),M=i(26471);const N=["board"];function P(e,t){}function q(e,t){if(1&e&&d._UZ(0,"app-exercise-program-day",5),2&e){const e=t.extraData,i=t.day,s=d.oxw();d.Q6J("exerciseDayModel",e)("isSummary",s.isSummary)("day",i)("IsEditable",!1)}}function k(e,t){}let _=(()=>{class e{constructor(e,t,i,s,r,n,a,o,c,d,l,g){this.list=e,this.track=t,this.programService=i,this.dayService=s,this.confirmation=r,this.navLoadingService=n,this.dateService=a,this.langService=o,this.permissionService=c,this.toaster=d,this.analyticsService=l,this.fb=g,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!0,this._programId=0,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1}ngOnInit(){}get programId(){return this._programId}set programId(e){console.log("set prog"+e),this._programId=e,this._programId>0&&this.loadProgram()}loadProgram(){const e=this;let t=this.programId;0!==t&&(isNaN(t)||e.programService.getWithNavigationProperties(Number(t)).subscribe(t=>{e.selected=t;let i={};i.exerciseProgramId=t.exerciseProgram.id,i.maxResultCount=1e3,e.dayService.getList(i).subscribe(t=>{e.selectedDays=t,e.initialProgram()})}))}initialProgram(){this.board.setup(1,Z.w.OneWeek,!0,void 0,"planed-ex","0")}dataChanged(e){}dayDataChanged(e){}weekCreated(e){e.days.forEach((e,t)=>{e.InitiateItems();let i=this.selectedDays.items.filter(t=>t.exerciseProgramDay.dayNumber==e.dayId);if(i.length>0){const t=i[0].exerciseProgramDay;e.addItem(new D.h(t.id,t.name,e,new S.k(t)))}})}weekDeleted(e){}itemDeleted(e){this.dayService.delete(e.itemId).subscribe(t=>{this.selectedDays.items=this.selectedDays.items.filter(t=>t.exerciseProgramDay.id!=e.itemId)})}itemEdited(e){this.toaster.info("::ProgramIsReadOnly")}itemViewed(e){this.toaster.info("::ProgramIsReadOnly")}itemCreated(e){}itemCopiedMoved(e){}get isCurrentUserAdmin(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.XNV),d.Y36(l.vR3),d.Y36(E.J),d.Y36(g._k),d.Y36(s.YP),d.Y36(w.a),d.Y36(n.R),d.Y36(C.C),d.Y36(l.$AH),d.Y36(s.MJ),d.Y36(A.y),d.Y36(r.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-exercise-programs-viewer"]],viewQuery:function(e,t){if(1&e&&d.Gf(N,5),2&e){let e;d.iGM(e=d.CRH())&&(t.board=e.first)}},inputs:{programId:"programId"},features:[d._Bn([l.XNV,n.R])],decls:8,vars:3,consts:[[3,"noHead","IsEditable","isDayFullHight","itemViewed","weekCreated","weekDeleted","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["itemContent",""],["navContent",""],[3,"exerciseDayModel","isSummary","day","IsEditable"]],template:function(e,t){1&e&&(d.TgZ(0,"app-board-container",0,1),d.NdJ("itemViewed",function(e){return t.itemViewed(e)})("weekCreated",function(e){return t.weekCreated(e)})("weekDeleted",function(e){return t.weekDeleted(e)})("itemDeleted",function(e){return t.itemDeleted(e)})("itemCreated",function(e){return t.itemCreated(e)})("itemCopiedMoved",function(e){return t.itemCopiedMoved(e)})("itemEdited",function(e){return t.itemEdited(e)}),d.YNc(2,P,0,0,"ng-template",null,2,d.W1O),d.YNc(4,q,1,4,"ng-template",null,3,d.W1O),d.YNc(6,k,0,0,"ng-template",null,4,d.W1O),d.qZA()),2&e&&d.Q6J("noHead",!0)("IsEditable",!1)("isDayFullHight",!t.isSummary)},directives:[T.U,M.H],styles:["@media screen{.btn-group{display:flex}.btn-group button{width:auto}}.week-list-container{height:auto!important}"],encapsulation:2}),e})();function U(e,t){if(1&e&&(d.TgZ(0,"h3"),d._uU(1),d.ALo(2,"abpLocalization"),d.qZA()),2&e){const e=d.oxw();d.xp6(1),d.hij(" ",d.lcZ(2,1,e.selected?"AbpUi::Edit":"::AssignExerciseProgram")," ")}}function L(e,t){1&e&&(d.TgZ(0,"div",11),d.TgZ(1,"label",21),d._uU(2),d.ALo(3,"abpLocalization"),d.qZA(),d._UZ(4,"sw-date-picker",22),d.qZA()),2&e&&(d.xp6(2),d.hij(" ",d.lcZ(3,1,"::StartDate")," "))}function O(e,t){if(1&e&&(d.TgZ(0,"span",25),d._uU(1),d.qZA()),2&e){const e=d.oxw().$implicit;d.xp6(1),d.hij(" ",e.selectionCount," ")}}function J(e,t){if(1&e&&(d.TgZ(0,"p",23),d._uU(1),d.qZA(),d.YNc(2,O,2,1,"span",24)),2&e){const e=t.$implicit;d.xp6(1),d.hij(" ",e.displayName," "),d.xp6(1),d.Q6J("ngIf",e.selectionCount>0)}}function Y(e,t){if(1&e&&d._UZ(0,"app-exercise-programs-viewer",26),2&e){const e=d.oxw(2);d.Q6J("programId",e.getExerciseProgramId())}}const F=function(){return{standalone:!0}};function G(e,t){if(1&e){const e=d.EpF();d.TgZ(0,"form",3),d.NdJ("ngSubmit",function(){return d.CHM(e),d.oxw().submitForm()}),d.TgZ(1,"div",4),d._UZ(2,"div",5),d.YNc(3,L,5,3,"div",6),d.TgZ(4,"div",7),d.TgZ(5,"label",8),d._uU(6),d.ALo(7,"abpLocalization"),d.qZA(),d.TgZ(8,"span",9),d._uU(9),d.ALo(10,"abpLocalization"),d.qZA(),d.TgZ(11,"input",10),d.NdJ("ngModelChange",function(t){return d.CHM(e),d.oxw().userIntensityLevel=t}),d.qZA(),d.qZA(),d.TgZ(12,"div",11),d.TgZ(13,"label",12),d._uU(14),d.ALo(15,"abpLocalization"),d.qZA(),d.TgZ(16,"p-autoComplete",13),d.NdJ("onClear",function(){return d.CHM(e),d.oxw().onClear()})("completeMethod",function(t){return d.CHM(e),d.oxw().startSearchProgram(t)})("search",function(t){return d.CHM(e),d.oxw().startSearchProgram(t)}),d.ALo(17,"abpLocalization"),d.YNc(18,J,3,2,"ng-template",14),d.qZA(),d.qZA(),d.TgZ(19,"div",5),d.YNc(20,Y,1,1,"app-exercise-programs-viewer",15),d.qZA(),d.qZA(),d.TgZ(21,"div",16),d.TgZ(22,"button",17,18),d._uU(24),d.ALo(25,"abpLocalization"),d.qZA(),d.TgZ(26,"button",19),d._UZ(27,"i",20),d._uU(28),d.ALo(29,"abpLocalization"),d.qZA(),d.qZA(),d.qZA()}if(2&e){const e=d.oxw();d.Q6J("formGroup",e.form),d.xp6(3),d.Q6J("ngIf",!e.isMutipleAssign),d.xp6(3),d.hij(" ",d.lcZ(7,15,"::IntensityLevel")," "),d.xp6(3),d.hij(" ",d.lcZ(10,17,"::IntensityLevel"+e.userIntensityLevel)," "),d.xp6(2),d.Q6J("step",1)("ngModel",e.userIntensityLevel)("ngModelOptions",d.DdM(27,F)),d.xp6(3),d.hij(" ",d.lcZ(15,19,"::ExerciseProgram")," "),d.xp6(2),d.s9C("placeholder",d.lcZ(17,21,"::ExerciseProgram")),d.Q6J("suggestions",e.AllPrograms)("type",e.searchType())("dropdown",!0),d.xp6(4),d.Q6J("ngIf",e.getExerciseProgramId()),d.xp6(4),d.hij(" ",d.lcZ(25,23,"AbpUi::Cancel")," "),d.xp6(4),d.hij(" ",d.lcZ(29,25,"::Ok")," ")}}let Q=(()=>{class e{constructor(e,t,i,s,r,n,a,o,c,d,l){this.list=e,this.track=t,this.service=i,this.traineeService=s,this.confirmation=r,this.dateService=n,this.localCacheService=a,this.toaster=o,this.l=c,this.assignExerciseProgramService=d,this.fb=l,this.isModalBusy=!1,this.isModalOpen=!1,this._userIntensityLevel=3,this.filters={},this.isMutipleAssign=!1}ngOnInit(){}buildForm(){var e;const{exerciseProgramId:t}=(null===(e=this.selected)||void 0===e?void 0:e.assignedExerciseProgram)||{};this.form=this.fb.group({exerciseProgramId:[null!=t?t:null,[r.kI.required]],users:[[]],startDate:[void 0,[r.kI.required]]}),this.form.get("startDate").valueChanges.subscribe(e=>{console.log(e)})}createUser(){return this.fb.group({value:"",label:""})}hideForm(){this.isModalOpen=!1,setTimeout(()=>{this.form.reset()},100)}showForm(){this.buildForm(),this.isModalOpen=!0,this.getIntensityLevelForUser()}get userIntensityLevel(){return this._userIntensityLevel}set userIntensityLevel(e){e!=this._userIntensityLevel&&(this.AllPrograms=[],this.form&&this.form.get("exerciseProgramId").setValue(void 0)),this._userIntensityLevel=e}getIntensityLevelForUser(){let e={};e.traineeId=this.filters.traineeId,e.traineeId&&e.traineeId>0&&this.traineeService.getTraineeIntensityLevelForUserByInput(e).subscribe(e=>{this.userIntensityLevel=e.intensityLevel})}submitFormInternalForMultiple(){const e=this;let t={items:[]},i=this.form.get("exerciseProgramId").value;i&&i.id&&(i=i.id),this.mutipleAssignItems.filter(e=>e.isSelected&&e.startSateTraining).forEach(e=>{const s={};s.exerciseProgramId=i,s.startDate=e.startSateTraining,s.traineeId=e.id,t.items.push(s)}),this.service.assignMultipleByAssignInput(t).subscribe(t=>{if(e.clearStorage(),e.localCacheService.tempDisable(60),t.scheduled>0){const i=this.l.instant("::ProgramScheduledSuccessFullyFor",t.scheduled.toString());e.toaster.success(i)}if(t.succeeded>0){const i=this.l.instant("::ProgramAssignedSuccessFullyFor",t.succeeded.toString());e.toaster.info(i)}if(t.faild>0){const i=this.l.instant("::ProgramAssignedFailedFor",t.faild.toString());e.toaster.error(i)}e.assignExerciseProgramService.onAssigned.emit(i),setTimeout(()=>{e.hideForm()},1)})}clearStorage(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}submitForm(){this.submitFormInternal(!1)}submitFormInternal(e){let t=this;if(this.isMutipleAssign)return void this.submitFormInternalForMultiple();if(this.form.invalid)return;this.filters.exerciseProgramId=this.form.get("exerciseProgramId").value;let i=this.filters.exerciseProgramId;i&&i.id&&(i=i.id),this.filters.exerciseProgramId=i,this.filters.exerciseProgramId||(this.filters.exerciseProgramId=void 0);let r=this.form.get("startDate").value;console.log(r),console.log(typeof r),this.filters.startDate=this.dateService.parseMomentToString(r),this.filters.isOverride=e,this.service.assignByAssignInput(this.filters).pipe((0,a.x)(()=>this.isModalBusy=!1)).subscribe(e=>{e?(setTimeout(()=>{t.assignExerciseProgramService.onAssigned.emit(t.filters.exerciseProgramId)},2),t.toaster.success("::ProgramAssignedSuccessFully"),setTimeout(()=>{t.hideForm()},1)):t.confirmation.warn("::ProgramOverride","::AreYouSure",{messageLocalizationParams:[]}).pipe((0,o.h)(e=>e===s.Tv.Status.confirm),(0,c.w)(()=>(t.submitFormInternal(!0),null))).subscribe(()=>{})})}getAssignDate(e,t){const i=this;if(null==t)this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(s=>{t=s.startDays;let r=new Date;null!=t&&(r=this.addDays(r,t));let n=r.toLocalISOString();i.assignExerciseProgramService.onGetAssignDate.emit({id:e,dateString:n})});else{t>0&&t++,t++;let s=new Date;null!=t&&(s=this.addDays(s,t));let r=s.toLocalISOString();i.assignExerciseProgramService.onGetAssignDate.emit({id:e,dateString:r})}}autoAssigne(e,t,i){null==i?(this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(e=>{i=e.startDays}),this.autoAssigneInternal(e,t,i)):(i>0&&i++,i++,this.autoAssigneInternal(e,t,i||0))}autoAssigneInternal(e,t,i){let s=new Date;null!=i&&(s=this.addDays(s,i));let r=this,n=s.toLocalISOString();this.service.assignByAssignInput({exerciseProgramId:t,isOverride:!0,traineeId:e,traineeUserId:[],startDate:n}).subscribe(e=>{r.clearStorage(),r.assignExerciseProgramService.onAssigned.emit(r.filters.exerciseProgramId)})}create(e,t){const i=this;this.isMutipleAssign=!1,this.filters.traineeId=e,this.selected=void 0,this.showForm();let s=new Date;null!=t?(t>0&&t++,t++,s=this.addDays(s,t),this.form.get("startDate").setValue(s)):this.service.getNextProgramStartDaysByTraineeUserId(e).subscribe(e=>{s=i.addDays(s,t=e.startDays),i.form.get("startDate").setValue(s)})}createMultiple(e){this.filters.traineeId=void 0,this.isMutipleAssign=!0,this.selected=void 0,this.mutipleAssignItems=e,this.showForm(),this.form.get("startDate").setValue(new Date)}addDays(e,t){if(0===t)return e;var i=new Date(e);return i.setDate(i.getDate()+t),i}startSearchProgram(e){let t={};t.filter=e.query,t.intensityLevel=this.userIntensityLevel,t.maxResultCount=50,t.traineeId=this.filters.traineeId,this.service.getExerciseProgramLookup(t).subscribe(e=>{this.AllPrograms=e.items})}onSelect(e){}onClear(){this.filters.exerciseProgramId=void 0}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}getExerciseProgramId(){if(!this.form)return null;if(!this.form.get("exerciseProgramId"))return null;const e=this.form.get("exerciseProgramId").value;return(null==e?void 0:e.id)?e.id:e}assign2(){this.filters.exerciseProgramId=0,this.filters.exerciseProgramId||(this.filters.exerciseProgramId=void 0);let e=this.form.get("startDate").value;console.log(e),console.log(typeof e),this.filters.startDate=this.dateService.parseMomentToString(e),this.filters.isOverride=!1,this.service.suggestByAssignInput(this.filters).subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(d.Y36(l.XNV),d.Y36(l.vR3),d.Y36(g.RT),d.Y36(p.s),d.Y36(s.YP),d.Y36(n.R),d.Y36(u.F),d.Y36(s.MJ),d.Y36(l.oQ8),d.Y36(m.I),d.Y36(r.qu))},e.\u0275cmp=d.Xpm({type:e,selectors:[["app-assign-exercise-program-to-user"]],outputs:{getAssignDate:"getAssignDate",autoAssigne:"autoAssigne",create:"create",createMultiple:"createMultiple"},features:[d._Bn([n.R])],decls:5,vars:2,consts:[["size","xl",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"app-assign-exercise-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"col-12"],["class","form-group col-md-4 col-12",4,"ngIf"],[1,"form-group","col-4"],["for","exercise-program-intensityLevel"],[1,"float-right"],["type","range","min","1","max","5","id","exercise-program-intensityLevel","name","intensityLevel",1,"form-control-range",3,"step","ngModel","ngModelOptions","ngModelChange"],[1,"form-group","col-md-4","col-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","exerciseProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","field","displayName","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","onClear","completeMethod","search"],["pTemplate","item"],[3,"programId",4,"ngIf"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],["for","app-user-coordinator-app-user-id"],["id","startDate","formControlName","startDate","name","startDate"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"],[3,"programId"]],template:function(e,t){1&e&&(d.TgZ(0,"abp-modal",0),d.NdJ("visibleChange",function(e){return t.isModalOpen=e}),d.YNc(1,U,3,3,"ng-template",null,1,d.W1O),d.YNc(3,G,30,28,"ng-template",null,2,d.W1O),d.qZA()),2&e&&d.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)},directives:[s.zS,r._Y,r.JL,l.YzZ,r.sg,h.hL,x.O5,r.eT,r.Fj,f.a,r.JJ,y.m,r.On,v.Qc,r.u,h.J5,b.jx,I.L,_],pipes:[l.fuE],styles:["@media (max-width:768px){  .app-assign-exercise-program .p-autocomplete-panel{max-width:100%}}  .app-assign-exercise-program .program-name{white-space:normal}  .app-assign-exercise-program .badge{min-width:40px;font-size:90%;text-align:center}  .app-assign-exercise-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),e})()},89486:function(e,t,i){"use strict";i.d(t,{I:function(){return r}});var s=i(35366);let r=(()=>{class e{constructor(){this.onAssigned=new s.vpe,this.onGetAssignDate=new s.vpe}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac}),e})()},21876:function(e,t,i){"use strict";i.d(t,{d:function(){return Et}});var s=i(46700),r=i(35366),n=i(2996),a=i(67917),o=i(83865),c=i(58450),d=i(89486),l=i(28450),g=i(65122),p=i(94773),u=i(55679),m=i(56410),h=i(73545),x=i(43117),f=i(31041),y=i(61116),v=i(69244),b=i(89443);let I=(()=>{class e{constructor(e,t){this.service=e,this.localCacheService=t,this.ttl=900}getDayKey(e){const t=`assinged_ex_${e.assignedExerciseProgramId}_${e.calendarDate}`.replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",t),t}clearStorage(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}save(e,t,i){if(e&&!e.isAllSuperSetsValid())return;if(e&&!e.isValid())return;let s=e.convertToDto();if(e.id){let r={};r.dayNumber=s.dayNumber,r.calendarDate=s.calendarDate,r.assignedExerciseProgramId=s.assignedExerciseProgramId,r.assignedExerciseProgramDayItems=s.assignedExerciseProgramDayItems,r.exerciseProgramId=s.exerciseProgramId,r.name=s.name,r.nameEn=s.nameEn,this.service.update(e.id,r).subscribe(s=>{s.exerciseProgramName=e.exerciseProgramName;let r=new o.h(s.id,s.name,t,new c.x(s.exerciseProgramName,s));t.clearItems(),t.addItem(r),console.log(r);let n={};n.assignedExerciseProgramDay=s;try{const e=this.getDayKey(s),t=JSON.stringify({on:Date(),data:n});this.localCacheService.put(e,t,this.ttl)}catch(a){this.clearStorage()}i()},e=>{console.log(e)})}else{let e={};e.dayNumber=s.dayNumber,e.calendarDate=s.calendarDate,e.assignedExerciseProgramId=s.assignedExerciseProgramId,e.exerciseProgramId=s.exerciseProgramId,e.assignedExerciseProgramDayItems=s.assignedExerciseProgramDayItems,e.name=s.name,e.nameEn=s.nameEn,0!==e.assignedExerciseProgramDayItems.length||e.name&&" "!==e.name||(e.name="Rest Day",e.nameEn="Rest Day"),this.service.create(e).subscribe(e=>{let s=new o.h(e.id,e.name,t,new c.x(e.exerciseProgramName,e));t.addItem(s),console.log(s);let r={};r.assignedExerciseProgramDay=e;try{const t=this.getDayKey(e),i=JSON.stringify({on:Date(),data:r});this.localCacheService.put(t,i,this.ttl)}catch(n){this.clearStorage()}i()},e=>{console.log(e)})}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(p.LM),r.LFG(x.F))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=i(16237),D=i(55e3),S=i(55794),E=i(23733),w=i(863);function C(e,t){1&e&&(r.TgZ(0,"h3"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::Exercises")," "))}function A(e,t){if(1&e&&(r.TgZ(0,"fieldset",41),r.TgZ(1,"legend",22),r.TgZ(2,"span",28),r._uU(3),r.qZA(),r.TgZ(4,"span",30),r._uU(5),r.qZA(),r.O4$(),r.TgZ(6,"svg",42),r._UZ(7,"path",26),r._UZ(8,"path",27),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(3),r.Oqu(e.name),r.xp6(2),r.Oqu(e.nameEn)}}function T(e,t){1&e&&r._UZ(0,"i",43)}function M(e,t){1&e&&r._UZ(0,"i",43)}function N(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",44),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return t.isExpaneded=!t.isExpaneded}),r._UZ(1,"i",45),r.qZA()}}function P(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",44),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return t.isExpaneded=!t.isExpaneded}),r._UZ(1,"i",46),r.qZA()}}function q(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",47),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(4).startDelete(t)}),r._UZ(1,"i",48),r.qZA()}}function k(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",49),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(4).cancelDelete(t)}),r._UZ(1,"i",50),r.qZA()}}function _(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",51),r.TgZ(1,"div",52),r.TgZ(2,"div",52),r.TgZ(3,"div",53),r.TgZ(4,"button",44),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(2).index;return r.oxw(3).down(t)}),r._UZ(5,"i",54),r.qZA(),r.TgZ(6,"button",44),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(2).index;return r.oxw(3).up(t)}),r._UZ(7,"i",55),r.qZA(),r.qZA(),r.TgZ(8,"div"),r._UZ(9,"app-exercise-item",56),r.qZA(),r.TgZ(10,"div",53),r.TgZ(11,"button",57),r.NdJ("click",function(){return r.CHM(e),r.oxw().$implicit.addNewDetail()}),r._uU(12),r.ALo(13,"abpLocalization"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(9),r.Q6J("exerciseItem",null==e?null:e.exercise),r.xp6(3),r.hij(" ",r.lcZ(13,2,"::AddGroup")," ")}}function U(e,t){1&e&&(r.TgZ(0,"div",4),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::ExerciseSeconds")," "))}function L(e,t){1&e&&(r.TgZ(0,"div",4),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::Weight")," "))}function O(e,t){1&e&&(r.TgZ(0,"div",4),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::RepeatCount")," "))}function J(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",67),r.TgZ(1,"div",68),r.TgZ(2,"div",69),r._uU(3),r.ALo(4,"abpLocalization"),r.qZA(),r.TgZ(5,"div",70),r.TgZ(6,"button",71),r.NdJ("click",function(){return r.CHM(e),r.oxw().$implicit.addNewDetail()}),r._UZ(7,"i",72),r._uU(8),r.ALo(9,"abpLocalization"),r.qZA(),r.TgZ(10,"button",73),r.NdJ("click",function(){return r.CHM(e),r.oxw().$implicit.delete()}),r._UZ(11,"i",48),r.qZA(),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().index;r.xp6(3),r.AsE(" ",r.lcZ(4,3,"::Group")," ",e+1," "),r.xp6(5),r.hij(" ",r.lcZ(9,5,"::AddSubGroup")," ")}}function Y(e,t){if(1&e&&(r.TgZ(0,"div",4),r.TgZ(1,"div",81),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA(),r.qZA()),2&e){const e=r.oxw(2).index;r.xp6(2),r.AsE(" ",r.lcZ(3,2,"::Group")," ",e+1," ")}}function F(e,t){if(1&e&&(r.TgZ(0,"div",69),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e){const e=r.oxw().index;r.xp6(1),r.AsE(" ",r.lcZ(2,2,"::Group")," ",e+1," ")}}function G(e,t){if(1&e&&(r.TgZ(0,"div",82),r.TgZ(1,"is-empty",83),r.TgZ(2,"span",84),r._uU(3),r.ALo(4,"abpLocalization"),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("value",e.exerciseSeconds),r.xp6(2),r.Oqu(r.lcZ(4,2,"::Minute"))}}const Q=function(e){return{"has-error":e}};function B(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",85),r.TgZ(1,"input",86),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw(2).$implicit.exerciseSeconds=t}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngClass",r.VKq(2,Q,e.exerciseSecondsIsInvalid()))("ngModel",e.exerciseSeconds)}}function z(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,G,5,4,"div",76),r.YNc(2,B,2,4,"div",77),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!e.isEditing),r.xp6(1),r.Q6J("ngIf",e.isEditing)}}function $(e,t){if(1&e&&(r.TgZ(0,"div",82),r._UZ(1,"is-empty",83),r.qZA()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("value",e.weight)}}function j(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",85),r.TgZ(1,"input",87),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw(2).$implicit.weight=t}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngClass",r.VKq(2,Q,e.weightIsInvalid()))("ngModel",e.weight)}}function H(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,$,2,1,"div",76),r.YNc(2,j,2,4,"div",77),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!e.isEditing),r.xp6(1),r.Q6J("ngIf",e.isEditing)}}function R(e,t){if(1&e&&(r.TgZ(0,"div",82),r._UZ(1,"is-empty",83),r.qZA()),2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("value",e.repeatCount)}}function V(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",85),r.TgZ(1,"input",88),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw(2).$implicit.repeatCount=t}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngClass",r.VKq(2,Q,e.repeatCountIsInvalid()))("ngModel",e.repeatCount)}}function W(e,t){if(1&e&&(r.TgZ(0,"div",4),r.YNc(1,R,2,1,"div",76),r.YNc(2,V,2,4,"div",77),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",!e.isEditing),r.xp6(1),r.Q6J("ngIf",e.isEditing)}}function X(e,t){if(1&e&&(r.TgZ(0,"div",82),r._UZ(1,"is-empty",83),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("value",e.restSeconds)}}function K(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",85),r.TgZ(1,"input",89),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().$implicit.restSeconds=t}),r.qZA(),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Q6J("ngClass",r.VKq(2,Q,e.restSecondsIsInvalid()))("ngModel",e.restSeconds)}}function ee(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",90),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).$implicit.convertToDropSet()}),r._UZ(1,"i",91),r.qZA()}}function te(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",92),r.NdJ("click",function(){return r.CHM(e),r.oxw().$implicit.undoDropSet()}),r._UZ(1,"i",93),r.qZA()}}const ie=function(e,t){return{"text-muted ml-1 item-isDropSet border-left":e,"has-error":t}};function se(e,t){if(1&e&&(r.TgZ(0,"form",74),r.YNc(1,Y,4,4,"div",61),r.YNc(2,F,3,4,"div",75),r.YNc(3,z,3,2,"div",61),r.YNc(4,H,3,2,"div",61),r.YNc(5,W,3,2,"div",61),r.TgZ(6,"div",4),r.YNc(7,X,2,1,"div",76),r.YNc(8,K,2,4,"div",77),r.qZA(),r.TgZ(9,"div",78),r.YNc(10,ee,2,0,"button",79),r.YNc(11,te,2,0,"button",80),r.TgZ(12,"button",73),r.NdJ("click",function(){return t.$implicit.delete()}),r._UZ(13,"i",48),r.qZA(),r.qZA(),r.qZA()),2&e){const e=t.$implicit,i=r.oxw().$implicit,s=r.oxw(2).$implicit,n=r.oxw(4);r.Q6J("ngClass",r.WLB(10,ie,i.isDropSet,e.hasError)),r.xp6(1),r.Q6J("ngIf",!i.isDropSet),r.xp6(1),r.Q6J("ngIf",i.isDropSet),r.xp6(1),r.Q6J("ngIf",s.exerciseType===n.ExerciseTypes.Time),r.xp6(1),r.Q6J("ngIf",s.exerciseType===n.ExerciseTypes.Count),r.xp6(1),r.Q6J("ngIf",s.exerciseType===n.ExerciseTypes.Count),r.xp6(2),r.Q6J("ngIf",!e.isEditing&&!i.isDropSet),r.xp6(1),r.Q6J("ngIf",e.isEditing&&!i.isDropSet),r.xp6(2),r.Q6J("ngIf",!i.isDropSet),r.xp6(1),r.Q6J("ngIf",i.isDropSet)}}function re(e,t){if(1&e&&(r.TgZ(0,"div",64),r.YNc(1,J,12,7,"div",65),r.TgZ(2,"div",4),r.YNc(3,se,14,13,"form",66),r.qZA(),r.qZA()),2&e){const e=t.$implicit,i=r.oxw(6);r.xp6(1),r.Q6J("ngIf",e.isDropSet),r.xp6(2),r.Q6J("ngForOf",e.assignedGroupsUnDeleted)("ngForTrackBy",i.trackByExerciseDayItemGroupModel)}}function ne(e,t){if(1&e&&(r.TgZ(0,"div",58),r.TgZ(1,"div",59),r._UZ(2,"div",60),r.YNc(3,U,3,3,"div",61),r.YNc(4,L,3,3,"div",61),r.YNc(5,O,3,3,"div",61),r.TgZ(6,"div",4),r._uU(7),r.ALo(8,"abpLocalization"),r.ALo(9,"abpLocalization"),r.qZA(),r._UZ(10,"div",62),r.qZA(),r.YNc(11,re,4,3,"div",63),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(4);r.xp6(3),r.Q6J("ngIf",e.exerciseType===t.ExerciseTypes.Time),r.xp6(1),r.Q6J("ngIf",e.exerciseType===t.ExerciseTypes.Count),r.xp6(1),r.Q6J("ngIf",e.exerciseType===t.ExerciseTypes.Count),r.xp6(2),r.AsE("",r.lcZ(8,7,"::Rest")," (",r.lcZ(9,9,"::Minute"),")"),r.xp6(4),r.Q6J("ngForOf",e.assignedGroupsContainersUnDeleted)("ngForTrackBy",t.trackByExerciseDayItemGroupContainerModel)}}function ae(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",4),r.TgZ(1,"div",95),r.TgZ(2,"input",96),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw(2).$implicit.exerciseNote=t}),r.ALo(3,"abpLocalization"),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.xp6(2),r.s9C("placeholder",r.lcZ(3,2,"::AddExerciseNote")),r.Q6J("ngModel",e.exerciseNote)}}function oe(e,t){if(1&e&&(r.TgZ(0,"div",94),r.TgZ(1,"div",23),r.YNc(2,ae,4,4,"div",61),r.qZA(),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(2),r.Q6J("ngIf",e)}}function ce(e,t){1&e&&(r.TgZ(0,"div"),r._UZ(1,"i",101),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA()),2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"::SuperSetInvalidGroups")," "))}function de(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",97),r.YNc(1,ce,4,3,"div",40),r.TgZ(2,"button",98),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().index,i=r.oxw().$implicit;return r.oxw(3).assignedExerciseDayModel.UnMergeSuperSet(i,t)}),r._uU(3),r.ALo(4,"abpLocalization"),r._UZ(5,"i",99),r.qZA(),r._UZ(6,"span",100),r.qZA()}if(2&e){const e=r.oxw(2).$implicit;r.xp6(1),r.Q6J("ngIf",!e.isSuperSetValid()),r.xp6(2),r.hij(" ",r.lcZ(4,2,"::SuperSet")," ")}}function le(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",102),r.TgZ(1,"button",103),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(2),i=t.$implicit,s=t.index,n=r.oxw(3);return n.assignedExerciseDayModel.MergeSuperSet(i,n.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted[s+1])}),r._uU(2),r.ALo(3,"abpLocalization"),r._UZ(4,"i",104),r.qZA(),r._UZ(5,"span",100),r.qZA()}2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"::SuperSet")," "))}function ge(e,t){1&e&&r._UZ(0,"div")}function pe(e,t){if(1&e&&(r.TgZ(0,"fieldset",20),r.YNc(1,A,9,2,"fieldset",21),r.TgZ(2,"legend",22),r.TgZ(3,"div",23),r.TgZ(4,"div",24),r.O4$(),r.TgZ(5,"svg",25),r._UZ(6,"path",26),r._UZ(7,"path",27),r.qZA(),r.qZA(),r.kcU(),r.TgZ(8,"div",4),r.TgZ(9,"span",28),r._uU(10),r.YNc(11,T,1,0,"i",29),r.qZA(),r.TgZ(12,"span",30),r._uU(13),r.YNc(14,M,1,0,"i",29),r.qZA(),r.qZA(),r.TgZ(15,"div",24),r.YNc(16,N,2,0,"span",31),r.YNc(17,P,2,0,"span",31),r.qZA(),r.qZA(),r.qZA(),r.TgZ(18,"div"),r.YNc(19,q,2,0,"button",32),r.YNc(20,k,2,0,"button",33),r.qZA(),r.TgZ(21,"div",23),r.YNc(22,_,14,4,"div",34),r.TgZ(23,"div",35),r.YNc(24,ne,12,11,"div",36),r.qZA(),r.qZA(),r.YNc(25,oe,3,1,"div",37),r.YNc(26,de,7,4,"div",38),r.YNc(27,le,6,3,"div",39),r.YNc(28,ge,1,0,"div",40),r.qZA()),2&e){const e=t.$implicit,i=t.index,s=r.oxw(),n=s.$implicit,a=s.index,o=r.oxw(3);r.xp6(10),r.hij("",e.name," "),r.xp6(1),r.Q6J("ngIf",16===(null==e||null==e.exercise?null:e.exercise.statusGeneralLookupId)),r.xp6(2),r.hij("",e.nameEn," "),r.xp6(1),r.Q6J("ngIf",16===(null==e||null==e.exercise?null:e.exercise.statusGeneralLookupId)),r.xp6(2),r.Q6J("ngIf",e.isExpaneded&&!o.isDragging),r.xp6(1),r.Q6J("ngIf",!e.isExpaneded&&!o.isDragging),r.xp6(2),r.Q6J("ngIf",!o.isDeleting(e)),r.xp6(1),r.Q6J("ngIf",o.isDeleting(e)),r.xp6(2),r.Q6J("ngIf",e.isExpaneded&&!o.isDragging),r.xp6(2),r.Q6J("ngIf",e.isExpaneded&&!o.isDragging),r.xp6(1),r.Q6J("ngIf",e.isExpaneded&&!o.isDragging),r.xp6(1),r.Q6J("ngIf",i+1<n.assignedExerciseDayItemSetsUnDeleted.length),r.xp6(1),r.Q6J("ngIf",i+1>=n.assignedExerciseDayItemSetsUnDeleted.length&&a+1<o.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted.length),r.xp6(1),r.Q6J("ngIf",i+1>=n.assignedExerciseDayItemSetsUnDeleted.length)}}function ue(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",18),r.NdJ("cdkDragStarted",function(t){return r.CHM(e),r.oxw(3).dragStart(t)}),r.YNc(1,pe,29,14,"fieldset",19),r.qZA()}if(2&e){const e=t.$implicit,i=r.oxw(3);r.xp6(1),r.Q6J("ngForOf",e.assignedExerciseDayItemSetsUnDeleted)("ngForTrackBy",i.trackByExerciseDayItemSetModel)}}function me(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",16),r.NdJ("cdkDropListDropped",function(t){return r.CHM(e),r.oxw(2).drop(t)}),r.YNc(1,ue,2,2,"div",17),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted)("ngForTrackBy",e.trackByExerciseDayItemModel)}}function he(e,t){1&e&&(r.TgZ(0,"div",105),r.TgZ(1,"div",106),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"::SuperSetInvalidGroups")," "))}function xe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",107),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).showExerciseForm()}),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()}2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::AddExercise")," "))}function fe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",108),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).save()}),r._UZ(1,"i",109),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA()}2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"AbpUi::Save")," "))}function ye(e,t){1&e&&(r.TgZ(0,"button",110,111),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA()),2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"AbpUi::Cancel")," "))}function ve(e,t){1&e&&r._UZ(0,"i",112)}function be(e,t){1&e&&r._UZ(0,"i",113)}function Ie(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",114),r.TgZ(1,"div",53),r.TgZ(2,"app-exercise-selector",115),r.NdJ("productSelected",function(t){return r.CHM(e),r.oxw(2).productSelected(t)}),r.qZA(),r.qZA(),r.qZA()}}function Ze(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",3),r.TgZ(1,"div",4),r.YNc(2,me,2,2,"div",5),r.YNc(3,he,4,3,"div",6),r.TgZ(4,"div",7),r.YNc(5,xe,3,3,"button",8),r.YNc(6,fe,4,3,"button",9),r.YNc(7,ye,4,3,"button",10),r.TgZ(8,"div",11),r.NdJ("click",function(){r.CHM(e);const t=r.oxw();return t.isDragging=!t.isDragging}),r.YNc(9,ve,1,0,"i",12),r.YNc(10,be,1,0,"i",13),r.TgZ(11,"label",14),r._uU(12),r.ALo(13,"abpLocalization"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.YNc(14,Ie,3,0,"div",15),r.qZA()}if(2&e){const e=r.oxw();r.xp6(2),r.Q6J("ngIf",e.assignedExerciseDayModel),r.xp6(1),r.Q6J("ngIf",e.assignedExerciseDayModel&&!e.assignedExerciseDayModel.isAllSuperSetsValid()),r.xp6(2),r.Q6J("ngIf",!e.isAddingNewExcercise),r.xp6(1),r.Q6J("ngIf",e.isCanSave),r.xp6(1),r.Q6J("ngIf",e.isCanSave),r.xp6(2),r.Q6J("ngIf",!e.isDragging),r.xp6(1),r.Q6J("ngIf",e.isDragging),r.xp6(2),r.Oqu(r.lcZ(13,9,"::ReArrange")),r.xp6(2),r.Q6J("ngIf",e.isAddingNewExcercise)}}let De=(()=>{class e{constructor(e,t,i,s,n,a,o,c,d,l){this.list=e,this.track=t,this.service=i,this.assignedExerciseDayService=s,this.exerciseManageService=n,this.groupServiceTest=a,this.analyticsService=o,this.confirmation=c,this.dateService=d,this.fb=l,this.dataChanged=new r.vpe,this.bulkEdit=new r.vpe,this.isDragging=!1,this.trackByExerciseDayItemModel=(e,t)=>null==t?void 0:t.id,this.trackByExerciseDayItemSetModel=(e,t)=>null==t?void 0:t.id,this.trackByExerciseDayItemGroupContainerModel=(e,t)=>null==t?void 0:t.dropSetId,this.trackByExerciseDayItemGroupModel=(e,t)=>null==t?void 0:t.id,this.isModalBusy=!1,this.isModalOpen=!1,this.isEditBulkExersises=!1,this.isAddingBulkExersisesBefore=!1,this.ExerciseTypes=b.$,this.isAddingNewExcercise=!0,this.isCanSave=!1,this.lastSearchedExercise="",this.isShowAddingExercise=!1,this.deleting=[]}ngOnInit(){}hideForm(){this.isModalOpen=!1}showForm(){this.form&&this.form.reset(),this.isModalOpen=!0}create(e,t){this.isCanSave=!0,this.day=e;let i={};i.dayNumber=e.dayId,i.calendarDate=this.dateService.removeUtcDate(e.startDate).toISOString(),i.assignedExerciseProgramId=t,this.assignedExerciseDayModel=new c.x(i.exerciseProgramName,i),this.showExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(e=>{this.showExerciseForm()})}update(e,t){this.day=e,this.isCanSave=!0,this.assignedExerciseDayModel=new c.x(t.exerciseProgramName,t.convertToDto()),this.hideExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(e=>{this.showExerciseForm()})}cancel(){}updateBulk(e,t,i){console.log(e);let s=e[0].day;this.selectedItems=e,this.isEditBulkExersises=!0,this.isAddingBulkExersisesBefore=i,this.isCanSave=!0,this.day=s;let r={};r.dayNumber=s.dayId,r.exerciseProgramId=t,this.assignedExerciseDayModel=new c.x(r.exerciseProgramName,r),this.showExerciseForm(),this.showForm(),this.assignedExerciseDayModel.onEmpty.subscribe(e=>{this.showExerciseForm()})}save(){const e=this;if(this.confirmDelete(),e.analyticsService.log(g.O.do_save_Program_assigned_exercise),this.isEditBulkExersises){let t=this.assignedExerciseDayModel;this.selectedItems.forEach((i,s)=>{if(this.assignedExerciseDayModel=new c.x(i.extraData.exerciseProgramName,i.extraData.convertToDto()),this.isAddingBulkExersisesBefore){const e=[...t.assignedExerciseDayItems];e.push(...this.assignedExerciseDayModel.assignedExerciseDayItems),this.assignedExerciseDayModel.assignedExerciseDayItems=e}else this.assignedExerciseDayModel.assignedExerciseDayItems.push(...t.assignedExerciseDayItems);this.assignedExerciseDayService.save(this.assignedExerciseDayModel,i.day,()=>{s==this.selectedItems.length-1&&e.hideForm(),e.bulkEdit.emit(e.assignedExerciseDayModel)})})}else this.assignedExerciseDayService.save(e.assignedExerciseDayModel,e.day,()=>{e.hideForm()})}showExerciseForm(){this.buildForm(),this.isAddingNewExcercise=!0,this.isShowAddingExercise=!1}hideExerciseForm(){}buildForm(){this.form=this.fb.group({exerciseId:[null,[f.kI.required]],exercise:[null,[]],exerciseItem:[null,[f.kI.required]]}),setTimeout(()=>{this.form.get("exerciseItem").valueChanges.subscribe(e=>{e&&e.id?(this.form.get("exerciseId").setValue(e.id),this.form.get("exercise").setValue(e)):(this.form.get("exerciseId").reset(),this.form.get("exercise").reset())}),this.form.get("exerciseId").valueChanges.subscribe(e=>{e&&this.isAddingNewExcercise&&setTimeout(()=>{this.submitForm()},10)})},10)}submitForm(){if(this.form.invalid)return;const e=this.form.get("exerciseId").value;this.exerciseManageService.getWithNavigationProperties(e).subscribe(e=>{this.assignedExerciseDayModel.addNewDetail(e.exerciseGroups,e.exercise),this.isCanSave=!0,this.hideExerciseForm()})}productSelected(e){let t=0;e.forEach(i=>{t++,this.exerciseManageService.getWithNavigationProperties(i.id).subscribe(i=>{this.assignedExerciseDayModel.addNewDetail(i.exerciseGroups,i.exercise),t>=e.length&&(this.isCanSave=!0,this.hideExerciseForm())})})}startSearchExercise(e){let t={};t.filter=e.query,this.lastSearchedExercise=e.query||"",this.service.getExerciseLookup(t).subscribe(e=>{this.AllExercises=e.items,this.isShowAddingExercise=0==e.items.length})}onSelect(e){}onClear(){this.form.reset()}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}createNewExercise(e){e.create(this.lastSearchedExercise)}onCreateNewExercise(e){this.startSearchExercise({query:e.exerciseName}),setTimeout(()=>{this.form.get("exerciseItem").setValue(e)},1e3)}drop(e){let t=[...this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted];(0,v.bA)(t,e.previousIndex,e.currentIndex),this.assignedExerciseDayModel.assignedExerciseDayItems=t}up(e){let t=[...this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted];(0,v.bA)(t,e,e+1),this.assignedExerciseDayModel.assignedExerciseDayItems=t}down(e){let t=[...this.assignedExerciseDayModel.assignedExerciseDayItemsUnDeleted];(0,v.bA)(t,e,e-1),this.assignedExerciseDayModel.assignedExerciseDayItems=t}isDeleting(e){return this.deleting.filter(t=>t==e).length>0}startDelete(e){this.deleting.push(e),e.isExpaneded=!1,setTimeout(()=>{this.isDeleting(e)&&(this.deleting=this.deleting.filter(t=>t!==e),e.delete())},5e3)}cancelDelete(e){this.deleting=this.deleting.filter(t=>t!==e),e.isExpaneded=!0}confirmDelete(){this.deleting.forEach(e=>{e.delete()}),this.deleting=[]}dragStart(e){this.isDragging=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.XNV),r.Y36(s.vR3),r.Y36(p.LM),r.Y36(I),r.Y36(p.zu),r.Y36(p.C),r.Y36(g.y),r.Y36(u.YP),r.Y36(n.R),r.Y36(f.qu))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-assigned-exercise-program-modal-day"]],outputs:{dataChanged:"dataChanged",bulkEdit:"bulkEdit"},features:[r._Bn([s.XNV,n.R])],decls:5,vars:3,consts:[["size","xl",3,"busy","visible","suppressUnsavedChangesWarning","visibleChange"],["abpHeader",""],["abpBody",""],[1,"row","assigned-program-popup","small-scrollbar"],[1,"col"],["style","height: calc(100vh - 150px); overflow-y: auto; min-height: 200px","class","example-list border rounded mt-2 fade-in-top","cdkDropList","",3,"cdkDropListDropped",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"col-sm-12","modal-footer","p-1"],["class","btn btn-outline-success add-new-exercise mt-1","style","position: absolute;right: 0px;",3,"click",4,"ngIf"],["Class","btn btn-success btn-save",3,"click",4,"ngIf"],["type","button","class","btn btn-secondary btn-cancel",4,"ngIf"],[1,"btn",2,"position","absolute","left","0px",3,"click"],["class","fa fa-toggle-off custom-green action-boarder",4,"ngIf"],["class","fa fa-toggle-on custom-green action-boarder text-success",4,"ngIf"],[1,"mx-2"],["class","col-4",4,"ngIf"],["cdkDropList","",1,"example-list","border","rounded","mt-2","fade-in-top",2,"height","calc(100vh - 150px)","overflow-y","auto","min-height","200px",3,"cdkDropListDropped"],["cdkDrag","","class","example-box",3,"cdkDragStarted",4,"ngFor","ngForOf","ngForTrackBy"],["cdkDrag","",1,"example-box",3,"cdkDragStarted"],["class","card col-12 hiding-container app-bg-gray-light round-borders",4,"ngFor","ngForOf","ngForTrackBy"],[1,"card","col-12","hiding-container","app-bg-gray-light","round-borders"],["class","hiding-container app-bg-gray-light round-borders","style","min-width: 100px !important; padding: auto 30px; left: -30px; ",4,"cdkDragPreview"],[1,"set-item","text-center"],[1,"row"],[1,"col-auto"],["width","24px","fill","currentColor","viewBox","0 0 24 24","cdkDragHandle","",1,"holder"],["d","M10 9h4V6h3l-5-5-5 5h3v3zm-1 1H6V7l-5 5 5 5v-3h3v-4zm14 2l-5-5v3h-3v4h3v3l5-5zm-9 3h-4v3H7l5 5 5-5h-3v-3z"],["d","M0 0h24v24H0z","fill","none"],[1,"view-rtl"],["class","fa fa-exclamation  text-danger",4,"ngIf"],[1,"view-ltr"],["class","btn btn-sm",3,"click",4,"ngIf"],["class","btn btn-danger btn-circle delete-exercise auto-hide",3,"click",4,"ngIf"],["class","btn btn-warning btn-circle delete-exercise",3,"click",4,"ngIf"],["class","col-3","style","min-height: 100px",4,"ngIf"],[1,"col-9"],["class","text-muted text-sm",4,"ngIf"],["class","excercise-footer my-2",4,"ngIf"],["class","text-center m-1 dropset-spiltter",4,"ngIf"],["class","text-center m-1 dropset-spiltter text-muted auto-hide",4,"ngIf"],[4,"ngIf"],[1,"hiding-container","app-bg-gray-light","round-borders",2,"min-width","100px !important","padding","auto 30px","left","-30px"],["width","24px","fill","currentColor","viewBox","0 0 24 24",1,"holder"],[1,"fa","fa-exclamation","text-danger"],[1,"btn","btn-sm",3,"click"],[1,"fa","fa-caret-down"],[1,"fa","fa-chevron-up"],[1,"btn","btn-danger","btn-circle","delete-exercise","auto-hide",3,"click"],[1,"fa","fa-times"],[1,"btn","btn-warning","btn-circle","delete-exercise",3,"click"],[1,"fa","fa-undo"],[1,"col-3",2,"min-height","100px"],[1,""],[1,"text-center"],[1,"fa","fa-arrow-up"],[1,"fa","fa-arrow-down"],[3,"exerciseItem"],[1,"btn-sm","btn","btn-outline-success",3,"click"],[1,"text-muted","text-sm"],[1,"row","pb-2","border-bottom"],[1,"col-3"],["class","col",4,"ngIf"],[1,"col-sm-3"],["class","row border-bottom align-items-center",4,"ngFor","ngForOf","ngForTrackBy"],[1,"row","border-bottom","align-items-center"],["class","col-12",4,"ngIf"],["class","row align-items-center py-1",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"col-12"],[1,"row","py-1"],[1,"col","text-dark"],[1,"col-7","item-actions","text-right"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-plus"],[1,"btn","btn-sm","btn-default","text-danger","btn-circle",3,"click"],[1,"row","align-items-center","py-1",3,"ngClass"],["class","col  text-dark",4,"ngIf"],["class","value-containers",4,"ngIf"],["class","input-containers input-group",4,"ngIf"],[1,"col-sm-3","item-actions","text-right"],["class","btn btn-sm btn-default text-success btn-circle",3,"click",4,"ngIf"],["class","btn btn-sm btn-default text-warning btn-circle",3,"click",4,"ngIf"],[1,"text-dark"],[1,"value-containers"],[3,"value"],[1,"text-muted"],[1,"input-containers","input-group"],["type","number","min","0","max","100000","pattern","[0-9]","name","exerciseSeconds",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","weight",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","repeatCount",1,"form-control",3,"ngClass","ngModel","ngModelChange"],["min","0","max","100000","pattern","[0-9]","type","number","name","restSeconds",1,"form-control",3,"ngClass","ngModel","ngModelChange"],[1,"btn","btn-sm","btn-default","text-success","btn-circle",3,"click"],[1,"fa","fa-layer-group"],[1,"btn","btn-sm","btn-default","text-warning","btn-circle",3,"click"],[1,"fa","fa-share"],[1,"excercise-footer","my-2"],[1,"d-block","input-containers","input-group"],[1,"rounded","w-100","form-control",2,"max-width","100% !important",3,"ngModel","placeholder","ngModelChange"],[1,"text-center","m-1","dropset-spiltter"],[1,"btn","badge","badge-info",3,"click"],[1,"fa","fa-link","text-secondary"],[1,"spiltter-bar","border"],[1,"fa","fa-exclamation-circle","text-danger",2,"font-size","large"],[1,"text-center","m-1","dropset-spiltter","text-muted","auto-hide"],[1,"btn","badge","badge-default",3,"click"],[1,"fa","fa-link"],[1,"mt-3"],[1,"alert","alert-danger"],[1,"btn","btn-outline-success","add-new-exercise","mt-1",2,"position","absolute","right","0px",3,"click"],["Class","btn btn-success btn-save",3,"click"],[1,"fa","fa-check"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],[1,"fa","fa-toggle-off","custom-green","action-boarder"],[1,"fa","fa-toggle-on","custom-green","action-boarder","text-success"],[1,"col-4"],[3,"productSelected"]],template:function(e,t){1&e&&(r.TgZ(0,"abp-modal",0),r.NdJ("visibleChange",function(e){return t.isModalOpen=e}),r.YNc(1,C,3,3,"ng-template",null,1,r.W1O),r.YNc(3,Ze,15,11,"ng-template",null,2,r.W1O),r.qZA()),2&e&&r.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)("suppressUnsavedChangesWarning",!1)},directives:[u.zS,y.O5,v.Wj,y.sg,v.Zt,v.pV,v.Bh,Z.z,f._Y,f.JL,f.F,y.mk,D.K,f.qQ,f.Fd,f.wV,f.Fj,S.a,f.c5,f.JJ,f.On,E.m,w.s],pipes:[s.fuE],styles:[".text-sm[_ngcontent-%COMP%]{font-size:smaller}ul[_ngcontent-%COMP%]{margin:0}legend[_ngcontent-%COMP%]{width:auto;padding:0 20px;font-size:14px;background:#fff;border-radius:24px;border:1px solid #ddd}.btn-circle[_ngcontent-%COMP%]{border-radius:50%;width:25px;height:25px;padding:0;margin:0 3px;line-height:24px;vertical-align:middle}.item-actions[_ngcontent-%COMP%]   .btn-circle[_ngcontent-%COMP%]{background:#fff}.delete-exercise[_ngcontent-%COMP%]{position:absolute;right:12px;top:-30px;width:25px;height:25px;padding:0;text-align:center;line-height:24px;vertical-align:middle} .rtl .assigned-program-popup .delete-exercise{left:12px;right:auto}@media (min-width:992px){.hiding-container[_ngcontent-%COMP%]   .auto-hide[_ngcontent-%COMP%]{opacity:0}.hiding-container[_ngcontent-%COMP%]:hover   .auto-hide[_ngcontent-%COMP%]{opacity:1}}.dropset-spiltter[_ngcontent-%COMP%]   .spiltter-bar[_ngcontent-%COMP%]{position:absolute;display:block;bottom:-32px;left:50%;right:50%;height:36px;border:.1px solid}.text-dark[_ngcontent-%COMP%]{color:#343a40!important;font-size:13px;font-weight:700}.round-borders[_ngcontent-%COMP%]{border-radius:4px}input.has-error[_ngcontent-%COMP%]{border:1px solid brown}input.form-control[_ngcontent-%COMP%]{max-width:85px}.app-bg-gray-light[_ngcontent-%COMP%]{background:#f7f7f7!important}.input-containers[_ngcontent-%COMP%]{align-items:center}.item-isDropSet[_ngcontent-%COMP%]{border-top:1px solid #dee2e6;border-right-width:5px!important;border-left-width:5px!important}.item-isDropSet[_ngcontent-%COMP%]:first-child{border-top:0}.add-new-exercise[_ngcontent-%COMP%]{border-radius:50px;margin-top:-20px}.add-new-exercise[_ngcontent-%COMP%]:not(:hover){background:#fff}.custom-add-more[_ngcontent-%COMP%]{position:absolute;top:60px;width:93%}.holder[_ngcontent-%COMP%]{height:15px;color:gray}.cdk-drag-preview[_ngcontent-%COMP%]{z-index:10000!important;transform:rotate3d(10,10,10,-2deg);box-shadow:10px 10px 10px rgba(0,0,0,.1)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.text-dark[_ngcontent-%COMP%]{font-size:11px}"]}),e})();var Se=i(38749),Ee=i(98462),we=i(11520),Ce=i(28157),Ae=i(99046),Te=i(42163),Me=i(28451);function Ne(e,t){1&e&&(r.TgZ(0,"h3"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::MoveToLibrary")," "))}function Pe(e,t){if(1&e&&(r.TgZ(0,"span",16),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.selectionCount," ")}}function qe(e,t){if(1&e&&(r.TgZ(0,"p",14),r._uU(1),r.qZA(),r.YNc(2,Pe,2,1,"span",15)),2&e){const e=t.$implicit;r.xp6(1),r.hij(" ",e.displayName," "),r.xp6(1),r.Q6J("ngIf",e.selectionCount>0)}}function ke(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"form",3),r.NdJ("ngSubmit",function(){return r.CHM(e),r.oxw().submitForm()}),r.TgZ(1,"div",4),r.TgZ(2,"div",5),r.TgZ(3,"label",6),r._uU(4),r.ALo(5,"abpLocalization"),r.qZA(),r.TgZ(6,"p-autoComplete",7),r.NdJ("onClear",function(){return r.CHM(e),r.oxw().onClear()})("completeMethod",function(t){return r.CHM(e),r.oxw().startSearchProgram(t)})("search",function(t){return r.CHM(e),r.oxw().startSearchProgram(t)}),r.ALo(7,"abpLocalization"),r.YNc(8,qe,3,2,"ng-template",8),r.qZA(),r.qZA(),r.qZA(),r.TgZ(9,"div",9),r.TgZ(10,"button",10,11),r._uU(12),r.ALo(13,"abpLocalization"),r.qZA(),r.TgZ(14,"button",12),r._UZ(15,"i",13),r._uU(16),r.ALo(17,"abpLocalization"),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("formGroup",e.form),r.xp6(4),r.hij(" ",r.lcZ(5,8,"::ExerciseProgram")," "),r.xp6(2),r.s9C("placeholder",r.lcZ(7,10,"::ExerciseProgram")),r.Q6J("suggestions",e.AllPrograms)("type",e.searchType())("dropdown",!0),r.xp6(6),r.hij(" ",r.lcZ(13,12,"AbpUi::Cancel")," "),r.xp6(4),r.hij(" ",r.lcZ(17,14,"::Ok")," ")}}let _e=(()=>{class e{constructor(e,t,i,s,r,n,a,o,c,d,l){this.list=e,this.track=t,this.service=i,this.traineeService=s,this.confirmation=r,this.dateService=n,this.localCacheService=a,this.toaster=o,this.l=c,this.assignExerciseProgramService=d,this.fb=l,this.isModalBusy=!1,this.isModalOpen=!1}ngOnInit(){}buildForm(){this.form=this.fb.group({exerciseProgramId:[null,[f.kI.required]]})}submitForm(){var e;let t=this;if(this.form.invalid)return;const i=this.form.get("exerciseProgramId").value,s={dayIds:"",assignedProgramId:this.assignedProgramId,dayDates:this.days.map(e=>e.toISOString()).toString(),programId:null!==(e=null==i?void 0:i.id)&&void 0!==e?e:i};this.service.moveToLibe(s).pipe((0,we.x)(()=>this.isModalBusy=!1)).subscribe(e=>{t.toaster.success("::Success"),setTimeout(()=>{t.hideForm()},1)})}hideForm(){this.isModalOpen=!1,setTimeout(()=>{this.form.reset()},100)}showForm(){this.buildForm(),this.isModalOpen=!0}create(e,t){var i;this.days=e.map(e=>e.day.startDate),this.assignedProgramId=null!==(i=null==t?void 0:t.id)&&void 0!==i?i:t,this.showForm()}startSearchProgram(e){let t={};t.filter=e.query,t.maxResultCount=50,t.IsOnlyPrivate=!0,this.service.getExerciseProgramLookup(t).subscribe(e=>{this.AllPrograms=e.items})}onSelect(e){}onClear(){}searchType(){return/msie\s|trident\/|edge\//i.test(window.navigator.userAgent)?"text":"search"}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.XNV),r.Y36(s.vR3),r.Y36(p.RT),r.Y36(Ce.s),r.Y36(u.YP),r.Y36(n.R),r.Y36(x.F),r.Y36(u.MJ),r.Y36(s.oQ8),r.Y36(d.I),r.Y36(f.qu))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-move-to-lib-exercise-program"]],outputs:{create:"create"},features:[r._Bn([n.R])],decls:5,vars:2,consts:[["size","md",3,"busy","visible","visibleChange"],["abpHeader",""],["abpBody",""],["validateOnSubmit","",1,"move-to-lib-exercise-program",3,"formGroup","ngSubmit"],[1,"mt-2","fade-in-top","row"],[1,"form-group","col-12"],["for","app-user-coordinator-app-user-id",2,"display","block"],["formControlName","exerciseProgramId","styleClass","dropdown-with-table","id","coachAppUserId","name","coachAppUserId","dataKey","id","field","displayName","forceSelection","true",1,"",3,"suggestions","type","dropdown","placeholder","onClear","completeMethod","search"],["pTemplate","item"],[1,"col-12","modal-footer"],["type","button",1,"btn","btn-secondary","btn-cancel"],["abpClose",""],["type","submit",1,"btn","btn-success","btn-save"],[1,"fa","fa-check"],[1,"program-name"],["class","badge badge-secondary","style","display: inline-block;",4,"ngIf"],[1,"badge","badge-secondary",2,"display","inline-block"]],template:function(e,t){1&e&&(r.TgZ(0,"abp-modal",0),r.NdJ("visibleChange",function(e){return t.isModalOpen=e}),r.YNc(1,Ne,3,3,"ng-template",null,1,r.W1O),r.YNc(3,ke,18,16,"ng-template",null,2,r.W1O),r.qZA()),2&e&&r.Q6J("busy",t.isModalBusy)("visible",t.isModalOpen)},directives:[u.zS,f._Y,f.JL,s.YzZ,f.sg,Ae.hL,Te.Qc,f.JJ,f.u,Ae.J5,E.m,Me.jx,y.O5],pipes:[s.fuE],styles:["@media (max-width:768px){  .move-to-lib-exercise-program .p-autocomplete-panel{max-width:100%}}  .move-to-lib-exercise-program .program-name{white-space:normal}  .move-to-lib-exercise-program .badge{min-width:40px;font-size:90%;text-align:center}  .move-to-lib-exercise-program .calories{font-size:80%;display:inline-block;width:30px;white-space:normal;line-height:9px;vertical-align:sub;padding-right:5px;color:#999}"]}),e})();var Ue=i(46140);const Le=["adjust"];function Oe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",10),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).save()}),r._UZ(1,"i",11),r.qZA()}}function Je(e,t){if(1&e&&(r.TgZ(0,"div",12),r._uU(1),r.qZA()),2&e){const e=r.oxw(2);r.xp6(1),r.hij(" ",e.assignedExerciseDayModel.exerciseProgramName," ")}}function Ye(e,t){1&e&&(r.TgZ(0,"div",13),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::Updated")," "))}function Fe(e,t){if(1&e&&(r.TgZ(0,"div",28),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.repeatCount," ")}}function Ge(e,t){if(1&e&&(r.TgZ(0,"div",28),r._uU(1),r.qZA()),2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.exerciseSeconds," ")}}const Qe=function(e){return{" border-left pl-2":e}};function Be(e,t){if(1&e&&(r.TgZ(0,"span",26),r.TgZ(1,"span"),r.YNc(2,Fe,2,1,"div",27),r.YNc(3,Ge,2,1,"div",27),r.qZA(),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(2).$implicit;r.Q6J("ngClass",r.VKq(3,Qe,e.isDropSet)),r.xp6(2),r.Q6J("ngIf",12==t.exerciseType),r.xp6(1),r.Q6J("ngIf",13==t.exerciseType)}}function ze(e,t){if(1&e&&(r.TgZ(0,"span"),r.YNc(1,Be,4,5,"span",25),r.qZA()),2&e){const e=t.$implicit,i=r.oxw(5);r.xp6(1),r.Q6J("ngForOf",e.assignedGroups)("ngForTrackBy",i.trackByExerciseDayItemGroupModel)}}function $e(e,t){if(1&e&&(r.TgZ(0,"div",22),r.TgZ(1,"span"),r.TgZ(2,"div",23),r._uU(3),r.qZA(),r._uU(4," X "),r.qZA(),r.YNc(5,ze,2,2,"span",24),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(3);r.xp6(3),r.hij(" ",e.assignedGroupsContainers.length," "),r.xp6(2),r.Q6J("ngForOf",e.assignedGroupsContainers)("ngForTrackBy",t.trackByExerciseDayItemGroupContainerModel)}}function je(e,t){1&e&&(r.TgZ(0,"td"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::ExerciseSeconds")," "))}function He(e,t){1&e&&(r.TgZ(0,"td"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::RepeatCount")," "))}function Re(e,t){1&e&&(r.TgZ(0,"td"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::Weight")," "))}function Ve(e,t){if(1&e&&(r.TgZ(0,"span"),r.TgZ(1,"table",29),r.TgZ(2,"tr"),r.YNc(3,je,3,3,"td",21),r.YNc(4,He,3,3,"td",21),r.YNc(5,Re,3,3,"td",21),r.TgZ(6,"td"),r._uU(7),r.ALo(8,"abpLocalization"),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=r.oxw(2).$implicit;r.xp6(3),r.Q6J("ngIf",13==e.exerciseType),r.xp6(1),r.Q6J("ngIf",12==e.exerciseType),r.xp6(1),r.Q6J("ngIf",12==e.exerciseType),r.xp6(2),r.Oqu(r.lcZ(8,4,"::Rest"))}}function We(e,t){if(1&e&&(r.TgZ(0,"span"),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()),2&e){const e=r.oxw().index;r.xp6(1),r.AsE("",r.lcZ(2,2,"::Group")," ",e+1,"")}}function Xe(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",34),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(6).showAdjust_exerciseSeconds(t)}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.exerciseSeconds," ")}}function Ke(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",34),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(6).showAdjust_repeatCount(t)}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.hij(" ",e.repeatCount," ")}}function et(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",35),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(6).showAdjust_weight(t)}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Oqu(e.weight)}}function tt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"span",36),r.NdJ("click",function(){r.CHM(e);const t=r.oxw().$implicit;return r.oxw(6).showAdjust_restSeconds(t)}),r._uU(1),r.qZA()}if(2&e){const e=r.oxw().$implicit;r.xp6(1),r.Oqu(e.restSeconds)}}function it(e,t){if(1&e&&(r.TgZ(0,"div",26),r.YNc(1,We,3,4,"span",21),r.TgZ(2,"table",29),r.TgZ(3,"tr"),r.TgZ(4,"td"),r.YNc(5,Xe,2,1,"span",31),r.qZA(),r.TgZ(6,"td"),r.YNc(7,Ke,2,1,"span",31),r.qZA(),r.TgZ(8,"td"),r.YNc(9,et,2,1,"span",32),r.qZA(),r.TgZ(10,"td"),r.YNc(11,tt,2,1,"span",33),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e){const e=t.$implicit,i=r.oxw().$implicit;r.Q6J("ngClass",r.VKq(6,Qe,i.isDropSet)),r.xp6(1),r.Q6J("ngIf",i.isDropSet),r.xp6(4),r.Q6J("ngIf",e.exerciseSeconds&&e.exerciseSeconds>0),r.xp6(2),r.Q6J("ngIf",e.repeatCount&&e.repeatCount>0),r.xp6(2),r.Q6J("ngIf",e.weight&&e.weight>0),r.xp6(2),r.Q6J("ngIf",e.restSeconds&&e.restSeconds>0)}}const st=function(e){return{"is-dropset":e}};function rt(e,t){if(1&e&&(r.TgZ(0,"div"),r.TgZ(1,"span"),r._uU(2),r.ALo(3,"abpLocalization"),r.qZA(),r.TgZ(4,"div",30),r.YNc(5,it,12,8,"div",25),r.qZA(),r.qZA()),2&e){const e=t.$implicit,i=t.index,s=r.oxw(5);r.xp6(2),r.AsE("",r.lcZ(3,5,"::Group")," ",i+1,""),r.xp6(2),r.Q6J("ngClass",r.VKq(7,st,e.isDropSet)),r.xp6(1),r.Q6J("ngForOf",e.assignedGroups)("ngForTrackBy",s.trackByExerciseDayItemGroupModel)}}function nt(e,t){if(1&e&&(r.TgZ(0,"div",22),r.YNc(1,Ve,9,6,"span",21),r.YNc(2,rt,6,9,"div",24),r.qZA()),2&e){const e=r.oxw().$implicit,t=r.oxw(3);r.xp6(1),r.Q6J("ngIf",e.assignedGroupsContainers.length>0),r.xp6(1),r.Q6J("ngForOf",e.assignedGroupsContainers)("ngForTrackBy",t.trackByExerciseDayItemGroupContainerModel)}}function at(e,t){1&e&&(r.TgZ(0,"div",38),r.TgZ(1,"div",39),r._uU(2),r.ALo(3,"abpLocalization"),r._UZ(4,"i",40),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.hij(" ",r.lcZ(3,1,"::SuperSet")," "))}function ot(e,t){if(1&e&&(r.TgZ(0,"div"),r.YNc(1,at,5,3,"div",37),r.qZA()),2&e){const e=r.oxw().index,t=r.oxw().$implicit;r.xp6(1),r.Q6J("ngIf",e+1<t.assignedExerciseDayItemSets.length)}}function ct(e,t){if(1&e&&(r.TgZ(0,"li",16),r.TgZ(1,"span",17),r.TgZ(2,"span",18),r._uU(3),r.qZA(),r.TgZ(4,"span",19),r._uU(5),r.qZA(),r.qZA(),r.YNc(6,$e,6,3,"div",20),r.YNc(7,nt,3,3,"div",20),r.YNc(8,ot,2,1,"div",21),r.qZA()),2&e){const e=t.$implicit,i=r.oxw(3);r.xp6(3),r.Oqu(e.name),r.xp6(2),r.Oqu(e.nameEn),r.xp6(1),r.Q6J("ngIf",!i.isSummary),r.xp6(1),r.Q6J("ngIf",!i.isSummary&&!1),r.xp6(1),r.Q6J("ngIf",!i.isSummary)}}function dt(e,t){if(1&e&&(r.TgZ(0,"ul",14),r.YNc(1,ct,9,5,"li",15),r.qZA()),2&e){const e=t.$implicit,i=r.oxw(2);r.xp6(1),r.Q6J("ngForOf",e.assignedExerciseDayItemSets)("ngForTrackBy",i.trackByExerciseDayItemSetModel)}}function lt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div"),r.TgZ(1,"div",3),r.TgZ(2,"input",4),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw().name=t}),r.qZA(),r.TgZ(3,"div",5),r.YNc(4,Oe,2,0,"button",6),r.qZA(),r.qZA(),r.YNc(5,Je,2,1,"div",7),r.YNc(6,Ye,3,3,"div",8),r.YNc(7,dt,2,2,"ul",9),r.qZA()}if(2&e){const e=r.oxw();r.Gre("exercise-program iitem-",e.assignedExerciseDayModel.id,""),r.xp6(2),r.Q6J("ngModel",e.name),r.xp6(2),r.Q6J("ngIf",e.assignedExerciseDayModel.name!=e.name),r.xp6(1),r.Q6J("ngIf",e.assignedExerciseDayModel.exerciseProgramName),r.xp6(1),r.Q6J("ngIf",e.assignedExerciseDayModel.exerciseProgramId&&e.assignedExerciseDayModel.lastModificationTime),r.xp6(1),r.Q6J("ngForOf",e.assignedExerciseDayModel.assignedExerciseDayItems)("ngForTrackBy",e.trackByExerciseDayItemModel)}}let gt=(()=>{class e{constructor(e,t,i,s,r,n,a,o,c,d){this.list=e,this.track=t,this.service=i,this.service2=s,this.confirmation=r,this.assignedExerciseDayService=n,this.dateService=a,this.langService=o,this.fb=c,this.loclization=d,this.trackByExerciseDayItemModel=(e,t)=>null==t?void 0:t.id,this.trackByExerciseDayItemSetModel=(e,t)=>null==t?void 0:t.id,this.trackByExerciseDayItemGroupContainerModel=(e,t)=>null==t?void 0:t.dropSetId,this.trackByExerciseDayItemGroupModel=(e,t)=>null==t?void 0:t.id,this.isSummary=!0}get assignedExerciseDayModel(){return this._assignedExerciseDayModel}set assignedExerciseDayModel(e){this._assignedExerciseDayModel=e,this.name=e.name}ngOnInit(){}get name(){return this._name}set name(e){this._name=e}save(){let e=this,t=this.assignedExerciseDayModel.convertToDto();t.name=this.name,this.service.update(this.assignedExerciseDayModel.id,t).subscribe(t=>{this.assignedExerciseDayModel.name=t.name,this.assignedExerciseDayModel.name=t.name,this.assignedExerciseDayModel.id=t.id;let i=new o.h(t.id,t.name,this.day,this.assignedExerciseDayModel);e.day.clearItems(),e.day.addItem(i)})}showAdjust_repeatCount(e){this.selected=e,this.editOption="repeatCount",this.adjust.show(this.selected.repeatCount,this.loclization.instant("::RepeatCount"))}showAdjust_exerciseSeconds(e){this.selected=e,this.editOption="exerciseSeconds",this.adjust.show(this.selected.exerciseSeconds,this.loclization.instant("::ExerciseSeconds"))}showAdjust_weight(e){this.selected=e,this.editOption="weight",this.adjust.show(this.selected.weight,this.loclization.instant("::Weight"))}showAdjust_restSeconds(e){this.selected=e,this.editOption="restSeconds",this.adjust.show(this.selected.restSeconds,this.loclization.instant("::RestSeconds"))}onPastConfirm(e){const t=this,i=e;"repeatCount"==this.editOption?this.selected.repeatCount=i:"weight"==this.editOption&&(this.selected.weight=i),"restSeconds"==this.editOption&&(this.selected.restSeconds=i),"exerciseSeconds"==this.editOption&&(this.selected.exerciseSeconds=i),setTimeout(()=>{t.assignedExerciseDayService.save(t.assignedExerciseDayModel,t.day,()=>{})},500)}suggest(){const e={};e.exerciseProgramId=this.assignedExerciseDayModel.assignedExerciseProgramId;let t=this.assignedExerciseDayModel.calendarDate;console.log(t),console.log(typeof t),e.startDate=this.dateService.parseMomentToString(t),e.isOverride=!1,e.traineeId=this.traineeUserId,this.service2.suggestByAssignInput(e).subscribe(e=>{})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.XNV),r.Y36(s.vR3),r.Y36(p.LM),r.Y36(p.RT),r.Y36(u.YP),r.Y36(I),r.Y36(n.R),r.Y36(h.C),r.Y36(f.qu),r.Y36(s.oQ8))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-assigned-exercise-program-day"]],viewQuery:function(e,t){if(1&e&&r.Gf(Le,5),2&e){let e;r.iGM(e=r.CRH())&&(t.adjust=e.first)}},inputs:{day:"day",traineeUserId:"traineeUserId",assignedExerciseDayModel:"assignedExerciseDayModel",isSummary:"isSummary"},features:[r._Bn([s.XNV,n.R])],decls:5,vars:8,consts:[[3,"class",4,"ngIf"],[3,"step","modalTitle","modalLabel","onConfirm"],["adjust",""],[1,"input-group"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],["class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["class","badge badge-light text-wraped",4,"ngIf"],["class","badge badge-primary",4,"ngIf"],["class","list-exercises",4,"ngFor","ngForOf","ngForTrackBy"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"fa","fa-check"],[1,"badge","badge-light","text-wraped"],[1,"badge","badge-primary"],[1,"list-exercises"],["class","",4,"ngFor","ngForOf","ngForTrackBy"],[1,""],[1,"d-inline","set-item"],[1,"view-rtl"],[1,"view-ltr"],["class","list-itemSets text-muted text-sm",4,"ngIf"],[4,"ngIf"],[1,"list-itemSets","text-muted","text-sm"],[1,"badge","badge-pill","badge-info-old"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[3,"ngClass"],["class","badge badge-pill badge-primary",4,"ngIf"],[1,"badge","badge-pill","badge-primary"],[1,"table",2,"margin-bottom","0px"],[1,"list-subSets",3,"ngClass"],["class","badge badge-pill badge-primary",3,"click",4,"ngIf"],["class","badge badge-pill badge-info",3,"click",4,"ngIf"],["class","badge badge-pill badge-secondary",3,"click",4,"ngIf"],[1,"badge","badge-pill","badge-primary",3,"click"],[1,"badge","badge-pill","badge-info",3,"click"],[1,"badge","badge-pill","badge-secondary",3,"click"],["class","text-center m-1",4,"ngIf"],[1,"text-center","m-1"],[1,"badge","badge-info"],[1,"fa","fa-link"]],template:function(e,t){1&e&&(r.YNc(0,lt,8,9,"div",0),r.TgZ(1,"past-adjust",1,2),r.NdJ("onConfirm",function(e){return t.onPastConfirm(e)}),r.ALo(3,"abpLocalization"),r.ALo(4,"abpLocalization"),r.qZA()),2&e&&(r.Q6J("ngIf",t.assignedExerciseDayModel),r.xp6(1),r.s9C("modalTitle",r.lcZ(3,4,"::AdjustValues")),r.s9C("modalLabel",r.lcZ(4,6,"::Adjust")),r.Q6J("step",1))},directives:[y.O5,Ee.m,f.Fj,f.JJ,f.On,E.m,y.sg,y.mk],pipes:[s.fuE],styles:['.text-sm[_ngcontent-%COMP%]{font-size:smaller}  .exercise-program ul{list-style-position:inside;padding-left:10px}@media (max-width:1199px){  .exercise-program ul{padding-left:5px}} .rtl .exercise-program ul{padding-right:10px;padding-left:0}@media (max-width:1199px){ .rtl .exercise-program ul{padding-right:5px;padding-left:0}}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#eee}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:before{display:inline-block;content:"-";vertical-align:middle}@media (max-width:991px){.list-details[_ngcontent-%COMP%]{display:flex}.list-details[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0 10px}}.list-subSets[_ngcontent-%COMP%]:not(.is-dropset){list-style:none;padding-right:0!important;padding-left:0!important}.list-subSets.is-dropset[_ngcontent-%COMP%]{padding:0}.list-subSets.is-dropset[_ngcontent-%COMP%]   li.border-left[_ngcontent-%COMP%]{border-width:3px!important}.list-subSets[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%]{min-width:18px;padding-bottom:0}.list-subSets[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%], .list-subSets[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;margin:0 2px}@media (min-width:992px){.list-subSets[_ngcontent-%COMP%]   .details-title[_ngcontent-%COMP%]{width:50px}}.set-item[_ngcontent-%COMP%]{font-size:11px}ul.list-exercises[_ngcontent-%COMP%]{margin-bottom:2px;margin-right:4px;list-style:disc}.input-group[_ngcontent-%COMP%]{width:92%!important;margin-right:auto;margin-left:auto}.input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:4%}']}),e})();const pt=["modal"],ut=["adjust"],mt=["multiplay"],ht=["board"];function xt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",19),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(2);return r.MAs(8).create(t.traineeUserId,null)}),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()}2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::AssignExerciseProgram")," "))}function ft(e,t){if(1&e&&(r.TgZ(0,"div",12),r._UZ(1,"div",13),r.TgZ(2,"div",14),r.TgZ(3,"div",15),r.TgZ(4,"div",13),r._UZ(5,"i",16),r.TgZ(6,"h5"),r._uU(7),r.ALo(8,"abpLocalization"),r.qZA(),r.TgZ(9,"p",17),r._uU(10),r.ALo(11,"abpLocalization"),r.qZA(),r.YNc(12,xt,3,3,"button",18),r.qZA(),r.qZA(),r.qZA(),r._UZ(13,"div",13),r.qZA()),2&e){const e=r.oxw();r.xp6(7),r.hij(" ",r.lcZ(8,3,"::NotAssignedTip")," "),r.xp6(3),r.hij(" ",r.lcZ(11,5,"::NotAssignedTip2")," "),r.xp6(2),r.Q6J("ngIf",!e.isCurrentUserAdmin)}}function yt(e,t){1&e&&(r.TgZ(0,"div",12),r._UZ(1,"div",13),r.TgZ(2,"div",14),r.TgZ(3,"div",15),r.TgZ(4,"div",13),r._UZ(5,"i",16),r.TgZ(6,"h5"),r._uU(7),r.ALo(8,"abpLocalization"),r.qZA(),r.TgZ(9,"p",17),r._uU(10),r.ALo(11,"abpLocalization"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r._UZ(12,"div",13),r.qZA()),2&e&&(r.xp6(7),r.hij(" ",r.lcZ(8,2,"::AssingingTip")," "),r.xp6(3),r.hij(" ",r.lcZ(11,4,"::AssingingTip2")," "))}function vt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",26),r.NdJ("click",function(){r.CHM(e),r.oxw();const t=r.MAs(1),i=r.oxw();return r.MAs(18).create(t.selectedItems,i.selected)}),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()}2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,1,"::MoveToLibrary")))}function bt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",27),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).editSelectedItems(!0)}),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA(),r.TgZ(3,"button",27),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).editSelectedItems(!1)}),r._uU(4),r.ALo(5,"abpLocalization"),r.qZA()}2&e&&(r.xp6(1),r.Oqu(r.lcZ(2,2,"::AddExerciseBefore")),r.xp6(3),r.Oqu(r.lcZ(5,4,"::AddExerciseAfter")))}function It(e,t){if(1&e&&r._UZ(0,"app-assigned-exercise-program-day",28),2&e){const e=t.extraData,i=t.day,s=r.oxw(2);r.Q6J("assignedExerciseDayModel",e)("isSummary",s.isSummary)("day",i)("traineeUserId",s.traineeUserId)}}function Zt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"button",37),r.NdJ("click",function(){r.CHM(e);const t=r.oxw(3);return r.MAs(8).create(t.traineeUserId,null)}),r._uU(1),r.ALo(2,"abpLocalization"),r.qZA()}2&e&&(r.xp6(1),r.hij(" ",r.lcZ(2,1,"::AssignExerciseProgram")," "))}function Dt(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"div",29),r.TgZ(1,"div",30),r.TgZ(2,"input",31),r.NdJ("ngModelChange",function(t){return r.CHM(e),r.oxw(2).isSummary=t}),r.qZA(),r.TgZ(3,"label",32),r._uU(4),r.ALo(5,"abpLocalization"),r.qZA(),r.qZA(),r.TgZ(6,"div",33),r.YNc(7,Zt,3,3,"button",34),r.TgZ(8,"button",35),r.NdJ("click",function(){return r.CHM(e),r.oxw(2).refreshCache()}),r._UZ(9,"i",36),r.qZA(),r.qZA(),r.qZA()}if(2&e){const e=r.oxw(2);r.xp6(2),r.Q6J("ngModel",e.isSummary),r.xp6(2),r.Oqu(r.lcZ(5,3,"::SummaryView")),r.xp6(3),r.Q6J("ngIf",!e.isCurrentUserAdmin)}}function St(e,t){if(1&e){const e=r.EpF();r.TgZ(0,"app-board-container",20,21),r.NdJ("weekCreated",function(t){return r.CHM(e),r.oxw().weekCreated(t)})("weekDeleted",function(t){return r.CHM(e),r.oxw().weekDeleted(t)})("itemDeletedBulk",function(t){return r.CHM(e),r.oxw().itemDeletedBulk(t)})("itemDeleted",function(t){return r.CHM(e),r.oxw().itemDeleted(t)})("itemCreated",function(t){return r.CHM(e),r.oxw().itemCreated(t)})("itemCopiedMoved",function(t){return r.CHM(e),r.oxw().itemCopiedMoved(t)})("itemEdited",function(t){return r.CHM(e),r.oxw().itemEdited(t)}),r.YNc(2,vt,3,3,"ng-template",null,22,r.W1O),r.YNc(4,bt,6,6,"ng-template",null,23,r.W1O),r.YNc(6,It,1,4,"ng-template",null,24,r.W1O),r.YNc(8,Dt,10,5,"ng-template",null,25,r.W1O),r.qZA()}if(2&e){const e=r.oxw();r.Q6J("isDayFullHight",!e.isSummary)}}let Et=(()=>{class e{constructor(e,t,i,s,n,a,o,c,d,l,g,p,u,m,h){this.list=e,this.track=t,this.programService=i,this.dayService=s,this.assignExerciseProgramService=n,this.confirmation=a,this.dateService=o,this.route=c,this.langService=d,this.router=l,this.toaster=g,this.localCacheService=p,this.permissionService=u,this.analyticsService=m,this.fb=h,this.refresh=new r.vpe,this.isModalBusy=!1,this.isModalOpen=!1,this.isReadOnly=!1,this.isLoading=!0,this.isAssigned=!0,this.isSummary=!0,this.randomId=0,this.isShowPastModal=!1,this.ttl=900,this.isForceRefresh=!1}ngOnInit(){let e=this;this.analyticsService.log(g.O.View_Program_assigned_exercise),this.loadProgram(),this.sub=this.assignExerciseProgramService.onAssigned.subscribe(t=>{e.onAssigned(t)})}onAssigned(e){setTimeout(()=>{this.sub&&this.sub.unsubscribe(),this.refresh.emit()},100)}loadProgram(){let e=this.route.snapshot.params.id;e||(e=this.traineeUserId),this.loadProgramByUserId(e)}loadProgramByUserId(e){const t=this;let i={};i.traineeId=e,this.programService.getCurrent(i).pipe((0,l.z)(t.localCacheService,`AssignedExerciseProg${e}`,1)).subscribe(i=>{if(t.scheduledExerciseProgramId=i.scheduledExerciseProgramId,t.scheduledExerciseProgramId)return t.isLoading=!1,void setTimeout(()=>{t.loadProgramByUserId(e)},5e3);i.assignedExerciseProgramId?(this.selected=i.assignedExerciseProgramId,t.loadSimpleDays(()=>t.initialProgram())):this.isAssigned=!1})}loadSimpleDays(e){const t=this;let i={};i.assignedExerciseProgramId=this.selected,i.maxResultCount=1e3,t.dayService.getListSimple(t.selected).subscribe(i=>{t.selectedDaysSimple=i,this.selectedDays={items:[],totalCount:0},e()})}initialProgram(){let e=a.w.TwoWeeks;this.isLoading=!1;const t=this;setTimeout(()=>{t.board.setup(2,e,!1,new Date,"assigned-ex",t.traineeUserId.toString())},10)}dataChanged(e){setTimeout(()=>{this.sub&&this.sub.unsubscribe(),this.refresh.emit()},1e3)}dayDataChanged(e){}bulkEditSaved(e){this.board.clearSelection()}weekCreated(e){const t=this;e.days.forEach((e,i)=>{var s,r,n;e.InitiateItems();let a=((null===(s=t.selectedDays)||void 0===s?void 0:s.items)||[]).filter(t=>this.dateService.isSameDate(new Date(t.assignedExerciseProgramDay.calendarDate),e.startDate));if(a.length>0){const t=a[0].assignedExerciseProgramDay,i=new o.h(t.id,t.name,e,new c.x(t.exerciseProgramName,t));e.addItem(i)}else{let i=((null===(r=t.selectedDaysSimple)||void 0===r?void 0:r.items)||[]).filter(t=>this.dateService.isSameDate(new Date(t.calendarDate),e.startDate));if(i.length>0){const s=t.getSelectedDay(i[0]);if(s){const i=s.assignedExerciseProgramDay;t.selectedDays.items=(null===(n=t.selectedDays)||void 0===n?void 0:n.items)||[],e.addItem(new o.h(i.id,i.name,e,new c.x(i.exerciseProgramName,i)))}else t.dayService.getWithDetailsAsync(this.selected,i[0].calendarDate).subscribe(i=>{var s;t.selectedDays.items=(null===(s=t.selectedDays)||void 0===s?void 0:s.items)||[];const r={};r.assignedExerciseProgramDay=i,t.setSelectedDay(r),e.addItem(new o.h(i.id,i.name,e,new c.x(i.exerciseProgramName,i)))})}}})}weekDeleted(e){}itemDeleted(e){}itemDeletedBulk(e){let t={};t.ids=e.map(e=>e.itemId),this.dayService.deleteBulk(t).subscribe()}itemEdited(e){this.modal.update(e.day,e.extraData)}itemCreated(e){this.modal.create(e,this.selected)}editSelectedItems(e){this.modal.updateBulk(this.board.selectedItems,this.selected,e)}itemCopiedMoved(e){let t=[];e.data.forEach(e=>{let i;i={},i.newDayDate=this.dateService.removeUtcDate(e.day.startDate).toISOString(),i.oldDayId=e.item.itemId,i.oldDayDate=this.dateService.removeUtcDate(e.item.day.startDate).toISOString(),console.log("itemCopiedMoved",e.item.extraData.assignedExerciseProgramId),i.OldProgramId=e.item.extraData.assignedExerciseProgramId,t.push(i)});let i={};i.copy=e.isCopy,i.programId=this.selected,i.moveData=t,this.pastData=e.data,this.pastDataInput=i,this.isShowPastModal=!0,i.copy?this.adjust.show():(this.pastDataInput.adjustValues=0,this.pastConfimed())}onAdjustConfirm(e){this.pastDataInput.adjustValues=e,this.pastDataInput.copy&&1===this.pastDataInput.moveData.length?this.multiplay.show(1):this.pastConfimed()}onMultiplyConfirm(e){let t=e-1;t=t<0?0:t,this.pastDataInput.multiplyFactor=t,this.pastConfimed()}getDayKey(e){const t=`assinged_ex_${e.assignedExerciseProgramId}_${e.calendarDate}`.replace("T00:00:00Z","").replace("T00:00:00","");return console.log("key",t),t}setSelectedDay(e){this.selectedDays.items.push(e);try{const t=this.getDayKey(e.assignedExerciseProgramDay),i=JSON.stringify({on:Date(),data:e});this.localCacheService.put(t,i,this.ttl)}catch(t){this.clearStorage()}}clearStorage(){for(var e in console.log("clearing storage"),this.localCacheService.clearAll(),localStorage)e.startsWith("assinged_")&&localStorage.removeItem(e)}getSelectedDay(e){var t,i;const s=this.getDayKey(e),r=this.localCacheService.get(s);if(!r||0===r.length)return null;const n=JSON.parse(r);return(null===(i=null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.assignedExerciseProgramDay)||void 0===i?void 0:i.calendarDate)&&n.on?(n.data.assignedExerciseProgramDay.calendarDate=new Date(n.data.assignedExerciseProgramDay.calendarDate),this.isForceRefresh?(setTimeout(()=>{this.isForceRefresh=!1},2e3),null):n.data):null}refreshCache(){const e=this;e.clearStorage(),e.selectedDays.items=[],e.selectedDaysSimple.items=[],e.loadSimpleDays(()=>{e.isForceRefresh=!0,e.board.calendarService.boardDto.weeks.forEach((t,i)=>{t.isVisible&&e.weekCreated(t)})})}pastConfimed(){const e=this;e.programService.moveItemByInput(e.pastDataInput).subscribe(t=>{e.pastData.forEach(t=>{e.selectedDays.items=e.selectedDays.items.filter(e=>e.assignedExerciseProgramDay.id!=t.item.itemId),e.board.deattachItem(t.item)}),t.items.forEach(t=>{e.setSelectedDay(t);let i=new o.h(t.assignedExerciseProgramDay.id,t.assignedExerciseProgramDay.name,void 0,new c.x(t.assignedExerciseProgramDay.exerciseProgramName,t.assignedExerciseProgramDay));e.board.attachItemOnDate(i,new Date(t.assignedExerciseProgramDay.calendarDate))}),e.toaster.success("::Pasted","::ItemsPasteSuccessfully"),e.analyticsService.log(g.O.do_past_Program_assigned_exercise)})}assign(){alert(this.board.selectedItems.length)}get isCurrentUserAdmin(){return this.permissionService.getGrantedPolicy("PhysicAdmin")}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(s.XNV),r.Y36(s.vR3),r.Y36(p.RT),r.Y36(p.LM),r.Y36(d.I),r.Y36(u.YP),r.Y36(n.R),r.Y36(m.gz),r.Y36(h.C),r.Y36(m.F0),r.Y36(u.MJ),r.Y36(x.F),r.Y36(s.$AH),r.Y36(g.y),r.Y36(f.qu))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-assigned-exercise-program-manage"]],viewQuery:function(e,t){if(1&e&&(r.Gf(pt,5),r.Gf(ut,5),r.Gf(mt,5),r.Gf(ht,5)),2&e){let e;r.iGM(e=r.CRH())&&(t.modal=e.first),r.iGM(e=r.CRH())&&(t.adjust=e.first),r.iGM(e=r.CRH())&&(t.multiplay=e.first),r.iGM(e=r.CRH())&&(t.board=e.first)}},inputs:{traineeUserId:"traineeUserId"},outputs:{refresh:"refresh"},features:[r._Bn([s.XNV,n.R,d.I])],decls:19,vars:17,consts:[[1,"assigned-exercise-program-manage"],["class","d-flex bg-white rounded border",4,"ngIf"],[3,"hidden"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited",4,"ngIf"],[3,"dataChanged","bulkEdit"],["modal",""],["assign",""],[3,"modalTitle","modalLabel","onConfirm"],["adjust",""],[3,"step","modalTitle","modalLabel","onConfirm"],["multiplay",""],["moveToLib",""],[1,"d-flex","bg-white","rounded","border"],[1,"col"],[1,"col-xl-4","col-lg-6"],[1,"py-5","fade-in-top","text-center"],[1,"fa","fa-exclamation-triangle","fa-3x","text-primary","mb-4"],[1,"text-muted"],["class","btn btn-success",3,"click",4,"ngIf"],[1,"btn","btn-success",3,"click"],[3,"isDayFullHight","weekCreated","weekDeleted","itemDeletedBulk","itemDeleted","itemCreated","itemCopiedMoved","itemEdited"],["board",""],["selectionPanelContent",""],["selectionEditContent",""],["itemContent",""],["navContent",""],[1,"btn","btn-sm","btn-success",3,"click"],[1,"btn","btn-sm","btn-secondary",3,"click"],[3,"assignedExerciseDayModel","isSummary","day","traineeUserId"],[1,"d-flex","justify-content-sm-end"],[1,"custom-control","custom-switch",2,"margin-left","12px"],["type","checkbox","id","isSummary1",1,"custom-control-input",3,"ngModel","ngModelChange"],["for","isSummary1",1,"custom-control-label"],[1,"btn-group"],["class","btn btn-outline-success btn-sm",3,"click",4,"ngIf"],[1,"btn","btn-success","btn-sm",3,"click"],[1,"fa","fa-refresh"],[1,"btn","btn-outline-success","btn-sm",3,"click"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r.YNc(1,ft,14,7,"div",1),r.YNc(2,yt,13,6,"div",1),r.TgZ(3,"div",2),r.YNc(4,St,10,1,"app-board-container",3),r.TgZ(5,"app-assigned-exercise-program-modal-day",4,5),r.NdJ("dataChanged",function(e){return t.dayDataChanged(e)})("bulkEdit",function(e){return t.bulkEditSaved(e)}),r.qZA(),r._UZ(7,"app-assign-exercise-program-to-user",null,6),r.TgZ(9,"past-adjust",7,8),r.NdJ("onConfirm",function(e){return t.onAdjustConfirm(e)}),r.ALo(11,"abpLocalization"),r.ALo(12,"abpLocalization"),r.qZA(),r.TgZ(13,"past-adjust",9,10),r.NdJ("onConfirm",function(e){return t.onMultiplyConfirm(e)}),r.ALo(15,"abpLocalization"),r.ALo(16,"abpLocalization"),r.qZA(),r.qZA(),r.qZA(),r._UZ(17,"app-move-to-lib-exercise-program",null,11)),2&e&&(r.xp6(1),r.Q6J("ngIf",t.isLoading&&!t.isAssigned),r.xp6(1),r.Q6J("ngIf",!t.isLoading&&t.scheduledExerciseProgramId),r.xp6(1),r.Q6J("hidden",t.scheduledExerciseProgramId),r.xp6(1),r.Q6J("ngIf",!t.isLoading&&t.isAssigned),r.xp6(5),r.s9C("modalTitle",r.lcZ(11,9,"::AdjustValues")),r.s9C("modalLabel",r.lcZ(12,11,"::Adjust")),r.xp6(4),r.s9C("modalTitle",r.lcZ(15,13,"::MultiplyValues")),r.s9C("modalLabel",r.lcZ(16,15,"::Multiply")),r.Q6J("step",1))},directives:[y.O5,De,Se.K,Ee.m,_e,Ue.U,gt,f.Wl,f.JJ,f.On,E.m],pipes:[s.fuE],styles:[""]}),e})()},17013:function(e,t,i){"use strict";i.r(t),i.d(t,{AssignedExerciseProgramModule:function(){return D}});var s=i(46700),r=i(55679),n=i(10135),a=i(99046),o=i(83845),c=i(73756),d=i(56410),l=i(21876),g=i(35366);const p=[{path:"assigned/:id",component:l.d,canActivate:[s.a1M,s.nG9]}];let u=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[d.Bz.forChild(p)],d.Bz]}),e})();var m=i(56137),h=i(99416),x=i(56874),f=i(8266),y=i(69244);let v=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[s.IR2,y._t,r.e2,c.Ck,o.vv,a.h2,n.lQ,n.M,f.ExerciseModule,m.m,n.XC]]}),e})();var b=i(75795),I=i(17288);let Z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({providers:[],imports:[[x.e,h.vO,s.IR2,r.e2,c.Ck,o.vv,a.h2,n.lQ,n.M,m.m,I.JH,n.XC,b.c]]}),e})(),D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[u,x.e,h.vO,s.IR2,r.e2,c.Ck,o.vv,a.h2,n.lQ,n.M,m.m,n.XC,v,Z]]}),e})()},1094:function(e,t,i){"use strict";i.d(t,{H:function(){return d},m:function(){return l}});var s=i(35366),r=i(89443),n=i(30212),a=i(40594);class o{constructor(e,t){this.group=e,this.parent=t,this.onDeleted=new s.vpe,this.isEditing=!0,this.isDeleted=!1,this.id=e.id,this.dropSetId=e.dropSetId,this.restSeconds=e.restSeconds,this.exerciseSeconds=e.exerciseSeconds,this.repeatCount=e.repeatCount,this.weight=e.weight,this.actualExerciseSeconds=e.actualExerciseSeconds,this.actualRepeatCount=e.actualRepeatCount,this.actualWeight=e.actualWeight,this.tempGuid=a.i.generate()}get exerciseSeconds(){return this._exerciseSeconds}set exerciseSeconds(e){if(this._exerciseSeconds!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.exerciseSeconds||0)>0){let s=(e||0)+((e||0)-(i.exerciseSeconds||0));s<0&&(s=0),setTimeout(()=>{t.exerciseSeconds=s},10)}else setTimeout(()=>{t.exerciseSeconds=e<0?0:e},10)}}this._exerciseSeconds=e}get repeatCount(){return this._repeatCount}set repeatCount(e){if(this._repeatCount!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.repeatCount||0)>0){let s=(e||0)+((e||0)-(i.repeatCount||0));s<0&&(s=0),setTimeout(()=>{t.repeatCount=s},10)}else setTimeout(()=>{t.repeatCount=e<0?0:e},10)}}this._repeatCount=e}get restSeconds(){return this._restSeconds}set restSeconds(e){if(this._restSeconds!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.restSeconds||0)>0){let s=(e||0)+((e||0)-(i.restSeconds||0));s<0&&(s=0),setTimeout(()=>{t.restSeconds=s},10)}else setTimeout(()=>{t.restSeconds=e<0?0:e},10)}}this._restSeconds=e}get weight(){return this._weight}set weight(e){if(this._weight!=e&&this.parent){var t=this.parent.getNextItem(this);if(t&&this.dropSetId==t.dropSetId){var i=this.parent.getPreItem(this);if(i&&(i.weight||0)>0){let s=(e||0)+((e||0)-(i.weight||0));s<0&&(s=0),setTimeout(()=>{t.weight=s},10)}else setTimeout(()=>{t.weight=e<0?0:e},10)}}this._weight=e}get isDropSet(){return!!(this.dropSetId&&this.dropSetId.length>0)}undoDropSet(){const e=this,t=this.parent;e.dropSetId=void 0,this.parent.assignedGroups=this.parent.assignedGroupsUnDeleted.filter(t=>t!=e),this.parent.parent.appendGroup(e.convertToDto()),0==t.assignedGroupsUnDeleted.length&&t.delete()}edit(){this.isEditing=!0,this.backup={weight:this.weight,exerciseSeconds:this.exerciseSeconds,repeatCount:this.repeatCount,restSeconds:this.restSeconds,actualExerciseSeconds:this.actualExerciseSeconds,actualRepeatCount:this.actualRepeatCount,actualWeight:this.actualWeight}}cancel(){this.isEditing=!1,this.exerciseSeconds=this.backup.exerciseSeconds,this.repeatCount=this.backup.repeatCount,this.restSeconds=this.backup.restSeconds,this.weight=this.backup.weight}exerciseSecondsIsInvalid(){return null!=this.exerciseSeconds&&void 0!==this.exerciseSeconds&&(this.exerciseSeconds<0||this.exerciseSeconds>1e3)||!!n.d.InIntegerCheckerInvalid(this.exerciseSeconds)}restSecondsIsInvalid(){return null!=this.restSeconds&&void 0!==this.restSeconds&&(this.restSeconds<0||this.restSeconds>1e3)||!!n.d.InIntegerCheckerInvalid(this.restSeconds)}repeatCountIsInvalid(){return null!=this.repeatCount&&void 0!==this.repeatCount&&(this.repeatCount<0||this.repeatCount>1e3)||!!n.d.InIntegerCheckerInvalid(this.repeatCount)}weightIsInvalid(){return null!=this.weight&&void 0!==this.weight&&(this.weight<0||this.weight>1e3)}hasError(){return this.exerciseSecondsIsInvalid()||this.weightIsInvalid()||this.repeatCountIsInvalid()||this.restSecondsIsInvalid()}save(){this.hasError()||(this.isEditing=!1)}delete(){this.isDeleted=!0,this.onDeleted.emit()}convertToDto(){let e={};return e.id=this.id,e.dropSetId=this.dropSetId||void 0,e.exerciseSeconds=this.exerciseSeconds||void 0,e.repeatCount=this.repeatCount||void 0,e.restSeconds=this.restSeconds||void 0,e.weight=this.weight||void 0,e}}class c{constructor(e,t){this.dropSetId=e,this.parent=t,this.onDeleted=new s.vpe,this.assignedGroups=[],this.isDeleted=!1}get assignedGroupsUnDeleted(){return this.assignedGroups.filter(e=>!e.isDeleted)}add(e){const t=this;let i=new o(e,this);return i.onDeleted.subscribe(e=>{0===t.assignedGroupsUnDeleted.length&&this.delete()}),this.assignedGroups.push(i),i}getPreItem(e){let t,i;return this.isDropSet?(this.assignedGroupsUnDeleted.forEach(s=>{s===e&&(t=i),i=s}),t):(this.parent.assignedGroupsContainersUnDeleted.forEach(e=>{e===this&&(t=i),i=e.assignedGroupsUnDeleted[0]}),t)}getNextItem(e){let t,i=!1;return this.isDropSet?(this.assignedGroupsUnDeleted.forEach(s=>{i&&!t&&(t=s),i=s===e}),t):(this.parent.assignedGroupsContainersUnDeleted.forEach(e=>{i&&!t&&(t=e.assignedGroupsUnDeleted[0]),i=e===this}),t)}get isDropSet(){return!!(this.dropSetId&&this.dropSetId.length>0)}delete(){this.isDeleted=!0,this.onDeleted.emit()}isValid(){let e=!0;return this.assignedGroupsUnDeleted.forEach(t=>{e&&(e=!t.hasError())}),e}addNewDetail(){let e={};e.dropSetId=this.dropSetId;let t=this.add(e);return t.edit(),t}convertToDropSet(){this.dropSetId=a.i.generate(),this.assignedGroups.forEach(e=>{e.restSeconds=0,e.dropSetId=this.dropSetId})}isEditing(){let e=!1;return this.assignedGroupsUnDeleted.forEach(t=>{e=e||t.isEditing}),e}}class d{constructor(e){this.onDeleted=new s.vpe,this.isCollapsed=!0,this.isExpaneded=!0,this.assignedGroupsContainers=[],this.isDeleted=!1,this.id=e.id,this.exerciseId=e.exerciseId,this.exerciseNote=e.exerciseNote,e.exercise?this.exerciseType=e.exercise.exerciseTypeGeneralLookupId:(console.log("unknown type"),this.exerciseType=r.$.Count),this.exercise=e.exercise,this.name=e.name,this.nameEn=e.nameEn,this.progressStatus=e.actualDataChange?l.Changed:100==e.completePercent?l.Completed:l.Missing,e.assignedExerciseProgramDayItemGroups&&e.assignedExerciseProgramDayItemGroups.length>0?e.assignedExerciseProgramDayItemGroups.forEach(e=>{this.appendGroup(e)}):this.addFakeData()}get assignedGroupsContainersUnDeleted(){return this.assignedGroupsContainers.filter(e=>!e.isDeleted)}addFakeData(){}appendGroup(e){let t=new o(e,null),i=this.assignedGroupsContainers.filter(e=>e.dropSetId==t.dropSetId);if(t.isDropSet&&i.length>0){const t=i[0],s=t.add(e);return this.listenToDelete(t),s}{let i=new c(t.dropSetId,this),s=i.add(e);return this.assignedGroupsContainers.push(i),this.listenToDelete(i),s}}listenToDelete(e){e.onDeleted.subscribe(e=>{0===this.assignedGroupsContainersUnDeleted.length&&this.delete()})}delete(){this.isDeleted=!0,this.onDeleted.emit()}isValid(){let e=!0;return this.assignedGroupsContainersUnDeleted.forEach(t=>{e&&(e=t.isValid())}),e}addNewDetail(){this.appendGroup({}).edit()}convertToDto(){let e={};return e.id=this.id,e.name=this.name,e.nameEn=this.nameEn,e.exerciseId=this.exerciseId,e.exerciseNote=this.exerciseNote,e.exercise=this.exercise,e.assignedExerciseProgramDayItemGroups=[],this.assignedGroupsContainersUnDeleted.forEach(t=>{t.assignedGroupsUnDeleted.forEach(t=>{e.assignedExerciseProgramDayItemGroups.push(t.convertToDto())})}),e}isEditing(){let e=!1;return this.assignedGroupsContainersUnDeleted.forEach(t=>{e=e||t.isEditing()}),e}}var l=function(e){return e[e.Missing=0]="Missing",e[e.Changed=1]="Changed",e[e.Completed=2]="Completed",e}({})},58450:function(e,t,i){"use strict";i.d(t,{x:function(){return a}});var s=i(35366),r=i(1094);class n{constructor(e){this.onDeleted=new s.vpe,this.assignedExerciseDayItemSets=[],this.isDeleted=!1,this.id=e.id,this.name=e.name,e.assignedExerciseProgramDayItemSets&&e.assignedExerciseProgramDayItemSets.length>0?e.assignedExerciseProgramDayItemSets.forEach(e=>{this.addSet(e)}):this.addFakeData()}get assignedExerciseDayItemSetsUnDeleted(){return this.assignedExerciseDayItemSets.filter(e=>!e.isDeleted)}addSet(e){let t=new r.H(e);t.onDeleted.subscribe(e=>{0===this.assignedExerciseDayItemSetsUnDeleted.length&&this.delete()}),this.assignedExerciseDayItemSets.push(t)}addFakeData(){}delete(){this.isDeleted=!0,this.onDeleted.emit()}convertToDto(){let e={};return e.id=this.id,e.name=this.name,e.assignedExerciseProgramDayItemSets=[],this.assignedExerciseDayItemSetsUnDeleted.forEach(t=>{e.assignedExerciseProgramDayItemSets.push(t.convertToDto())}),e}isSuperSetValid(){let e,t=this.assignedExerciseDayItemSetsUnDeleted.map(e=>e.assignedGroupsContainersUnDeleted.length),i=!0;return t.forEach(t=>{void 0!==e&&e!==t&&(i=!1),e=t}),i}isValid(){let e=!0;return this.assignedExerciseDayItemSetsUnDeleted.forEach(t=>{e&&(e=t.isValid())}),e}isEditing(){let e=!1;return this.assignedExerciseDayItemSetsUnDeleted.forEach(t=>{e=e||t.isEditing()}),e}}class a{constructor(e,t){this.exerciseProgramName=e,this.onEmpty=new s.vpe,this.assignedExerciseDayItems=[],console.log(t.calendarDate,e),t&&(this.id=t.id,this.dayNumber=t.dayNumber,this.calendarDate=t.calendarDate,this.completePercent=t.completePercent,this.name=t.name||" ",this.nameEn=t.nameEn||" ",this.lastModificationTime=t.lastModificationTime,this.assignedExerciseProgramId=t.assignedExerciseProgramId,this.exerciseProgramId=t.exerciseProgramId,t.assignedExerciseProgramDayItems&&t.assignedExerciseProgramDayItems.length>0?t.assignedExerciseProgramDayItems.forEach(e=>{this.add(e)}):this.addFakeData())}get assignedExerciseDayItemsUnDeleted(){return this.assignedExerciseDayItems.filter(e=>!e.isDeleted)}addFakeData(){}add(e,t,i){const s=this;if(i){e.assignedExerciseProgramDayItemSets=e.assignedExerciseProgramDayItemSets||[];let s={};s.exerciseId=i.id,s.exercise=i,s.name=i.exerciseName,s.nameEn=i.exerciseNameEn,s.assignedExerciseProgramDayItemGroups=[],t.forEach(e=>{let t={};t.restSeconds=e.restSeconds,t.exerciseSeconds=e.exerciseSeconds,t.repeatCount=e.repeatCount,t.weight=e.weight,s.assignedExerciseProgramDayItemGroups.push(t)}),t&&0!==t.length||s.assignedExerciseProgramDayItemGroups.push({}),e.assignedExerciseProgramDayItemSets.push(s)}let r=new n(e);return r.onDeleted.subscribe(e=>{0===s.assignedExerciseDayItemsUnDeleted.length&&s.onEmpty.emit()}),this.assignedExerciseDayItems.push(r),r}addNewDetail(e,t){this.add({},e,t)}UnMergeSuperSet(e,t){let i=new n({});e.assignedExerciseDayItemSetsUnDeleted.forEach((s,r)=>{r>t&&(e.assignedExerciseDayItemSets=e.assignedExerciseDayItemSets.filter(e=>e!=s),i.assignedExerciseDayItemSets.push(s))}),this.assignedExerciseDayItems.splice(this.assignedExerciseDayItems.indexOf(e)+1,0,i)}MergeSuperSet(e,t){t.assignedExerciseDayItemSetsUnDeleted.forEach(i=>{t.assignedExerciseDayItemSets=t.assignedExerciseDayItemSets.filter(e=>e!=i),e.assignedExerciseDayItemSets.push(i)}),t.delete()}convertToDto(){let e={};return e.id=this.id,e.dayNumber=this.dayNumber,e.calendarDate=this.calendarDate,e.exerciseProgramId=this.exerciseProgramId,e.exerciseProgramName=this.exerciseProgramName,e.completePercent=this.completePercent,e.assignedExerciseProgramId=this.assignedExerciseProgramId,e.name=this.name,e.nameEn=this.nameEn,e.lastModificationTime=this.lastModificationTime,e.assignedExerciseProgramDayItems=[],this.assignedExerciseDayItemsUnDeleted.forEach(t=>{e.assignedExerciseProgramDayItems.push(t.convertToDto())}),console.log(e,this),e}isAllSuperSetsValid(){let e=!0;return this.assignedExerciseDayItemsUnDeleted.forEach(t=>{e&&(e=t.isSuperSetValid())}),e}isValid(){let e=!0;return this.assignedExerciseDayItemsUnDeleted.forEach(t=>{e&&(e=t.isValid())}),e}isEditing(){let e=!1;return this.assignedExerciseDayItemsUnDeleted.forEach(t=>{e=e||t.isEditing()}),e}}},28157:function(e,t,i){"use strict";i.d(t,{s:function(){return n}});var s=i(35366),r=i(46700);let n=(()=>{class e{constructor(e){this.restService=e,this.apiName="Default",this.changeCoordinatorForTraineeByInput=e=>this.restService.request({method:"POST",url:"/api/app/trainees/change-trainee-coordinator",body:e},{apiName:this.apiName}),this.deleteAccount=()=>this.restService.request({method:"POST",url:"/api/app/trainees/DeleteAccount"},{apiName:this.apiName}),this.exportListPayments=e=>this.restService.request({method:"POST",url:"/api/app/trainees/export",body:e},{apiName:this.apiName}),this.get=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}`},{apiName:this.apiName}),this.getByUserId=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/get-by-user-id`},{apiName:this.apiName}),this.getCommitmentSummary=e=>this.restService.request({method:"POST",url:"/api/app/trainees/get-commitment-summary",body:e},{apiName:this.apiName}),this.getGeneralStatistics=()=>this.restService.request({method:"GET",url:"/api/app/trainees/general-statistics"},{apiName:this.apiName}),this.getLisGuid=e=>this.restService.request({method:"POST",url:"/api/app/trainees/GetLisGuidAsync",body:e},{apiName:this.apiName}),this.getListByStatus=e=>this.restService.request({method:"POST",url:"/api/app/trainees/trainee-without-progress",body:e},{apiName:this.apiName}),this.getListPayments=e=>this.restService.request({method:"POST",url:"/api/app/trainees/traineepayment",body:e},{apiName:this.apiName}),this.getNotesListByDate=(e,t,i,s)=>this.restService.request({method:"GET",url:"/api/app/trainees/Note-ByDay",params:{traineeId:e,day:t,maxResultCount:i,skipCount:s}},{apiName:this.apiName}),this.getSimpleList=e=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list",body:e},{apiName:this.apiName}),this.getSimpleList2=e=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list2",body:e},{apiName:this.apiName}),this.getSimpleListSummary=e=>this.restService.request({method:"POST",url:"/api/app/trainees/simple-list-summary",body:e},{apiName:this.apiName}),this.getTraineBodyMassChartById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/chart/bodymass`},{apiName:this.apiName}),this.getTraineeFatsChartById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/chart/fats`},{apiName:this.apiName}),this.getTraineeIntensityLevelForUserByInput=e=>this.restService.request({method:"GET",url:"/api/app/trainees/GetTraineeIntensityLevelForUser",params:{traineeId:e.traineeId}},{apiName:this.apiName}),this.getTraineeMesurmentsById=e=>this.restService.request({method:"GET",url:"/api/app/trainees/Mesurments",params:{id:e}},{apiName:this.apiName}),this.getTraineeMusclesChartById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/chart/muscles`},{apiName:this.apiName}),this.getGetTraineeProfileGeneralById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/general?id=${e}`},{apiName:this.apiName}),this.getGetTraineeProfileGeneral2ById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/general2?id=${e}`},{apiName:this.apiName}),this.getTraineeOverviewBasicInfoById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/overview?id=${e}`},{apiName:this.apiName}),this.getTraineeProfileSummaryById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/profile?id=${e}`},{apiName:this.apiName}),this.getTraineeStatisticsByTraineeIdAndInDate=(e,t)=>this.restService.request({method:"GET",url:"/api/app/trainees/get-trainee-statistics",params:{traineeId:e,inDate:t}},{apiName:this.apiName}),this.getTraineeWaightChartById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/chart/weight`},{apiName:this.apiName}),this.getRefreshTrainee=e=>this.restService.request({method:"GET",url:`/api/app/trainees/refresh/${e}`},{apiName:this.apiName}),this.getTraineeWaterChartById=e=>this.restService.request({method:"GET",url:`/api/app/trainees/${e}/chart/water`},{apiName:this.apiName}),this.getWithNavigationProperties=e=>this.restService.request({method:"GET",url:`/api/app/trainees/with-navigation-properties/${e}`},{apiName:this.apiName}),this.updateTraineeByTraineeIdAndWeightAndMusclesWeightAndFatPercentAndInDate=(e,t,i,s,r)=>this.restService.request({method:"POST",url:"/api/app/trainees/update-trainee",params:{traineeId:e,weight:t,musclesWeight:i,fatPercent:s,inDate:r}},{apiName:this.apiName}),this.updateTraineeOverviewByInput=e=>this.restService.request({method:"POST",url:"/api/app/trainees",body:e},{apiName:this.apiName}),this.changeCoachForTraineeByInput=e=>this.restService.request({method:"POST",url:"/api/app/trainees/AssignNewCoach",body:e},{apiName:this.apiName}),this.deleteNoteAttachmentById=(e,t)=>this.restService.request({method:"DELETE",url:"/api/app/trainees/DeleteNoteAttachment",params:{id:e,attachmentOrderId:t}},{apiName:this.apiName})}}return e.\u0275fac=function(t){return new(t||e)(s.LFG(r.vgb))},e.\u0275prov=s.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()}}]);